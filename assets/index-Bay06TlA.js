(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function _c(n){const e=Object.create(null);for(const t of n.split(","))e[t]=1;return t=>t in e}const xe={},Kr=[],sn=()=>{},p_=()=>!1,Jo=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),vc=n=>n.startsWith("onUpdate:"),dt=Object.assign,wc=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},m_=Object.prototype.hasOwnProperty,Ne=(n,e)=>m_.call(n,e),de=Array.isArray,Xr=n=>_s(n)==="[object Map]",Zo=n=>_s(n)==="[object Set]",bh=n=>_s(n)==="[object Date]",Ee=n=>typeof n=="function",Ye=n=>typeof n=="string",un=n=>typeof n=="symbol",Fe=n=>n!==null&&typeof n=="object",op=n=>(Fe(n)||Ee(n))&&Ee(n.then)&&Ee(n.catch),ap=Object.prototype.toString,_s=n=>ap.call(n),g_=n=>_s(n).slice(8,-1),lp=n=>_s(n)==="[object Object]",Ec=n=>Ye(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,$i=_c(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ea=n=>{const e=Object.create(null);return t=>e[t]||(e[t]=n(t))},y_=/-(\w)/g,zt=ea(n=>n.replace(y_,(e,t)=>t?t.toUpperCase():"")),__=/\B([A-Z])/g,lr=ea(n=>n.replace(__,"-$1").toLowerCase()),ta=ea(n=>n.charAt(0).toUpperCase()+n.slice(1)),qa=ea(n=>n?`on${ta(n)}`:""),jn=(n,e)=>!Object.is(n,e),ro=(n,...e)=>{for(let t=0;t<n.length;t++)n[t](...e)},cp=(n,e,t,r=!1)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,writable:r,value:t})},wo=n=>{const e=parseFloat(n);return isNaN(e)?n:e},v_=n=>{const e=Ye(n)?Number(n):NaN;return isNaN(e)?n:e};let Ah;const na=()=>Ah||(Ah=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function vs(n){if(de(n)){const e={};for(let t=0;t<n.length;t++){const r=n[t],i=Ye(r)?b_(r):vs(r);if(i)for(const s in i)e[s]=i[s]}return e}else if(Ye(n)||Fe(n))return n}const w_=/;(?![^(]*\))/g,E_=/:([^]+)/,T_=/\/\*[^]*?\*\//g;function b_(n){const e={};return n.replace(T_,"").split(w_).forEach(t=>{if(t){const r=t.split(E_);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function An(n){let e="";if(Ye(n))e=n;else if(de(n))for(let t=0;t<n.length;t++){const r=An(n[t]);r&&(e+=r+" ")}else if(Fe(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}const A_="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",I_=_c(A_);function up(n){return!!n||n===""}function D_(n,e){if(n.length!==e.length)return!1;let t=!0;for(let r=0;t&&r<n.length;r++)t=ra(n[r],e[r]);return t}function ra(n,e){if(n===e)return!0;let t=bh(n),r=bh(e);if(t||r)return t&&r?n.getTime()===e.getTime():!1;if(t=un(n),r=un(e),t||r)return n===e;if(t=de(n),r=de(e),t||r)return t&&r?D_(n,e):!1;if(t=Fe(n),r=Fe(e),t||r){if(!t||!r)return!1;const i=Object.keys(n).length,s=Object.keys(e).length;if(i!==s)return!1;for(const o in n){const l=n.hasOwnProperty(o),c=e.hasOwnProperty(o);if(l&&!c||!l&&c||!ra(n[o],e[o]))return!1}}return String(n)===String(e)}function S_(n,e){return n.findIndex(t=>ra(t,e))}const hp=n=>!!(n&&n.__v_isRef===!0),We=n=>Ye(n)?n:n==null?"":de(n)||Fe(n)&&(n.toString===ap||!Ee(n.toString))?hp(n)?We(n.value):JSON.stringify(n,dp,2):String(n),dp=(n,e)=>hp(e)?dp(n,e.value):Xr(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[r,i],s)=>(t[za(r,s)+" =>"]=i,t),{})}:Zo(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>za(t))}:un(e)?za(e):Fe(e)&&!de(e)&&!lp(e)?String(e):e,za=(n,e="")=>{var t;return un(n)?`Symbol(${(t=n.description)!=null?t:e})`:n};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Lt;class R_{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Lt,!e&&Lt&&(this.index=(Lt.scopes||(Lt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=Lt;try{return Lt=this,e()}finally{Lt=t}}}on(){Lt=this}off(){Lt=this.parent}stop(e){if(this._active){this._active=!1;let t,r;for(t=0,r=this.effects.length;t<r;t++)this.effects[t].stop();for(this.effects.length=0,t=0,r=this.cleanups.length;t<r;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function C_(){return Lt}let Ue;const ja=new WeakSet;class fp{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Lt&&Lt.active&&Lt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,ja.has(this)&&(ja.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||mp(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Ih(this),gp(this);const e=Ue,t=Xt;Ue=this,Xt=!0;try{return this.fn()}finally{yp(this),Ue=e,Xt=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Ac(e);this.deps=this.depsTail=void 0,Ih(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?ja.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Nl(this)&&this.run()}get dirty(){return Nl(this)}}let pp=0,qi,zi;function mp(n,e=!1){if(n.flags|=8,e){n.next=zi,zi=n;return}n.next=qi,qi=n}function Tc(){pp++}function bc(){if(--pp>0)return;if(zi){let e=zi;for(zi=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let n;for(;qi;){let e=qi;for(qi=void 0;e;){const t=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){n||(n=r)}e=t}}if(n)throw n}function gp(n){for(let e=n.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function yp(n){let e,t=n.depsTail,r=t;for(;r;){const i=r.prevDep;r.version===-1?(r===t&&(t=i),Ac(r),k_(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}n.deps=e,n.depsTail=t}function Nl(n){for(let e=n.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(_p(e.dep.computed)||e.dep.version!==e.version))return!0;return!!n._dirty}function _p(n){if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===ts))return;n.globalVersion=ts;const e=n.dep;if(n.flags|=2,e.version>0&&!n.isSSR&&n.deps&&!Nl(n)){n.flags&=-3;return}const t=Ue,r=Xt;Ue=n,Xt=!0;try{gp(n);const i=n.fn(n._value);(e.version===0||jn(i,n._value))&&(n._value=i,e.version++)}catch(i){throw e.version++,i}finally{Ue=t,Xt=r,yp(n),n.flags&=-3}}function Ac(n,e=!1){const{dep:t,prevSub:r,nextSub:i}=n;if(r&&(r.nextSub=i,n.prevSub=void 0),i&&(i.prevSub=r,n.nextSub=void 0),t.subs===n&&(t.subs=r,!r&&t.computed)){t.computed.flags&=-5;for(let s=t.computed.deps;s;s=s.nextDep)Ac(s,!0)}!e&&!--t.sc&&t.map&&t.map.delete(t.key)}function k_(n){const{prevDep:e,nextDep:t}=n;e&&(e.nextDep=t,n.prevDep=void 0),t&&(t.prevDep=e,n.nextDep=void 0)}let Xt=!0;const vp=[];function cr(){vp.push(Xt),Xt=!1}function ur(){const n=vp.pop();Xt=n===void 0?!0:n}function Ih(n){const{cleanup:e}=n;if(n.cleanup=void 0,e){const t=Ue;Ue=void 0;try{e()}finally{Ue=t}}}let ts=0;class P_{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Ic{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!Ue||!Xt||Ue===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==Ue)t=this.activeLink=new P_(Ue,this),Ue.deps?(t.prevDep=Ue.depsTail,Ue.depsTail.nextDep=t,Ue.depsTail=t):Ue.deps=Ue.depsTail=t,wp(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const r=t.nextDep;r.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=r),t.prevDep=Ue.depsTail,t.nextDep=void 0,Ue.depsTail.nextDep=t,Ue.depsTail=t,Ue.deps===t&&(Ue.deps=r)}return t}trigger(e){this.version++,ts++,this.notify(e)}notify(e){Tc();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{bc()}}}function wp(n){if(n.dep.sc++,n.sub.flags&4){const e=n.dep.computed;if(e&&!n.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)wp(r)}const t=n.dep.subs;t!==n&&(n.prevSub=t,t&&(t.nextSub=n)),n.dep.subs=n}}const Ol=new WeakMap,Ar=Symbol(""),Vl=Symbol(""),ns=Symbol("");function wt(n,e,t){if(Xt&&Ue){let r=Ol.get(n);r||Ol.set(n,r=new Map);let i=r.get(t);i||(r.set(t,i=new Ic),i.map=r,i.key=t),i.track()}}function _n(n,e,t,r,i,s){const o=Ol.get(n);if(!o){ts++;return}const l=c=>{c&&c.trigger()};if(Tc(),e==="clear")o.forEach(l);else{const c=de(n),h=c&&Ec(t);if(c&&t==="length"){const f=Number(r);o.forEach((p,_)=>{(_==="length"||_===ns||!un(_)&&_>=f)&&l(p)})}else switch((t!==void 0||o.has(void 0))&&l(o.get(t)),h&&l(o.get(ns)),e){case"add":c?h&&l(o.get("length")):(l(o.get(Ar)),Xr(n)&&l(o.get(Vl)));break;case"delete":c||(l(o.get(Ar)),Xr(n)&&l(o.get(Vl)));break;case"set":Xr(n)&&l(o.get(Ar));break}}bc()}function Hr(n){const e=Me(n);return e===n?e:(wt(e,"iterate",ns),qt(n)?e:e.map(Et))}function ia(n){return wt(n=Me(n),"iterate",ns),n}const M_={__proto__:null,[Symbol.iterator](){return Wa(this,Symbol.iterator,Et)},concat(...n){return Hr(this).concat(...n.map(e=>de(e)?Hr(e):e))},entries(){return Wa(this,"entries",n=>(n[1]=Et(n[1]),n))},every(n,e){return mn(this,"every",n,e,void 0,arguments)},filter(n,e){return mn(this,"filter",n,e,t=>t.map(Et),arguments)},find(n,e){return mn(this,"find",n,e,Et,arguments)},findIndex(n,e){return mn(this,"findIndex",n,e,void 0,arguments)},findLast(n,e){return mn(this,"findLast",n,e,Et,arguments)},findLastIndex(n,e){return mn(this,"findLastIndex",n,e,void 0,arguments)},forEach(n,e){return mn(this,"forEach",n,e,void 0,arguments)},includes(...n){return Ka(this,"includes",n)},indexOf(...n){return Ka(this,"indexOf",n)},join(n){return Hr(this).join(n)},lastIndexOf(...n){return Ka(this,"lastIndexOf",n)},map(n,e){return mn(this,"map",n,e,void 0,arguments)},pop(){return Oi(this,"pop")},push(...n){return Oi(this,"push",n)},reduce(n,...e){return Dh(this,"reduce",n,e)},reduceRight(n,...e){return Dh(this,"reduceRight",n,e)},shift(){return Oi(this,"shift")},some(n,e){return mn(this,"some",n,e,void 0,arguments)},splice(...n){return Oi(this,"splice",n)},toReversed(){return Hr(this).toReversed()},toSorted(n){return Hr(this).toSorted(n)},toSpliced(...n){return Hr(this).toSpliced(...n)},unshift(...n){return Oi(this,"unshift",n)},values(){return Wa(this,"values",Et)}};function Wa(n,e,t){const r=ia(n),i=r[e]();return r!==n&&!qt(n)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.value&&(s.value=t(s.value)),s}),i}const N_=Array.prototype;function mn(n,e,t,r,i,s){const o=ia(n),l=o!==n&&!qt(n),c=o[e];if(c!==N_[e]){const p=c.apply(n,s);return l?Et(p):p}let h=t;o!==n&&(l?h=function(p,_){return t.call(this,Et(p),_,n)}:t.length>2&&(h=function(p,_){return t.call(this,p,_,n)}));const f=c.call(o,h,r);return l&&i?i(f):f}function Dh(n,e,t,r){const i=ia(n);let s=t;return i!==n&&(qt(n)?t.length>3&&(s=function(o,l,c){return t.call(this,o,l,c,n)}):s=function(o,l,c){return t.call(this,o,Et(l),c,n)}),i[e](s,...r)}function Ka(n,e,t){const r=Me(n);wt(r,"iterate",ns);const i=r[e](...t);return(i===-1||i===!1)&&Cc(t[0])?(t[0]=Me(t[0]),r[e](...t)):i}function Oi(n,e,t=[]){cr(),Tc();const r=Me(n)[e].apply(n,t);return bc(),ur(),r}const O_=_c("__proto__,__v_isRef,__isVue"),Ep=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(un));function V_(n){un(n)||(n=String(n));const e=Me(this);return wt(e,"has",n),e.hasOwnProperty(n)}class Tp{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,r){if(t==="__v_skip")return e.__v_skip;const i=this._isReadonly,s=this._isShallow;if(t==="__v_isReactive")return!i;if(t==="__v_isReadonly")return i;if(t==="__v_isShallow")return s;if(t==="__v_raw")return r===(i?s?z_:Dp:s?Ip:Ap).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=de(e);if(!i){let c;if(o&&(c=M_[t]))return c;if(t==="hasOwnProperty")return V_}const l=Reflect.get(e,t,At(e)?e:r);return(un(t)?Ep.has(t):O_(t))||(i||wt(e,"get",t),s)?l:At(l)?o&&Ec(t)?l:l.value:Fe(l)?i?Sp(l):Sc(l):l}}class bp extends Tp{constructor(e=!1){super(!1,e)}set(e,t,r,i){let s=e[t];if(!this._isShallow){const c=Dr(s);if(!qt(r)&&!Dr(r)&&(s=Me(s),r=Me(r)),!de(e)&&At(s)&&!At(r))return c?!1:(s.value=r,!0)}const o=de(e)&&Ec(t)?Number(t)<e.length:Ne(e,t),l=Reflect.set(e,t,r,At(e)?e:i);return e===Me(i)&&(o?jn(r,s)&&_n(e,"set",t,r):_n(e,"add",t,r)),l}deleteProperty(e,t){const r=Ne(e,t);e[t];const i=Reflect.deleteProperty(e,t);return i&&r&&_n(e,"delete",t,void 0),i}has(e,t){const r=Reflect.has(e,t);return(!un(t)||!Ep.has(t))&&wt(e,"has",t),r}ownKeys(e){return wt(e,"iterate",de(e)?"length":Ar),Reflect.ownKeys(e)}}class L_ extends Tp{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const x_=new bp,F_=new L_,G_=new bp(!0);const Ll=n=>n,Ws=n=>Reflect.getPrototypeOf(n);function U_(n,e,t){return function(...r){const i=this.__v_raw,s=Me(i),o=Xr(s),l=n==="entries"||n===Symbol.iterator&&o,c=n==="keys"&&o,h=i[n](...r),f=t?Ll:e?xl:Et;return!e&&wt(s,"iterate",c?Vl:Ar),{next(){const{value:p,done:_}=h.next();return _?{value:p,done:_}:{value:l?[f(p[0]),f(p[1])]:f(p),done:_}},[Symbol.iterator](){return this}}}}function Ks(n){return function(...e){return n==="delete"?!1:n==="clear"?void 0:this}}function H_(n,e){const t={get(i){const s=this.__v_raw,o=Me(s),l=Me(i);n||(jn(i,l)&&wt(o,"get",i),wt(o,"get",l));const{has:c}=Ws(o),h=e?Ll:n?xl:Et;if(c.call(o,i))return h(s.get(i));if(c.call(o,l))return h(s.get(l));s!==o&&s.get(i)},get size(){const i=this.__v_raw;return!n&&wt(Me(i),"iterate",Ar),Reflect.get(i,"size",i)},has(i){const s=this.__v_raw,o=Me(s),l=Me(i);return n||(jn(i,l)&&wt(o,"has",i),wt(o,"has",l)),i===l?s.has(i):s.has(i)||s.has(l)},forEach(i,s){const o=this,l=o.__v_raw,c=Me(l),h=e?Ll:n?xl:Et;return!n&&wt(c,"iterate",Ar),l.forEach((f,p)=>i.call(s,h(f),h(p),o))}};return dt(t,n?{add:Ks("add"),set:Ks("set"),delete:Ks("delete"),clear:Ks("clear")}:{add(i){!e&&!qt(i)&&!Dr(i)&&(i=Me(i));const s=Me(this);return Ws(s).has.call(s,i)||(s.add(i),_n(s,"add",i,i)),this},set(i,s){!e&&!qt(s)&&!Dr(s)&&(s=Me(s));const o=Me(this),{has:l,get:c}=Ws(o);let h=l.call(o,i);h||(i=Me(i),h=l.call(o,i));const f=c.call(o,i);return o.set(i,s),h?jn(s,f)&&_n(o,"set",i,s):_n(o,"add",i,s),this},delete(i){const s=Me(this),{has:o,get:l}=Ws(s);let c=o.call(s,i);c||(i=Me(i),c=o.call(s,i)),l&&l.call(s,i);const h=s.delete(i);return c&&_n(s,"delete",i,void 0),h},clear(){const i=Me(this),s=i.size!==0,o=i.clear();return s&&_n(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=U_(i,n,e)}),t}function Dc(n,e){const t=H_(n,e);return(r,i,s)=>i==="__v_isReactive"?!n:i==="__v_isReadonly"?n:i==="__v_raw"?r:Reflect.get(Ne(t,i)&&i in r?t:r,i,s)}const B_={get:Dc(!1,!1)},$_={get:Dc(!1,!0)},q_={get:Dc(!0,!1)};const Ap=new WeakMap,Ip=new WeakMap,Dp=new WeakMap,z_=new WeakMap;function j_(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function W_(n){return n.__v_skip||!Object.isExtensible(n)?0:j_(g_(n))}function Sc(n){return Dr(n)?n:Rc(n,!1,x_,B_,Ap)}function K_(n){return Rc(n,!1,G_,$_,Ip)}function Sp(n){return Rc(n,!0,F_,q_,Dp)}function Rc(n,e,t,r,i){if(!Fe(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const s=i.get(n);if(s)return s;const o=W_(n);if(o===0)return n;const l=new Proxy(n,o===2?r:t);return i.set(n,l),l}function Qr(n){return Dr(n)?Qr(n.__v_raw):!!(n&&n.__v_isReactive)}function Dr(n){return!!(n&&n.__v_isReadonly)}function qt(n){return!!(n&&n.__v_isShallow)}function Cc(n){return n?!!n.__v_raw:!1}function Me(n){const e=n&&n.__v_raw;return e?Me(e):n}function en(n){return!Ne(n,"__v_skip")&&Object.isExtensible(n)&&cp(n,"__v_skip",!0),n}const Et=n=>Fe(n)?Sc(n):n,xl=n=>Fe(n)?Sp(n):n;function At(n){return n?n.__v_isRef===!0:!1}function re(n){return X_(n,!1)}function X_(n,e){return At(n)?n:new Q_(n,e)}class Q_{constructor(e,t){this.dep=new Ic,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:Me(e),this._value=t?e:Et(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,r=this.__v_isShallow||qt(e)||Dr(e);e=r?e:Me(e),jn(e,t)&&(this._rawValue=e,this._value=r?e:Et(e),this.dep.trigger())}}function Y_(n){return At(n)?n.value:n}const J_={get:(n,e,t)=>e==="__v_raw"?n:Y_(Reflect.get(n,e,t)),set:(n,e,t,r)=>{const i=n[e];return At(i)&&!At(t)?(i.value=t,!0):Reflect.set(n,e,t,r)}};function Rp(n){return Qr(n)?n:new Proxy(n,J_)}class Z_{constructor(e,t,r){this.fn=e,this.setter=t,this._value=void 0,this.dep=new Ic(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=ts-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Ue!==this)return mp(this,!0),!0}get value(){const e=this.dep.track();return _p(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function ev(n,e,t=!1){let r,i;return Ee(n)?r=n:(r=n.get,i=n.set),new Z_(r,i,t)}const Xs={},Eo=new WeakMap;let vr;function tv(n,e=!1,t=vr){if(t){let r=Eo.get(t);r||Eo.set(t,r=[]),r.push(n)}}function nv(n,e,t=xe){const{immediate:r,deep:i,once:s,scheduler:o,augmentJob:l,call:c}=t,h=F=>i?F:qt(F)||i===!1||i===0?vn(F,1):vn(F);let f,p,_,A,S=!1,C=!1;if(At(n)?(p=()=>n.value,S=qt(n)):Qr(n)?(p=()=>h(n),S=!0):de(n)?(C=!0,S=n.some(F=>Qr(F)||qt(F)),p=()=>n.map(F=>{if(At(F))return F.value;if(Qr(F))return h(F);if(Ee(F))return c?c(F,2):F()})):Ee(n)?e?p=c?()=>c(n,2):n:p=()=>{if(_){cr();try{_()}finally{ur()}}const F=vr;vr=f;try{return c?c(n,3,[A]):n(A)}finally{vr=F}}:p=sn,e&&i){const F=p,se=i===!0?1/0:i;p=()=>vn(F(),se)}const N=C_(),j=()=>{f.stop(),N&&N.active&&wc(N.effects,f)};if(s&&e){const F=e;e=(...se)=>{F(...se),j()}}let B=C?new Array(n.length).fill(Xs):Xs;const $=F=>{if(!(!(f.flags&1)||!f.dirty&&!F))if(e){const se=f.run();if(i||S||(C?se.some((Q,v)=>jn(Q,B[v])):jn(se,B))){_&&_();const Q=vr;vr=f;try{const v=[se,B===Xs?void 0:C&&B[0]===Xs?[]:B,A];c?c(e,3,v):e(...v),B=se}finally{vr=Q}}}else f.run()};return l&&l($),f=new fp(p),f.scheduler=o?()=>o($,!1):$,A=F=>tv(F,!1,f),_=f.onStop=()=>{const F=Eo.get(f);if(F){if(c)c(F,4);else for(const se of F)se();Eo.delete(f)}},e?r?$(!0):B=f.run():o?o($.bind(null,!0),!0):f.run(),j.pause=f.pause.bind(f),j.resume=f.resume.bind(f),j.stop=j,j}function vn(n,e=1/0,t){if(e<=0||!Fe(n)||n.__v_skip||(t=t||new Set,t.has(n)))return n;if(t.add(n),e--,At(n))vn(n.value,e,t);else if(de(n))for(let r=0;r<n.length;r++)vn(n[r],e,t);else if(Zo(n)||Xr(n))n.forEach(r=>{vn(r,e,t)});else if(lp(n)){for(const r in n)vn(n[r],e,t);for(const r of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,r)&&vn(n[r],e,t)}return n}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ws(n,e,t,r){try{return r?n(...r):n()}catch(i){sa(i,e,t)}}function Yt(n,e,t,r){if(Ee(n)){const i=ws(n,e,t,r);return i&&op(i)&&i.catch(s=>{sa(s,e,t)}),i}if(de(n)){const i=[];for(let s=0;s<n.length;s++)i.push(Yt(n[s],e,t,r));return i}}function sa(n,e,t,r=!0){const i=e?e.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||xe;if(e){let l=e.parent;const c=e.proxy,h=`https://vuejs.org/error-reference/#runtime-${t}`;for(;l;){const f=l.ec;if(f){for(let p=0;p<f.length;p++)if(f[p](n,c,h)===!1)return}l=l.parent}if(s){cr(),ws(s,null,10,[n,c,h]),ur();return}}rv(n,t,i,r,o)}function rv(n,e,t,r=!0,i=!1){if(i)throw n;console.error(n)}const Ct=[];let tn=-1;const Yr=[];let Fn=null,Br=0;const Cp=Promise.resolve();let To=null;function bo(n){const e=To||Cp;return n?e.then(this?n.bind(this):n):e}function iv(n){let e=tn+1,t=Ct.length;for(;e<t;){const r=e+t>>>1,i=Ct[r],s=rs(i);s<n||s===n&&i.flags&2?e=r+1:t=r}return e}function kc(n){if(!(n.flags&1)){const e=rs(n),t=Ct[Ct.length-1];!t||!(n.flags&2)&&e>=rs(t)?Ct.push(n):Ct.splice(iv(e),0,n),n.flags|=1,kp()}}function kp(){To||(To=Cp.then(Mp))}function sv(n){de(n)?Yr.push(...n):Fn&&n.id===-1?Fn.splice(Br+1,0,n):n.flags&1||(Yr.push(n),n.flags|=1),kp()}function Sh(n,e,t=tn+1){for(;t<Ct.length;t++){const r=Ct[t];if(r&&r.flags&2){if(n&&r.id!==n.uid)continue;Ct.splice(t,1),t--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Pp(n){if(Yr.length){const e=[...new Set(Yr)].sort((t,r)=>rs(t)-rs(r));if(Yr.length=0,Fn){Fn.push(...e);return}for(Fn=e,Br=0;Br<Fn.length;Br++){const t=Fn[Br];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}Fn=null,Br=0}}const rs=n=>n.id==null?n.flags&2?-1:1/0:n.id;function Mp(n){try{for(tn=0;tn<Ct.length;tn++){const e=Ct[tn];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),ws(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;tn<Ct.length;tn++){const e=Ct[tn];e&&(e.flags&=-2)}tn=-1,Ct.length=0,Pp(),To=null,(Ct.length||Yr.length)&&Mp()}}let Mt=null,Np=null;function Ao(n){const e=Mt;return Mt=n,Np=n&&n.type.__scopeId||null,e}function Pc(n,e=Mt,t){if(!e||n._n)return n;const r=(...i)=>{r._d&&Fh(-1);const s=Ao(e);let o;try{o=n(...i)}finally{Ao(s),r._d&&Fh(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function ct(n,e){if(Mt===null)return n;const t=ua(Mt),r=n.dirs||(n.dirs=[]);for(let i=0;i<e.length;i++){let[s,o,l,c=xe]=e[i];s&&(Ee(s)&&(s={mounted:s,updated:s}),s.deep&&vn(o),r.push({dir:s,instance:t,value:o,oldValue:void 0,arg:l,modifiers:c}))}return n}function mr(n,e,t,r){const i=n.dirs,s=e&&e.dirs;for(let o=0;o<i.length;o++){const l=i[o];s&&(l.oldValue=s[o].value);let c=l.dir[r];c&&(cr(),Yt(c,t,8,[n.el,l,n,e]),ur())}}const ov=Symbol("_vte"),Op=n=>n.__isTeleport,Gn=Symbol("_leaveCb"),Qs=Symbol("_enterCb");function av(){const n={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Zn(()=>{n.isMounted=!0}),Jr(()=>{n.isUnmounting=!0}),n}const Bt=[Function,Array],Vp={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Bt,onEnter:Bt,onAfterEnter:Bt,onEnterCancelled:Bt,onBeforeLeave:Bt,onLeave:Bt,onAfterLeave:Bt,onLeaveCancelled:Bt,onBeforeAppear:Bt,onAppear:Bt,onAfterAppear:Bt,onAppearCancelled:Bt},Lp=n=>{const e=n.subTree;return e.component?Lp(e.component):e},lv={name:"BaseTransition",props:Vp,setup(n,{slots:e}){const t=sw(),r=av();return()=>{const i=e.default&&Gp(e.default(),!0);if(!i||!i.length)return;const s=xp(i),o=Me(n),{mode:l}=o;if(r.isLeaving)return Xa(s);const c=Rh(s);if(!c)return Xa(s);let h=Fl(c,o,r,t,p=>h=p);c.type!==Pt&&is(c,h);let f=t.subTree&&Rh(t.subTree);if(f&&f.type!==Pt&&!Er(c,f)&&Lp(t).type!==Pt){let p=Fl(f,o,r,t);if(is(f,p),l==="out-in"&&c.type!==Pt)return r.isLeaving=!0,p.afterLeave=()=>{r.isLeaving=!1,t.job.flags&8||t.update(),delete p.afterLeave,f=void 0},Xa(s);l==="in-out"&&c.type!==Pt?p.delayLeave=(_,A,S)=>{const C=Fp(r,f);C[String(f.key)]=f,_[Gn]=()=>{A(),_[Gn]=void 0,delete h.delayedLeave,f=void 0},h.delayedLeave=()=>{S(),delete h.delayedLeave,f=void 0}}:f=void 0}else f&&(f=void 0);return s}}};function xp(n){let e=n[0];if(n.length>1){for(const t of n)if(t.type!==Pt){e=t;break}}return e}const cv=lv;function Fp(n,e){const{leavingVNodes:t}=n;let r=t.get(e.type);return r||(r=Object.create(null),t.set(e.type,r)),r}function Fl(n,e,t,r,i){const{appear:s,mode:o,persisted:l=!1,onBeforeEnter:c,onEnter:h,onAfterEnter:f,onEnterCancelled:p,onBeforeLeave:_,onLeave:A,onAfterLeave:S,onLeaveCancelled:C,onBeforeAppear:N,onAppear:j,onAfterAppear:B,onAppearCancelled:$}=e,F=String(n.key),se=Fp(t,n),Q=(g,E)=>{g&&Yt(g,r,9,E)},v=(g,E)=>{const I=E[1];Q(g,E),de(g)?g.every(b=>b.length<=1)&&I():g.length<=1&&I()},y={mode:o,persisted:l,beforeEnter(g){let E=c;if(!t.isMounted)if(s)E=N||c;else return;g[Gn]&&g[Gn](!0);const I=se[F];I&&Er(n,I)&&I.el[Gn]&&I.el[Gn](),Q(E,[g])},enter(g){let E=h,I=f,b=p;if(!t.isMounted)if(s)E=j||h,I=B||f,b=$||p;else return;let w=!1;const we=g[Qs]=Je=>{w||(w=!0,Je?Q(b,[g]):Q(I,[g]),y.delayedLeave&&y.delayedLeave(),g[Qs]=void 0)};E?v(E,[g,we]):we()},leave(g,E){const I=String(n.key);if(g[Qs]&&g[Qs](!0),t.isUnmounting)return E();Q(_,[g]);let b=!1;const w=g[Gn]=we=>{b||(b=!0,E(),we?Q(C,[g]):Q(S,[g]),g[Gn]=void 0,se[I]===n&&delete se[I])};se[I]=n,A?v(A,[g,w]):w()},clone(g){const E=Fl(g,e,t,r,i);return i&&i(E),E}};return y}function Xa(n){if(oa(n))return n=er(n),n.children=null,n}function Rh(n){if(!oa(n))return Op(n.type)&&n.children?xp(n.children):n;const{shapeFlag:e,children:t}=n;if(t){if(e&16)return t[0];if(e&32&&Ee(t.default))return t.default()}}function is(n,e){n.shapeFlag&6&&n.component?(n.transition=e,is(n.component.subTree,e)):n.shapeFlag&128?(n.ssContent.transition=e.clone(n.ssContent),n.ssFallback.transition=e.clone(n.ssFallback)):n.transition=e}function Gp(n,e=!1,t){let r=[],i=0;for(let s=0;s<n.length;s++){let o=n[s];const l=t==null?o.key:String(t)+String(o.key!=null?o.key:s);o.type===He?(o.patchFlag&128&&i++,r=r.concat(Gp(o.children,e,l))):(e||o.type!==Pt)&&r.push(l!=null?er(o,{key:l}):o)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}function Up(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}function Io(n,e,t,r,i=!1){if(de(n)){n.forEach((S,C)=>Io(S,e&&(de(e)?e[C]:e),t,r,i));return}if(ji(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Io(n,e,t,r.component.subTree);return}const s=r.shapeFlag&4?ua(r.component):r.el,o=i?null:s,{i:l,r:c}=n,h=e&&e.r,f=l.refs===xe?l.refs={}:l.refs,p=l.setupState,_=Me(p),A=p===xe?()=>!1:S=>Ne(_,S);if(h!=null&&h!==c&&(Ye(h)?(f[h]=null,A(h)&&(p[h]=null)):At(h)&&(h.value=null)),Ee(c))ws(c,l,12,[o,f]);else{const S=Ye(c),C=At(c);if(S||C){const N=()=>{if(n.f){const j=S?A(c)?p[c]:f[c]:c.value;i?de(j)&&wc(j,s):de(j)?j.includes(s)||j.push(s):S?(f[c]=[s],A(c)&&(p[c]=f[c])):(c.value=[s],n.k&&(f[n.k]=c.value))}else S?(f[c]=o,A(c)&&(p[c]=o)):C&&(c.value=o,n.k&&(f[n.k]=o))};o?(N.id=-1,Vt(N,t)):N()}}}na().requestIdleCallback;na().cancelIdleCallback;const ji=n=>!!n.type.__asyncLoader,oa=n=>n.type.__isKeepAlive;function uv(n,e){Hp(n,"a",e)}function hv(n,e){Hp(n,"da",e)}function Hp(n,e,t=ut){const r=n.__wdc||(n.__wdc=()=>{let i=t;for(;i;){if(i.isDeactivated)return;i=i.parent}return n()});if(aa(e,r,t),t){let i=t.parent;for(;i&&i.parent;)oa(i.parent.vnode)&&dv(r,e,t,i),i=i.parent}}function dv(n,e,t,r){const i=aa(e,n,r,!0);Bp(()=>{wc(r[e],i)},t)}function aa(n,e,t=ut,r=!1){if(t){const i=t[n]||(t[n]=[]),s=e.__weh||(e.__weh=(...o)=>{cr();const l=Es(t),c=Yt(e,t,n,o);return l(),ur(),c});return r?i.unshift(s):i.push(s),s}}const kn=n=>(e,t=ut)=>{(!os||n==="sp")&&aa(n,(...r)=>e(...r),t)},fv=kn("bm"),Zn=kn("m"),pv=kn("bu"),mv=kn("u"),Jr=kn("bum"),Bp=kn("um"),gv=kn("sp"),yv=kn("rtg"),_v=kn("rtc");function vv(n,e=ut){aa("ec",n,e)}const $p="components";function wv(n,e){return zp($p,n,!0,e)||n}const qp=Symbol.for("v-ndc");function Ev(n){return Ye(n)?zp($p,n,!1)||n:n||qp}function zp(n,e,t=!0,r=!1){const i=Mt||ut;if(i){const s=i.type;{const l=uw(s,!1);if(l&&(l===e||l===zt(e)||l===ta(zt(e))))return s}const o=Ch(i[n]||s[n],e)||Ch(i.appContext[n],e);return!o&&r?s:o}}function Ch(n,e){return n&&(n[e]||n[zt(e)]||n[ta(zt(e))])}function Nt(n,e,t,r){let i;const s=t,o=de(n);if(o||Ye(n)){const l=o&&Qr(n);let c=!1;l&&(c=!qt(n),n=ia(n)),i=new Array(n.length);for(let h=0,f=n.length;h<f;h++)i[h]=e(c?Et(n[h]):n[h],h,void 0,s)}else if(typeof n=="number"){i=new Array(n);for(let l=0;l<n;l++)i[l]=e(l+1,l,void 0,s)}else if(Fe(n))if(n[Symbol.iterator])i=Array.from(n,(l,c)=>e(l,c,void 0,s));else{const l=Object.keys(n);i=new Array(l.length);for(let c=0,h=l.length;c<h;c++){const f=l[c];i[c]=e(n[f],f,c,s)}}else i=[];return i}const Gl=n=>n?fm(n)?ua(n):Gl(n.parent):null,Wi=dt(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>Gl(n.parent),$root:n=>Gl(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>Wp(n),$forceUpdate:n=>n.f||(n.f=()=>{kc(n.update)}),$nextTick:n=>n.n||(n.n=bo.bind(n.proxy)),$watch:n=>$v.bind(n)}),Qa=(n,e)=>n!==xe&&!n.__isScriptSetup&&Ne(n,e),Tv={get({_:n},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:r,data:i,props:s,accessCache:o,type:l,appContext:c}=n;let h;if(e[0]!=="$"){const A=o[e];if(A!==void 0)switch(A){case 1:return r[e];case 2:return i[e];case 4:return t[e];case 3:return s[e]}else{if(Qa(r,e))return o[e]=1,r[e];if(i!==xe&&Ne(i,e))return o[e]=2,i[e];if((h=n.propsOptions[0])&&Ne(h,e))return o[e]=3,s[e];if(t!==xe&&Ne(t,e))return o[e]=4,t[e];Ul&&(o[e]=0)}}const f=Wi[e];let p,_;if(f)return e==="$attrs"&&wt(n.attrs,"get",""),f(n);if((p=l.__cssModules)&&(p=p[e]))return p;if(t!==xe&&Ne(t,e))return o[e]=4,t[e];if(_=c.config.globalProperties,Ne(_,e))return _[e]},set({_:n},e,t){const{data:r,setupState:i,ctx:s}=n;return Qa(i,e)?(i[e]=t,!0):r!==xe&&Ne(r,e)?(r[e]=t,!0):Ne(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(s[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:r,appContext:i,propsOptions:s}},o){let l;return!!t[o]||n!==xe&&Ne(n,o)||Qa(e,o)||(l=s[0])&&Ne(l,o)||Ne(r,o)||Ne(Wi,o)||Ne(i.config.globalProperties,o)},defineProperty(n,e,t){return t.get!=null?n._.accessCache[e]=0:Ne(t,"value")&&this.set(n,e,t.value,null),Reflect.defineProperty(n,e,t)}};function kh(n){return de(n)?n.reduce((e,t)=>(e[t]=null,e),{}):n}let Ul=!0;function bv(n){const e=Wp(n),t=n.proxy,r=n.ctx;Ul=!1,e.beforeCreate&&Ph(e.beforeCreate,n,"bc");const{data:i,computed:s,methods:o,watch:l,provide:c,inject:h,created:f,beforeMount:p,mounted:_,beforeUpdate:A,updated:S,activated:C,deactivated:N,beforeDestroy:j,beforeUnmount:B,destroyed:$,unmounted:F,render:se,renderTracked:Q,renderTriggered:v,errorCaptured:y,serverPrefetch:g,expose:E,inheritAttrs:I,components:b,directives:w,filters:we}=e;if(h&&Av(h,r,null),o)for(const De in o){const be=o[De];Ee(be)&&(r[De]=be.bind(t))}if(i){const De=i.call(t,t);Fe(De)&&(n.data=Sc(De))}if(Ul=!0,s)for(const De in s){const be=s[De],G=Ee(be)?be.bind(t,t):Ee(be.get)?be.get.bind(t,t):sn,x=!Ee(be)&&Ee(be.set)?be.set.bind(t):sn,z=si({get:G,set:x});Object.defineProperty(r,De,{enumerable:!0,configurable:!0,get:()=>z.value,set:ne=>z.value=ne})}if(l)for(const De in l)jp(l[De],r,t,De);if(c){const De=Ee(c)?c.call(t):c;Reflect.ownKeys(De).forEach(be=>{kv(be,De[be])})}f&&Ph(f,n,"c");function Ge(De,be){de(be)?be.forEach(G=>De(G.bind(t))):be&&De(be.bind(t))}if(Ge(fv,p),Ge(Zn,_),Ge(pv,A),Ge(mv,S),Ge(uv,C),Ge(hv,N),Ge(vv,y),Ge(_v,Q),Ge(yv,v),Ge(Jr,B),Ge(Bp,F),Ge(gv,g),de(E))if(E.length){const De=n.exposed||(n.exposed={});E.forEach(be=>{Object.defineProperty(De,be,{get:()=>t[be],set:G=>t[be]=G})})}else n.exposed||(n.exposed={});se&&n.render===sn&&(n.render=se),I!=null&&(n.inheritAttrs=I),b&&(n.components=b),w&&(n.directives=w),g&&Up(n)}function Av(n,e,t=sn){de(n)&&(n=Hl(n));for(const r in n){const i=n[r];let s;Fe(i)?"default"in i?s=io(i.from||r,i.default,!0):s=io(i.from||r):s=io(i),At(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[r]=s}}function Ph(n,e,t){Yt(de(n)?n.map(r=>r.bind(e.proxy)):n.bind(e.proxy),e,t)}function jp(n,e,t,r){let i=r.includes(".")?am(t,r):()=>t[r];if(Ye(n)){const s=e[n];Ee(s)&&so(i,s)}else if(Ee(n))so(i,n.bind(t));else if(Fe(n))if(de(n))n.forEach(s=>jp(s,e,t,r));else{const s=Ee(n.handler)?n.handler.bind(t):e[n.handler];Ee(s)&&so(i,s,n)}}function Wp(n){const e=n.type,{mixins:t,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=n.appContext,l=s.get(e);let c;return l?c=l:!i.length&&!t&&!r?c=e:(c={},i.length&&i.forEach(h=>Do(c,h,o,!0)),Do(c,e,o)),Fe(e)&&s.set(e,c),c}function Do(n,e,t,r=!1){const{mixins:i,extends:s}=e;s&&Do(n,s,t,!0),i&&i.forEach(o=>Do(n,o,t,!0));for(const o in e)if(!(r&&o==="expose")){const l=Iv[o]||t&&t[o];n[o]=l?l(n[o],e[o]):e[o]}return n}const Iv={data:Mh,props:Nh,emits:Nh,methods:Fi,computed:Fi,beforeCreate:Rt,created:Rt,beforeMount:Rt,mounted:Rt,beforeUpdate:Rt,updated:Rt,beforeDestroy:Rt,beforeUnmount:Rt,destroyed:Rt,unmounted:Rt,activated:Rt,deactivated:Rt,errorCaptured:Rt,serverPrefetch:Rt,components:Fi,directives:Fi,watch:Sv,provide:Mh,inject:Dv};function Mh(n,e){return e?n?function(){return dt(Ee(n)?n.call(this,this):n,Ee(e)?e.call(this,this):e)}:e:n}function Dv(n,e){return Fi(Hl(n),Hl(e))}function Hl(n){if(de(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function Rt(n,e){return n?[...new Set([].concat(n,e))]:e}function Fi(n,e){return n?dt(Object.create(null),n,e):e}function Nh(n,e){return n?de(n)&&de(e)?[...new Set([...n,...e])]:dt(Object.create(null),kh(n),kh(e??{})):e}function Sv(n,e){if(!n)return e;if(!e)return n;const t=dt(Object.create(null),n);for(const r in e)t[r]=Rt(n[r],e[r]);return t}function Kp(){return{app:null,config:{isNativeTag:p_,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Rv=0;function Cv(n,e){return function(r,i=null){Ee(r)||(r=dt({},r)),i!=null&&!Fe(i)&&(i=null);const s=Kp(),o=new WeakSet,l=[];let c=!1;const h=s.app={_uid:Rv++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:fw,get config(){return s.config},set config(f){},use(f,...p){return o.has(f)||(f&&Ee(f.install)?(o.add(f),f.install(h,...p)):Ee(f)&&(o.add(f),f(h,...p))),h},mixin(f){return s.mixins.includes(f)||s.mixins.push(f),h},component(f,p){return p?(s.components[f]=p,h):s.components[f]},directive(f,p){return p?(s.directives[f]=p,h):s.directives[f]},mount(f,p,_){if(!c){const A=h._ceVNode||bt(r,i);return A.appContext=s,_===!0?_="svg":_===!1&&(_=void 0),n(A,f,_),c=!0,h._container=f,f.__vue_app__=h,ua(A.component)}},onUnmount(f){l.push(f)},unmount(){c&&(Yt(l,h._instance,16),n(null,h._container),delete h._container.__vue_app__)},provide(f,p){return s.provides[f]=p,h},runWithContext(f){const p=Zr;Zr=h;try{return f()}finally{Zr=p}}};return h}}let Zr=null;function kv(n,e){if(ut){let t=ut.provides;const r=ut.parent&&ut.parent.provides;r===t&&(t=ut.provides=Object.create(r)),t[n]=e}}function io(n,e,t=!1){const r=ut||Mt;if(r||Zr){const i=Zr?Zr._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&n in i)return i[n];if(arguments.length>1)return t&&Ee(e)?e.call(r&&r.proxy):e}}const Xp={},Qp=()=>Object.create(Xp),Yp=n=>Object.getPrototypeOf(n)===Xp;function Pv(n,e,t,r=!1){const i={},s=Qp();n.propsDefaults=Object.create(null),Jp(n,e,i,s);for(const o in n.propsOptions[0])o in i||(i[o]=void 0);t?n.props=r?i:K_(i):n.type.props?n.props=i:n.props=s,n.attrs=s}function Mv(n,e,t,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=n,l=Me(i),[c]=n.propsOptions;let h=!1;if((r||o>0)&&!(o&16)){if(o&8){const f=n.vnode.dynamicProps;for(let p=0;p<f.length;p++){let _=f[p];if(la(n.emitsOptions,_))continue;const A=e[_];if(c)if(Ne(s,_))A!==s[_]&&(s[_]=A,h=!0);else{const S=zt(_);i[S]=Bl(c,l,S,A,n,!1)}else A!==s[_]&&(s[_]=A,h=!0)}}}else{Jp(n,e,i,s)&&(h=!0);let f;for(const p in l)(!e||!Ne(e,p)&&((f=lr(p))===p||!Ne(e,f)))&&(c?t&&(t[p]!==void 0||t[f]!==void 0)&&(i[p]=Bl(c,l,p,void 0,n,!0)):delete i[p]);if(s!==l)for(const p in s)(!e||!Ne(e,p))&&(delete s[p],h=!0)}h&&_n(n.attrs,"set","")}function Jp(n,e,t,r){const[i,s]=n.propsOptions;let o=!1,l;if(e)for(let c in e){if($i(c))continue;const h=e[c];let f;i&&Ne(i,f=zt(c))?!s||!s.includes(f)?t[f]=h:(l||(l={}))[f]=h:la(n.emitsOptions,c)||(!(c in r)||h!==r[c])&&(r[c]=h,o=!0)}if(s){const c=Me(t),h=l||xe;for(let f=0;f<s.length;f++){const p=s[f];t[p]=Bl(i,c,p,h[p],n,!Ne(h,p))}}return o}function Bl(n,e,t,r,i,s){const o=n[t];if(o!=null){const l=Ne(o,"default");if(l&&r===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&Ee(c)){const{propsDefaults:h}=i;if(t in h)r=h[t];else{const f=Es(i);r=h[t]=c.call(null,e),f()}}else r=c;i.ce&&i.ce._setProp(t,r)}o[0]&&(s&&!l?r=!1:o[1]&&(r===""||r===lr(t))&&(r=!0))}return r}const Nv=new WeakMap;function Zp(n,e,t=!1){const r=t?Nv:e.propsCache,i=r.get(n);if(i)return i;const s=n.props,o={},l=[];let c=!1;if(!Ee(n)){const f=p=>{c=!0;const[_,A]=Zp(p,e,!0);dt(o,_),A&&l.push(...A)};!t&&e.mixins.length&&e.mixins.forEach(f),n.extends&&f(n.extends),n.mixins&&n.mixins.forEach(f)}if(!s&&!c)return Fe(n)&&r.set(n,Kr),Kr;if(de(s))for(let f=0;f<s.length;f++){const p=zt(s[f]);Oh(p)&&(o[p]=xe)}else if(s)for(const f in s){const p=zt(f);if(Oh(p)){const _=s[f],A=o[p]=de(_)||Ee(_)?{type:_}:dt({},_),S=A.type;let C=!1,N=!0;if(de(S))for(let j=0;j<S.length;++j){const B=S[j],$=Ee(B)&&B.name;if($==="Boolean"){C=!0;break}else $==="String"&&(N=!1)}else C=Ee(S)&&S.name==="Boolean";A[0]=C,A[1]=N,(C||Ne(A,"default"))&&l.push(p)}}const h=[o,l];return Fe(n)&&r.set(n,h),h}function Oh(n){return n[0]!=="$"&&!$i(n)}const em=n=>n[0]==="_"||n==="$stable",Mc=n=>de(n)?n.map(rn):[rn(n)],Ov=(n,e,t)=>{if(e._n)return e;const r=Pc((...i)=>Mc(e(...i)),t);return r._c=!1,r},tm=(n,e,t)=>{const r=n._ctx;for(const i in n){if(em(i))continue;const s=n[i];if(Ee(s))e[i]=Ov(i,s,r);else if(s!=null){const o=Mc(s);e[i]=()=>o}}},nm=(n,e)=>{const t=Mc(e);n.slots.default=()=>t},rm=(n,e,t)=>{for(const r in e)(t||r!=="_")&&(n[r]=e[r])},Vv=(n,e,t)=>{const r=n.slots=Qp();if(n.vnode.shapeFlag&32){const i=e._;i?(rm(r,e,t),t&&cp(r,"_",i,!0)):tm(e,r)}else e&&nm(n,e)},Lv=(n,e,t)=>{const{vnode:r,slots:i}=n;let s=!0,o=xe;if(r.shapeFlag&32){const l=e._;l?t&&l===1?s=!1:rm(i,e,t):(s=!e.$stable,tm(e,i)),o=e}else e&&(nm(n,e),o={default:1});if(s)for(const l in i)!em(l)&&o[l]==null&&delete i[l]},Vt=Qv;function xv(n){return Fv(n)}function Fv(n,e){const t=na();t.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:l,createComment:c,setText:h,setElementText:f,parentNode:p,nextSibling:_,setScopeId:A=sn,insertStaticContent:S}=n,C=(T,D,P,H=null,L=null,U=null,Y=void 0,K=null,W=!!D.dynamicChildren)=>{if(T===D)return;T&&!Er(T,D)&&(H=je(T),ne(T,L,U,!0),T=null),D.patchFlag===-2&&(W=!1,D.dynamicChildren=null);const{type:q,ref:ue,shapeFlag:J}=D;switch(q){case ca:N(T,D,P,H);break;case Pt:j(T,D,P,H);break;case oo:T==null&&B(D,P,H,Y);break;case He:b(T,D,P,H,L,U,Y,K,W);break;default:J&1?se(T,D,P,H,L,U,Y,K,W):J&6?w(T,D,P,H,L,U,Y,K,W):(J&64||J&128)&&q.process(T,D,P,H,L,U,Y,K,W,fe)}ue!=null&&L&&Io(ue,T&&T.ref,U,D||T,!D)},N=(T,D,P,H)=>{if(T==null)r(D.el=l(D.children),P,H);else{const L=D.el=T.el;D.children!==T.children&&h(L,D.children)}},j=(T,D,P,H)=>{T==null?r(D.el=c(D.children||""),P,H):D.el=T.el},B=(T,D,P,H)=>{[T.el,T.anchor]=S(T.children,D,P,H,T.el,T.anchor)},$=({el:T,anchor:D},P,H)=>{let L;for(;T&&T!==D;)L=_(T),r(T,P,H),T=L;r(D,P,H)},F=({el:T,anchor:D})=>{let P;for(;T&&T!==D;)P=_(T),i(T),T=P;i(D)},se=(T,D,P,H,L,U,Y,K,W)=>{D.type==="svg"?Y="svg":D.type==="math"&&(Y="mathml"),T==null?Q(D,P,H,L,U,Y,K,W):g(T,D,L,U,Y,K,W)},Q=(T,D,P,H,L,U,Y,K)=>{let W,q;const{props:ue,shapeFlag:J,transition:ae,dirs:pe}=T;if(W=T.el=o(T.type,U,ue&&ue.is,ue),J&8?f(W,T.children):J&16&&y(T.children,W,null,H,L,Ya(T,U),Y,K),pe&&mr(T,null,H,"created"),v(W,T,T.scopeId,Y,H),ue){for(const Te in ue)Te!=="value"&&!$i(Te)&&s(W,Te,null,ue[Te],U,H);"value"in ue&&s(W,"value",null,ue.value,U),(q=ue.onVnodeBeforeMount)&&Zt(q,H,T)}pe&&mr(T,null,H,"beforeMount");const he=Gv(L,ae);he&&ae.beforeEnter(W),r(W,D,P),((q=ue&&ue.onVnodeMounted)||he||pe)&&Vt(()=>{q&&Zt(q,H,T),he&&ae.enter(W),pe&&mr(T,null,H,"mounted")},L)},v=(T,D,P,H,L)=>{if(P&&A(T,P),H)for(let U=0;U<H.length;U++)A(T,H[U]);if(L){let U=L.subTree;if(D===U||cm(U.type)&&(U.ssContent===D||U.ssFallback===D)){const Y=L.vnode;v(T,Y,Y.scopeId,Y.slotScopeIds,L.parent)}}},y=(T,D,P,H,L,U,Y,K,W=0)=>{for(let q=W;q<T.length;q++){const ue=T[q]=K?Un(T[q]):rn(T[q]);C(null,ue,D,P,H,L,U,Y,K)}},g=(T,D,P,H,L,U,Y)=>{const K=D.el=T.el;let{patchFlag:W,dynamicChildren:q,dirs:ue}=D;W|=T.patchFlag&16;const J=T.props||xe,ae=D.props||xe;let pe;if(P&&gr(P,!1),(pe=ae.onVnodeBeforeUpdate)&&Zt(pe,P,D,T),ue&&mr(D,T,P,"beforeUpdate"),P&&gr(P,!0),(J.innerHTML&&ae.innerHTML==null||J.textContent&&ae.textContent==null)&&f(K,""),q?E(T.dynamicChildren,q,K,P,H,Ya(D,L),U):Y||be(T,D,K,null,P,H,Ya(D,L),U,!1),W>0){if(W&16)I(K,J,ae,P,L);else if(W&2&&J.class!==ae.class&&s(K,"class",null,ae.class,L),W&4&&s(K,"style",J.style,ae.style,L),W&8){const he=D.dynamicProps;for(let Te=0;Te<he.length;Te++){const Ce=he[Te],pt=J[Ce],st=ae[Ce];(st!==pt||Ce==="value")&&s(K,Ce,pt,st,L,P)}}W&1&&T.children!==D.children&&f(K,D.children)}else!Y&&q==null&&I(K,J,ae,P,L);((pe=ae.onVnodeUpdated)||ue)&&Vt(()=>{pe&&Zt(pe,P,D,T),ue&&mr(D,T,P,"updated")},H)},E=(T,D,P,H,L,U,Y)=>{for(let K=0;K<D.length;K++){const W=T[K],q=D[K],ue=W.el&&(W.type===He||!Er(W,q)||W.shapeFlag&70)?p(W.el):P;C(W,q,ue,null,H,L,U,Y,!0)}},I=(T,D,P,H,L)=>{if(D!==P){if(D!==xe)for(const U in D)!$i(U)&&!(U in P)&&s(T,U,D[U],null,L,H);for(const U in P){if($i(U))continue;const Y=P[U],K=D[U];Y!==K&&U!=="value"&&s(T,U,K,Y,L,H)}"value"in P&&s(T,"value",D.value,P.value,L)}},b=(T,D,P,H,L,U,Y,K,W)=>{const q=D.el=T?T.el:l(""),ue=D.anchor=T?T.anchor:l("");let{patchFlag:J,dynamicChildren:ae,slotScopeIds:pe}=D;pe&&(K=K?K.concat(pe):pe),T==null?(r(q,P,H),r(ue,P,H),y(D.children||[],P,ue,L,U,Y,K,W)):J>0&&J&64&&ae&&T.dynamicChildren?(E(T.dynamicChildren,ae,P,L,U,Y,K),(D.key!=null||L&&D===L.subTree)&&im(T,D,!0)):be(T,D,P,ue,L,U,Y,K,W)},w=(T,D,P,H,L,U,Y,K,W)=>{D.slotScopeIds=K,T==null?D.shapeFlag&512?L.ctx.activate(D,P,H,Y,W):we(D,P,H,L,U,Y,W):Je(T,D,W)},we=(T,D,P,H,L,U,Y)=>{const K=T.component=iw(T,H,L);if(oa(T)&&(K.ctx.renderer=fe),ow(K,!1,Y),K.asyncDep){if(L&&L.registerDep(K,Ge,Y),!T.el){const W=K.subTree=bt(Pt);j(null,W,D,P)}}else Ge(K,T,D,P,L,U,Y)},Je=(T,D,P)=>{const H=D.component=T.component;if(Kv(T,D,P))if(H.asyncDep&&!H.asyncResolved){De(H,D,P);return}else H.next=D,H.update();else D.el=T.el,H.vnode=D},Ge=(T,D,P,H,L,U,Y)=>{const K=()=>{if(T.isMounted){let{next:J,bu:ae,u:pe,parent:he,vnode:Te}=T;{const mt=sm(T);if(mt){J&&(J.el=Te.el,De(T,J,Y)),mt.asyncDep.then(()=>{T.isUnmounted||K()});return}}let Ce=J,pt;gr(T,!1),J?(J.el=Te.el,De(T,J,Y)):J=Te,ae&&ro(ae),(pt=J.props&&J.props.onVnodeBeforeUpdate)&&Zt(pt,he,J,Te),gr(T,!0);const st=Lh(T),Ut=T.subTree;T.subTree=st,C(Ut,st,p(Ut.el),je(Ut),T,L,U),J.el=st.el,Ce===null&&Xv(T,st.el),pe&&Vt(pe,L),(pt=J.props&&J.props.onVnodeUpdated)&&Vt(()=>Zt(pt,he,J,Te),L)}else{let J;const{el:ae,props:pe}=D,{bm:he,m:Te,parent:Ce,root:pt,type:st}=T,Ut=ji(D);gr(T,!1),he&&ro(he),!Ut&&(J=pe&&pe.onVnodeBeforeMount)&&Zt(J,Ce,D),gr(T,!0);{pt.ce&&pt.ce._injectChildStyle(st);const mt=T.subTree=Lh(T);C(null,mt,P,H,T,L,U),D.el=mt.el}if(Te&&Vt(Te,L),!Ut&&(J=pe&&pe.onVnodeMounted)){const mt=D;Vt(()=>Zt(J,Ce,mt),L)}(D.shapeFlag&256||Ce&&ji(Ce.vnode)&&Ce.vnode.shapeFlag&256)&&T.a&&Vt(T.a,L),T.isMounted=!0,D=P=H=null}};T.scope.on();const W=T.effect=new fp(K);T.scope.off();const q=T.update=W.run.bind(W),ue=T.job=W.runIfDirty.bind(W);ue.i=T,ue.id=T.uid,W.scheduler=()=>kc(ue),gr(T,!0),q()},De=(T,D,P)=>{D.component=T;const H=T.vnode.props;T.vnode=D,T.next=null,Mv(T,D.props,H,P),Lv(T,D.children,P),cr(),Sh(T),ur()},be=(T,D,P,H,L,U,Y,K,W=!1)=>{const q=T&&T.children,ue=T?T.shapeFlag:0,J=D.children,{patchFlag:ae,shapeFlag:pe}=D;if(ae>0){if(ae&128){x(q,J,P,H,L,U,Y,K,W);return}else if(ae&256){G(q,J,P,H,L,U,Y,K,W);return}}pe&8?(ue&16&&ze(q,L,U),J!==q&&f(P,J)):ue&16?pe&16?x(q,J,P,H,L,U,Y,K,W):ze(q,L,U,!0):(ue&8&&f(P,""),pe&16&&y(J,P,H,L,U,Y,K,W))},G=(T,D,P,H,L,U,Y,K,W)=>{T=T||Kr,D=D||Kr;const q=T.length,ue=D.length,J=Math.min(q,ue);let ae;for(ae=0;ae<J;ae++){const pe=D[ae]=W?Un(D[ae]):rn(D[ae]);C(T[ae],pe,P,null,L,U,Y,K,W)}q>ue?ze(T,L,U,!0,!1,J):y(D,P,H,L,U,Y,K,W,J)},x=(T,D,P,H,L,U,Y,K,W)=>{let q=0;const ue=D.length;let J=T.length-1,ae=ue-1;for(;q<=J&&q<=ae;){const pe=T[q],he=D[q]=W?Un(D[q]):rn(D[q]);if(Er(pe,he))C(pe,he,P,null,L,U,Y,K,W);else break;q++}for(;q<=J&&q<=ae;){const pe=T[J],he=D[ae]=W?Un(D[ae]):rn(D[ae]);if(Er(pe,he))C(pe,he,P,null,L,U,Y,K,W);else break;J--,ae--}if(q>J){if(q<=ae){const pe=ae+1,he=pe<ue?D[pe].el:H;for(;q<=ae;)C(null,D[q]=W?Un(D[q]):rn(D[q]),P,he,L,U,Y,K,W),q++}}else if(q>ae)for(;q<=J;)ne(T[q],L,U,!0),q++;else{const pe=q,he=q,Te=new Map;for(q=he;q<=ae;q++){const ot=D[q]=W?Un(D[q]):rn(D[q]);ot.key!=null&&Te.set(ot.key,q)}let Ce,pt=0;const st=ae-he+1;let Ut=!1,mt=0;const Mn=new Array(st);for(q=0;q<st;q++)Mn[q]=0;for(q=pe;q<=J;q++){const ot=T[q];if(pt>=st){ne(ot,L,U,!0);continue}let Ht;if(ot.key!=null)Ht=Te.get(ot.key);else for(Ce=he;Ce<=ae;Ce++)if(Mn[Ce-he]===0&&Er(ot,D[Ce])){Ht=Ce;break}Ht===void 0?ne(ot,L,U,!0):(Mn[Ht-he]=q+1,Ht>=mt?mt=Ht:Ut=!0,C(ot,D[Ht],P,null,L,U,Y,K,W),pt++)}const Ei=Ut?Uv(Mn):Kr;for(Ce=Ei.length-1,q=st-1;q>=0;q--){const ot=he+q,Ht=D[ot],Ps=ot+1<ue?D[ot+1].el:H;Mn[q]===0?C(null,Ht,P,Ps,L,U,Y,K,W):Ut&&(Ce<0||q!==Ei[Ce]?z(Ht,P,Ps,2):Ce--)}}},z=(T,D,P,H,L=null)=>{const{el:U,type:Y,transition:K,children:W,shapeFlag:q}=T;if(q&6){z(T.component.subTree,D,P,H);return}if(q&128){T.suspense.move(D,P,H);return}if(q&64){Y.move(T,D,P,fe);return}if(Y===He){r(U,D,P);for(let J=0;J<W.length;J++)z(W[J],D,P,H);r(T.anchor,D,P);return}if(Y===oo){$(T,D,P);return}if(H!==2&&q&1&&K)if(H===0)K.beforeEnter(U),r(U,D,P),Vt(()=>K.enter(U),L);else{const{leave:J,delayLeave:ae,afterLeave:pe}=K,he=()=>r(U,D,P),Te=()=>{J(U,()=>{he(),pe&&pe()})};ae?ae(U,he,Te):Te()}else r(U,D,P)},ne=(T,D,P,H=!1,L=!1)=>{const{type:U,props:Y,ref:K,children:W,dynamicChildren:q,shapeFlag:ue,patchFlag:J,dirs:ae,cacheIndex:pe}=T;if(J===-2&&(L=!1),K!=null&&Io(K,null,P,T,!0),pe!=null&&(D.renderCache[pe]=void 0),ue&256){D.ctx.deactivate(T);return}const he=ue&1&&ae,Te=!ji(T);let Ce;if(Te&&(Ce=Y&&Y.onVnodeBeforeUnmount)&&Zt(Ce,D,T),ue&6)qe(T.component,P,H);else{if(ue&128){T.suspense.unmount(P,H);return}he&&mr(T,null,D,"beforeUnmount"),ue&64?T.type.remove(T,D,P,fe,H):q&&!q.hasOnce&&(U!==He||J>0&&J&64)?ze(q,D,P,!1,!0):(U===He&&J&384||!L&&ue&16)&&ze(W,D,P),H&&Z(T)}(Te&&(Ce=Y&&Y.onVnodeUnmounted)||he)&&Vt(()=>{Ce&&Zt(Ce,D,T),he&&mr(T,null,D,"unmounted")},P)},Z=T=>{const{type:D,el:P,anchor:H,transition:L}=T;if(D===He){Re(P,H);return}if(D===oo){F(T);return}const U=()=>{i(P),L&&!L.persisted&&L.afterLeave&&L.afterLeave()};if(T.shapeFlag&1&&L&&!L.persisted){const{leave:Y,delayLeave:K}=L,W=()=>Y(P,U);K?K(T.el,U,W):W()}else U()},Re=(T,D)=>{let P;for(;T!==D;)P=_(T),i(T),T=P;i(D)},qe=(T,D,P)=>{const{bum:H,scope:L,job:U,subTree:Y,um:K,m:W,a:q}=T;Vh(W),Vh(q),H&&ro(H),L.stop(),U&&(U.flags|=8,ne(Y,T,D,P)),K&&Vt(K,D),Vt(()=>{T.isUnmounted=!0},D),D&&D.pendingBranch&&!D.isUnmounted&&T.asyncDep&&!T.asyncResolved&&T.suspenseId===D.pendingId&&(D.deps--,D.deps===0&&D.resolve())},ze=(T,D,P,H=!1,L=!1,U=0)=>{for(let Y=U;Y<T.length;Y++)ne(T[Y],D,P,H,L)},je=T=>{if(T.shapeFlag&6)return je(T.component.subTree);if(T.shapeFlag&128)return T.suspense.next();const D=_(T.anchor||T.el),P=D&&D[ov];return P?_(P):D};let Xe=!1;const _e=(T,D,P)=>{T==null?D._vnode&&ne(D._vnode,null,null,!0):C(D._vnode||null,T,D,null,null,null,P),D._vnode=T,Xe||(Xe=!0,Sh(),Pp(),Xe=!1)},fe={p:C,um:ne,m:z,r:Z,mt:we,mc:y,pc:be,pbc:E,n:je,o:n};return{render:_e,hydrate:void 0,createApp:Cv(_e)}}function Ya({type:n,props:e},t){return t==="svg"&&n==="foreignObject"||t==="mathml"&&n==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function gr({effect:n,job:e},t){t?(n.flags|=32,e.flags|=4):(n.flags&=-33,e.flags&=-5)}function Gv(n,e){return(!n||n&&!n.pendingBranch)&&e&&!e.persisted}function im(n,e,t=!1){const r=n.children,i=e.children;if(de(r)&&de(i))for(let s=0;s<r.length;s++){const o=r[s];let l=i[s];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=i[s]=Un(i[s]),l.el=o.el),!t&&l.patchFlag!==-2&&im(o,l)),l.type===ca&&(l.el=o.el)}}function Uv(n){const e=n.slice(),t=[0];let r,i,s,o,l;const c=n.length;for(r=0;r<c;r++){const h=n[r];if(h!==0){if(i=t[t.length-1],n[i]<h){e[r]=i,t.push(r);continue}for(s=0,o=t.length-1;s<o;)l=s+o>>1,n[t[l]]<h?s=l+1:o=l;h<n[t[s]]&&(s>0&&(e[r]=t[s-1]),t[s]=r)}}for(s=t.length,o=t[s-1];s-- >0;)t[s]=o,o=e[o];return t}function sm(n){const e=n.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:sm(e)}function Vh(n){if(n)for(let e=0;e<n.length;e++)n[e].flags|=8}const Hv=Symbol.for("v-scx"),Bv=()=>io(Hv);function so(n,e,t){return om(n,e,t)}function om(n,e,t=xe){const{immediate:r,deep:i,flush:s,once:o}=t,l=dt({},t),c=e&&r||!e&&s!=="post";let h;if(os){if(s==="sync"){const A=Bv();h=A.__watcherHandles||(A.__watcherHandles=[])}else if(!c){const A=()=>{};return A.stop=sn,A.resume=sn,A.pause=sn,A}}const f=ut;l.call=(A,S,C)=>Yt(A,f,S,C);let p=!1;s==="post"?l.scheduler=A=>{Vt(A,f&&f.suspense)}:s!=="sync"&&(p=!0,l.scheduler=(A,S)=>{S?A():kc(A)}),l.augmentJob=A=>{e&&(A.flags|=4),p&&(A.flags|=2,f&&(A.id=f.uid,A.i=f))};const _=nv(n,e,l);return os&&(h?h.push(_):c&&_()),_}function $v(n,e,t){const r=this.proxy,i=Ye(n)?n.includes(".")?am(r,n):()=>r[n]:n.bind(r,r);let s;Ee(e)?s=e:(s=e.handler,t=e);const o=Es(this),l=om(i,s.bind(r),t);return o(),l}function am(n,e){const t=e.split(".");return()=>{let r=n;for(let i=0;i<t.length&&r;i++)r=r[t[i]];return r}}const qv=(n,e)=>e==="modelValue"||e==="model-value"?n.modelModifiers:n[`${e}Modifiers`]||n[`${zt(e)}Modifiers`]||n[`${lr(e)}Modifiers`];function zv(n,e,...t){if(n.isUnmounted)return;const r=n.vnode.props||xe;let i=t;const s=e.startsWith("update:"),o=s&&qv(r,e.slice(7));o&&(o.trim&&(i=t.map(f=>Ye(f)?f.trim():f)),o.number&&(i=t.map(wo)));let l,c=r[l=qa(e)]||r[l=qa(zt(e))];!c&&s&&(c=r[l=qa(lr(e))]),c&&Yt(c,n,6,i);const h=r[l+"Once"];if(h){if(!n.emitted)n.emitted={};else if(n.emitted[l])return;n.emitted[l]=!0,Yt(h,n,6,i)}}function lm(n,e,t=!1){const r=e.emitsCache,i=r.get(n);if(i!==void 0)return i;const s=n.emits;let o={},l=!1;if(!Ee(n)){const c=h=>{const f=lm(h,e,!0);f&&(l=!0,dt(o,f))};!t&&e.mixins.length&&e.mixins.forEach(c),n.extends&&c(n.extends),n.mixins&&n.mixins.forEach(c)}return!s&&!l?(Fe(n)&&r.set(n,null),null):(de(s)?s.forEach(c=>o[c]=null):dt(o,s),Fe(n)&&r.set(n,o),o)}function la(n,e){return!n||!Jo(e)?!1:(e=e.slice(2).replace(/Once$/,""),Ne(n,e[0].toLowerCase()+e.slice(1))||Ne(n,lr(e))||Ne(n,e))}function Lh(n){const{type:e,vnode:t,proxy:r,withProxy:i,propsOptions:[s],slots:o,attrs:l,emit:c,render:h,renderCache:f,props:p,data:_,setupState:A,ctx:S,inheritAttrs:C}=n,N=Ao(n);let j,B;try{if(t.shapeFlag&4){const F=i||r,se=F;j=rn(h.call(se,F,f,p,A,_,S)),B=l}else{const F=e;j=rn(F.length>1?F(p,{attrs:l,slots:o,emit:c}):F(p,null)),B=e.props?l:jv(l)}}catch(F){Ki.length=0,sa(F,n,1),j=bt(Pt)}let $=j;if(B&&C!==!1){const F=Object.keys(B),{shapeFlag:se}=$;F.length&&se&7&&(s&&F.some(vc)&&(B=Wv(B,s)),$=er($,B,!1,!0))}return t.dirs&&($=er($,null,!1,!0),$.dirs=$.dirs?$.dirs.concat(t.dirs):t.dirs),t.transition&&is($,t.transition),j=$,Ao(N),j}const jv=n=>{let e;for(const t in n)(t==="class"||t==="style"||Jo(t))&&((e||(e={}))[t]=n[t]);return e},Wv=(n,e)=>{const t={};for(const r in n)(!vc(r)||!(r.slice(9)in e))&&(t[r]=n[r]);return t};function Kv(n,e,t){const{props:r,children:i,component:s}=n,{props:o,children:l,patchFlag:c}=e,h=s.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&c>=0){if(c&1024)return!0;if(c&16)return r?xh(r,o,h):!!o;if(c&8){const f=e.dynamicProps;for(let p=0;p<f.length;p++){const _=f[p];if(o[_]!==r[_]&&!la(h,_))return!0}}}else return(i||l)&&(!l||!l.$stable)?!0:r===o?!1:r?o?xh(r,o,h):!0:!!o;return!1}function xh(n,e,t){const r=Object.keys(e);if(r.length!==Object.keys(n).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==n[s]&&!la(t,s))return!0}return!1}function Xv({vnode:n,parent:e},t){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===n&&(r.el=n.el),r===n)(n=e.vnode).el=t,e=e.parent;else break}}const cm=n=>n.__isSuspense;function Qv(n,e){e&&e.pendingBranch?de(n)?e.effects.push(...n):e.effects.push(n):sv(n)}const He=Symbol.for("v-fgt"),ca=Symbol.for("v-txt"),Pt=Symbol.for("v-cmt"),oo=Symbol.for("v-stc"),Ki=[];let xt=null;function ie(n=!1){Ki.push(xt=n?null:[])}function Yv(){Ki.pop(),xt=Ki[Ki.length-1]||null}let ss=1;function Fh(n,e=!1){ss+=n,n<0&&xt&&e&&(xt.hasOnce=!0)}function um(n){return n.dynamicChildren=ss>0?xt||Kr:null,Yv(),ss>0&&xt&&xt.push(n),n}function oe(n,e,t,r,i,s){return um(k(n,e,t,r,i,s,!0))}function Nc(n,e,t,r,i){return um(bt(n,e,t,r,i,!0))}function So(n){return n?n.__v_isVNode===!0:!1}function Er(n,e){return n.type===e.type&&n.key===e.key}const hm=({key:n})=>n??null,ao=({ref:n,ref_key:e,ref_for:t})=>(typeof n=="number"&&(n=""+n),n!=null?Ye(n)||At(n)||Ee(n)?{i:Mt,r:n,k:e,f:!!t}:n:null);function k(n,e=null,t=null,r=0,i=null,s=n===He?0:1,o=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&hm(e),ref:e&&ao(e),scopeId:Np,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Mt};return l?(Oc(c,t),s&128&&n.normalize(c)):t&&(c.shapeFlag|=Ye(t)?8:16),ss>0&&!o&&xt&&(c.patchFlag>0||s&6)&&c.patchFlag!==32&&xt.push(c),c}const bt=Jv;function Jv(n,e=null,t=null,r=0,i=null,s=!1){if((!n||n===qp)&&(n=Pt),So(n)){const l=er(n,e,!0);return t&&Oc(l,t),ss>0&&!s&&xt&&(l.shapeFlag&6?xt[xt.indexOf(n)]=l:xt.push(l)),l.patchFlag=-2,l}if(hw(n)&&(n=n.__vccOpts),e){e=Zv(e);let{class:l,style:c}=e;l&&!Ye(l)&&(e.class=An(l)),Fe(c)&&(Cc(c)&&!de(c)&&(c=dt({},c)),e.style=vs(c))}const o=Ye(n)?1:cm(n)?128:Op(n)?64:Fe(n)?4:Ee(n)?2:0;return k(n,e,t,r,i,o,s,!0)}function Zv(n){return n?Cc(n)||Yp(n)?dt({},n):n:null}function er(n,e,t=!1,r=!1){const{props:i,ref:s,patchFlag:o,children:l,transition:c}=n,h=e?tw(i||{},e):i,f={__v_isVNode:!0,__v_skip:!0,type:n.type,props:h,key:h&&hm(h),ref:e&&e.ref?t&&s?de(s)?s.concat(ao(e)):[s,ao(e)]:ao(e):s,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:l,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==He?o===-1?16:o|16:o,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:c,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&er(n.ssContent),ssFallback:n.ssFallback&&er(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return c&&r&&is(f,c.clone(f)),f}function dm(n=" ",e=0){return bt(ca,null,n,e)}function ew(n,e){const t=bt(oo,null,n);return t.staticCount=e,t}function It(n="",e=!1){return e?(ie(),Nc(Pt,null,n)):bt(Pt,null,n)}function rn(n){return n==null||typeof n=="boolean"?bt(Pt):de(n)?bt(He,null,n.slice()):So(n)?Un(n):bt(ca,null,String(n))}function Un(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:er(n)}function Oc(n,e){let t=0;const{shapeFlag:r}=n;if(e==null)e=null;else if(de(e))t=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),Oc(n,i()),i._c&&(i._d=!0));return}else{t=32;const i=e._;!i&&!Yp(e)?e._ctx=Mt:i===3&&Mt&&(Mt.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else Ee(e)?(e={default:e,_ctx:Mt},t=32):(e=String(e),r&64?(t=16,e=[dm(e)]):t=8);n.children=e,n.shapeFlag|=t}function tw(...n){const e={};for(let t=0;t<n.length;t++){const r=n[t];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=An([e.class,r.class]));else if(i==="style")e.style=vs([e.style,r.style]);else if(Jo(i)){const s=e[i],o=r[i];o&&s!==o&&!(de(s)&&s.includes(o))&&(e[i]=s?[].concat(s,o):o)}else i!==""&&(e[i]=r[i])}return e}function Zt(n,e,t,r=null){Yt(n,e,7,[t,r])}const nw=Kp();let rw=0;function iw(n,e,t){const r=n.type,i=(e?e.appContext:n.appContext)||nw,s={uid:rw++,vnode:n,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new R_(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Zp(r,i),emitsOptions:lm(r,i),emit:null,emitted:null,propsDefaults:xe,inheritAttrs:r.inheritAttrs,ctx:xe,data:xe,props:xe,attrs:xe,slots:xe,refs:xe,setupState:xe,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=zv.bind(null,s),n.ce&&n.ce(s),s}let ut=null;const sw=()=>ut||Mt;let Ro,$l;{const n=na(),e=(t,r)=>{let i;return(i=n[t])||(i=n[t]=[]),i.push(r),s=>{i.length>1?i.forEach(o=>o(s)):i[0](s)}};Ro=e("__VUE_INSTANCE_SETTERS__",t=>ut=t),$l=e("__VUE_SSR_SETTERS__",t=>os=t)}const Es=n=>{const e=ut;return Ro(n),n.scope.on(),()=>{n.scope.off(),Ro(e)}},Gh=()=>{ut&&ut.scope.off(),Ro(null)};function fm(n){return n.vnode.shapeFlag&4}let os=!1;function ow(n,e=!1,t=!1){e&&$l(e);const{props:r,children:i}=n.vnode,s=fm(n);Pv(n,r,s,e),Vv(n,i,t);const o=s?aw(n,e):void 0;return e&&$l(!1),o}function aw(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,Tv);const{setup:r}=t;if(r){cr();const i=n.setupContext=r.length>1?cw(n):null,s=Es(n),o=ws(r,n,0,[n.props,i]),l=op(o);if(ur(),s(),(l||n.sp)&&!ji(n)&&Up(n),l){if(o.then(Gh,Gh),e)return o.then(c=>{Uh(n,c)}).catch(c=>{sa(c,n,0)});n.asyncDep=o}else Uh(n,o)}else pm(n)}function Uh(n,e,t){Ee(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:Fe(e)&&(n.setupState=Rp(e)),pm(n)}function pm(n,e,t){const r=n.type;n.render||(n.render=r.render||sn);{const i=Es(n);cr();try{bv(n)}finally{ur(),i()}}}const lw={get(n,e){return wt(n,"get",""),n[e]}};function cw(n){const e=t=>{n.exposed=t||{}};return{attrs:new Proxy(n.attrs,lw),slots:n.slots,emit:n.emit,expose:e}}function ua(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(Rp(en(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in Wi)return Wi[t](n)},has(e,t){return t in e||t in Wi}})):n.proxy}function uw(n,e=!0){return Ee(n)?n.displayName||n.name:n.name||e&&n.__name}function hw(n){return Ee(n)&&"__vccOpts"in n}const si=(n,e)=>ev(n,e,os);function dw(n,e,t){const r=arguments.length;return r===2?Fe(e)&&!de(e)?So(e)?bt(n,null,[e]):bt(n,e):bt(n,null,e):(r>3?t=Array.prototype.slice.call(arguments,2):r===3&&So(t)&&(t=[t]),bt(n,e,t))}const fw="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ql;const Hh=typeof window<"u"&&window.trustedTypes;if(Hh)try{ql=Hh.createPolicy("vue",{createHTML:n=>n})}catch{}const mm=ql?n=>ql.createHTML(n):n=>n,pw="http://www.w3.org/2000/svg",mw="http://www.w3.org/1998/Math/MathML",yn=typeof document<"u"?document:null,Bh=yn&&yn.createElement("template"),gw={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,r)=>{const i=e==="svg"?yn.createElementNS(pw,n):e==="mathml"?yn.createElementNS(mw,n):t?yn.createElement(n,{is:t}):yn.createElement(n);return n==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:n=>yn.createTextNode(n),createComment:n=>yn.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>yn.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,t,r,i,s){const o=t?t.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),t),!(i===s||!(i=i.nextSibling)););else{Bh.innerHTML=mm(r==="svg"?`<svg>${n}</svg>`:r==="mathml"?`<math>${n}</math>`:n);const l=Bh.content;if(r==="svg"||r==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}e.insertBefore(l,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},Ln="transition",Vi="animation",as=Symbol("_vtc"),gm={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},yw=dt({},Vp,gm),_w=n=>(n.displayName="Transition",n.props=yw,n),vw=_w((n,{slots:e})=>dw(cv,ww(n),e)),yr=(n,e=[])=>{de(n)?n.forEach(t=>t(...e)):n&&n(...e)},$h=n=>n?de(n)?n.some(e=>e.length>1):n.length>1:!1;function ww(n){const e={};for(const b in n)b in gm||(e[b]=n[b]);if(n.css===!1)return e;const{name:t="v",type:r,duration:i,enterFromClass:s=`${t}-enter-from`,enterActiveClass:o=`${t}-enter-active`,enterToClass:l=`${t}-enter-to`,appearFromClass:c=s,appearActiveClass:h=o,appearToClass:f=l,leaveFromClass:p=`${t}-leave-from`,leaveActiveClass:_=`${t}-leave-active`,leaveToClass:A=`${t}-leave-to`}=n,S=Ew(i),C=S&&S[0],N=S&&S[1],{onBeforeEnter:j,onEnter:B,onEnterCancelled:$,onLeave:F,onLeaveCancelled:se,onBeforeAppear:Q=j,onAppear:v=B,onAppearCancelled:y=$}=e,g=(b,w,we,Je)=>{b._enterCancelled=Je,_r(b,w?f:l),_r(b,w?h:o),we&&we()},E=(b,w)=>{b._isLeaving=!1,_r(b,p),_r(b,A),_r(b,_),w&&w()},I=b=>(w,we)=>{const Je=b?v:B,Ge=()=>g(w,b,we);yr(Je,[w,Ge]),qh(()=>{_r(w,b?c:s),gn(w,b?f:l),$h(Je)||zh(w,r,C,Ge)})};return dt(e,{onBeforeEnter(b){yr(j,[b]),gn(b,s),gn(b,o)},onBeforeAppear(b){yr(Q,[b]),gn(b,c),gn(b,h)},onEnter:I(!1),onAppear:I(!0),onLeave(b,w){b._isLeaving=!0;const we=()=>E(b,w);gn(b,p),b._enterCancelled?(gn(b,_),Kh()):(Kh(),gn(b,_)),qh(()=>{b._isLeaving&&(_r(b,p),gn(b,A),$h(F)||zh(b,r,N,we))}),yr(F,[b,we])},onEnterCancelled(b){g(b,!1,void 0,!0),yr($,[b])},onAppearCancelled(b){g(b,!0,void 0,!0),yr(y,[b])},onLeaveCancelled(b){E(b),yr(se,[b])}})}function Ew(n){if(n==null)return null;if(Fe(n))return[Ja(n.enter),Ja(n.leave)];{const e=Ja(n);return[e,e]}}function Ja(n){return v_(n)}function gn(n,e){e.split(/\s+/).forEach(t=>t&&n.classList.add(t)),(n[as]||(n[as]=new Set)).add(e)}function _r(n,e){e.split(/\s+/).forEach(r=>r&&n.classList.remove(r));const t=n[as];t&&(t.delete(e),t.size||(n[as]=void 0))}function qh(n){requestAnimationFrame(()=>{requestAnimationFrame(n)})}let Tw=0;function zh(n,e,t,r){const i=n._endId=++Tw,s=()=>{i===n._endId&&r()};if(t!=null)return setTimeout(s,t);const{type:o,timeout:l,propCount:c}=bw(n,e);if(!o)return r();const h=o+"end";let f=0;const p=()=>{n.removeEventListener(h,_),s()},_=A=>{A.target===n&&++f>=c&&p()};setTimeout(()=>{f<c&&p()},l+1),n.addEventListener(h,_)}function bw(n,e){const t=window.getComputedStyle(n),r=S=>(t[S]||"").split(", "),i=r(`${Ln}Delay`),s=r(`${Ln}Duration`),o=jh(i,s),l=r(`${Vi}Delay`),c=r(`${Vi}Duration`),h=jh(l,c);let f=null,p=0,_=0;e===Ln?o>0&&(f=Ln,p=o,_=s.length):e===Vi?h>0&&(f=Vi,p=h,_=c.length):(p=Math.max(o,h),f=p>0?o>h?Ln:Vi:null,_=f?f===Ln?s.length:c.length:0);const A=f===Ln&&/\b(transform|all)(,|$)/.test(r(`${Ln}Property`).toString());return{type:f,timeout:p,propCount:_,hasTransform:A}}function jh(n,e){for(;n.length<e.length;)n=n.concat(n);return Math.max(...e.map((t,r)=>Wh(t)+Wh(n[r])))}function Wh(n){return n==="auto"?0:Number(n.slice(0,-1).replace(",","."))*1e3}function Kh(){return document.body.offsetHeight}function Aw(n,e,t){const r=n[as];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}const Co=Symbol("_vod"),ym=Symbol("_vsh"),zl={beforeMount(n,{value:e},{transition:t}){n[Co]=n.style.display==="none"?"":n.style.display,t&&e?t.beforeEnter(n):Li(n,e)},mounted(n,{value:e},{transition:t}){t&&e&&t.enter(n)},updated(n,{value:e,oldValue:t},{transition:r}){!e!=!t&&(r?e?(r.beforeEnter(n),Li(n,!0),r.enter(n)):r.leave(n,()=>{Li(n,!1)}):Li(n,e))},beforeUnmount(n,{value:e}){Li(n,e)}};function Li(n,e){n.style.display=e?n[Co]:"none",n[ym]=!e}const Iw=Symbol(""),Dw=/(^|;)\s*display\s*:/;function Sw(n,e,t){const r=n.style,i=Ye(t);let s=!1;if(t&&!i){if(e)if(Ye(e))for(const o of e.split(";")){const l=o.slice(0,o.indexOf(":")).trim();t[l]==null&&lo(r,l,"")}else for(const o in e)t[o]==null&&lo(r,o,"");for(const o in t)o==="display"&&(s=!0),lo(r,o,t[o])}else if(i){if(e!==t){const o=r[Iw];o&&(t+=";"+o),r.cssText=t,s=Dw.test(t)}}else e&&n.removeAttribute("style");Co in n&&(n[Co]=s?r.display:"",n[ym]&&(r.display="none"))}const Xh=/\s*!important$/;function lo(n,e,t){if(de(t))t.forEach(r=>lo(n,e,r));else if(t==null&&(t=""),e.startsWith("--"))n.setProperty(e,t);else{const r=Rw(n,e);Xh.test(t)?n.setProperty(lr(r),t.replace(Xh,""),"important"):n[r]=t}}const Qh=["Webkit","Moz","ms"],Za={};function Rw(n,e){const t=Za[e];if(t)return t;let r=zt(e);if(r!=="filter"&&r in n)return Za[e]=r;r=ta(r);for(let i=0;i<Qh.length;i++){const s=Qh[i]+r;if(s in n)return Za[e]=s}return e}const Yh="http://www.w3.org/1999/xlink";function Jh(n,e,t,r,i,s=I_(e)){r&&e.startsWith("xlink:")?t==null?n.removeAttributeNS(Yh,e.slice(6,e.length)):n.setAttributeNS(Yh,e,t):t==null||s&&!up(t)?n.removeAttribute(e):n.setAttribute(e,s?"":un(t)?String(t):t)}function Zh(n,e,t,r,i){if(e==="innerHTML"||e==="textContent"){t!=null&&(n[e]=e==="innerHTML"?mm(t):t);return}const s=n.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const l=s==="OPTION"?n.getAttribute("value")||"":n.value,c=t==null?n.type==="checkbox"?"on":"":String(t);(l!==c||!("_value"in n))&&(n.value=c),t==null&&n.removeAttribute(e),n._value=t;return}let o=!1;if(t===""||t==null){const l=typeof n[e];l==="boolean"?t=up(t):t==null&&l==="string"?(t="",o=!0):l==="number"&&(t=0,o=!0)}try{n[e]=t}catch{}o&&n.removeAttribute(i||e)}function Tr(n,e,t,r){n.addEventListener(e,t,r)}function Cw(n,e,t,r){n.removeEventListener(e,t,r)}const ed=Symbol("_vei");function kw(n,e,t,r,i=null){const s=n[ed]||(n[ed]={}),o=s[e];if(r&&o)o.value=r;else{const[l,c]=Pw(e);if(r){const h=s[e]=Ow(r,i);Tr(n,l,h,c)}else o&&(Cw(n,l,o,c),s[e]=void 0)}}const td=/(?:Once|Passive|Capture)$/;function Pw(n){let e;if(td.test(n)){e={};let r;for(;r=n.match(td);)n=n.slice(0,n.length-r[0].length),e[r[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):lr(n.slice(2)),e]}let el=0;const Mw=Promise.resolve(),Nw=()=>el||(Mw.then(()=>el=0),el=Date.now());function Ow(n,e){const t=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=t.attached)return;Yt(Vw(r,t.value),e,5,[r])};return t.value=n,t.attached=Nw(),t}function Vw(n,e){if(de(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const nd=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,Lw=(n,e,t,r,i,s)=>{const o=i==="svg";e==="class"?Aw(n,r,o):e==="style"?Sw(n,t,r):Jo(e)?vc(e)||kw(n,e,t,r,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):xw(n,e,r,o))?(Zh(n,e,r),!n.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Jh(n,e,r,o,s,e!=="value")):n._isVueCE&&(/[A-Z]/.test(e)||!Ye(r))?Zh(n,zt(e),r,s,e):(e==="true-value"?n._trueValue=r:e==="false-value"&&(n._falseValue=r),Jh(n,e,r,o))};function xw(n,e,t,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in n&&nd(e)&&Ee(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=n.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return nd(e)&&Ye(t)?!1:e in n}const ko=n=>{const e=n.props["onUpdate:modelValue"]||!1;return de(e)?t=>ro(e,t):e};function Fw(n){n.target.composing=!0}function rd(n){const e=n.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const ei=Symbol("_assign"),Qt={created(n,{modifiers:{lazy:e,trim:t,number:r}},i){n[ei]=ko(i);const s=r||i.props&&i.props.type==="number";Tr(n,e?"change":"input",o=>{if(o.target.composing)return;let l=n.value;t&&(l=l.trim()),s&&(l=wo(l)),n[ei](l)}),t&&Tr(n,"change",()=>{n.value=n.value.trim()}),e||(Tr(n,"compositionstart",Fw),Tr(n,"compositionend",rd),Tr(n,"change",rd))},mounted(n,{value:e}){n.value=e??""},beforeUpdate(n,{value:e,oldValue:t,modifiers:{lazy:r,trim:i,number:s}},o){if(n[ei]=ko(o),n.composing)return;const l=(s||n.type==="number")&&!/^0\d/.test(n.value)?wo(n.value):n.value,c=e??"";l!==c&&(document.activeElement===n&&n.type!=="range"&&(r&&e===t||i&&n.value.trim()===c)||(n.value=c))}},jl={deep:!0,created(n,{value:e,modifiers:{number:t}},r){const i=Zo(e);Tr(n,"change",()=>{const s=Array.prototype.filter.call(n.options,o=>o.selected).map(o=>t?wo(Po(o)):Po(o));n[ei](n.multiple?i?new Set(s):s:s[0]),n._assigning=!0,bo(()=>{n._assigning=!1})}),n[ei]=ko(r)},mounted(n,{value:e}){id(n,e)},beforeUpdate(n,e,t){n[ei]=ko(t)},updated(n,{value:e}){n._assigning||id(n,e)}};function id(n,e){const t=n.multiple,r=de(e);if(!(t&&!r&&!Zo(e))){for(let i=0,s=n.options.length;i<s;i++){const o=n.options[i],l=Po(o);if(t)if(r){const c=typeof l;c==="string"||c==="number"?o.selected=e.some(h=>String(h)===String(l)):o.selected=S_(e,l)>-1}else o.selected=e.has(l);else if(ra(Po(o),e)){n.selectedIndex!==i&&(n.selectedIndex=i);return}}!t&&n.selectedIndex!==-1&&(n.selectedIndex=-1)}}function Po(n){return"_value"in n?n._value:n.value}const Gw=["ctrl","shift","alt","meta"],Uw={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,e)=>Gw.some(t=>n[`${t}Key`]&&!e.includes(t))},sd=(n,e)=>{const t=n._withMods||(n._withMods={}),r=e.join(".");return t[r]||(t[r]=(i,...s)=>{for(let o=0;o<e.length;o++){const l=Uw[e[o]];if(l&&l(i,e))return}return n(i,...s)})},Hw={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Bw=(n,e)=>{const t=n._withKeys||(n._withKeys={}),r=e.join(".");return t[r]||(t[r]=i=>{if(!("key"in i))return;const s=lr(i.key);if(e.some(o=>o===s||Hw[o]===s))return n(i)})},$w=dt({patchProp:Lw},gw);let od;function qw(){return od||(od=xv($w))}const zw=(...n)=>{const e=qw().createApp(...n),{mount:t}=e;return e.mount=r=>{const i=Ww(r);if(!i)return;const s=e._component;!Ee(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=t(i,!1,jw(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e};function jw(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function Ww(n){return Ye(n)?document.querySelector(n):n}const Kw="/Eredan-Arena-Box/assets/EABox-w-B8FcAl57.svg",dn=(n,e)=>{const t=n.__vccOpts||n;for(const[r,i]of e)t[r]=i;return t},Xw={mounted(){this.loadFacebookSDK()},methods:{redirectToNewPage(){window.location.href="https://discord.gg/uGjZ84wUEU"},loadFacebookSDK(){if(window.FB)window.FB.XFBML.parse();else{let n=document.createElement("script");n.src="https://connect.facebook.net/zh_TW/sdk.js#xfbml=1&version=v18.0",n.async=!0,document.body.appendChild(n)}}}},Qw={class:"intro-container"};function Yw(n,e,t,r,i,s){const o=wv("Div");return ie(),oe("div",Qw,[bt(o,null,{default:Pc(()=>[k("button",{class:"DC",onClick:e[0]||(e[0]=(...l)=>s.redirectToNewPage&&s.redirectToNewPage(...l))},e[1]||(e[1]=[k("img",{src:"https://support.discord.com/hc/theming_assets/01HZPN9XBJQZSPXWYYVY76TBEE"},null,-1)]))]),_:1}),e[2]||(e[2]=ew('<div class="dashed-line" data-v-a6eb985e></div><div class="FB" data-v-a6eb985e><div class="fb-page" data-href="https://www.facebook.com/EredanArenaOfficial/" data-tabs="timeline" data-width="500" data-height="600" data-small-header="false" data-adapt-container-width="true" data-hide-cover="false" data-show-facepile="true" data-v-a6eb985e></div></div><div class="dashed-line" data-v-a6eb985e></div><p class="intro-text" data-v-a6eb985e> Due to the scarcity of information available for this game, I created this website to make it easier for players to enjoy their experience. </p><p class="intro-text" data-v-a6eb985e>Most of the data here is sourced from the official Discord, and my role is simply to organize and share it.</p>',5))])}const Jw=dn(Xw,[["render",Yw],["__scopeId","data-v-a6eb985e"]]),Zw={key:0},e0={class:"character-card-container"},t0=["src","onClick"],n0={key:1,style:{"padding-top":"50px"}},r0={class:An(["character-container","w-border"])},i0=["src"],s0={class:"character-info"},o0={class:"tags"},a0=["onMouseover"],l0={__name:"CardFilter",setup(n){re("filter");const e=re({}),t=re(!1),r=re(null),i=re({show:!1,text:"",x:0,y:0}),s=async()=>{try{const p=await fetch("./src/data/card.json");e.value=await p.json()}catch(p){console.error("讀取 JSON 失敗：",p)}};Zn(()=>{s()});const o=p=>{t.value=!0,r.value=p},l=p=>({craft:"tag-craft",allava:"tag-allava",lightroot:"tag-lightroot",opp_spore:"tag-opp-spore"})[p]||"tag-default",c=(p,_)=>{i.value.text=h[p]||"無說明",i.value.x=_.pageX+10,i.value.y=_.pageY+10,i.value.show=!0},h={craft:"與工匠相關的能力",allava:"阿瓦隆相關技能",lightroot:"光根系統強化",opp_spore:"對抗孢子的能力"},f=()=>{i.value.show=!1};return(p,_)=>(ie(),oe(He,null,[t.value?It("",!0):(ie(),oe("div",Zw,[_[1]||(_[1]=k("h1",null,"Card",-1)),_[2]||(_[2]=k("p",null,"Some cards are shown here, but they are not comprehensive",-1)),k("div",e0,[(ie(!0),oe(He,null,Nt(e.value,(A,S)=>(ie(),oe("div",{key:S,class:"character-card"},[k("img",{src:"src/assets/img/shibi_bg/"+A.id+".png",onClick:C=>o(A)},null,8,t0)]))),128))])])),t.value?(ie(),oe("div",n0,[k("button",{class:"back-button",onClick:_[0]||(_[0]=A=>t.value=!t.value)},_[3]||(_[3]=[k("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[k("path",{d:"M15 18l-6-6 6-6",stroke:"black","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])),k("div",null,[k("div",r0,[k("img",{src:r.value.img_src+".png",class:"character-img"},null,8,i0),k("div",s0,[k("p",null,[k("strong",null,We(r.value.name),1)]),k("p",null,[_[4]||(_[4]=k("strong",null,"ID：",-1)),dm(" "+We(r.value.id),1)]),k("div",o0,[_[5]||(_[5]=k("strong",null,"標籤：",-1)),(ie(!0),oe(He,null,Nt(r.value.tag,(A,S)=>(ie(),oe("span",{key:S,class:An(["tag",l(A)]),onMouseover:C=>c(A,C),onMouseleave:f},We(A),43,a0))),128))]),i.value.show?(ie(),oe("div",{key:0,class:"tooltip",style:vs({top:i.value.y+"px",left:i.value.x+"px"})},[_[6]||(_[6]=k("img",{src:"src/assets/img/capacites/113.png",style:{width:"50px"}},null,-1)),k("p",null,We(i.value.text),1)],4)):It("",!0)])])])])):It("",!0)],64))}},c0=dn(l0,[["__scopeId","data-v-65326c50"]]),u0=[{name:"swordDice",id:"000"},{name:"redDice",id:"001"},{name:"blueDice",id:"002"},{name:"yellowDice",id:"003"},{"full-name":"Sap Hearts",name:"sap",id:"1"},{"full-name":"Nehantists",name:"neh",id:"3"},{"full-name":"Zil Warriors",name:"zil",id:"5"},{"full-name":"Avalonians",name:"ava",id:"32"},{"full-name":"Tempus",name:"tem",id:"51"},{"full-name":"The Council",name:"cou",id:"57"},{"full-name":"Stonelinkers",name:"sto",id:"9"},{"full-name":"Kotoba",name:"kot",id:"2"},{"full-name":"Desert Nomads",name:"nom",id:"6"},{"full-name":"Noz'Dingard Envoys",name:"noz",id:"4"},{"full-name":"Pirates",name:"pir",id:"7"},{"full-name":"Winter Tribes",name:"win",id:"41"},{"full-name":"Equinoxians",name:"equinox",id:"58"},{"full-name":"Runic Legion",name:"run",id:"8"},{"full-name":"Mercenaries",name:"mer",id:"10"},{name:"warrior",id:"11"},{name:"marauder",id:"13"},{name:"craftsman",id:"15"},{name:"unknown",id:"17"},{name:"bard",id:"40"},{name:"sidekick",id:"54"},{name:"mage",id:"12"},{name:"priest",id:"14"},{name:"colossus",id:"33"},{name:"captain",id:"53"},{name:"protector",id:"56"},{name:"berserker",id:"16"},{name:"beast",id:"18"},{name:"demon",id:"20"},{name:"elfine",id:"22"},{name:"human",id:"27"},{name:"guem","full-name":"guemelite",id:"25"},{name:"iceelf",id:"21"},{name:"unkrace",id:"28"},{name:"dais",id:"19"},{name:"solarian",id:"30"},{name:"dragon",id:"52"},{name:"undead",id:"29"},{name:"eltarite",id:"23"},{name:"naga",id:"55"},{name:"golem",id:"24"},{name:"homchai",id:"26"}],h0={AVALONIAN:{name:{zh:"阿瓦隆王國"},description:{en:"Led by the mighty king Aez and their beloved queen Aelide, the small Kingdom of Avalonia stands strong against any challenge. Avalonians never back down: the harder the battle gets, the stronger they become.",zh:"由強大的國王艾茲與他們心愛的女王艾莉德領導，阿瓦隆這個小王國在任何挑戰面前都保持堅強。阿瓦隆人從不退縮：戰鬥越艱難，他們便越強大。"},"Common Races":{en:"Human",zh:"人類"},"Common Features":{en:"Runic Skills, Runes, Shock, Bulwark, +Strength",zh:"符文技能, 符文, 震懾, 防禦, +力量"}},KOTOBA:{name:{zh:"言葉"},description:{en:"The Kotoba banner rallies the strongest fighters of the Xzia Empire, an ancient reign built upon a single belief: Strength can conquer anything. Each Kotoba Hero devotes themselves fully to that belief.",zh:"言葉旗幟召集了西亞帝國最強的戰士，這是一個建立在單一信念上的古老政權：力量可以征服一切。每位言葉英雄都全身心投入這一信念。"},"Common Races":{en:"Human",zh:"人類"},"Common Features":{en:"Strength Skills, Fireball, Dodge, Backstab, Shock",zh:"力量技能, 火球, 閃避, 背刺, 震懾"}},"SAP HEART":{name:{zh:"樹心"},description:{en:"The Sap Heart guild includes all heroes with a strong bond with nature and an iron will to protect the World Tree. They fight relentlessly, but are also gifted with incredible healing powers.",zh:"樹心公會包含了所有與大樹有著強大聯繫，並擁有保護世界樹的堅定意志的英雄。他們無畏地戰鬥，並且擁有強大的治癒能力。"},"Common Races":{en:"Elfine, Hom'chai, Dais",zh:"精靈族, 荷姆柴, 戴斯族"},"Common Features":{en:"Heal, Thorn, +/x Strength, Physical Attack, Rage",zh:"治療, 荊棘, +/x 力量, 物理攻擊, 暴怒"}},PIRATE:{name:{zh:"海盜"},description:{en:"Roaming across the seas of Guem, these swashbucklers are very dangerous because they act as though they have nothing to lose. They specialize in striking their opponents with thunder and powder blasts.",zh:"在格姆的海域上游蕩，這些海盜非常危險，因為他們的行為如同什麼都不在乎。他們專精於用雷霆和火藥攻擊敵人。"},"Common Races":{en:"Human, Guemelite, Beast, Golem",zh:"人類, 格姆人, 野獸, 魔像"},"Common Features":{en:"Lightning, Powder, +Strength, Thunderstruck",zh:"閃電, 火藥, +力量, 雷擊"}},"NOZ'DINGARD ENVOY":{name:{zh:"諾茲丁加德使者"},description:{en:"The Noz'Dingard Envoys are great experts in all kinds of magic. With the mighty strength of the Dragon Knights, the lethal dexterity of the Witchblades, and the arcane knowledge of the Compendium, Draconia stands stronger than ever.",zh:"諾茲丁加德使者是各種魔法的偉大專家。憑藉著龍騎士的強大力量、女巫劍刃的致命敏捷，還有《魔典》中的神秘知識，德拉科尼亞比以往更加強大。"},"Common Races":{en:"Human, Guemelite, Golem",zh:"人類, 格姆人, 魔像"},"Common Features":{en:"Skills based on dice colour, +DMG, Fireball, Spellbreaker",zh:"基於骰子顏色的技能, +傷害, 火球, 破魔"}},"ZIL WARRIORS":{name:{zh:"齊爾戰士"},description:{en:"The Zil Warriors are the most wacky and erratic fellows you'll ever meet. Extremely aggressive and unpredictable, they will downright tear you to shreds or scare you to the bone.",zh:"齊爾戰士是你會遇到的最瘋狂、最不可預測的人。他們極具攻擊性且行為無常，會把你撕成碎片，或者把你嚇得魂飛魄散。"},"Common Races":{en:"Human, Beast, Guemelite",zh:"人類, 野獸, 格姆人"},"Common Features":{en:"Critical, Backstab, Terror, Mimic, Berserk",zh:"暴擊, 背刺, 恐懼, 模仿, 狂暴"}},"RUNIC LEGION":{name:{zh:"符文軍團"},description:{en:"The remote region of Tantad is home to the greatest army the lands of Guem has ever known: the Runic Legion. Strong, firm, and proud, the Legion's tactical prowess is unparalleled.",zh:"遙遠的坦塔德地區是格姆大陸上最強大的軍隊——符文軍團的故鄉。這支軍隊強大、堅定、自豪，並且在戰術上無人能敵。"},Races:{en:"Human, Beast, Guemelite",zh:"人類, 野獸, 格姆人"},"Common Features":{en:"Runic Skills, Runes, Shock, Bulwark, +Strength",zh:"符文技能, 符文, 震懾, 防禦, +力量"}},Nomades:{name:{zh:"遊牧民族"},description:{en:"The Nomads inhabit the unforgiving southern lands of Guem, where the Desert dictates its own laws of survival. These harsh life conditions eventually turned the Nomads into magnificent fighters, blessed with their faith in multiple gods.",zh:"遊牧民族生活在格姆大陸的無情南方荒漠，這裡的沙漠擁有自己的生存法則。惡劣的生存條件最終讓遊牧民族成為了強大的戰士，並因信仰多神而獲得祝福。"},"Common Races":{en:"Human, Solarian, Undead",zh:"人類, 索拉利安, 死屍"},"Common Features":{en:"Resilience, Blessing, Scarab, Eclipse, Smite",zh:"韌性, 祝福, 神蠍, 蝕, 斬擊"}},NEHANTISTE:{name:{zh:"尼漢提斯特"},description:{en:"The depths of Guem host a terrible, hellish army, led by none other than the Dark Lord Nehant, sworn enemy of all life. These hellspawn specialize in burning down their opponents and rendering them unable to fight back.",zh:"格姆大陸的深淵中，存在著一支可怕的地獄軍隊，由黑暗領主尼漢領導，他是所有生命的死敵。這些地獄的後裔專門燒盡敵人，讓他們無法反抗。"},"Common Races":{en:"Demon, Undead, Guemelite",zh:"惡魔, 死屍, 格姆人"},"Common Features":{en:"Fireball, Opp -DMG, Life Drain, Berserk",zh:"火球, 反傷, 生命吸取, 狂暴"}},MERCENARY:{name:{zh:"雇傭兵"},description:{en:"Mercenaries have no affiliation whatsoever with any existing guild. They have neither unique characteristics nor themes, but they host very powerful heroes that can be occasionally rallied by other guilds.",zh:"雇傭兵並不隸屬於任何現有的公會。他們沒有獨特的特徵或主題，但他們擁有非常強大的英雄，偶爾會被其他公會招募。"},"Common Races":{en:"N/A",zh:"無"},"Common Features":{en:"N/A",zh:"無"}},TEMPUS:{name:{zh:"時光法師"},description:{en:"The Tempus are a restricted group of enigmatic spellweavers that control the flow of space and time. They are very strategic heroes that specialize in taking the reins of the match and turning the opponents' tactics against them.",zh:"時光法師是一群神秘的法師，他們掌控著空間與時間的流動。這些英雄非常具戰略性，擅長掌握比賽的主導權，並將對手的戰術反轉為己用。"},"Common Races":{en:"Mage, Priest",zh:"法師, 牧師"},"Common Features":{en:"Déjà Vu, Portal",zh:"既視感, 傳送門"}},"WINTER TRIBES":{name:{zh:"冬季部落"},description:{en:"The Winter Tribes thrive in the deep north, an unforgiving place where the rattling cold claims most lives. But some managed to survive and fully embrace the Icy essence of these lands, reaching new heights of power.",zh:"冬季部落生存於格姆大陸的極北地區，那裡的嚴寒環境使大多數生命無法生還。但有些人成功存活並完全融入這片冰冷大地的精髓，達到了新的力量巔峰。"},"Common Races":{en:"Ice Elves",zh:"冰精靈"},"Common Features":{en:"Icy Skills, Frostbite, Ice, Berserk, +Strength",zh:"冰霜技能, 凍傷, 冰霜, 狂暴, +力量"}},"STONES LINKER":{name:{zh:"石之聯結者"},description:{en:"The Stone Linkers are a complex guild composed of powerful Guemelites. It is led by Master Maen and Master-Linker Laelyse, who are also members of the Guild Council. For obscure reasons, they have long remained isolated from other guilds, but since the arrival of the Equinoxians in the lands of Guem, they advocate for alliances between guilds to defeat the enemy.",zh:"石之聯結者是一個由強大的格姆人組成的複雜公會。它由馬恩大師和聯結者萊莉絲大師領導，他們同時也是公會議會的成員。由於某些不明原因，他們長期與其他公會保持隔離，但自從春秋大陸的力量來到格姆大陸後，他們開始倡導公會間的聯盟，以共同對抗敵人。"},"Common Races":{en:"N/A",zh:"無"},"Common Features":{en:"N/A",zh:"無"}},"THE COUNCIL":{name:{zh:""},description:{en:"",zh:""},"Common Races":{en:"",zh:""},"Common Features":{en:"",zh:""}},EQUINOXIANS:{name:{zh:""},description:{en:"",zh:""},"Common Races":{en:"",zh:""},"Common Features":{en:"",zh:""}}},d0=["Warrior","Marauder","Craftsman","Unknown","Bard","Sidekick","Mage","Priest","Colossus","Captain","Protector","Berserker"],f0=["Beast","Demon","Elfine","Human","Guemelite","Ice Elf","unkrace","Dais","Solarian","Dragon","Undead","Eltarite","Naga","Golem","Homchai"],p0=JSON.parse(`[{"name":"Absorb","id":"4394","description":"Each of your opponents lose X of the specified alteration and you gain X of that alteration for each of them. \\nYou gain even if they didn't lose anything.","img_url":"https://www.eredan-arena.com/images/HD/capacites/4394.png"},{"name":"Aftermath","id":"8407","description":"Negative alteration.\\nAt the start of the fight OR at the end of skill activation phase suffer X Flat DMG.\\nThis alteration is consumed when triggered.\\nFlat DMG is a DMG that ignores everything.","img_url":"https://www.eredan-arena.com/images/HD/capacites/8407.png"},{"name":"Ageless Wisdom","id":"9612","description":"At the start of the fight, if you have at least:\\n2 Dice Rerolls lefting: you get 10 Dice Rerolls\\n4 Dice Rerolls lefting: deal 3 times as much Spellbreaker DMG as your opp Strength\\n8 Rerolls lefting: all your heroes receives 5 Stardust.\\nSpellbreaker damage is a normal damage that also removes half of a random positive alteration from your opponent.","img_url":"https://www.eredan-arena.com/images/HD/capacites/9612.png"},{"name":"Allergy Bouquet","id":"5930","description":"Passive.\\nEach time you activate an ability, the current TOTAL DMG you have been dealt is increased by 5%.\\n(The damage caused ignores any alteration)","img_url":"https://www.eredan-arena.com/images/HD/capacites/5930.png"},{"name":"Allure","id":"5868","description":"Negative Alteration.\\nThe next X times you increase or obtain a positive alteration, half (rounded up) of this increase/new alteration is given to your opponent instead. (Only the increased part is considered if the card already has the alteration)\\nThis skill currently has a bug that when the holder gets an alteration with value 1, it is consumed but happens nothing.","img_url":"https://www.eredan-arena.com/images/HD/capacites/5868.png"},{"name":"Alluring Skill","id":"5868","description":"After the skill effect, applies to the opponent 1 Allure.","img_url":"https://www.eredan-arena.com/images/HD/capacites/5868.png"},{"name":"Almighty Frost","id":"9715","description":"Passive.\\nEach time your opponent receives a Frost token, you get 20 Might for each frost token received by them.\\nIf you have more than 200 Might, you get 1 Critical instead.","img_url":"https://www.eredan-arena.com/images/HD/capacites/9715.png"},{"name":"Angry Totem","id":"6652","description":"Passive. Neutral Alteration.\\nEach time you gain Strength, your opponent's increase by 20% of it for each Angry Totem you have.\\nThis effect cannot trigger another totem.","img_url":"https://www.eredan-arena.com/images/HD/capacites/6652.png"},{"name":"Arcane Barrier","id":"4798","description":"Positive Alteration. Shield-like.\\nAbsorb the X next DMG you suffer (Normal and Shock DMG only).\\nDuring the combat, while you possess this alteration, every time you receive a negative alteration, you inflict a Shock 500 to your opponent, and every time you receive a positive alteration that isn't Arcane Barrier, you receive more 500 Arcane Barrier.\\nIncreasing alterations triggers the side effect too.\\nShock DMG is a DMG that cannot be altered by any alteration, but it cannot ignore shield-like skills.","img_url":"https://www.eredan-arena.com/images/HD/capacites/4798.png"},{"name":"Aura","id":"q5vmftf","description":"Neutral Alteration. Passive.\\nIncreases the value of a specified alteration either by a given value or by a given percentage.","img_url":"https://i.imgur.com/q5vmftf.png"},{"name":"Azure Tsunami","id":"3950","description":"At start of the combat:\\nFor each :blueDice: causes 1000 Pure DMG.\\nIncreases all your positive alterations by 25% (rounded up).\\nPure DMG is a DMG that ignores any alteration that could reduce or prevent it.","img_url":"https://www.eredan-arena.com/images/HD/capacites/3950.png"},{"name":"Backstab","id":"110","description":"Deals X Normal DMG to your opponent.\\nYour opponent loses X/2 Strength.\\nNormal DMG is a DMG that can be altered by anything.","img_url":"https://www.eredan-arena.com/images/HD/capacites/110.png"},{"name":"Barrage","id":"4141","description":"Deal X Normal DMG to your opponent.\\nYour opponent receives X/10 DMG-.\\nRepeat this skill effect for each Powder your opponent has. Consumes his powders.\\nNormal DMG is a DMG that can be altered by anything.","img_url":"https://www.eredan-arena.com/images/HD/capacites/4141.png"},{"name":"Berserk","id":"50","description":"Positive alteration.\\nEach time you suffer a DMG that is not Flat DMG, increases your Strength by X.\\nFlat DMG is a DMG that ignores every alteration from you and your opponent.","img_url":"https://www.eredan-arena.com/images/HD/capacites/50.png"},{"name":"Big Bang Requiem","id":"8049","description":"This Alteration's tick starts at 12, each time one of your opponent dice change, the tick goes down by 1 and your opponent receives 300 Echo.\\nWhen the tick goes down to 0: All opp dice are changed to :yellowDice: & deal 99 999 DMG.","img_url":"https://www.eredan-arena.com/images/HD/capacites/8049.png"},{"name":"Bite","id":"8595","description":"Deal X normal damage and your opponent receive 100 Bleeding.","img_url":"https://www.eredan-arena.com/images/HD/capacites/8595.png"},{"name":"Bleeding","id":"4535","description":"When the bleeding hero takes damage, he immediately suffers an additional flat damage equal to his bleeding value.\\nIf the damage is absorbed or is equal 0, Bleeding won't trigger.","img_url":"https://www.eredan-arena.com/images/HD/capacites/4535.png"},{"name":"Blessed Seeds","id":"7088","description":"The next X times you activate an ability, you receive 200 Lightroot.","img_url":"https://www.eredan-arena.com/images/HD/capacites/7088.png"},{"name":"Blessing","id":"419","description":"Each time you deal DMG, you are healed by X.","img_url":"https://www.eredan-arena.com/images/HD/capacites/419.png"},{"name":"Blizzard","id":"258","description":"Positive alteration. Shield-like.\\nAbsorb the X next DMG you suffer (Normal and Shock DMG only).\\nEach time Blizzard absorbs DMG, your opponent gets 1 Frost.","img_url":"https://www.eredan-arena.com/images/HD/capacites/258.png"},{"name":"Bloodthirsty Thorns","id":"9193","description":"Passive.\\nEach time your heroes' Thorns deal damage, their opponent receives 10% of it's value as Bleeding.","img_url":"https://www.eredan-arena.com/images/HD/capacites/9193.png"},{"name":"Blue Gift","id":"3991","description":"Neutral Alteration.\\nAfter your opponent have dealt DMG to you and your DMG suffered is higher or equal to 5000 DMG, receive 800 Shield for each Blue Gift you have and consume all.\\nIf you receive a gift after you already have 5000 suffered DMG, the gift is going to trigger in the next DMG you suffer.","img_url":"https://www.eredan-arena.com/images/HD/capacites/3991.png"},{"name":"Brain Freeze","id":"7089","description":"The 2 heroes in combat lose all their positive alterations and all their :swordDice: become :redDice:.","img_url":"https://www.eredan-arena.com/images/HD/capacites/7089.png"},{"name":"Brave skill","id":"GMSqyhE","description":"The skill is amplified by half if your opponent is more wounded than you.","img_url":"https://i.imgur.com/GMSqyhE.png"},{"name":"Bulwark","id":"723","description":"All the damage received above X is reduced to X.","img_url":"https://www.eredan-arena.com/images/HD/capacites/723.png"},{"name":"Burgundy Gift","id":"9716","description":"Neutral Alteration.\\nAt the start of the fight, your active allies receive 2 Stardust.","img_url":"https://www.eredan-arena.com/images/HD/capacites/9716.png"},{"name":"Burning Light","id":"4593","description":"Every time your heroes are healed, they cause a DMG to their opponents equals 35% of the Heal.","img_url":"https://www.eredan-arena.com/images/HD/capacites/4593.png"},{"name":"Caress of Death","id":"7458","description":"Steal your opponent's positive alterations one by one. For each stolen alteration deal 1000 Life Drain DMG.\\nA Life Drain DMG is a Normal DMG that heals you by the same starting value.\\nThe opposing positive are stolen BEFORE the Life Drains.","img_url":"https://www.eredan-arena.com/images/HD/capacites/7458.png"},{"name":"Chain Lightning","id":"4059","description":"If the card suffers from the thunderstruck effect, it spreads it at 30% to its allies.","img_url":"https://www.eredan-arena.com/images/HD/capacites/4059.png"},{"name":"Chanelled Lightning","id":"8738","description":"Negative Alteration.\\nAt the start of the fight, suffer X Lightning DMG and your allies receives X/2 Chanelled Lightning.\\nLightning DMG is a normal DMG that applies 10% of its value as Thunderstruck to the opponent.","img_url":"https://www.eredan-arena.com/images/HD/capacites/8738.png"},{"name":"Charged Skill","id":"HQAxqc8","description":"Increases the skill value by half consuming 1 Powder or 100 Thunderstruck on you.\\n(Powder has priority if you have both.)","img_url":"https://i.imgur.com/HQAxqc8.png"},{"name":"Charts of Infinity","id":"6344","description":"Neutral Alteration.\\nThe next times you activate a skill deal 2000 pure DMG and your opponent receives half of one of your negative alterations, and his allies receive 25% of it.\\nPure DMG is a DMG that ignores all alterations that could reduce or prevent it.\\nYou do not lose any part of your negative alterations.","img_url":"https://www.eredan-arena.com/images/HD/capacites/6344.png"},{"name":"Chromatic Symphony","id":"5757","description":"At the start of combat, your opponent receives 500 Echo for each of your unique dice pairs (RR or BB or YY or SS).","img_url":"https://www.eredan-arena.com/images/HD/capacites/5757.png"},{"name":"Cleaver of Athorg","id":"5754","description":"Neutral Alteration.\\nEach time you activate a Skill, your opponent receive 2 Frost for each of your :swordDice:.\\nThis alteration isn't consumable.","img_url":"https://www.eredan-arena.com/images/HD/capacites/5754.png"},{"name":"Cohesion","id":"1750","description":"At the start of combat, the value of your skills is increased by 10% for each of the specified allies.","img_url":"https://www.eredan-arena.com/images/HD/capacites/1750.png"},{"name":"Confusion","id":"8778","description":"Negative Alteration. Consumable\\nWhen the holder of this debuff gets hit by a :swordDice:, the holder causes a :swordDice: DMG to himself too.\\nThe Confusion DMG is a normal DMG that the card causes to itself considering all the alterations he has, i.e., consuming own Criticals, increased by DMG+, decreased by DMG-...","img_url":"https://www.eredan-arena.com/images/HD/capacites/8778.png"},{"name":"Constricting Skill","id":"6872","description":"After the skill effect, applies to the opponent as much Constriction as half of the skill value.","img_url":"https://www.eredan-arena.com/images/HD/capacites/6872.png"},{"name":"Constriction","id":"6872","description":"Negative alteration.\\nEach time you activate a skill, suffer X DMG and all your negative alterations are increased by 10%.\\nThis alteration self-increases too.","img_url":"https://www.eredan-arena.com/images/HD/capacites/6872.png"},{"name":"Corrupt","id":"4500","description":"The skill is amplified by half for each negative alteration on your opponent.","img_url":"https://www.eredan-arena.com/images/HD/capacites/4500.png"},{"name":"Crackling Incantation","id":"5049","description":"Each time you are dealt DMG, you receive 3% of the total as DMG+ (flat increase if you already have DMG+).\\nA flat increase is the increase of an alteration that cannot interact with any other effect in the game.","img_url":"https://www.eredan-arena.com/images/HD/capacites/5049.png"},{"name":"Craft","id":"5670","description":"Craft do something depending on the Swords you roll before the skill activation phase.","img_url":"https://www.eredan-arena.com/images/HD/capacites/5670.png"},{"name":"Crimson Death","id":"5238","description":"Each time the opponent in combat receives Bleeding, the Strength of all your heroes will be increased by a quarter of the value. (This effect happens in all combats)","img_url":"https://www.eredan-arena.com/images/HD/capacites/5238.png"},{"name":"Critical","id":"93","description":"The next X times you deal DMG, the DMG is doubled.","img_url":"https://www.eredan-arena.com/images/HD/capacites/93.png"},{"name":"Crush","id":"4213","description":"Deal X DMG to your opponent (orX*1.5 of your Strength is superior to your opponents).","img_url":"https://www.eredan-arena.com/images/HD/capacites/4213.png"},{"name":"Crushing Skill","id":"8595","description":"Increase the skill value by 50% if your Strength is higher than your opponent's Strength.","img_url":"https://www.eredan-arena.com/images/HD/capacites/8595.png"},{"name":"Curse","id":"4543","description":"Negative Alteration.\\nAt the end of the skill phase, you suffer X flat DMG, repeated for every other negative alteration.\\nFlat DMG is a DMG that ignores everything.","img_url":"https://www.eredan-arena.com/images/HD/capacites/4543.png"},{"name":"Cursed Skill","id":"4543","description":"After the skill, applies to the opponent 10% of the skill's value as Curse, +10% for each Eclipse on the opponent.","img_url":"https://www.eredan-arena.com/images/HD/capacites/4543.png"},{"name":"DMG Drain","id":"109","description":"Your opponents' DMG are decreased by X and all your DMG are increased by X.","img_url":"https://www.eredan-arena.com/images/HD/capacites/109.png"},{"name":"DMG+","id":"113","description":"All your DMG is increased by X.","img_url":"https://www.eredan-arena.com/images/HD/capacites/113.png"},{"name":"DMG-","id":"155","description":"DMG dealt by your character is reduced by X.","img_url":"https://www.eredan-arena.com/images/HD/capacites/155.png"},{"name":"Dark Heritage","id":"4823","description":"Every time your cards get an alteration that they didn’t have, their opponents receive 35 Terror.","img_url":"https://www.eredan-arena.com/images/HD/capacites/4823.png"},{"name":"Deadly Rain","id":"7602","description":"If Deathcaller Ludmilla is in play, at the start of the fight, deal as much Pure DMG as the Strength of Deathcaller Ludmilla to your opponent and your opponent receives 10% of the total as Bleeding, 3 times.\\n\\nDeathcaller Ludmilla is always drawn at the beginning of the fight.\\n\\nPure DMG is a DMG that ignores all alterations that could reduce or prevent it.","img_url":"https://www.eredan-arena.com/images/HD/capacites/7602.png"},{"name":"Death Stare","id":"311","description":"Deal X DMG minus the Strength of your opponent that ignores all alterations that could reduce or prevent it.","img_url":"https://www.eredan-arena.com/images/HD/capacites/311.png"},{"name":"Decisive Strikes","id":"8041","description":"Deal X Pure DMG.\\n\\nPure DMG is a DMG that ignores all alterations that could reduce or prevent it.","img_url":"https://www.eredan-arena.com/images/HD/capacites/8041.png"},{"name":"Decoy","id":"8008","description":"Positive Alteration\\n\\nIf one of your positive alterations should be targeted by one of your opponent's skills, it targets Decoy instead.\\n\\nThis alteration is triggered by Mimic, Mad Hat, Spellbreaker & Dispel.\\n\\nThis skill is not triggered by Tidal Wave, Swarm of Decay, Shieldbreaker, Brain Freeze or Caress of Death.\\n\\nWhen triggered, only 1 Decoy is consumed, no matter the effect redirected.","img_url":"https://www.eredan-arena.com/images/HD/capacites/8008.png"},{"name":"Defend The Borders","id":"5595","description":"Once your opponent has been dealt 8000 DMG, all your active :ava: gain 2000 Shield and their Strength is increased by 200.\\n\\nThis quest can be triggered only 1 time per card.","img_url":"https://www.eredan-arena.com/images/HD/capacites/5595.png"},{"name":"Deja vu","id":"1250","description":"Activate the last ability used by the opponent.","img_url":"https://www.eredan-arena.com/images/HD/capacites/1250.png"},{"name":"Devour","id":"5889","description":"Deal X normal DMG to the opponent.\\n\\nIf you have any negative alteration, consume one of them and receive X/2 STR.\\n\\nElse, if you have a positive alteration, remove half of a random one and receive X STR.","img_url":"https://www.eredan-arena.com/images/HD/capacites/5889.png"},{"name":"Dexterity","id":"4794","description":"The next X times you consume a Dodge, Riposte or Critical, gain one of the other 2 at random.","img_url":"https://www.eredan-arena.com/images/HD/capacites/4794.png"},{"name":"Dispel","id":"dsLVynU","description":"Delete X positive alteration(s) on your opponent.","img_url":"https://i.imgur.com/dsLVynU.png"},{"name":"Dodge","id":"176","description":"The next X times you suffer DMG, it will be halved.","img_url":"https://www.eredan-arena.com/images/HD/capacites/176.png"},{"name":"Draconic Legacy","id":"6866","description":"Each time you obtain a DMG+, your allies gain 750 Blizzard.Each time you obtain a Shield type alteration (Shield / Blizzard / Arcane Barrier / Bulwark), your allies obtain 75 DMG+.This effect considers increasing Shield and DMG+ too","img_url":"https://www.eredan-arena.com/images/HD/capacites/6866.png"},{"name":"Dragon Bite","id":"4177","description":"Deal X DMG and your opponent bleeds, it receives X/10 Bleeding.","img_url":"https://www.eredan-arena.com/images/HD/capacites/4177.png"},{"name":"Dragon Hide","id":"4162","description":"The X next times you are dealt DMG, they will be halved and your opponent will be dealt half.","img_url":"https://www.eredan-arena.com/images/HD/capacites/4162.png"},{"name":"Dragon Noodles","id":"7427","description":"Craftsman Passive.\\nThe next X times your strength is reduced revert it and gain an additional 200 Strength.\\nAt the end of the fight Heal 900 for each remaining Dragon Noodle.","img_url":"https://www.eredan-arena.com/images/HD/capacites/7427.png"},{"name":"Earthen Coating","id":"9218","description":"Positive alteration. Shield-like Skill.\\nAbsorbs the next X damage suffered.\\nAs long as this is active, each time you activate a skill your opponent suffers X Earthquake damage.\\nEarthquake DMG is a DMG that ignores all alterations that could reduce or prevent it and applies half of its value as Aftermath to all active opponents.","img_url":"https://www.eredan-arena.com/images/HD/capacites/9218.png"},{"name":"Earthquake","id":"8401","description":"Deal X Pure DMG to your opponent, and give to all the opposing heroes X/2 Aftermath.\\nPure DMG is a DMG that ignores all alterations that could reduce or prevent it.","img_url":"https://www.eredan-arena.com/images/HD/capacites/8401.png"},{"name":"Eau de Corruption","id":"5675","description":"After the skill activation phase, you receive a Strength value equal the sum of all malus your card have applied to the opponent during the combat.\\nPurify, Mist, Rain and Devour do not affect the STR gain.\\nDebuffs applied prior to the combat aren't counted on the STR gain.","img_url":"https://www.eredan-arena.com/images/HD/capacites/5675.png"},{"name":"Echoing Skill","id":"4744","description":"Skill mddifier.\\nAfter the skill effect, applies Echo to your opponent equal to 10% of the skill's value.","img_url":"https://www.eredan-arena.com/images/HD/capacites/4744.png"},{"name":"Eclipse","id":"434","description":"Cancels the X next Heals of your opponent.","img_url":"https://www.eredan-arena.com/images/HD/capacites/434.png"},{"name":"Electric Dragnet","id":"7294","description":"Craftsman Passive.\\nThe next X times you activate a skill, increase your opponent's negative alterations by 25% (rounded up).\\nIf they do not have any, they receive Constriction 500.\\nAfter this deal 1500 flat damage and apply 150 Thunderstruck to them.","img_url":"https://www.eredan-arena.com/images/HD/capacites/7294.png"},{"name":"Empowered Skill","id":"8595","description":"Increase the skill value by 10% for each level that your active equipment has.\\nThis modifier rounds the value to the nearest integer.","img_url":"https://www.eredan-arena.com/images/HD/capacites/8595.png"},{"name":"Encore","id":"8396","description":"Negative Alteration.\\nAfter the :swordDice: phase, reroll one of your dice to the same color.\\nThis alteration triggers Echo, Dice Change based Equips & Song of the Abysses.","img_url":"https://www.eredan-arena.com/images/HD/capacites/8396.png"},{"name":"Endurance","id":"5614","description":"The next X times you receive damage, the damage is reduced by the value of your Strength.","img_url":"https://www.eredan-arena.com/images/HD/capacites/5614.png"},{"name":"Eternal Fog","id":"8401","description":"Each time one of your Mist is consumed, Heal 500.\\nAt the end of skill activation phase, if you have at least:  3 Mist: You receive 4000 Shield and your allies receive 2 Mist.\\n7 Mist: Deal 2500 Shock DMG & your allies receive 2 Dodges.\\n18 Mist: Heals half of your current suffered DMG.","img_url":"https://www.eredan-arena.com/images/HD/capacites/8401.png"},{"name":"Eternal Winter","id":"5628","description":"Every time your opponents trigger their Frostbite, the Frostbite is increased by 10%, and every time they deal a DMG from a Sword, their Frostbite is triggered again.","img_url":"https://www.eredan-arena.com/images/HD/capacites/5628.png"},{"name":"Fire Rune","id":"1591","description":"Create X Rune and the DMG that your opponent deals is decreased byX*20. At the end of the opponent's skill activation phase, each Rune deals 200 DMG.","img_url":"https://www.eredan-arena.com/images/HD/capacites/1591.png"},{"name":"Fireball","id":"114","description":"Deals X DMG to your opponent and he has DMG -X/10.","img_url":"https://www.eredan-arena.com/images/HD/capacites/114.png"},{"name":"Flare","id":"8065","description":"Deal X Normal DMG and you receive one Solar Light.\\nNormal DMG is a DMG that can be affected by everything.","img_url":"https://www.eredan-arena.com/images/HD/capacites/8065.png"},{"name":"Flow","id":"5339","description":"Every time you cast a skill, you Heal X.","img_url":"https://www.eredan-arena.com/images/HD/capacites/5339.png"},{"name":"Flowering","id":"4172","description":"Deal X DMG and apply a Spore to you and your opponent.","img_url":"https://www.eredan-arena.com/images/HD/capacites/4172.png"},{"name":"Focus X -> Y","id":"6843","description":"Gain as much Y as your X.\\nYour X is divided by 2.\\nExample: Focus Strength -> DMG+","img_url":"https://www.eredan-arena.com/images/HD/capacites/6843.png"},{"name":"Forked Lightning","id":"8738","description":"Deal X Lightning DMG and your opponent's allies receives X/2 Chanelled Lightning.\\nLightning DMG is a normal DMG that applies 10% of its value as Thunderstruck to the opponent.","img_url":"https://www.eredan-arena.com/images/HD/capacites/8738.png"},{"name":"Forsaken Destiny","id":"9440","description":"Each time you activate a skill, you receive Curse equal to the sum of Curse on the opposing heroes.\\nAt the end of skill activation phase, consume your Curse. If you have consumed at least:  2500 Curse: Deal 5000 flat damage. (not interacting with anything)  7500 Curse: Suffer 5000 flat damage to give ALL of your allies 2 Stardust. (even for non-active allies)  15000 Curse: All your opponent's receive 1500 Curse and 1500 more if you lose the round.","img_url":"https://www.eredan-arena.com/images/HD/capacites/9440.png"},{"name":"Freezing Criticals","id":"9189","description":"Each time one of your heroes consumes a Critical, their opponent gets Frostbite 250. If they have already 750, trigger the Frostbite instead of giving more.","img_url":"https://www.eredan-arena.com/images/HD/capacites/9189.png"},{"name":"Frenzy","id":"4532","description":"At the end of the skill activation phase, X random dice that aren't S become S.","img_url":"https://www.eredan-arena.com/images/HD/capacites/4532.png"},{"name":"Frost","id":"600","description":"⋆ You are frosted, the Icy ability of your opponent will be increased by X tenth.","img_url":"https://www.eredan-arena.com/images/HD/capacites/600.png"},{"name":"Frostbite","id":"916","description":"Your opponent will get 1 Frost and will be hurt by X each time he activates an ability.","img_url":"https://www.eredan-arena.com/images/HD/capacites/916.png"},{"name":"Frostbolt","id":"A78zxgd","description":"Deals X DMG to your opponent and he receives X/10 Frostbite.","img_url":"https://i.imgur.com/A78zxgd.png"},{"name":"Happy Totem","id":"6649","description":"Passive. Neutral Alteration.\\nEach time you gain Strength, its value is increased by 20% for each Happy Totem you have.","img_url":"https://www.eredan-arena.com/images/HD/capacites/6649.png"},{"name":"Harsh Sickness","id":"8884","description":"Neutral Alteration.\\nEach time your Strength should be lowered but is already at 0, you suffer as much flat DMG instead.\\nFlat DMG is a DMG that ignores everything.","img_url":"https://www.eredan-arena.com/images/HD/capacites/8884.png"},{"name":"Heal","id":"5","description":"Heals X DMG.","img_url":"https://www.eredan-arena.com/images/HD/capacites/5.png"},{"name":"Heal The Villagers!","id":"8060","description":"Quest Passive.\\nWhen you healed yourself at least 10 times, double your Strength and all your positive alterations.\\nThis Quest is applied only to :ava: characters.","img_url":"https://www.eredan-arena.com/images/HD/capacites/8060.png"},{"name":"Hit","id":"177","description":"Deals X DMG.","img_url":"https://www.eredan-arena.com/images/HD/capacites/177.png"},{"name":"Icy","id":"567","description":"The skill is amplified by a tenth for each Frost on your opponent. Your opponent gets 1 Frost.","img_url":"https://www.eredan-arena.com/images/HD/capacites/567.png"},{"name":"Illusion","id":"4606","description":"Activate an offensive ability at random with X as its value. (Except Smite and Physical Attack)","img_url":"https://www.eredan-arena.com/images/HD/capacites/4606.png"},{"name":"Impeding End","id":"7300","description":"⋆ Passive Skill. Neutral Alteration.\\nEveryone suffer at the start of the fight 8000 Pure DMG.\\nWhen the cards affected by Impeding End gets fully healed, deals 4000 Pure DMG to the opponent and deletes all opponent's positive alterations.\\nPure DMG is a DMG that ignores all alterations that could reduce or prevent it.","img_url":"https://www.eredan-arena.com/images/HD/capacites/7300.png"},{"name":"Improvement","id":"8595","description":"Passive.\\nGives a new effect to already existing alterations.","img_url":"https://www.eredan-arena.com/images/HD/capacites/8595.png"},{"name":"Inspire","id":"300","description":"Your selected allies have 1 additional dice throw.","img_url":"https://www.eredan-arena.com/images/HD/capacites/300.png"},{"name":"Invoke","id":"1750","description":"If the specified Dragon is in your team, transform into a more powerful form.","img_url":"https://www.eredan-arena.com/images/HD/capacites/1750.png"},{"name":"Kiss of Oblivion","id":"4845","description":"Both cards in combat heal any damage taken till the activation of this skill.","img_url":"https://www.eredan-arena.com/images/HD/capacites/4845.png"},{"name":"Leech","id":"9186","description":"Negative Alteration  Each time you activate a skill, your opponent is healed by X, increased by the value of your Bleeding.","img_url":"https://www.eredan-arena.com/images/HD/capacites/9186.png"},{"name":"Lethal Dose","id":"7918","description":"At the end of the skill activation phase, if your opponent has at least:  -10 Poison: Delete all his Positive alterations;  -15 Poison: his Strength becomes 0;  -25 Poison: He suffers 999 999 flat DMG.\\nFlat DMG is a DMG that ignores everything.","img_url":"https://www.eredan-arena.com/images/HD/capacites/7918.png"},{"name":"Life Drain","id":"46","description":"Deals X DMG to your opponent and you gain X health points.","img_url":"https://www.eredan-arena.com/images/HD/capacites/46.png"},{"name":"Lightning","id":"236","description":"Strikes your opponent by dealing him X DMG and increasing by X/10 the next DMG he suffers.","img_url":"https://www.eredan-arena.com/images/HD/capacites/236.png"},{"name":"Lightning Rune","id":"1632","description":"Create X Rune and increase the next DMG that your opponent suffers byX*20. At the end of the skills activation phase, each Rune deals 200 DMG.","img_url":"https://www.eredan-arena.com/images/HD/capacites/1632.png"},{"name":"Lightroots","id":"6936","description":"Each time your opponent deals DMG to you, your opponent will be hurt by X Shock DMG and you will be healed by X.\\nThis alteration cannot be targeted by other skills or alterations.\\nShock DMG is a DMG that cannot be increased and decreased, but still consumes skills as Scarab and Shield.","img_url":"https://www.eredan-arena.com/images/HD/capacites/6936.png"},{"name":"Mad Hat","id":"5893","description":"⋆ The next X times you activate a skill, copy an opposing positive alteration, then deal 1500 Shock damage to your opponent.","img_url":"https://www.eredan-arena.com/images/HD/capacites/5893.png"},{"name":"Madly-go-round","id":"7412","description":"Each time you trigger a skill, your opponent's DMG+ are increased by your Terror malus value.\\nThis effect is applied on the opponent at start of the fight.","img_url":"https://www.eredan-arena.com/images/HD/capacites/7412.png"},{"name":"Magma Wall","id":"4466","description":"Each time your opponents deal DMG to you, they receive 6% of the total as DMG- (flat increase if your opponent already have DMG- ).\\nA flat increase is the increase of an alteration that cannot interact with any other effect in the game.","img_url":"https://www.eredan-arena.com/images/HD/capacites/4466.png"},{"name":"March of Conquest","id":"6449","description":"At start of the combat, increase all the DMG your opponent will be dealt by an amount equal to your Strength (Maximum 500).","img_url":"https://www.eredan-arena.com/images/HD/capacites/6449.png"},{"name":"Mediate","id":"7127","description":"⋆ With 3 guilds being mediated, :cou: plus 2 other guilds, when any of the 3 guilds triggers the 1st effect, the current allies of the 2 other guilds receive the 2nd effect.\\n*Example: if it is Mediate :noz: & :win: opp Ice > DMG+ 25 , if a :win: card applies opp Ice the :noz: and :cou: receive DMG+ 25.","img_url":"https://www.eredan-arena.com/images/HD/capacites/7127.png"},{"name":"Meditation","id":"4903","description":"⋆ You heal X and half of a negative alteration on yourself is converted into Riposte or Dodge (if the value converted is 10 or lower) or +STR or +DMG (if higher than 10).","img_url":"https://www.eredan-arena.com/images/HD/capacites/4903.png"},{"name":"Menacing Sky","id":"8748","description":"*Whenever your opponent receives Thunderstruck, you receive 50% of it as Berserk. Immediately when your opponent have been dealt:*  6000 Damage: Double your Strength.\\n12000 Damage: Receive 2 Critical, Dodge and Riposte.\\n24000 Damage: Deal 5000 Forked Lightning DMG to your opponent.\\nForked Lightning DMG is a normal DMG that applies 10% of its value as Thunderstruck to the opponent and 50% of its value as Chanelled Lightning to your opponent's allies.","img_url":"https://www.eredan-arena.com/images/HD/capacites/8748.png"},{"name":"Mend","id":"5192","description":"At the end of skills activation phase, you Heal X.","img_url":"https://www.eredan-arena.com/images/HD/capacites/5192.png"},{"name":"Might","id":"9549","description":"Positive Alteration.\\nEach time you activate a skill, gain X Strength.","img_url":"https://www.eredan-arena.com/images/HD/capacites/9549.png"},{"name":"Mighty Skill","id":"9549","description":"Skill Modifier.\\nAfter the skill effect, gain 10% of the skill's value as Might.","img_url":"https://www.eredan-arena.com/images/HD/capacites/9549.png"},{"name":"Mimic","id":"1010","description":"Deal X DMG and copy a positive effect from the opponent (stackable).","img_url":"https://www.eredan-arena.com/images/HD/capacites/1010.png"},{"name":"Mirror","id":"9187","description":"Position Alteration  The next X times your opponent receives a positive alteration, copy it (affected by decoy)  The next X times you receive a debuff your opponent copies it.","img_url":"https://www.eredan-arena.com/images/HD/capacites/9187.png"},{"name":"Mist","id":"5126","description":"After you receive a negative alteration (increase counts too) during the combat, this negative alteration is halved.","img_url":"https://www.eredan-arena.com/images/HD/capacites/5126.png"},{"name":"Multiguild Skill","id":"UvcQBjY","description":"Increases the skill value by 25% per each different guild on your current cards in game.\\nThe guild of your hero in combat is counted  The skill value is increased by at least 25% and at max by 75%","img_url":"https://i.imgur.com/UvcQBjY.png"},{"name":"Necrotic","id":"AmOKZTX","description":"⋆ The skill is amplified by half for each negative alteration on your current hero.","img_url":"https://i.imgur.com/AmOKZTX.png"},{"name":"Nefertoth","id":"6072","description":"Neutral Alteration.\\nAt the end of the skill activation phase, for each of your Nefertoth, deal as much pure DMG as your Strength.\\nPure DMG ignores every alteration from both in combat.","img_url":"https://www.eredan-arena.com/images/HD/capacites/6072.png"},{"name":"Noble","id":"u5aJ0LX","description":"The skill is amplified by half if you are more wounded than your opponent.","img_url":"https://i.imgur.com/u5aJ0LX.png"},{"name":"Paper Scales","id":"5836","description":"Each time you deal as much or less than 1000 DMG, you receive 15 Berserk.","img_url":"https://www.eredan-arena.com/images/HD/capacites/5836.png"},{"name":"Parry","id":"4325","description":"The X next time you are dealt DMG, block them and deal as much DMG as your Strength.","img_url":"https://www.eredan-arena.com/images/HD/capacites/4325.png"},{"name":"Phalanx","id":"9334","description":"⋆ Positive alteration. Shield-like skill.\\nAbsorbs the next X damage you suffer.\\nThe damage dealt to Phalanx is decreased by the Strength of your allies.\\nConsumed before all the other Shield-type alterations (Shield, Blizzard, Arcane Barrier, Coating).\\nShield Bash consume Shield first, then Phalanx on additional activation.","img_url":"https://www.eredan-arena.com/images/HD/capacites/9334.png"},{"name":"Physical Attack","id":"206","description":"Deal X times in a row as much DMG as your Strength.","img_url":"https://www.eredan-arena.com/images/HD/capacites/206.png"},{"name":"Pillage","id":"8401","description":"⋆ Deal X Normal DMG and steal half of an opposing positive alteration.","img_url":"https://www.eredan-arena.com/images/HD/capacites/8401.png"},{"name":"Plague","id":"7915","description":"Deal X Normal DMG and your opponent receive 1 Poison.","img_url":"https://www.eredan-arena.com/images/HD/capacites/7915.png"},{"name":"Poison","id":"7533","description":"Negative Alteration.\\nThe next time you would be healed, you suffer flat DMG instead.\\nAt end of fight you suffer 500 flat DMG.\\nFlat DMG is a DMG that ignores everything.\\nThis alteration trigger and causes the heal value as DMG even if your opponent is not damaged.","img_url":"https://www.eredan-arena.com/images/HD/capacites/7533.png"},{"name":"Portal","id":"1242","description":"⋆ Deal X DMG and apply one of the negative effects on your hero to your opponent (stackable).","img_url":"https://www.eredan-arena.com/images/HD/capacites/1242.png"},{"name":"Powder","id":"234","description":"⋆ The X next time your suffer DMG from a S, a keg will explode and triple (before modification) these DMG.","img_url":"https://www.eredan-arena.com/images/HD/capacites/234.png"},{"name":"Powerup Gaz","id":"8883","description":"Each Time you activate a skill, if you have at least:  35 Stench: your opponent receive Harsh Sickness.\\n400 Stench: Gain as much Strength as your Stench Bonus.\\n1200 Stench: All your opponents (even the ones that still are in the deck) receive Harsh Sickness.","img_url":"https://www.eredan-arena.com/images/HD/capacites/8883.png"},{"name":"Purify","id":"318","description":"Delete X times half of a negative effect on your hero.","img_url":"https://www.eredan-arena.com/images/HD/capacites/318.png"},{"name":"Quest","id":"aggregats-56","description":"Each of your Avalonians have to complete a goal to share a buff between them.","img_url":"https://www.eredan-arena.com/images/HD/aggregats/56.png"},{"name":"Rage","id":"140","description":"Your Strength increases by X each time you deal DMG.","img_url":"https://www.eredan-arena.com/images/HD/capacites/140.png"},{"name":"Rain","id":"3835","description":"Heal X DMG and delete one of your negative alterations.","img_url":"https://www.eredan-arena.com/images/HD/capacites/3835.png"},{"name":"Rain of Arrows","id":"8389","description":"The opposing heroes receive 20 Thunderstruck and you lose 10 Rage each time you consume a Critical.\\nWhen you will have consumed:  7 Criticals: Deal 2500 Shock damage and halve the Strength of the opposing hero.\\n11 Criticals: You and your allies receive 30 Vigor.\\n17 Criticals: At the end of skill activation phase activate your 1st and 2nd skills once.","img_url":"https://www.eredan-arena.com/images/HD/capacites/8389.png"},{"name":"Rain of Gifts","id":"5667","description":"After the dice rolling phase, your cards obtain 1 Red Gift for each Red Dice rolled, 1 Blue Gift for each Blue Dice rolled, and 1 Yellow Gift for each Yellow Dice rolled.","img_url":"https://www.eredan-arena.com/images/HD/capacites/5667.png"},{"name":"Rampage","id":"4533","description":"Deal X and you gain one Frenzy.","img_url":"https://www.eredan-arena.com/images/HD/capacites/4533.png"},{"name":"Red Gift","id":"3990","description":"Neutral Alteration.\\nAfter you have dealt DMG to your opponent and his DMG suffered is higher or equal to 5000 DMG, deal 800 flat DMG for each Red Gift you have and consume all.\\nIf you receive a gift after your opponent already have 5000 suffered DMG, the gift is going to trigger in the next DMG you cause.\\nFlat DMG is a DMG that ignores everything.","img_url":"https://www.eredan-arena.com/images/HD/capacites/3990.png"},{"name":"Redeeming Skill","id":"8311","description":"After the skill effect, receive 1 Redemption.","img_url":"https://www.eredan-arena.com/images/HD/capacites/8311.png"},{"name":"Redemption","id":"8311","description":"The next X times your Heal exceeds the DMG you have, increase your Strength and your positive alterations (except Redemption) by 25% (rounded up).\\nAfter the skill activation phase, you Heal 1000 per each Redemption lefting.\\nThe end phase's Heal effect can trigger another Redemption too.","img_url":"https://www.eredan-arena.com/images/HD/capacites/8311.png"},{"name":"Reflected Skill","id":"8595","description":"If the reflected skill is a positive alteration, your allies also receive 25% of it for each Reflection in the game.\\nIf the reflected skill is a negative alteration, your opponent's allies also receive 25% of it for each Reflection in the game.\\n(The opponent's Reflections are considered too, so can have at max 6 Reflection in game, ranging from 25% to 150% of reflected alteration.)","img_url":"https://www.eredan-arena.com/images/HD/capacites/8595.png"},{"name":"Resilience","id":"426","description":"All the DMG you suffer decreases by X.","img_url":"https://www.eredan-arena.com/images/HD/capacites/426.png"},{"name":"Resonant Echo","id":"53yaoYt","description":"Whenever your opponent's Echo is triggered, you receives 20% of it as DMG+ and your opponent receives 20% of it as DMG-.\\nIf you have at least 400 DMG+, trigger Purify 1 Instead.","img_url":"https://i.imgur.com/53yaoYt.png"},{"name":"Restore","id":"5","description":"At end of the skill activation phase you Heal X. This effect is repeated for each other positive alteration you have.\\nRestore doesn't count itself in the repetition.","img_url":"https://www.eredan-arena.com/images/HD/capacites/5.png"},{"name":"Riposte","id":"324","description":"The X next times you suffer DMG from a S you'll deal as much DMG as your Strength.","img_url":"https://www.eredan-arena.com/images/HD/capacites/324.png"},{"name":"Round of Drinks","id":"6942","description":"The next X times you receive a positive alteration, your allies receive 50% as well and you deal 2000 Shock DMG to your opponent.\\nShock DMG is an unmodifiable DMG.","img_url":"https://www.eredan-arena.com/images/HD/capacites/6942.png"},{"name":"Rune","id":"721","description":"Create X Runes. At the end of the Skills activation phase, each Rune deals 200 DMG.","img_url":"https://www.eredan-arena.com/images/HD/capacites/721.png"},{"name":"Runic","id":"722","description":"The skill is amplified by half for each of your Rune. Your Runes are destroyed.","img_url":"https://www.eredan-arena.com/images/HD/capacites/722.png"},{"name":"Sacred","id":"hlGhHOU","description":"Increases the skill value by half for each positive alteration on you.","img_url":"https://i.imgur.com/hlGhHOU.png"},{"name":"Scarab","id":"829","description":"The next X times you receive DMG, this DMG will be converted into Heal.","img_url":"https://www.eredan-arena.com/images/HD/capacites/829.png"},{"name":"Seek the Thunder's Spear!","id":"5981","description":"Passive. Each time you change a dice into :swordDice:, strike your opponent with a Lightning 1000.\\n(Change 2 or more dices of same color at same time counts as 1 trigger only)","img_url":"https://www.eredan-arena.com/images/HD/capacites/5981.png"},{"name":"Seismic Tremor","id":"4738","description":"Passive.\\nEach time you activate a skill, deal flat damage to your opponent equal to your Strength.\\nFlat damage is a damage that ignores everything.","img_url":"https://www.eredan-arena.com/images/HD/capacites/4738.png"},{"name":"Shield","id":"4","description":"⋆ Absorb the X next DMG you suffer.","img_url":"https://www.eredan-arena.com/images/HD/capacites/4.png"},{"name":"Shield Bash","id":"710","description":"You lose your Shield and deal one and a half its value plus X DMG.","img_url":"https://www.eredan-arena.com/images/HD/capacites/710.png"},{"name":"Shieldbreaker","id":"lBUld7s","description":"Breaks one of the opposing shield alterations (Shield, Blizzard or Arcane Barrier) removing it. Then you cause X DMG, plus the value of shield removed more half.","img_url":"https://i.imgur.com/lBUld7s.png"},{"name":"Shock","id":"264","description":"Deals X unmodifiable DMG.","img_url":"https://www.eredan-arena.com/images/HD/capacites/264.png"},{"name":"Silver Gift","id":"7805","description":"Neutral Alteration. Consumable.\\nThe next times you activate a skill your Strength and your positive alterations are increased by 20% (rounded down).","img_url":"https://www.eredan-arena.com/images/HD/capacites/7805.png"},{"name":"Sinister","id":"RDTsnVj","description":"The skill value is increased by 50% for each opposing positive alteration.","img_url":"https://i.imgur.com/RDTsnVj.png"},{"name":"Smite","id":"334","description":"Deal as much DMG as your opponent!s Strength multiplied by X.","img_url":"https://www.eredan-arena.com/images/HD/capacites/334.png"},{"name":"Smuggled","id":"TM1Ckc1","description":"The skill value is doubled if your opponent has the same skill (don't need to be the same value).","img_url":"https://i.imgur.com/TM1Ckc1.png"},{"name":"Smuggler's Treaty","id":"5992","description":"Passive.\\nEach time your :pir: receive any positive alteration, your :zil: on the field receive 25% of it (rounded up).\\nEach time your :zil: receive any positive alteration, your :pir: on the field receive 25% of it (rounded up).\\n(This effect can be triggered only during the combat, so alterations obtained out of combat won't be shared)","img_url":"https://www.eredan-arena.com/images/HD/capacites/5992.png"},{"name":"Solar Light","id":"8061","description":"Positive Alteration.\\nIf you are :solarian: : The next time you Heal DMG, heal the same amount another time.\\nIf you are not :solarian: : the next time you suffer DMG, you suffer the same amount another time as a flat DMG.\\nFlat DMG is a DMG that ignores everything.","img_url":"https://www.eredan-arena.com/images/HD/capacites/8061.png"},{"name":"Song of the Abysses","id":"7087","description":"Each time one of your dice changes, you are hurt by 750 Shock DMG, and one of your current opponent's positive alteration is increased by 25% (rounded up)  Shock DMG is a DMG that cannot be reduced or increased, but still is affected by Scarab and Shield-like skills.\\nThis effect is applied on the opponent's team.","img_url":"https://www.eredan-arena.com/images/HD/capacites/7087.png"},{"name":"Spellbreaker","id":"379","description":"⋆ Deal [VALUE] DMG, delete half of a positive alteration on your opponent.","img_url":"https://www.eredan-arena.com/images/HD/capacites/379.png"},{"name":"Spoils of War","id":"6932","description":"Each time one of your cards wins a battle, its current allies receive as much Strength as the defeated's base Strength, plus 1 Frenzy and 1 Endurance.","img_url":"https://www.eredan-arena.com/images/HD/capacites/6932.png"},{"name":"Spore","id":"3789","description":"Apply a Spore, at each skill activation it grows. At the end of the skill activation phase deal 400 DMG for each of your Spores or Heal 400 DMG for each of your Spores if you are Dais.","img_url":"https://www.eredan-arena.com/images/HD/capacites/3789.png"},{"name":"Stardust","id":"6681","description":"Positive Alteration  The next X times you receive a positive alteration, its value is increased by half (only the received value). (Rounded up)","img_url":"https://www.eredan-arena.com/images/HD/capacites/6681.png"},{"name":"Static Charge","id":"4882","description":"⋆ Every time the Shield of your cards absorbs DMG, who damaged it suffers a pure DMG equal half of the absortion and receives 10% of the absortion as Thunderstruck.","img_url":"https://www.eredan-arena.com/images/HD/capacites/4882.png"},{"name":"Stench","id":"310","description":"You stink, your opponent loses X Strength each time you activate an ability.","img_url":"https://www.eredan-arena.com/images/HD/capacites/310.png"},{"name":"Stone","id":"7848","description":"⋆ Posivite Alteration  At the end of the skill activation phase, you receive 500 Shield.\\nThis alteration is used by the Ultimate Armor Skill to trigger some effects.","img_url":"https://www.eredan-arena.com/images/HD/capacites/7848.png"},{"name":"Storm","id":"3367","description":"The elements are unleashed, deal X DMG to your opponent and increase all the next DMG they take by X/10 each time you activate an ability.","img_url":"https://www.eredan-arena.com/images/HD/capacites/3367.png"},{"name":"Strength Drain","id":"109","description":"Your opponent's Strength is reduced by X and your Strength increases by X.","img_url":"https://www.eredan-arena.com/images/HD/capacites/109.png"},{"name":"Strength+","id":"17","description":"Your Strength increases by X.","img_url":"https://www.eredan-arena.com/images/HD/capacites/17.png"},{"name":"Strength-","id":"109","description":"Your opponent loses X Strength.","img_url":"https://www.eredan-arena.com/images/HD/capacites/109.png"},{"name":"Support","id":"lRD9kU2","description":"Give to all heros of the specified attribute the specified alteration.","img_url":"https://i.imgur.com/lRD9kU2.png"},{"name":"Swarm of Decay","id":"6188","description":"Halves all positive alterations received during the combat.","img_url":"https://www.eredan-arena.com/images/HD/capacites/6188.png"},{"name":"Symbiosis","id":"1750","description":"Cards with Symbiosis share 50% of all buffs received between them.","img_url":"https://www.eredan-arena.com/images/HD/capacites/1750.png"},{"name":"Talonstrike","id":"4734","description":"The next X times you deal DMG via a Sword Dice you deal a pure DMG equal this DMG dealt.","img_url":"https://www.eredan-arena.com/images/HD/capacites/4734.png"},{"name":"Terror","id":"389","description":"The DMG that your opponent's hero deals is reduced by X each time he activates an ability.(stackable)","img_url":"https://www.eredan-arena.com/images/HD/capacites/389.png"},{"name":"The Axiom of Strength","id":"9336","description":"Triples your Strength, then deals a Shock Damage equal to the Strength Bonus accumulated by your heroes during the game.","img_url":"https://www.eredan-arena.com/images/HD/capacites/9336.png"},{"name":"Thorn","id":"340","description":"Your opponent will be hurt by X each time he deals DMG to you.","img_url":"https://www.eredan-arena.com/images/HD/capacites/340.png"},{"name":"Thorny Spore","id":"CpqBtmG","description":"Each time you activate a skill, consume a Spore to gain 150 Thorns.","img_url":"https://i.imgur.com/CpqBtmG.png"},{"name":"Thunder of Guem","id":"5678","description":"Each time you receive DMG+, your opponent will receive a Thunderstruck equal half of its value multiplied by the Swords you rolled before the Skill Activation Phase.","img_url":"https://www.eredan-arena.com/images/HD/capacites/5678.png"},{"name":"Thunderclap","id":"7777","description":"Deal X Lightning DMG.\\nEach time you attack with a :swordDice:, the opposing heroes receive Thunderstruck equal to 10% of your Strength.","img_url":"https://www.eredan-arena.com/images/HD/capacites/7777.png"},{"name":"Thunderstruck","id":"235","description":"⋆ All the DMG you suffer increase by X.","img_url":"https://www.eredan-arena.com/images/HD/capacites/235.png"},{"name":"Tidal Wave","id":"3950","description":"Increase the value of one of your positive alterations by 25% (rounded up) and deal X DMG.","img_url":"https://www.eredan-arena.com/images/HD/capacites/3950.png"},{"name":"Time Loop","id":"4621","description":"Activates again the skill that activated as number X in the skill sequence. This sequence counts skills from both in combat, and it counts any skill cast, so if the 2 first skills casts were your 1st ability, Time Loop 2 will replay it..","img_url":"https://www.eredan-arena.com/images/HD/capacites/4621.png"},{"name":"Transcendence","id":"2766","description":"⋆ Give to all your heros of the specified attribute: while throwing the dices, you can't get S.","img_url":"https://www.eredan-arena.com/images/HD/capacites/2766.png"},{"name":"Twinkle Little Star","id":"7754","description":"At the start of the fight, you receive 1 Stardust for each of your unique Dice Pair.\\nDice Pair is a combo of 2 equal dices, like:redDice: :redDice: .","img_url":"https://www.eredan-arena.com/images/HD/capacites/7754.png"},{"name":"Ultimate Armor","id":"7847","description":"Everytime your shield absorbs DMG without getting destroyed, you receive one Stone. At the end of the skill activation phase, If you have at least:  -5 Stones: Your Strength become 1500 and delete all your negative alterations;  -10 Stones: you receive 3 Frenzy;  -19 Stones: you become Unbreakable.\\nUnbreakable means that you cannot receive any DMG anymore.","img_url":"https://www.eredan-arena.com/images/HD/capacites/7847.png"},{"name":"Unified Skill","id":"VPjENEK","description":"Increases the skill value by 25% per each different race on your current cards in game.\\nThe race of your hero in combat is counted  The skill value is increased by at least 25% and at max by 75%","img_url":"https://i.imgur.com/VPjENEK.png"},{"name":"Verdant Growth","id":"4952","description":"Each time you heal yourself or receive thorns, your Strength increases by 20% of the value.","img_url":"https://www.eredan-arena.com/images/HD/capacites/4952.png"},{"name":"Vigor","id":"7372","description":"Positive Alteration.\\nEvery time you damage the opponent, you get X DMG+.\\nIf you already have the DMG+ alteration, Vigor does a 'flat' increase, not interacting with others effects.","img_url":"https://www.eredan-arena.com/images/HD/capacites/7372.png"},{"name":"War Runes","id":"7141","description":"Neutral Alteration. Consumable.\\nThe next times you activate a skill, you receive 2 Runes, or 300 DMG+ if you already have Runes.","img_url":"https://www.eredan-arena.com/images/HD/capacites/7141.png"},{"name":"Wildfire","id":"5397","description":"Each time you cast a skill, you inflict X Fireball to the opponent.","img_url":"https://www.eredan-arena.com/images/HD/capacites/5397.png"},{"name":"Yellow Gift","id":"3992","description":"Neutral Alteration.\\nAt the end of skill activation phase, Heal 800 per each Yellow Gift.","img_url":"https://www.eredan-arena.com/images/HD/capacites/3992.png"}]`),m0=JSON.parse(`[{"name":"Agonda Shell","rarity":"Rare","position":"2nd / Defender","level":"1 - 10","effect":"At the start of the fight you receive 48-247 Thorns.\\n:sap:: you receive 48-247 Lightroot instead.","last_patch":"24 Aug 2023","url":"https://www.eredan-arena.com/images/HD/items/35.png","tag":["sap"]},{"name":"Akra's Bowl","rarity":"Legendary","position":"2nd / Defender","level":"1 - 10","effect":":mer:: Each time you activate a skill, deal 200-1031 Tidal Wave DMG.\\nIf you have \\"Akra\\" in your name, you also get 10-51 Stench.\\nTidal Wave DMG is a Normal DMG that increases a random positive alteration on you by 25%.","last_patch":"06 Apr 2024","url":"https://www.eredan-arena.com/images/HD/items/147.png","tag":["mer"]},{"name":"Amplifying Tome CS","rarity":"Epic","position":"1st / Attacker","level":"1 - 10","effect":"Each time you activate a skill, your Strength is increased by 10-51.","last_patch":"29 Nov 2023","url":"https://www.eredan-arena.com/images/HD/items/68.png","tag":[]},{"name":"Amulet of Midnight","rarity":"Legendary","position":"2nd / Defender","level":"1 - 10","effect":":zil:: At the start of the fight, you receive 1000-5159 Shield and your opponent receives 10-51 Terror, increased by 25% for each of your :zil: allies with a different class from yours.","last_patch":"24 Feb 2024","url":"https://www.eredan-arena.com/images/HD/items/143.png","tag":["zil"]},{"name":"Apple of Chaos","rarity":"Epic","position":"1st / Attacker","level":"1 - 10","effect":":priest:: At the start of the fight and at the end of skill activation phase, deal 388-2001 Lightning DMG to your opponent and receive 1 Rune for each :run::priest: ally.\\n:run::priest:: All the opposing heroes receive 38-200 Thunderstruck.\\nLightning DMG is a normal DMG that applies 10% of its value as Thunderstruck to the opponent.","last_patch":"28 Aug 2024","url":"https://www.eredan-arena.com/images/thumb/items/107.png","tag":["priest","run"]},{"name":"Armor of Naptys","rarity":"Common","position":"2nd / Defender","level":"1 - 10","effect":"At the start of the fight, get 50 Resilience.\\nEach time you receive Blessing, receive 10-51 more.","last_patch":"24 Mar 2022","url":"https://www.eredan-arena.com/images/thumb/items/27.png","tag":[]},{"name":"Artrezil's Ring","rarity":"Legendary","position":"2nd / Defender","level":"1 - 10","effect":":mage: or :priest:: each time you sufffer less than 388-2001 DMG your opponent receives 35 Terror and you get 35 Blessing.\\n\\"Archmage Artrezil\\" or \\"Archmage Minerva\\": at the start of the fight copy 1 random opposing positive alteration.","last_patch":"31 Dec 2023","url":"https://www.eredan-arena.com/images/thumb/items/40.png","tag":["mage","priest"]},{"name":"Awakening","rarity":"Epic","position":"2nd / Defender","level":"1 - 10","effect":"Each time you receive Thorns, heal 195-1006 and receive 19-100 Strength+.\\nDaïs: 39-201 instead of 19-100 Strength+.","last_patch":"02 Mar 2023","url":"http://static.eredan.com/images/print/2dc4fd25330f0b4290a869a6b06e8fbd.png","tag":[]},{"name":"Axe of the Border CS","rarity":"Legendary","position":"1st / Attacker","level":"1 - 10","effect":"At the end of the activation phase, Deal 250-1289 Normal DMG + 25-128 for each of your :swordDice:.","last_patch":"29 Nov 2023","url":"https://www.eredan-arena.com/images/HD/items/69.png","tag":[]},{"name":"Ben's Hook","rarity":"Epic","position":"1st / Attacker","level":"1 - 10","effect":"At the end of the skill activation phase, deal 465-2399 Shock DMG, +155-799 for every :zil: or :pir: ally.\\nBen, the Buccaneer: Two of your :redDice: become :swordDice:.\\nShock DMG is an unmodifiable DMG that still consumes Shield-like skills and Scarabs.","last_patch":"25 Mar 2023","url":"https://www.eredan-arena.com/images/HD/items/65.png","tag":["zil","pir"]},{"name":"Black Fang Skin","rarity":"Epic","position":"2nd / Defender","level":"1 - 10","effect":":beast:: At the start of the fight, you and your :beast: allies get 291-1501 Shield.\\n:zil::beast: or :mer::beast: : Your Strength Bonuses are increased in 10%.","last_patch":"22 Aug 2023","url":"https://www.eredan-arena.com/images/HD/items/56.png","tag":["beast","zil","mer"]},{"name":"Blade of the Witch","rarity":"Rare","position":"1st / Attacker","level":"1 - 10","effect":":noz::marauder: : at the end of the fight deal 500-2579 Pure DMG to your opponent, + 125-644 for each of your :swordDice: or :noz::marauder: ally.\\nThis equipment DMG is caused AFTER the :swordDice: phase.\\nPure DMG is a DMG that ignores all alterations that could reduce or prevent it.","last_patch":"19 Sep 2023","url":"https://www.eredan-arena.com/images/HD/items/104.png","tag":["noz","marauder"]},{"name":"Blessed Wing CS","rarity":"Epic","position":"2nd / Defender","level":"1 - 10","effect":"Each time you activate a skill, Heal 40-206 DMG.","last_patch":"29 Nov 2023","url":"https://www.eredan-arena.com/images/HD/items/72.png","tag":[]},{"name":"Book of Incantations","rarity":"Rare","position":"2nd / Defender","level":"1 - 10","effect":":noz::mage:: each time you receive DMG+, deal 200-1031 Lightning, Fireball, Tidal Wave or Icy Hit DMG to your opponent.\\nLightning DMG is a Normal DMG that causes a tenth of its value as Thunderstruck to the opponent.\\nFireball DMG is a Normal DMG that causes a tenth of its value as DMG- to the opponent.\\nTidal Wave DMG is a Normal DMG that increases a random positive alteration on you by 25%.\\nIcy Hit DMG is a Normal DMG increased by 10% for every Ice token on your opponent, and it gives an Ice token to the opponent after the DMG.","last_patch":"30 Sep 2023","url":"https://www.eredan-arena.com/images/thumb/items/110.png","tag":["noz","mage"]},{"name":"Book of Shadows","rarity":"Epic","position":"1st / Attacker","level":"1 - 10","effect":":guem:: Each time your opponent receives DMG-, Deal 150-773 Shock DMG.\\n:guem::mage:: Each time your opponent receives Terror, Deal 150-773 Flat DMG.\\nShock DMG is a DMG that cannot be reduced or increased, but still is affected by Scarab and Shield-like skills.\\nFlat DMG is a DMG that ignores everything.","last_patch":"27 Apr 2024","url":"https://www.eredan-arena.com/images/thumb/items/126.png","tag":["guem","mage"]},{"name":"Bubblez","rarity":"Rare","position":"1st / Attacker","level":"1 - 10","effect":":zil:: Each time your opponent receives Terror he suffers 242-1248 flat DMG and you receive 24-124 DMG+.\\nFlat DMG is a DMG that ignores everything.","last_patch":"02 Sep 2023","url":"https://www.eredan-arena.com/images/HD/items/92.png","tag":["zil"]},{"name":"Caliburn","rarity":"Epic","position":"1st / Attacker","level":"1 - 10","effect":":warrior:: At start of the fight, deal 776-4003 normal DMG and your Strength increase by 97-500.\\n:warrior::undead:: You also receive 1-10 DMG-.","last_patch":"28 Jun 2024","url":"https://www.eredan-arena.com/images/HD/items/155.png","tag":["warrior","undead"]},{"name":"Carnival Mask","rarity":"Common","position":"2nd / Defender","level":"1 - 10","effect":"Receive 291-1501 Shield.\\nEach time your opponent receives a new type of positive alteration, receive 145-750 more Shield.","last_patch":"18 Jan 2023","url":"https://www.eredan-arena.com/images/HD/items/31.png","tag":[]},{"name":"Chains of Dread","rarity":"Rare","position":"1st / Attacker","level":"1 - 10","effect":":neh: or :demon:: Each time you receive a new type of negative alteration, your opponent receives 20 Terror and suffers 388-2001 Shock DMG.\\nShock DMG is an unmodifiable DMG.","last_patch":"18 Aug 2023","url":"https://www.eredan-arena.com/images/HD/items/81.png","tag":["neh","demon"]},{"name":"Chew Bone","rarity":"Common","position":"2nd / Defender","level":"1 - 10","effect":":beast:: at the end of the skill activation phase you heal 581-2997 points and receive 116-599 DMG+.","last_patch":"09 Sep 2023","url":"https://www.eredan-arena.com/images/HD/items/97.png","tag":["beast"]},{"name":"Chimera","rarity":"Legendary","position":"1st / Attacker","level":"1 - 10","effect":"At the end of the fight, deals 485-2502 unmodifiable DMG.\\nYour :swordDice: attacks remove half of an opposing positive alteration.","last_patch":"24 Mar 2022","url":"https://www.eredan-arena.com/images/HD/items/54.png","tag":[]},{"name":"Claws of Hrimnir","rarity":"Legendary","position":"2nd / Defender","level":"1 - 10","effect":":win:: Each time you receive DMG+, deal 200-1031 Icy Normal DMG to your opponent.\\nKing Hrimnir: Your opponent also receive 50-257 Frostbite.\\nIcy DMG is a DMG that is increased by 10% for every Frost on your opponent.","last_patch":"23 Dec 2023","url":"https://www.eredan-arena.com/images/thumb/items/135.png","tag":["win"]},{"name":"Cobra Bow","rarity":"Legendary","position":"1st / Attacker","level":"1 - 10","effect":":nom:: each time you activate a skill you deal 150-773 Life Drain DMG to your opponent.\\nKamenwati or Hamadryad: you gain 30-154 DMG+ before that.\\nLife Drain DMG is a Normal DMG that simultaneously heals the same value.","last_patch":"21 Oct 2023","url":"https://www.eredan-arena.com/images/thumb/items/119.png","tag":["nom"]},{"name":"Coconut Bomb","rarity":"Rare","position":"1st / Attacker","level":"1 - 10","effect":":pir: or :dais:: At the end of skill activation phase, deal 150-773 Fireball DMG to the opposing hero for each Powder or Spore on them.\\nFireball DMG is a normal DMG that applies 10% of its value as DMG- to the opponent.","last_patch":"30 Aug 2024","url":"https://www.eredan-arena.com/images/thumb/items/164.png","tag":["pir","dais"]},{"name":"Communicator","rarity":"Epic","position":"2nd / Defender","level":"1 - 10","effect":":marauder:: Each time one of your Dexterity is consumed, you and your :maraudeur: allies that you share a race with receive 20-103 DMG+ & 0-2 Dodge.\\n:noz::marauder:: your :marauder: allies receive the bonuses without race restrictions.","last_patch":"18 May 2024","url":"https://www.eredan-arena.com/images/HD/items/152.png","tag":["noz","marauder"]},{"name":"Conch of the Tides","rarity":"Legendary","position":"2nd / Defender","level":"1 - 10","effect":"Naga: At the start of combat, your Naga heroes receive 388-2001 Shield and increase the value of all your positive alterations by 25%.\\nAbysscaller Tamira: 50% instead of 25%.","last_patch":"09 Aug 2023","url":"https://www.eredan-arena.com/images/HD/items/76.png","tag":[]},{"name":"Councillor's Outfit","rarity":"Common","position":"2nd / Defender","level":"1 - 10","effect":"At the start of the fight, receive 24-123 DMG+ for each ally from a different guild.","last_patch":"24 Mar 2022","url":"https://www.eredan-arena.com/images/HD/items/32.png","tag":[]},{"name":"Councillor's Stiletto","rarity":"Epic","position":"1st / Attacker","level":"1 - 10","effect":"At the start of the fight, deal 485-2502 DMG and decrease the opponent's strength by 25%.\\nUnknown Race or Edrianne: Your opponent receives 50 bleeding.","last_patch":"18 Jan 2023","url":"https://www.eredan-arena.com/images/HD/items/64.png","tag":[]},{"name":"Councillor's Treaty","rarity":"Epic","position":"1st / Attacker","level":"1 - 10","effect":":cou:: at the start of the fight, you get the following effects depending on the number of Guilds represented by your visible heroes:  1 guild: Strength+ 120-619;  2 guilds: the previous more opp Thunderstruck 120-619;  3 guilds: the previous more DMG Drain 120-619.","last_patch":"28 Oct 2023","url":"https://images-ext-2.discordapp.net/external/lbVY7VAMB9v-eLX3yVZ5KAwsneETchYwt7GeZOu8Nfw/http/static.eredan.com/images/web_big/037727064d89b993dd6e70a473fcebaf.png","tag":["cou"]},{"name":"Crown of the Border CS","rarity":"Legendary","position":"2nd / Defender","level":"1 - 10","effect":"At the end of the activation phase, get 300-1547 Shield + 30-154 for each of your non-:swordDice:.","last_patch":"29 Nov 2023","url":"https://www.eredan-arena.com/images/HD/items/73.png","tag":[]},{"name":"Crystal Armor","rarity":"Epic","position":"2nd / Defender","level":"1 - 10","effect":":noz: or :win:: Each time your opponent receives a Frost token, you receive 50-257 Shield for each of them.\\nWhen you lose your Shield, your opponent suffers 250-1285 Frostbolt damage.\\nFrostbolt damage is a normal damage that applies 10% of its value as Frostbite to the opponent.","last_patch":"16 Dec 2024","url":"https://www.eredan-arena.com/images/thumb/items/190.png","tag":["noz","win"]},{"name":"Crystal Mirror","rarity":"Epic","position":"2nd / Defender","level":"1 - 10","effect":":noz:: At the start of the fight, you receive 1-5 Decoy and 1000-5159 Shield.","last_patch":"27 Jan 2024","url":"https://www.eredan-arena.com/images/HD/items/139.png","tag":["noz"]},{"name":"Cursed Armor","rarity":"Epic","position":"2nd / Defender","level":"1 - 10","effect":"At the start of the fight, receive 100 DMG-.\\nEach time you suffer DMG from :swordDice:, the opponent receives 155-799 Bleeding.","last_patch":"24 Mar 2022","url":"https://www.eredan-arena.com/images/HD/items/38.png","tag":[]},{"name":"Deadly Arrow","rarity":"Legendary","position":"2nd / Defender","level":"1 - 10","effect":":elfine:: at the start of the fight, Deal 500-2579 Pure DMG and your opponent get 50-257 Bleeding.\\nDeathcaller Ludmilla: at the end of the fight, Deal as much DMG as your Strength.\\nPure DMG is a DMG that ignores all alterations that could reduce or prevent it.","last_patch":"04 Nov 2023","url":"https://www.eredan-arena.com/images/thumb/items/124.png","tag":["elfine"]},{"name":"Demonic Mask","rarity":"Common","position":"2nd / Defender","level":"1 - 10","effect":":demon:: Each time your opponent receives a new type of negative alteration, you receive 485-2502 Shield.","last_patch":"18 Aug 2023","url":"https://www.eredan-arena.com/images/thumb/items/79.png","tag":["demon"]},{"name":"Desert Scimitar","rarity":"Common","position":"1st / Attacker","level":"1 - 10","effect":"At the start of the fight, deal 310-1599 DMG to your opponent, then 77-399 for each of your :swordDice:.","last_patch":"24 Mar 2022","url":"https://www.eredan-arena.com/images/HD/items/44.png","tag":[]},{"name":"Desert Sword","rarity":"Epic","position":"1st / Attacker","level":"1 - 10","effect":":nom:: Each time you receive a positive alteration (except Decoy), deal 200-1031 Normal DMG and receive 1-5 Decoy.","last_patch":"17 Feb 2024","url":"https://www.eredan-arena.com/images/HD/items/142.png","tag":["nom"]},{"name":"Divine Hammer","rarity":"Epic","position":"1st / Attacker","level":"1 - 10","effect":":priest:: at the start of the fight deal 600-3095 Shock DMG and receive 60-309 Blessing.\\n:ava::priest:: you receive 1 Riposte also.\\nShock DMG is a DMG that cannot be modified by alterations, but can consume shield skills and can be prevented.","last_patch":"07 Dec 2023","url":"https://www.eredan-arena.com/images/HD/items/15.png","tag":["priest","ava"]},{"name":"Eredan's Wisdom","rarity":"Legendary","position":"1st / Attacker","level":"1 - 10","effect":":mage:: At the start of the fight, deal 1400-7223 Pure DMG and receive 0-3 Critical. Repeat the damage once if the opponent is :equinox:.\\nCiramor(both): At the end of the skill activation phase, deal 1400-7223 Pure DMG.**  Pure DMG is a DMG that ignores all alterations that could reduce or prevent it.","last_patch":"17 Sep 2024","url":"https://www.eredan-arena.com/images/thumb/items/167.png","tag":["mage"]},{"name":"Executionner's Key","rarity":"Rare","position":"2nd / Defender","level":"1 - 10","effect":":marauder::guem: : Each time you use a Critical bonus, deal 116-598 flat DMG and your opponente receives 11-59 Bleeding.\\nFlat DMG is a DMG that ignores everything.","last_patch":"31 Aug 2023","url":"https://www.eredan-arena.com/images/thumb/items/90.png","tag":["marauder","guem"]},{"name":"Ferocious Bite","rarity":"Legendary","position":"1st / Attacker","level":"1 - 10","effect":"Black Fang: Each time you activate a skill, increase the Bleeding on your opponent by 9-46, 13-69 VS Humans.","last_patch":"04 Jul 2022","url":"https://www.eredan-arena.com/images/thumb/items/57.png","tag":[]},{"name":"Festering Horns","rarity":"Epic","position":"2nd / Defender","level":"1 - 10","effect":":neh:: At the start of the fight, deal 800-4127 Plague DMG.\\n:neh::dais:: Give your :neh: allies 80-412 Thorn and 80-412 Strength.\\nPlague DMG is a Normal DMG that applies 1 Poison to your opponent.","last_patch":"17 Sep 2024","url":"https://www.eredan-arena.com/images/thumb/items/168.png","tag":["neh","dais"]},{"name":"Firestorm","rarity":"Legendary","position":"1st / Attacker","level":"1 - 10","effect":"At the start of the fight, deal 194-1000 Lightning and 194-1000 Fireball DMG.\\nThundering Bragan, Mylad or Bragan: Each time the opponent receives DMG- or Thunderstruck, he gets 25% of the other as well.","last_patch":"30 Jul 2022","url":"http://static.eredan.com/images/print/5d09cf7da1d1356342da54478f260825.jpg","tag":[]},{"name":"Flame of the Phoenix","rarity":"Legendary","position":"2nd / Defender","level":"1 - 10","effect":"Each time you receive Blessing, you deal 400-2063 flat DMG to your opponent and he receives 40-206 DMG- .\\nThe Phoenix or a \\"Killicrew\\", you also receive 40-206 DMG+ and 40-206 Strength.\\nFlat DMG is a DMG that ignores everything.","last_patch":"13 Sep 2023","url":"https://www.eredan-arena.com/images/thumb/items/102.png","tag":[]},{"name":"Frimacier","rarity":"Legendary","position":"1st / Attacker","level":"1 - 10","effect":":undead: : you and your opponent get 4-20 Frostbite.\\nEach time you receive a new positive or negative alteration deal 400-2063 DMG.\\nDeath-Knight Oscar or :ava: : Deal 600-3094 DMG instead if your opponent is more wounded than you.","last_patch":"12 Sep 2024","url":"https://www.eredan-arena.com/images/thumb/items/166.png","tag":["undead","ava"]},{"name":"Frozen Stone Heart","rarity":"Rare","position":"2nd / Defender","level":"1 - 10","effect":"Each time your opponent receive 1 or more Frost, you Heal 100-515 DMG.","last_patch":"16 Dec 2023","url":"https://www.eredan-arena.com/images/thumb/items/134.png","tag":[]},{"name":"Frozen-death Potion","rarity":"Common","position":"1st / Attacker","level":"1 - 10","effect":"At the beggining of the fight, deal 400-2063 DMG and your opponent receive 1 Frost.","last_patch":"16 Dec 2023","url":"https://www.eredan-arena.com/images/thumb/items/133.png","tag":[]},{"name":"Gae Bolga","rarity":"Legendary","position":"1st / Attacker","level":"1 - 10","effect":":run:, :mer: or :ava:: Each time you activate a skill, deal 200-1031 flat DMG to your opponent. All your opponents receive 25 Bleeding.\\nBoadicea: At the start of the fight you and your :human: allies receive 1 Critical.\\nFlat DMG is a DMG that ignores everything.","last_patch":"02 Dec 2023","url":"https://www.eredan-arena.com/images/thumb/items/129.png","tag":["run","mer","ava"]},{"name":"Gladiator's Gaive","rarity":"Epic","position":"1st / Attacker","level":"1 - 10","effect":":run:: Each time you receive a new positive alteration (except Decoy), deal 250-1289 Normal DMG and receive 1-5 Decoy.","last_patch":"07 Feb 2024","url":"https://www.eredan-arena.com/images/HD/items/141.png","tag":["run"]},{"name":"Golem's Heart","rarity":"Epic","position":"1st / Attacker","level":"1 - 10","effect":":noz::golem:: at the start of the fight you receive 20-103 DMG+ and 200-1031 Shield.\\nIf Delko is one of your allies: he and your :golem: allies receive 10-51 DMG+ and 100-515 Shield.","last_patch":"30 Sep 2023","url":"https://www.eredan-arena.com/images/thumb/items/111.png","tag":["noz","golem"]},{"name":"Heart of Oural","rarity":"Legendary","position":"2nd / Defender","level":"1 - 10","effect":":sto:: At the start of the fight, receive 155-799 DMG+ and 775-3995 Shield.\\nTemujin: two of your :sto: allies receive 50% of these bonuses.","last_patch":"10 Oct 2024","url":"https://www.eredan-arena.com/images/HD/items/159.png","tag":["sto"]},{"name":"Heart of the Giant","rarity":"Rare","position":"2nd / Defender","level":"1 - 10","effect":":colossus:: Each time you activate a skill you get 155-799 Shield and your allies get 51-266 Shield.\\n:colossus::mer:: you also get 1 Mist or 1 Endurance.","last_patch":"06 Sep 2023","url":"https://www.eredan-arena.com/images/HD/items/95.png","tag":["colossus"]},{"name":"Heroic Strike","rarity":"Legendary","position":"1st / Attacker","level":"1 - 10","effect":"Lucyan, the vagabond: For each Dodge, Critical or Riposte received during the fight, you and your Human allies get 48-247 Strength+, 72-370 VS Beast.","last_patch":"04 Jul 2022","url":"https://www.eredan-arena.com/images/HD/items/58.png","tag":[]},{"name":"Horns of Ourenos","rarity":"Legendary","position":"2nd / Defender","level":"1 - 10","effect":":homchai: or :eltarite:: each time you suffer DMG, you gain Rage 6-30 and each time you deal DMG, you get Berserk 6-30.\\n:eltarite:: receives 12-60 instead.","last_patch":"28 Oct 2023","url":"https://www.eredan-arena.com/images/thumb/items/123.png","tag":["homchai","eltarite"]},{"name":"Icy Axe","rarity":"Rare","position":"1st / Attacker","level":"1 - 10","effect":":iceelf:: At the beginning of the fight, Deal 600-3095 DMG and your opponent receives 0-3 Frost.","last_patch":"02 Dec 2023","url":"https://www.eredan-arena.com/images/thumb/items/131.png","tag":["iceelf"]},{"name":"Icy Crown","rarity":"Epic","position":"2nd / Defender","level":"1 - 10","effect":":win:: At the end of the skill activation phase, your Strength is increased by 120-619 +12-61 for each of your Frost Malus.\\n:win::beast:: Your Strength is increased by 180-928 + 24-123 for each of your Frost Malus instead.","last_patch":"02 Dec 2023","url":"https://www.eredan-arena.com/images/thumb/items/130.png","tag":["win","beast"]},{"name":"Imperial Armor","rarity":"Common","position":"2nd / Defender","level":"1 - 10","effect":":kot:: At the start of the fight, receive 581-2997 Shield and your :kot: :warrior: allies receive 193-999 Shield.","last_patch":"26 Aug 2023","url":"https://www.eredan-arena.com/images/HD/items/85.png","tag":["kot","warrior"]},{"name":"Iron Bull","rarity":"Legendary","position":"1st / Attacker","level":"1 - 10","effect":":warrior:: Everytime you receive a Riposte bonus, deal 250-1289 flat DMG for each Riposte bonus received, or 375-1933 if your Strength is superior to your opponent's Strength.\\nMankato: you receive also DMG+ 25-128.\\nFlat DMG is a DMG that ignores everything.","last_patch":"24 Nov 2023","url":"https://www.eredan-arena.com/images/HD/items/88.png","tag":["warrior"]},{"name":"Ishaïa's Soulstone","rarity":"Legendary","position":"2nd / Defender","level":"1 - 10","effect":":mer:: Each time you activate a skill you heal 194-1000 and receive 19-100 Thorn.\\nPrimula, The Council's Rose or Councillor Ishaïa: Your allies receive 19-100 Blessing or 19-100 DMG+.","last_patch":"24 Nov 2023","url":"https://www.eredan-arena.com/images/HD/items/83.png","tag":["mer"]},{"name":"Jolly Roger","rarity":"Common","position":"2nd / Defender","level":"1 - 10","effect":":pir:: each time you receive a new positive alteration you gain 20-103 Strength, 40-206 if your opponent also has the same alteration.","last_patch":"18 Jul 2024","url":"https://www.eredan-arena.com/images/thumb/items/114.png","tag":["pir"]},{"name":"Knight's Shield","rarity":"Epic","position":"2nd / Defender","level":"1 - 10","effect":"At the start of combat you receive 581-2997 Shield.\\nAt the end of skill activation phase receive 116-599 Shield for each opponent Sword.","last_patch":"18 Jan 2023","url":"https://www.eredan-arena.com/images/HD/items/23.png","tag":[]},{"name":"Kotoba's Banner","rarity":"Epic","position":"2nd / Defender","level":"1 - 10","effect":":kot:: each time your Strength increase, deal 100-515 flat DMG.\\n:kot::human:: at the beggining of the fight, you receive also 10-51 Rage.\\nFlat DMG is a DMG that ignores everything.","last_patch":"14 Oct 2023","url":"https://www.eredan-arena.com/images/thumb/items/117.png","tag":["kot","human"]},{"name":"Kunai","rarity":"Common","position":"1st / Attacker","level":"1 - 10","effect":":kot::marauder:: At the start of the fight, Deal 400-2063 Normal DMG and receive 0-2 Dexterity.","last_patch":"23 Mar 2024","url":"https://www.eredan-arena.com/images/HD/items/146.png","tag":["kot","marauder"]},{"name":"Last Meal","rarity":"Rare","position":"2nd / Defender","level":"1 - 10","effect":":undead:: at start of the fight, you receive 100 Curse.\\nEach time you activate a skill, if you have a Stench Bonus, you Heal 200-1031, +50-257 for each of your negative alterations.","last_patch":"24 May 2024","url":"https://www.eredan-arena.com/images/HD/items/118.png","tag":["undead"]},{"name":"Laurel of the Muse","rarity":"Rare","position":"2nd / Defender","level":"1 - 10","effect":":bard:: At the start of the fight, receive 10-51 DMG+ and Flow for each non-:redDice: dice rolled.","last_patch":"19 Nov 2024","url":"https://www.eredan-arena.com/images/thumb/items/186.png","tag":["bard"]},{"name":"Lazurd","rarity":"Legendary","position":"1st / Attacker","level":"1 - 10","effect":":noz:: Each time one of your dice becomes :swordDice:, receive 10-51 DMG+ and Deal 500-2579 Spellbreaker DMG.\\nKelltaron: receive an additional 10-51 DMG+ for each of your :noz: allies.\\nSpellbreaker DMG is a DMG that halves a random opposing positive alteration.","last_patch":"18 May 2024","url":"https://www.eredan-arena.com/images/HD/items/151.png","tag":["noz"]},{"name":"Lightning Rod","rarity":"Common","position":"2nd / Defender","level":"1 - 10","effect":":pir: or :tem:: At the Start of the fight, you and your opponent each receive 50-257 Thunderstruck.","last_patch":"18 Nov 2024","url":"https://www.eredan-arena.com/images/thumb/items/187.png","tag":["pir","tem"]},{"name":"Lightning-thrower","rarity":"Epic","position":"1st / Attacker","level":"1 - 10","effect":"At the end of skill activation phase, if you are :pir:, increase the Thunderstruck on your opponent by 25%, then deal 2x 194-1000 Lightning DMG.\\nLightning DMG is a DMG that causes a tenth of its value as Thunderstruck.","last_patch":"30 Jul 2022","url":"http://static.eredan.com/images/print/0e700fca41e768b1092a61370e58b823.png","tag":["pir"]},{"name":"Lion Sword","rarity":"Rare","position":"1st / Attacker","level":"1 - 10","effect":"At the end of the skill activation phase (after Runes and Spores), receive 100 Strength+ for each time you have activated a skill, then deal 388-2001 Shock DMG.\\nShock DMG is an unmodifiable DMG.","last_patch":"24 Mar 2022","url":"https://www.eredan-arena.com/images/thumb/items/46.png","tag":[]},{"name":"Maestro's Baton","rarity":"Legendary","position":"2nd / Defender","level":"1 - 10","effect":":bard:: Each time your opponent receives Echo, your :bard: receive 58-299 Flow.\\nThe Maestro: They also receive 1 Critical and 150 DMG+.","last_patch":"10 Aug 2023","url":"https://www.eredan-arena.com/images/thumb/items/78.png","tag":["bard"]},{"name":"Mask of Confusion","rarity":"Epic","position":"2nd / Defender","level":"1 - 10","effect":":neh: or :zil:: At the end of skill activation phase deal 600-3095 Pure DMG to your opponent and give 0-3 Confusion to them.\\n:neh::berserker: or :zil::berserker:: you deal Life Drain DMG instead of Pure DMG.\\nPure DMG is a DMG that ignores all alterations that could reduce or prevent it.\\nLife Drain DMG is a normal DMG that also heals by the same value.","last_patch":"12 Jul 2024","url":"https://www.eredan-arena.com/images/HD/items/156.png","tag":["neh","zil","berserker"]},{"name":"Mask of Ptol'A","rarity":"Epic","position":"2nd / Defender","level":"1 - 10","effect":":nom:: each time you receive a new alteration your opponent receives 100-515 Curse.\\n:nom::undead: or :nom::priest:: at the start of the fight your opponent receives 50-257 Bleeding.\\nThis effect considers the positive and negative alterations you get.","last_patch":"21 Oct 2023","url":"https://www.eredan-arena.com/images/HD/items/120.png","tag":["nom","undead","priest"]},{"name":"Master-Linker Cane","rarity":"Epic","position":"1st / Attacker","level":"1 - 10","effect":":iceelf:: At start of the fight, deal 400-2063 Tidal Wave damage and 400-2063 Frostbolt damage.\\n:iceelf::mage: or :iceelf::priest:: Deal 600-3094 instead.\\n:sto::iceelf::mage: or :sto::iceelf::priest:: Deal 800-4126 instead.\\nTidal Wave damage is a normal damage that before being dealt increases one of your positive alterations at random by 25% (rounded up).\\nFrostbolt damage is a normal damage that applies 10% of its value as Frostbite to the opponent.","last_patch":"13 Dec 2024","url":"https://www.eredan-arena.com/images/thumb/items/191.png","tag":["iceelf","mage","priest","sto"]},{"name":"Morning Star Mace","rarity":"Epic","position":"1st / Attacker","level":"1 - 10","effect":":sap:: At the start of the fight, deal 581-2997 Pure DMG to your opponent, then receive Thorn equal to 20% of their Strength.\\n:sap::warrior: or :sap: :berserker:: you also receive 1 Dexterity.\\nPure DMG is a DMG that ignores all alterations that could reduce or prevent it.","last_patch":"09 Sep 2023","url":"https://www.eredan-arena.com/images/HD/items/100.png","tag":["sap","warrior","berserker"]},{"name":"Murasama's Sheath","rarity":"Epic","position":"2nd / Defender","level":"1 - 10","effect":":kot:: each time one of your dice is changed during the fight, your Strength and DMG+ are increased by 4-20%.\\n:kot::warrior: or :kot::marauder:: you also receive 1 Dodge, Riposte or Critical at random.","last_patch":"07 Jun 2024","url":"https://www.eredan-arena.com/images/HD/items/87.png","tag":["kot","warrior","marauder"]},{"name":"Naya's Crown","rarity":"Legendary","position":"2nd / Defender","level":"1 - 10","effect":"At the start of the fight your :noz::marauder: heroes receive 600-3095 Shield and all the opposing heroes receive 60-309 Frostbite.\\nNaya: your :noz::marauder: heroes also receive 60-309 DMG+ and 1 Dodge.","last_patch":"16 Sep 2023","url":"https://www.eredan-arena.com/images/HD/items/105.png","tag":["noz","marauder"]},{"name":"Nobleman's Helmet","rarity":"Epic","position":"2nd / Defender","level":"1 - 10","effect":":ava: : Each time you active an ability, if you are more wounded than your opponent, Heal 250-1289 and you receive 1-5 Decoy.","last_patch":"31 Jan 2024","url":"https://www.eredan-arena.com/images/HD/items/140.png","tag":["ava"]},{"name":"Not that Spooky Mask","rarity":"Rare","position":"1st / Attacker","level":"1 - 10","effect":":undead:, :demon: or :unkrace:: at the start of the fight, you get 1 Mist for each of your :undead:, :demon: or :unkrace: ally.\\nEach time you consume a Mist, you heal 350-1805.","last_patch":"28 Oct 2023","url":"https://www.eredan-arena.com/images/HD/items/121.png","tag":["undead","demon","unkrace"]},{"name":"Obscure","rarity":"Epic","position":"1st / Attacker","level":"1 - 10","effect":":zil:: each time you receive a new positive alteration, deal 405-2089 Shock DMG, +101-522 for each opposing positive alteration.\\n:zil::mage: or :zil::marauder:: Receive 0-2 Decoy at the start of the fight.\\nShock DMG is a DMG that cannot be reduced or increased, but still is affected by Scarab and Shield-like skills.","last_patch":"18 Jul 2024","url":"https://www.eredan-arena.com/images/HD/items/149.png","tag":["zil","mage","marauder"]},{"name":"Oracle's Scepter","rarity":"Legendary","position":"1st / Attacker","level":"1 - 10","effect":":priest: or :unkclass:: Each time you receive Runes, you deal 100-515 flat DMG to the opposing hero for each Rune received, then gain 20-103 Blessing.\\nSapient or The Curator: Triggering your Blessing also deals as much flat DMG as your Blessing to the opposing hero.\\nFlat DMG is a DMG that ignores everything.","last_patch":"28 Aug 2024","url":"https://www.eredan-arena.com/images/thumb/items/162.png","tag":["priest"]},{"name":"Orb of Fire","rarity":"Common","position":"1st / Attacker","level":"1 - 10","effect":"At the start of the fight, deals 155-799 DMG to the opponent, and it receives 15-79 DMG-.","last_patch":"24 Mar 2022","url":"https://www.eredan-arena.com/images/HD/items/1.png","tag":[]},{"name":"Orb of Life","rarity":"Rare","position":"2nd / Defender","level":"1 - 10","effect":"At the end of skill activation phase, heal 388-2001 health points.","last_patch":"24 Mar 2022","url":"https://www.eredan-arena.com/images/HD/items/19.png","tag":[]},{"name":"Paladin's Amulet","rarity":"Rare","position":"2nd / Defender","level":"1 - 10","effect":":ava:: at the end of the fight Heal 400-2063 and deal 400-2063 Shock DMG, 600-3094 if you have Blessing or Lightroot.\\nShock DMG is a DMG that cannot be modified by alterations, but can consume shield skills and can be prevented.","last_patch":"24 Nov 2023","url":"https://www.eredan-arena.com/images/HD/items/112.png","tag":["ava"]},{"name":"Pocket-shooter","rarity":"Rare","position":"1st / Attacker","level":"1 - 10","effect":"At the end of the fight, deals 291-1501 Fireball DMG. Repeat it once if you are a :pir:.\\nFireball DMG is a DMG that causes a tenth of its value as DMG-.","last_patch":"24 Mar 2022","url":"https://www.eredan-arena.com/images/HD/items/48.png","tag":["pir"]},{"name":"Potion of Power CS","rarity":"Rare","position":"1st / Attacker","level":"1 - 10","effect":"At the start of the fight, you receive 15-77 DMG+.","last_patch":"29 Nov 2023","url":"https://www.eredan-arena.com/images/HD/items/67.png","tag":[]},{"name":"Power of Guem","rarity":"Epic","position":"1st / Attacker","level":"1 - 10","effect":":colossus:: Each time you activate a skill, deal 252-1300 flat DMG to your opponent, and if you have exactly 1 Roll left, your opponent gets 50 Thunderstruck or 50 DMG-.\\nFlat DMG is a DMG that ignores any alteration.","last_patch":"01 Jun 2023","url":"https://www.eredan-arena.com/images/HD/items/74.png","tag":["colossus"]},{"name":"Reindeer Bell","rarity":"Rare","position":"2nd / Defender","level":"1 - 10","effect":":win::beast:: At the start of the fight, you receive 50-257 DMG+ more 5-25 for each of your opponent Frost tokens and your opponent receive 1 Frost + 1 for each of your :human: allies.","last_patch":"23 Dec 2024","url":"https://www.eredan-arena.com/images/thumb/items/193.png","tag":["win","beast"]},{"name":"Repulsion Belt","rarity":"Epic","position":"2nd / Defender","level":"1 - 10","effect":":mage:: At the start of the fight, get 39-201 DMG+.\\nEach time you receive Thunderstruck, receive half of it as DMG+.","last_patch":"30 Jul 2022","url":"https://www.eredan-arena.com/images/thumb/items/59.png","tag":["mage"]},{"name":"Rhum of the Pirate","rarity":"Epic","position":"2nd / Defender","level":"1 - 10","effect":":pir: : At the start of the fight you receive 58-299 DMG+ and all your other :pir: receive 29-149 DMG+.\\n:captain: : you also receive 29-149 Rage.","last_patch":"13 Sep 2023","url":"https://www.eredan-arena.com/images/thumb/items/101.png","tag":["pir","captain"]},{"name":"Ring of the Winter","rarity":"Legendary","position":"2nd / Defender","level":"1 - 10","effect":":iceelf:: At the start of the fight and at the end of skill activation phase, receive 500-2579 Blizzard, +50-257 for every Frost on the opposing heroes.\\nNibelle or The Cailleach: your opponents also receive 0-2 Frost.\\nThis items considers the Frosts on opponents outside of the combat too.","last_patch":"09 Dec 2023","url":"https://www.eredan-arena.com/images/thumb/items/132.png","tag":["iceelf"]},{"name":"Rondache","rarity":"Epic","position":"2nd / Defender","level":"1 - 10","effect":":human:: At the start of the fight, give yourself and your :human: allies Shield = 500-2579 + your base Strength.","last_patch":"20 Jan 2024","url":"https://www.eredan-arena.com/images/thumb/items/55.png","tag":["human"]},{"name":"Rosary of Corruption","rarity":"Epic","position":"2nd / Defender","level":"1 - 10","effect":":neh:: Each time you suffer more than 3000 DMG, your opponent receives 58-299 DMG- and 58-299 Bleeding.\\n:neh::demon:: Your opponent also loses a positive alteration.","last_patch":"18 Aug 2023","url":"https://www.eredan-arena.com/images/HD/items/80.png","tag":["neh","demon"]},{"name":"Royal Sword","rarity":"Rare","position":"1st / Attacker","level":"1 - 10","effect":":ava::warrior:: At start of the fight, deal 600-3095 normal DMG and receive 0-3 Riposte.","last_patch":"28 Jun 2024","url":"https://www.eredan-arena.com/images/HD/items/144.png","tag":["ava","warrior"]},{"name":"Runic Diadem","rarity":"Common","position":"2nd / Defender","level":"1 - 10","effect":":run::priest:: each time you activate a skill receive 20-103 Blessing.","last_patch":"29 Sep 2023","url":"https://www.eredan-arena.com/images/thumb/items/109.png","tag":["run","priest"]},{"name":"Ruuna's Trident","rarity":"Legendary","position":"1st / Attacker","level":"1 - 10","effect":":priest:: Each time you activate an ability, deal 175-902 Tidal Wave damage.\\n:win::priest:: Deal 175-902 Icy Tidal Wave damage instead.\\n:run::priest:: Deal 262-1353 Tidal Wave damage instead.\\nTidal Wave damage is a normal damage that before being dealt increases one of your positive alterations at random by 25% (rounded up).\\nIcy damage is a damage increased by 10% for each Frost token on your opponent that also applies 1 Frost token to your opponent after that damage.","last_patch":"18 Dec 2024","url":"https://www.eredan-arena.com/images/thumb/items/194.png","tag":["priest","win","run"]},{"name":"Scroll of Entropy","rarity":"Rare","position":"2nd / Defender","level":"1 - 10","effect":":priest:: At the end of skill activation phase, remove two negative alterations from both heroes in fight.\\nRandomly deal 200-1031 Pure DMG to the opposing hero or heal 200-1031 DMG for each alteration removed.\\nPure DMG is a DMG that ignores all alterations that could reduce or prevent it.","last_patch":"28 Aug 2024","url":"https://www.eredan-arena.com/images/thumb/items/163.png","tag":["priest"]},{"name":"Secret Plan","rarity":"Legendary","position":"2nd / Defender","level":"1 - 10","effect":":craftsman:: At the beggining of the fight, for each of your :swordDice: get a random effect between:  +80-412 Strength  opp 80-412 thunderStruck  80-412 DMG+  80-412 opp DMG-","last_patch":"14 Oct 2023","url":"https://www.eredan-arena.com/images/thumb/items/116.png","tag":["craftsman"]},{"name":"Serpentine Scepter","rarity":"Rare","position":"1st / Attacker","level":"1 - 10","effect":":naga:: Each time your opponent's Constriction is triggered, Heal 97-500 and increase one of your positive alterations by 4-25% (rounded up or down randomly)","last_patch":"03 Sep 2024","url":"https://www.eredan-arena.com/images/thumb/items/165.png","tag":["naga"]},{"name":"Shield CS","rarity":"Common","position":"2nd / Defender","level":"1 - 10","effect":"At the start of the fight, get 120-619 Shield.","last_patch":"29 Nov 2023","url":"https://www.eredan-arena.com/images/HD/items/70.png","tag":[]},{"name":"Shield Generator","rarity":"Rare","position":"2nd / Defender","level":"1 - 10","effect":":golem:: at the start of the fight, you get 600-3095 Shield + 150-773 for each of your :golem: ally.","last_patch":"11 Nov 2023","url":"https://www.eredan-arena.com/images/HD/items/127.png","tag":["golem"]},{"name":"Sinister Shroud","rarity":"Legendary","position":"2nd / Defender","level":"1 - 10","effect":":guem:: Each time you receive DMG+, you also receive 155-799 Shield, + 77-399 for each opposing positive alteration.\\nIf Oykun, the Kagemusha or Graviton, Warden of the Void or Councillor Kuraying is one of your allies, he receives 15-79 DMG+.","last_patch":"31 Aug 2023","url":"https://www.eredan-arena.com/images/HD/items/89.png","tag":["guem"]},{"name":"Smash-rock Mass","rarity":"Epic","position":"1st / Attacker","level":"1 - 10","effect":"Each time you deal DMG higher than 4000, receive 39-201 Rage and 39-201 Berserk.","last_patch":"24 Mar 2022","url":"https://www.eredan-arena.com/images/thumb/items/50.png","tag":[]},{"name":"Snowsplitter","rarity":"Legendary","position":"1st / Attacker","level":"1 - 10","effect":":berserker:: At the start of the fight, deal 350-1805 Shieldbreaker and receive 0-2 Endurance.\\nAt the end of the skill activation phase, deal also 175-902 Icy Hit damage and receive 0-1 Riposte.\\nShieldbreaker damage is a normal damage that removes one of your opponent's shield-skills (Blizzard, Shield or Arcane Barrier) at random and increases the damage by the value of the removed shield more half of it.\\nIcy Hit damage is a normal damage increased by 10% for each Frost token on your opponent that also applies 1 Frost token to your opponent after that damage.","last_patch":"02 Dec 2024","url":"https://www.eredan-arena.com/images/thumb/items/189.png","tag":["berserker"]},{"name":"Solra's Bumblebee","rarity":"Epic","position":"2nd / Defender","level":"1 - 10","effect":":nom:: Each time you are Healed, you receive 8-41 Resilience.\\n:nom::priest:: If you are Healed by at least 1000 DMG, you receive Purify 1.","last_patch":"17 Feb 2024","url":"https://www.eredan-arena.com/images/HD/items/137.png","tag":["nom","priest"]},{"name":"Solstice Stone","rarity":"Epic","position":"2nd / Defender","level":"1 - 10","effect":":mage: or :priest:: Each time you are Healed, Deal 98-505 flat damage and you get 9-50 DMG+.\\n:sto::mage: or :sto::priest:: Trigger this effect at the beginning and at the end of the fight as well.","last_patch":"10 Oct 2024","url":"https://www.eredan-arena.com/images/HD/items/125.png","tag":["mage","priest","sto"]},{"name":"Sorcerer's Staff","rarity":"Epic","position":"1st / Attacker","level":"1 - 10","effect":":mage::guem:: At the start of the fight you deal 349-1800 Lightning and 349-1800 Tidal Wave DMG to your opponent.\\n:sto::mage::guem:: You also deal 349-1800 Spellbreaker DMG.","last_patch":"31 Aug 2023","url":"https://www.eredan-arena.com/images/HD/items/91.png","tag":["mage","guem","sto"]},{"name":"Spiked Scourge","rarity":"Rare","position":"1st / Attacker","level":"1 - 10","effect":":marauder: ou :warrior: : at the start of the fight you receive 48-247 Thorns.\\nEach time you activate a skill you deal flat DMG to your opponent equal to your Thorn's value.\\nFlat DMG is a DMG that ignores everything.","last_patch":"24 Aug 2023","url":"https://www.eredan-arena.com/images/HD/items/84.png","tag":["warrior","marauder"]},{"name":"Spiritual Branch","rarity":"Rare","position":"1st / Attacker","level":"1 - 10","effect":":dais:: At the end of skill activation phase, receive 40-206, +4-20 for each of your Spores, then deal 400-2060 Pure DMG to your opponent twice.\\nPure DMG is a DMG that ignores all alterations that could reduce or prevent it.","last_patch":"19 Jul 2024","url":"https://www.eredan-arena.com/images/HD/items/157.png","tag":["dais"]},{"name":"Staff of Kei'zan","rarity":"Legendary","position":"1st / Attacker","level":"1 - 10","effect":"At the start of the fight, Deal 1000-5159 Flowering DMG, +333-1719 for each of your :dais: allies, then receive 50-257 Thorns.\\nKei'zan or Kei'zan the World-Tree: you also receive 10-51 Restore & 1 Critical.\\nFlowering DMG is a normal DMG that applies 1 Spore to you and to your opponent.","last_patch":"19 Jul 2024","url":"http://static.eredan.com/images/print/517ae72f6f1dedfad3ad7f83eecb5e9c.png","tag":["dais"]},{"name":"Stink Bomb","rarity":"Epic","position":"1st / Attacker","level":"1 - 10","effect":"At the start of the fight, you and your opponent are dealt 400-2063 Shock damage and receive 40-206 Stench.\\nShock damage is a damage that cannot be reduced or increased, but still can be prevented by skills like Shield or Scarab.","last_patch":"06 Aug 2024","url":"https://www.eredan-arena.com/images/HD/items/145.png","tag":[]},{"name":"Sun Emblem","rarity":"Rare","position":"2nd / Defender","level":"1 - 10","effect":":solarian:: At the start of the fight and after the skill activation phase, you receive 40-206 Resilience & 0-2 Solar Light.","last_patch":"31 May 2024","url":"https://www.eredan-arena.com/images/HD/items/148.png","tag":["solarian"]},{"name":"Sword CS","rarity":"Common","position":"1st / Attacker","level":"1 - 10","effect":"At the start of the Fight, deal 100-515 Normal DMG.","last_patch":"29 Nov 2023","url":"https://www.eredan-arena.com/images/HD/items/66.png","tag":[]},{"name":"Sword of Artaban","rarity":"Legendary","position":"1st / Attacker","level":"1 - 10","effect":":colossus:: At the start of the fight deal 969-4999 Pure DMG to your opponent, +242-1249 for each of your :swordDice: and receive 96-499 DMG+.\\nArtaban: you also receive 1 Riposte and 1 Critical.\\nPure DMG is a DMG that ignores all alterations that could reduce or prevent it.","last_patch":"06 Sep 2023","url":"https://www.eredan-arena.com/images/HD/items/96.png","tag":[]},{"name":"Sword of Sins","rarity":"Legendary","position":"1st / Attacker","level":"1 - 10","effect":":demon:: Each time your opponent receives DMG-, it suffers 145-748 flat DMG.\\nDark Messiah Samael: you also gain 29-149 Strength+.\\nFlat DMG is a DMG that ignores everything.","last_patch":"18 Aug 2023","url":"https://www.eredan-arena.com/images/HD/items/82.png","tag":["demon"]},{"name":"Sword of the 5 Elders","rarity":"Legendary","position":"1st / Attacker","level":"1 - 10","effect":"Every fifth damage you deal is increased by 15-77%, and every fifth damage you suffer is decreased by 15-77%.","last_patch":"24 Mar 2022","url":"https://www.eredan-arena.com/images/HD/items/52.png","tag":[]},{"name":"Tear of Guem","rarity":"Epic","position":"2nd / Defender","level":"1 - 10","effect":"Colossus: Each time you activate a skill, heal 291-1501, plus 400 Shield if you have 1 Roll left.","last_patch":"01 Jun 2023","url":"https://www.eredan-arena.com/images/HD/items/75.png","tag":[]},{"name":"Telendar's Blade","rarity":"Legendary","position":"1st / Attacker","level":"1 - 10","effect":":zil::marauder:: Each time you change one of your dice to :swordDice: you deal 194-1000 Backstab DMG to your opponent.\\nTelendar: you also receive DMG+ 38-200.","last_patch":"06 Jan 2024","url":"https://www.eredan-arena.com/images/HD/items/94.png","tag":["zil","marauder"]},{"name":"Temporal Backpack","rarity":"Epic","position":"2nd / Defender","level":"1 - 10","effect":":tem:: Each time you receive a new negative alteration trigger a Portal 600-3095 and receive Dodge 0-3.","last_patch":"19 Apr 2024","url":"https://www.eredan-arena.com/images/HD/items/150.png","tag":["tem"]},{"name":"The Bestial","rarity":"Legendary","position":"1st / Attacker","level":"1 - 10","effect":"At the start of the fight deal 1400-7223 flat DMG to your opponent and receive 140-722 Curse.\\nFenrath or Kolodan: at the end of the skill activation phase convert your highest negative alteration into Strength.\\nFlat DMG is a DMG that ignores everything.","last_patch":"21 Jun 2024","url":"https://www.eredan-arena.com/images/HD/items/154.png","tag":[]},{"name":"The Bushido Code","rarity":"Epic","position":"2nd / Defender","level":"1 - 10","effect":"Each time your opponent receives Strength, get 10-51% of it.\\n:kot::At the start of the fight receive 1 Riposte.","last_patch":"26 Aug 2023","url":"https://www.eredan-arena.com/images/HD/items/39.png","tag":["kot"]},{"name":"The Council's Banner","rarity":"Legendary","position":"2nd / Defender","level":"1 - 10","effect":":cou:: Each time you receive a new positive alteration you Heal 400-2063 DMG and your allies receive 20-103 DMG+ and 20-103 Strength+, 40-206 if they belong to :cou:.","last_patch":"24 Nov 2023","url":"https://www.eredan-arena.com/images/thumb/items/106.png","tag":["cou"]},{"name":"The Hullbreaker","rarity":"Epic","position":"1st / Attacker","level":"1 - 10","effect":":pir:: each time you activate a skill deal 100-515 flat DMG to your opponent and they receive 10-51 DMG- for each of their Powder.\\n:pir::warrior: or :pir::berserker:: at the start of the fight, give your opponent 1 Powder.\\nFlat DMG is a DMG that ignores everything.","last_patch":"07 Oct 2023","url":"https://www.eredan-arena.com/images/thumb/items/115.png","tag":["pir","warrior","berserker"]},{"name":"The Imperatrice's Crown","rarity":"Legendary","position":"2nd / Defender","level":"1 - 10","effect":":equinox:: Your opponent get 80-412 Leech and Bleeding.\\nThe Imperatrice: Set your opponent's Strength to 1 and you get 0-2 Critical.","last_patch":"29 Oct 2024","url":"https://www.eredan-arena.com/images/HD/items/170.png","tag":["equinox"]},{"name":"The Kingslayers","rarity":"Legendary","position":"1st / Attacker","level":"1 - 10","effect":":marauder:: At the start of the fight, deal 200-1031 Backstab damage and you receive 0-2 Dodge.\\nAt the end of the fight, deal 400-2063 Decisive Strike and you receive 0-2 Dodge.\\nBackstab damage is a damage that also decreases your opponent Strength by 50% of the damage value.\\nDecisive Strike is a DMG that ignores all alterations that could reduce or prevent it.","last_patch":"25 Nov 2024","url":"https://www.eredan-arena.com/images/thumb/items/188.png","tag":["marauder"]},{"name":"The Last Barrier","rarity":"Legendary","position":"2nd / Defender","level":"1 - 10","effect":":tem:: At the start of the fight, receive 800-4127 Shield and trigger a Deja Vu.","last_patch":"18 Nov 2023","url":"https://www.eredan-arena.com/images/HD/items/42.png","tag":["tem"]},{"name":"The Perforator","rarity":"Epic","position":"1st / Attacker","level":"1 - 10","effect":"At the start of the fight, delete half of one of your opponent's positive alteration 0-4 times then deal 850-4385 Shock DMG.\\nShock DMG is an unmodifiable DMG.","last_patch":"03 Feb 2024","url":"https://www.eredan-arena.com/images/HD/items/51.png","tag":[]},{"name":"The Pilgrim","rarity":"Legendary","position":"1st / Attacker","level":"1 - 10","effect":":mage:: each time your opponent receives a new negative alteration, receive 2 Critical then you deal 300-1547 Pure DMG to them.\\nMalyss, Alishk or Lord Alishk: Also trigger this effect at the start of the fight.\\nPure DMG is a DMG that ignores all alterations that could reduce or prevent it.","last_patch":"30 Sep 2023","url":"https://www.eredan-arena.com/images/HD/items/53.png","tag":["mage"]},{"name":"Thunder Spear","rarity":"Legendary","position":"1st / Attacker","level":"1 - 10","effect":":ava:: each time one of your alterations is decreased or consumed you deal 200-1031 flat DMG to your opponent and they receive 20-103 Thunderstruck.\\nThunder King: at the end of the fight repeatedly deal 200-1031 Lightning DMG for each of your :swordDice:.\\nFlat DMG is a DMG that ignores everything.\\nLightning DMG is a Normal DMG that causes a tenth of its value as Thunderstruck to the opponent.\\nThis equipment considers negative and positive alterations to trigger.","last_patch":"07 Oct 2023","url":"https://www.eredan-arena.com/images/thumb/items/113.png","tag":["ava"]},{"name":"Time Portal Hourglass","rarity":"Rare","position":"1st / Attacker","level":"1 - 10","effect":":tem:: At the end of the skill activation phase, deal 600-3095 Portal DMG.\\nPortal DMG is a Normal DMG that after being caused applies one of your negative alterations to the opponent.","last_patch":"18 Nov 2023","url":"https://www.eredan-arena.com/images/thumb/items/128.png","tag":["tem"]},{"name":"Tonbokiri","rarity":"Legendary","position":"1st / Attacker","level":"1 - 10","effect":":kot::warrior:: at the start of the fight deal 600-3095 Earthquake DMG, +150-773 for each of your :swordDice:.\\nMaster Tadakatsu: each time you attack with your :swordDice:, give the opposing heroes 120-619 Aftermath.\\nEarthquake DMG is a DMG that ignores all alterations that could reduce or prevent it and applies half of its value as Aftermath to all active opponents.","last_patch":"07 Jun 2024","url":"https://www.eredan-arena.com/images/HD/items/153.png","tag":["kot","warrior"]},{"name":"Totem of Spirits","rarity":"Common","position":"2nd / Defender","level":"1 - 10","effect":":dais:: Each time you activate a skill, heal 97-500 and receive 9-50 DMG+.","last_patch":"19 Jul 2024","url":"https://www.eredan-arena.com/images/HD/items/158.png","tag":["dais"]},{"name":"Transmuting Saw","rarity":"Epic","position":"1st / Attacker","level":"1 - 10","effect":":equinox:: Each time you activate an ability, deal 110-567 damage and your opponnent receives 11-56 Bleeding.\\n:equinox::unkrace:: at the start of the fight gain also Mirror 0-2.","last_patch":"21 Mar 2025","url":"https://www.eredan-arena.com/images/thumb/items/199.png"},{"name":"Utga","rarity":"Common","position":"1st / Attacker","level":"1 - 10","effect":"At the end of skill activation phase, deal 291-1501 Shock DMG and receive 291-1501 Shield, +145-750 for each :sto: ally.\\n:sto:: Each time one of your dice becomes a :swordDice:, receive 97-500 Shield.\\nShock DMG is a DMG that cannot be reduced or increased, but still is affected by Scarab and Shield-like skills.","last_patch":"06 Aug 2024","url":"https://www.eredan-arena.com/images/HD/items/45.png","tag":["sto"]},{"name":"Vampire Dagger","rarity":"Legendary","position":"1st / Attacker","level":"1 - 10","effect":":undead:: At the end of skill activation phase, deal 500-2579 Backstab damage and 500-2579 Life Drain damage to your opponent.\\nLazlo, the Bloody Count or Wayna or Wayna's Reflection: Deal 250-1289 Bite damage and 250-1289 Backstab damage at the start of the fight.\\nBite damage is a damage that also applies 100 Bleeding to the opponent.\\nBackstab damage is a damage that also decreases your opponent Strength by 50% of the damage value.\\nLifedrain damage is a damage that also heals by the same value.","last_patch":"29 Oct 2024","url":"https://www.eredan-arena.com/images/HD/items/169.png","tag":["undead"]},{"name":"Variustradi","rarity":"Rare","position":"1st / Attacker","level":"1 - 10","effect":":bard:: Each time you activate a skill, your opponent receives 48-247 Echo.","last_patch":"10 Aug 2023","url":"https://www.eredan-arena.com/images/HD/items/77.png","tag":["bard"]},{"name":"Wakizashi","rarity":"Rare","position":"1st / Attacker","level":"1 - 10","effect":":kot:: At the end of the fight, deal 485-2502 pure DMG to your opponent, +97-500 for each of your :swordDice: .\\nPure DMG is a DMG that ignores all alterations that could reduce or prevent it.","last_patch":"26 Aug 2023","url":"https://www.eredan-arena.com/images/HD/items/86.png","tag":["kot"]},{"name":"War Cuirass","rarity":"Rare","position":"2nd / Defender","level":"1 - 10","effect":"At the rune consumption phase, gain 155-799 Shield for each Rune consumed.","last_patch":"04 Aug 2022","url":"https://www.eredan-arena.com/images/HD/items/34.png","tag":[]},{"name":"Weakening Potion CS","rarity":"Rare","position":"2nd / Defender","level":"1 - 10","effect":"At the start of the fight, your opponent's Strength is reduced by 30-154.","last_patch":"29 Nov 2023","url":"https://www.eredan-arena.com/images/HD/items/71.png","tag":[]},{"name":"Wings of Amalgon","rarity":"Legendary","position":"2nd / Defender","level":"1 - 10","effect":"At the start of combat, receive 1 Dragon Hide, or 2 if you are :dragon:.\\nEach time one of your Dragon Hides are consumed, deal 500-2579 Flat DMG to your opponent and he receives 50-257 Bleeding.\\nFlat DMG is a DMG that ignores everything.","last_patch":"10 Feb 2024","url":"https://www.eredan-arena.com/images/HD/items/41.png","tag":["dragon"]},{"name":"Witchblade Armor","rarity":"Common","position":"2nd / Defender","level":"1 - 10","effect":":noz::marauder::The first two times you suffer more than 2500 DMG at once, cast a Spellbreaker 300-1547 and receive 30-154 DMG+.\\nSpellbreaker DMG is a DMG that halves a random opposing positive alteration.","last_patch":"19 Sep 2024","url":"https://www.eredan-arena.com/images/HD/items/103.png","tag":["noz","marauder"]},{"name":"Wolf Muzzle","rarity":"Rare","position":"1st / Attacker","level":"1 - 10","effect":":beast: : At the start of the fight, deal 485-2502 Shock DMG to your opponent and receive 20 Berserk for each of your :beast:. \\"  Shock DMG is a DMG that cannot be modified by alteration, but can consume shield skills and can be prevented.","last_patch":"22 Aug 2023","url":"https://www.eredan-arena.com/images/HD/items/47.png","tag":["beast"]},{"name":"Wyrmguard","rarity":"Legendary","position":"2nd / Defender","level":"1 - 10","effect":":noz::warrior:: If you did not roll any :swordDice: at the start of the game, all the positive alterations received by you are increased by 8-41%, +10% if Blue-Mark is one of your current allies in game (rounded up).","last_patch":"20 Aug 2024","url":"https://www.eredan-arena.com/images/HD/items/161.png","tag":["noz","warrior"]},{"name":"Yafujima's Scroll","rarity":"Rare","position":"1st / Attacker","level":"1 - 10","effect":":kot::mage:: each time your Strength increases, you receive as much DMG+ as 10-51% of this Strength increase.","last_patch":"13 Jan 2024","url":"https://www.eredan-arena.com/images/HD/items/136.png","tag":["kot","mage"]},{"name":"Zil Bell","rarity":"Epic","position":"2nd / Defender","level":"1 - 10","effect":":zil:: at the start and at the end of the fight, deal 388-2001 Illusion DMG.\\n:zil::human: or :zil::guem:: you also gain 1 Critical.\\nIllusion DMG is a DMG that acts randomly as one of the others standard damaging active skills, except Smite or Physical Attack.","last_patch":"06 Jan 2024","url":"https://www.eredan-arena.com/images/HD/items/93.png","tag":["zil","human","guem"]}]`),Wl={Emoji:u0,Guilds:h0,Class:d0,Race:f0,Skill:p0,Equip:m0},g0={class:"container"},y0={class:"search-bar"},_0={class:"search-input-container"},v0={class:"skills-container"},w0={key:0,class:"skills-list"},E0=["src","alt"],T0={class:"skill-details"},b0={class:"skill-name"},A0={class:"skill-description",style:{"white-space":"pre-line","text-align":"left"}},I0={key:1,class:"no-results"},D0={__name:"SkillShow",setup(n){re(Wl);const e=re(new Map);Zn(()=>{e.value=new Map,Wl.Skill.forEach(o=>{e.value.has(o.name)||e.value.set(o.name,o)})});const t=re(""),r=si(()=>Array.from(e.value.values()).filter(l=>{var c;return!t.value||(((c=l.name)==null?void 0:c.toLowerCase())||"").includes(t.value.toLowerCase())})),i=()=>{},s=()=>{t.value=""};return(o,l)=>(ie(),oe("div",g0,[l[2]||(l[2]=k("h1",null,"Skill",-1)),l[3]||(l[3]=k("p",null,"This section displays the various capabilities, including buffs, passives, skill modifiers, and more.",-1)),k("div",y0,[k("div",_0,[ct(k("input",{type:"text","onUpdate:modelValue":l[0]||(l[0]=c=>t.value=c),placeholder:"search",onInput:i,class:"search-input-text"},null,544),[[Qt,t.value]]),t.value?(ie(),oe("button",{key:0,class:"clear-button",onClick:s}," × ")):It("",!0)])]),k("div",v0,[r.value.length>0?(ie(),oe("div",w0,[(ie(!0),oe(He,null,Nt(r.value,c=>(ie(),oe("div",{key:c.name,class:"skill-item"},[k("img",{src:c.img_url,alt:c.name,class:"skill-image"},null,8,E0),k("div",T0,[k("h2",b0,We(c.name),1),k("p",A0,We(c.description),1)])]))),128))])):(ie(),oe("div",I0,l[1]||(l[1]=[k("p",null,"沒有找到相關技能。",-1)])))])]))}},S0=dn(D0,[["__scopeId","data-v-06decbdf"]]),R0="modulepreload",C0=function(n){return"/Eredan-Arena-Box/"+n},ad={},le=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(t.map(c=>{if(c=C0(c),c in ad)return;ad[c]=!0;const h=c.endsWith(".css"),f=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const p=document.createElement("link");if(p.rel=h?"stylesheet":R0,h||(p.as="script"),p.crossOrigin="",p.href=c,l&&p.setAttribute("nonce",l),document.head.appendChild(p),h)return new Promise((_,A)=>{p.addEventListener("load",_),p.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return i.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})},k0={class:"container"},P0={class:"search-bar"},M0={class:"search-input-container"},N0={key:0,class:"adv-search-container"},O0=["value"],V0=["value"],L0={class:"tag-container"},x0=["onClick","innerHTML"],F0={class:"equip-container"},G0={key:0,class:"equip-list"},U0=["src","alt"],H0={class:"equip-details"},B0={class:"equip-name"},$0=["innerHTML"],q0={key:1,class:"no-results"},z0={__name:"EquipShow",setup(n){const e=re(Wl),t=re(new Map),r=re({}),i=re(new Set),s=re([]),o=re(["Common","Rare","Epic","Legendary"]),l=re(["1st / Attacker","2nd / Defender"]),c=re(""),h=re(""),f=re(""),p=re(""),_=re(!1),A=si(()=>Array.from(i.value)),S=async()=>{const v=Object.assign({"../assets/img/aggregats/000.png":()=>le(()=>import("./000-DVuzC-mM.js"),[]),"../assets/img/aggregats/001.png":()=>le(()=>import("./001-DPfH-OSF.js"),[]),"../assets/img/aggregats/002.png":()=>le(()=>import("./002-CLCORmEz.js"),[]),"../assets/img/aggregats/003.png":()=>le(()=>import("./003-DbpKvsdV.js"),[]),"../assets/img/aggregats/004.png":()=>le(()=>import("./004-CHN1Iyut.js"),[]),"../assets/img/aggregats/005.png":()=>le(()=>import("./005-DHx5Y1EI.js"),[]),"../assets/img/aggregats/006.png":()=>le(()=>import("./006-CGt9yrP3.js"),[]),"../assets/img/aggregats/007.png":()=>le(()=>import("./007-BdTG3Cww.js"),[]),"../assets/img/aggregats/008.png":()=>le(()=>import("./008-BOLKBicd.js"),[]),"../assets/img/aggregats/009.png":()=>le(()=>import("./009-BueidsYN.js"),[]),"../assets/img/aggregats/010.png":()=>le(()=>import("./010-aZ-_t5S8.js"),[]),"../assets/img/aggregats/011.png":()=>le(()=>import("./011-FeGdlMYA.js"),[]),"../assets/img/aggregats/012.png":()=>le(()=>import("./012-C4-NGtLv.js"),[]),"../assets/img/aggregats/1.png":()=>le(()=>import("./1-7oEiOuDh.js"),[]),"../assets/img/aggregats/10.png":()=>le(()=>import("./10-BnkwPLeO.js"),[]),"../assets/img/aggregats/11.png":()=>le(()=>import("./11-DCA0tbmS.js"),[]),"../assets/img/aggregats/12.png":()=>le(()=>import("./12-Brs-egRG.js"),[]),"../assets/img/aggregats/13.png":()=>le(()=>import("./13--yluX27d.js"),[]),"../assets/img/aggregats/14.png":()=>le(()=>import("./14-CvSEW-BE.js"),[]),"../assets/img/aggregats/15.png":()=>le(()=>import("./15-D-ksqq-R.js"),[]),"../assets/img/aggregats/16.png":()=>le(()=>import("./16-B1v2LC1W.js"),[]),"../assets/img/aggregats/17.png":()=>le(()=>import("./17-DqeLt2d-.js"),[]),"../assets/img/aggregats/18.png":()=>le(()=>import("./18-CJqdn-0y.js"),[]),"../assets/img/aggregats/19.png":()=>le(()=>import("./19-AB7SYxpB.js"),[]),"../assets/img/aggregats/2.png":()=>le(()=>import("./2-6EQ_QYAW.js"),[]),"../assets/img/aggregats/20.png":()=>le(()=>import("./20-B-KMNHzC.js"),[]),"../assets/img/aggregats/21.png":()=>le(()=>import("./21-B9_0Bwys.js"),[]),"../assets/img/aggregats/22.png":()=>le(()=>import("./22-Bu0rUebx.js"),[]),"../assets/img/aggregats/23.png":()=>le(()=>import("./23-C-SwAp87.js"),[]),"../assets/img/aggregats/24.png":()=>le(()=>import("./24-DWGDbqts.js"),[]),"../assets/img/aggregats/25.png":()=>le(()=>import("./25-DTHoG9vd.js"),[]),"../assets/img/aggregats/26.png":()=>le(()=>import("./26-aasfUV4W.js"),[]),"../assets/img/aggregats/27.png":()=>le(()=>import("./27-BiPfp-dh.js"),[]),"../assets/img/aggregats/28.png":()=>le(()=>import("./28-D4SmQLnm.js"),[]),"../assets/img/aggregats/29.png":()=>le(()=>import("./29-C_29xPIy.js"),[]),"../assets/img/aggregats/3.png":()=>le(()=>import("./3-DmZ4K1LB.js"),[]),"../assets/img/aggregats/30.png":()=>le(()=>import("./30-6UfzpkOv.js"),[]),"../assets/img/aggregats/32.png":()=>le(()=>import("./32-Dk9Ff6ER.js"),[]),"../assets/img/aggregats/33.png":()=>le(()=>import("./33-CTOoqfjH.js"),[]),"../assets/img/aggregats/4.png":()=>le(()=>import("./4-BmzLVkSn.js"),[]),"../assets/img/aggregats/40.png":()=>le(()=>import("./40-BE7Fqd9i.js"),[]),"../assets/img/aggregats/41.png":()=>le(()=>import("./41-Dnf35hDM.js"),[]),"../assets/img/aggregats/5.png":()=>le(()=>import("./5-BFbJ8D8j.js"),[]),"../assets/img/aggregats/51.png":()=>le(()=>import("./51-DUbCj1cy.js"),[]),"../assets/img/aggregats/52.png":()=>le(()=>import("./52-CxiMEkr9.js"),[]),"../assets/img/aggregats/53.png":()=>le(()=>import("./53-I_Af9088.js"),[]),"../assets/img/aggregats/54.png":()=>le(()=>import("./54-BUKh0UPg.js"),[]),"../assets/img/aggregats/55.png":()=>le(()=>import("./55-CdG4vssh.js"),[]),"../assets/img/aggregats/56.png":()=>le(()=>import("./56-Cde8MEgH.js"),[]),"../assets/img/aggregats/57.png":()=>le(()=>import("./57-D3anVe8D.js"),[]),"../assets/img/aggregats/58.png":()=>le(()=>import("./58-Bdg-c7Dd.js"),[]),"../assets/img/aggregats/6.png":()=>le(()=>import("./6-CREhEWIi.js"),[]),"../assets/img/aggregats/7.png":()=>le(()=>import("./7-C61OOjXS.js"),[]),"../assets/img/aggregats/8.png":()=>le(()=>import("./8-Cp33KXkJ.js"),[]),"../assets/img/aggregats/9.png":()=>le(()=>import("./9-DyqClp-q.js"),[])}),y=Object.keys(v),g=await Promise.all(y.map(async E=>{const I=await v[E]();return{id:E.split("/").pop().split(".")[0],path:I.default}}));s.value=g},C=si(()=>Array.from(t.value.values()).filter(y=>{const g=y.name.toLowerCase().includes(p.value.toLowerCase()),E=!c.value||y.rarity===c.value,I=!h.value||y.position===h.value,b=!f.value||y.tag&&y.tag.includes(f.value);return g&&E&&I&&b})),N=()=>{console.log("Search query:",p.value)},j=()=>{p.value="",c.value="",h.value="",f.value=""},B=()=>{_.value=!_.value},$=v=>{f.value=f.value===v?"":v},F=v=>({Common:"rarity-Common",Rare:"rarity-Rare",Epic:"rarity-Epic",Legendary:"rarity-Legendary"})[v]||"rarity-default",se=v=>v&&v.replace(/:([a-zA-Z0-9_~]+):/g,(y,g)=>Q(g)?Q(g):y),Q=v=>{const y=v,g=r.value.find(E=>E.name===y);if(g){const E=s.value.find(I=>I.id===g.id);if(E)return`<img src="${E.path}" alt="${v}" style="  width: 30px; height: 30px; ; vertical-align: middle; ">`}};return Zn(()=>{e.value.Equip.forEach(v=>{t.value.set(v.name,v),v.tag&&Array.isArray(v.tag)&&v.tag.forEach(y=>{i.value.add(y)})}),r.value=e.value.Emoji,S()}),(v,y)=>(ie(),oe("div",k0,[y[9]||(y[9]=k("h1",null,"Equip",-1)),y[10]||(y[10]=k("p",null,"Just...equip information.",-1)),k("div",P0,[k("div",M0,[ct(k("input",{type:"text","onUpdate:modelValue":y[0]||(y[0]=g=>p.value=g),placeholder:"search",onInput:N,class:"search-input-text"},null,544),[[Qt,p.value]]),p.value||c.value||h.value||f.value?(ie(),oe("button",{key:0,class:"clear-button",onClick:j}," × ")):It("",!0),k("button",{class:"adv-button",onClick:B}," Adv ")]),_.value?(ie(),oe("div",N0,[k("div",null,[y[4]||(y[4]=k("label",{for:"rarity"},"Rarity:",-1)),ct(k("select",{id:"rarity","onUpdate:modelValue":y[1]||(y[1]=g=>c.value=g)},[y[3]||(y[3]=k("option",{value:""},"All",-1)),(ie(!0),oe(He,null,Nt(o.value,g=>(ie(),oe("option",{key:g,value:g},We(g),9,O0))),128))],512),[[jl,c.value]])]),k("div",null,[y[6]||(y[6]=k("label",{for:"position"},"Position:",-1)),ct(k("select",{id:"position","onUpdate:modelValue":y[2]||(y[2]=g=>h.value=g)},[y[5]||(y[5]=k("option",{value:""},"All",-1)),(ie(!0),oe(He,null,Nt(l.value,g=>(ie(),oe("option",{key:g,value:g},We(g),9,V0))),128))],512),[[jl,h.value]])]),k("div",null,[y[7]||(y[7]=k("label",null,"Tags:",-1)),k("div",L0,[(ie(!0),oe(He,null,Nt(A.value,g=>(ie(),oe("button",{key:g,class:An(["tag-button",{active:f.value===g}]),onClick:E=>$(g),innerHTML:Q(g)},null,10,x0))),128))])])])):It("",!0)]),k("div",F0,[C.value.length>0?(ie(),oe("div",G0,[(ie(!0),oe(He,null,Nt(C.value,g=>(ie(),oe("div",{key:g.name,class:"equip-item"},[k("img",{src:g.url,alt:g.name,class:An(["equip-image",F(g.rarity)])},null,10,U0),k("div",H0,[k("h2",B0,We(g.name),1),k("pre",{class:"equip-description",innerHTML:se(g.effect)},null,8,$0)])]))),128))])):(ie(),oe("div",q0,y[8]||(y[8]=[k("p",null,"No results found.",-1)])))])]))}},j0=dn(z0,[["__scopeId","data-v-c34ed530"]]),W0=["value"],K0={class:"horizontal-table"},X0=["onUpdate:modelValue","placeholder"],Q0={class:"horizontal-table"},Y0={class:"table-cell"},J0={class:"table-cell"},Z0={key:0},eE={key:0,class:"success-message"},tE={key:1,class:"error-message"},nE={class:"output"},rE={__name:"AddData",setup(n){const e=re({name:"",id:"",description:"",url:""}),t=re(""),r=re(null),i=re(null),s=re([{value:"option1",label:"Skill"},{value:"option2",label:"Equip"}]),o=re("option2"),l=re([{key:"name",label:"Name"},{key:"id",label:"ID"},{key:"description",label:"Description"},{key:"url",label:"URL"}]),c=()=>{e.value={name:"",id:"",description:"",url:""},t.value="",p.value={}},h=si(()=>{let A={};return o.value==="option1"?A={...e.value}:o.value==="option2"&&(A={...p.value}),JSON.stringify(A,null,2)}),f=async()=>{if(!r.value)return;const A=r.value.textContent;if(!A.trim()){i.value="error",setTimeout(()=>i.value=null,2e3);return}try{await navigator.clipboard.writeText(A),i.value="success",setTimeout(()=>i.value=null,2e3)}catch(S){console.error("複製失敗: ",S),i.value="error",setTimeout(()=>i.value=null,2e3)}},p=re({}),_=()=>{if(!t.value.trim())return;const S=t.value.trim().split(`
`)[0],C={},N=S.match(/^(.*?) Rarity /);N&&(C.name=N[1].trim());const j=S.match(/Rarity (\w+)/);j&&(C.rarity=j[1].trim());const B=S.match(/Position (.*?) Level/);B&&(C.position=B[1].trim());const $=S.match(/Level (.*?) Effect/);$&&(C.level=$[1].trim());const F=S.match(/Effect ⋆ (.*?) 圖片/);F&&(C.effect=F[1].trim());const se=S.match(/Last Patch: (.*?)$/);se&&(C.last_patch=se[1].trim()),N&&(C.url=""),p.value=C};return(A,S)=>(ie(),oe("div",null,[S[6]||(S[6]=k("h1",null,"Add Data",-1)),S[7]||(S[7]=k("p",null,"The generated format is here",-1)),ct(k("select",{"onUpdate:modelValue":S[0]||(S[0]=C=>o.value=C)},[S[3]||(S[3]=k("option",{disabled:"",value:""},"請選擇一個選項",-1)),(ie(!0),oe(He,null,Nt(s.value,C=>(ie(),oe("option",{key:C.value,value:C.value},We(C.label),9,W0))),128))],512),[[jl,o.value]]),S[8]||(S[8]=k("div",{class:"dashed-line"},null,-1)),ct(k("div",null,[k("div",K0,[k("div",null,[(ie(!0),oe(He,null,Nt(l.value,C=>(ie(),oe("div",{key:C.key,class:"table-cell"},[k("label",null,We(C.label)+"：",1),ct(k("input",{type:"text","onUpdate:modelValue":N=>e.value[C.key]=N,placeholder:`Enter ${C.label.toLowerCase()}`},null,8,X0),[[Qt,e.value[C.key]]])]))),128))])])],512),[[zl,o.value==="option1"]]),ct(k("div",null,[k("div",Q0,[k("div",null,[k("div",Y0,[S[4]||(S[4]=k("label",null,"Wiki Input：",-1)),ct(k("input",{type:"text","onUpdate:modelValue":S[1]||(S[1]=C=>t.value=C),placeholder:"Enter wiki data"},null,512),[[Qt,t.value]]),k("button",{onClick:_},"+")]),k("div",J0,[S[5]||(S[5]=k("label",null,"url Input：",-1)),ct(k("input",{type:"text","onUpdate:modelValue":S[2]||(S[2]=C=>p.value.url=C),placeholder:"Enter img url"},null,512),[[Qt,p.value.url]])])])])],512),[[zl,o.value==="option2"]]),o.value?(ie(),oe("div",Z0,[k("button",{onClick:c},"Clear"),k("button",{onClick:f},"Copy"),i.value==="success"?(ie(),oe("p",eE,"內容已複製到剪貼簿！")):It("",!0),i.value==="error"?(ie(),oe("p",tE,"複製失敗，請手動複製內容。")):It("",!0),k("div",nE,[k("pre",{ref_key:"preElement",ref:r},We(h.value),513)])])):It("",!0),S[9]||(S[9]=k("div",{class:"dashed-line"},null,-1))]))}},iE=dn(rE,[["__scopeId","data-v-24e267a2"]]),sE={class:"horizontal-table"},oE={class:"table-cell"},aE={class:"table-cell"},lE={key:0,class:"success-message"},cE={key:1,class:"error-message"},uE={class:"output"},hE={__name:"AddCard",setup(n){const e=re(""),t=re(""),r=re({}),i=re(null),s=re(null),o=p=>{const _=p.split(" "),A={};let S=0,C=[];for(;S<_.length&&!_[S].startsWith("#");)C.push(_[S]),S++;return A.name=C.join(" ").trim(),S<_.length&&_[S].startsWith("#")&&(A.id=_[S].replace("#","").trim(),S++),S<_.length&&_[S].toLowerCase()==="guild"&&(A.Guild=_[S+1]+" "+_[S+2],S+=3),S<_.length&&_[S].toLowerCase()==="class"&&(A.Class=_[S+1],S+=2),S<_.length&&_[S].toLowerCase()==="race"&&(A.Race=_[S+1],S+=2),S<_.length&&_[S].toLowerCase()==="rarity"&&(A.Rarity=_[S+1],S+=2),A},l=()=>{if(!e.value.trim())return;const p=o(e.value);t.value.trim()&&(p.name=t.value.trim()),r.value=p},c=()=>{e.value="",t.value="",r.value={}},h=async()=>{if(!i.value)return;const p=i.value.textContent;if(!p.trim()){s.value="error",setTimeout(()=>s.value=null,2e3);return}try{await navigator.clipboard.writeText(p),s.value="success",setTimeout(()=>s.value=null,2e3)}catch(_){console.error("複製失敗: ",_),s.value="error",setTimeout(()=>s.value=null,2e3)}},f=si(()=>{const p={name:r.value.name||"",id:r.value.id||"",Rarity:r.value.Rarity||"",classe:r.value.Class||"",guild:r.value.Guild||"",race:r.value.Race||"",basic_ability:{strength:"",3:{skilltag:[]},2:{skilltag:[]},1:{skilltag:[]}},img_src:"",tag:[],Strategy:[]};return JSON.stringify(p,null,2)});return(p,_)=>(ie(),oe("div",null,[_[5]||(_[5]=k("h1",null,"Add Skill Data",-1)),_[6]||(_[6]=k("p",null,"The skill generated format is here",-1)),_[7]||(_[7]=k("div",{class:"dashed-line"},null,-1)),k("div",null,[k("div",sE,[k("div",null,[k("p",null,[k("button",{onClick:_[0]||(_[0]=(...A)=>p.openData&&p.openData(...A))},"Open"),k("button",{onClick:c},"Clear"),k("button",{onClick:h},"Copy")]),k("div",oE,[_[3]||(_[3]=k("label",null,"Wiki Data Input：",-1)),ct(k("input",{type:"text","onUpdate:modelValue":_[1]||(_[1]=A=>e.value=A),placeholder:"Enter data"},null,512),[[Qt,e.value]]),k("button",{onClick:l},"+")]),k("div",aE,[_[4]||(_[4]=k("label",null,"Name：",-1)),ct(k("input",{type:"text","onUpdate:modelValue":_[2]||(_[2]=A=>t.value=A),placeholder:"Enter name"},null,512),[[Qt,t.value]])])])]),s.value==="success"?(ie(),oe("p",lE,"內容已複製到剪貼簿！")):It("",!0),s.value==="error"?(ie(),oe("p",cE,"複製失敗，請手動複製內容。")):It("",!0),k("div",uE,[k("pre",{ref_key:"preElement",ref:i},We(f.value),513)])]),_[8]||(_[8]=k("div",{class:"dashed-line"},null,-1))]))}},dE=dn(hE,[["__scopeId","data-v-57566918"]]),fE=()=>{};var ld={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _m=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},pE=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],o=n[t++],l=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},vm={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],o=i+1<n.length,l=o?n[i+1]:0,c=i+2<n.length,h=c?n[i+2]:0,f=s>>2,p=(s&3)<<4|l>>4;let _=(l&15)<<2|h>>6,A=h&63;c||(A=64,o||(_=64)),r.push(t[f],t[p],t[_],t[A])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(_m(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):pE(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],l=i<n.length?t[n.charAt(i)]:0;++i;const h=i<n.length?t[n.charAt(i)]:64;++i;const p=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||l==null||h==null||p==null)throw new mE;const _=s<<2|l>>4;if(r.push(_),h!==64){const A=l<<4&240|h>>2;if(r.push(A),p!==64){const S=h<<6&192|p;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class mE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const gE=function(n){const e=_m(n);return vm.encodeByteArray(e,!0)},Mo=function(n){return gE(n).replace(/\./g,"")},wm=function(n){try{return vm.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _E=()=>yE().__FIREBASE_DEFAULTS__,vE=()=>{if(typeof process>"u"||typeof ld>"u")return;const n=ld.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},wE=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&wm(n[1]);return e&&JSON.parse(e)},ha=()=>{try{return fE()||_E()||vE()||wE()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Em=n=>{var e,t;return(t=(e=ha())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},EE=n=>{const e=Em(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Tm=()=>{var n;return(n=ha())===null||n===void 0?void 0:n.config},bm=n=>{var e;return(e=ha())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bE(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Mo(JSON.stringify(t)),Mo(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function AE(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Dt())}function IE(){var n;const e=(n=ha())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function DE(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function SE(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function RE(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function CE(){const n=Dt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function kE(){return!IE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function PE(){try{return typeof indexedDB=="object"}catch{return!1}}function ME(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE="FirebaseError";class Pn extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=NE,Object.setPrototypeOf(this,Pn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ts.prototype.create)}}class Ts{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?OE(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new Pn(i,l,r)}}function OE(n,e){return n.replace(VE,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const VE=/\{\$([^}]+)}/g;function LE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Sr(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],o=e[i];if(cd(s)&&cd(o)){if(!Sr(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function cd(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bs(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function xE(n,e){const t=new FE(n,e);return t.subscribe.bind(t)}class FE{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");GE(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=tl),i.error===void 0&&(i.error=tl),i.complete===void 0&&(i.complete=tl);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function GE(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function tl(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(n){return n&&n._delegate?n._delegate:n}class Rr{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new TE;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(BE(e))try{this.getOrInitializeService({instanceIdentifier:wr})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=wr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=wr){return this.instances.has(e)}getOptions(e=wr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:HE(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=wr){return this.component?this.component.multipleInstances?e:wr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function HE(n){return n===wr?void 0:n}function BE(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new UE(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ae;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ae||(Ae={}));const qE={debug:Ae.DEBUG,verbose:Ae.VERBOSE,info:Ae.INFO,warn:Ae.WARN,error:Ae.ERROR,silent:Ae.SILENT},zE=Ae.INFO,jE={[Ae.DEBUG]:"log",[Ae.VERBOSE]:"log",[Ae.INFO]:"info",[Ae.WARN]:"warn",[Ae.ERROR]:"error"},WE=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=jE[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Vc{constructor(e){this.name=e,this._logLevel=zE,this._logHandler=WE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?qE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ae.DEBUG,...e),this._logHandler(this,Ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ae.VERBOSE,...e),this._logHandler(this,Ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ae.INFO,...e),this._logHandler(this,Ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ae.WARN,...e),this._logHandler(this,Ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ae.ERROR,...e),this._logHandler(this,Ae.ERROR,...e)}}const KE=(n,e)=>e.some(t=>n instanceof t);let ud,hd;function XE(){return ud||(ud=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function QE(){return hd||(hd=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Am=new WeakMap,Kl=new WeakMap,Im=new WeakMap,nl=new WeakMap,Lc=new WeakMap;function YE(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Wn(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&Am.set(t,n)}).catch(()=>{}),Lc.set(e,n),e}function JE(n){if(Kl.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});Kl.set(n,e)}let Xl={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Kl.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Im.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Wn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function ZE(n){Xl=n(Xl)}function eT(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(rl(this),e,...t);return Im.set(r,e.sort?e.sort():[e]),Wn(r)}:QE().includes(n)?function(...e){return n.apply(rl(this),e),Wn(Am.get(this))}:function(...e){return Wn(n.apply(rl(this),e))}}function tT(n){return typeof n=="function"?eT(n):(n instanceof IDBTransaction&&JE(n),KE(n,XE())?new Proxy(n,Xl):n)}function Wn(n){if(n instanceof IDBRequest)return YE(n);if(nl.has(n))return nl.get(n);const e=tT(n);return e!==n&&(nl.set(n,e),Lc.set(e,n)),e}const rl=n=>Lc.get(n);function nT(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(n,e),l=Wn(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Wn(o.result),c.oldVersion,c.newVersion,Wn(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),l.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const rT=["get","getKey","getAll","getAllKeys","count"],iT=["put","add","delete","clear"],il=new Map;function dd(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(il.get(e))return il.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=iT.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||rT.includes(t)))return;const s=async function(o,...l){const c=this.transaction(o,i?"readwrite":"readonly");let h=c.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[t](...l),i&&c.done]))[0]};return il.set(e,s),s}ZE(n=>({...n,get:(e,t,r)=>dd(e,t)||n.get(e,t,r),has:(e,t)=>!!dd(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(oT(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function oT(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ql="@firebase/app",fd="0.11.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const In=new Vc("@firebase/app"),aT="@firebase/app-compat",lT="@firebase/analytics-compat",cT="@firebase/analytics",uT="@firebase/app-check-compat",hT="@firebase/app-check",dT="@firebase/auth",fT="@firebase/auth-compat",pT="@firebase/database",mT="@firebase/data-connect",gT="@firebase/database-compat",yT="@firebase/functions",_T="@firebase/functions-compat",vT="@firebase/installations",wT="@firebase/installations-compat",ET="@firebase/messaging",TT="@firebase/messaging-compat",bT="@firebase/performance",AT="@firebase/performance-compat",IT="@firebase/remote-config",DT="@firebase/remote-config-compat",ST="@firebase/storage",RT="@firebase/storage-compat",CT="@firebase/firestore",kT="@firebase/vertexai",PT="@firebase/firestore-compat",MT="firebase",NT="11.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yl="[DEFAULT]",OT={[Ql]:"fire-core",[aT]:"fire-core-compat",[cT]:"fire-analytics",[lT]:"fire-analytics-compat",[hT]:"fire-app-check",[uT]:"fire-app-check-compat",[dT]:"fire-auth",[fT]:"fire-auth-compat",[pT]:"fire-rtdb",[mT]:"fire-data-connect",[gT]:"fire-rtdb-compat",[yT]:"fire-fn",[_T]:"fire-fn-compat",[vT]:"fire-iid",[wT]:"fire-iid-compat",[ET]:"fire-fcm",[TT]:"fire-fcm-compat",[bT]:"fire-perf",[AT]:"fire-perf-compat",[IT]:"fire-rc",[DT]:"fire-rc-compat",[ST]:"fire-gcs",[RT]:"fire-gcs-compat",[CT]:"fire-fst",[PT]:"fire-fst-compat",[kT]:"fire-vertex","fire-js":"fire-js",[MT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const No=new Map,VT=new Map,Jl=new Map;function pd(n,e){try{n.container.addComponent(e)}catch(t){In.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function oi(n){const e=n.name;if(Jl.has(e))return In.debug(`There were multiple attempts to register component ${e}.`),!1;Jl.set(e,n);for(const t of No.values())pd(t,n);for(const t of VT.values())pd(t,n);return!0}function xc(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Wt(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Kn=new Ts("app","Firebase",LT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Rr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Kn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pi=NT;function Dm(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Yl,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Kn.create("bad-app-name",{appName:String(i)});if(t||(t=Tm()),!t)throw Kn.create("no-options");const s=No.get(i);if(s){if(Sr(t,s.options)&&Sr(r,s.config))return s;throw Kn.create("duplicate-app",{appName:i})}const o=new $E(i);for(const c of Jl.values())o.addComponent(c);const l=new xT(t,r,o);return No.set(i,l),l}function Sm(n=Yl){const e=No.get(n);if(!e&&n===Yl&&Tm())return Dm();if(!e)throw Kn.create("no-app",{appName:n});return e}function Xn(n,e,t){var r;let i=(r=OT[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),In.warn(l.join(" "));return}oi(new Rr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FT="firebase-heartbeat-database",GT=1,ls="firebase-heartbeat-store";let sl=null;function Rm(){return sl||(sl=nT(FT,GT,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ls)}catch(t){console.warn(t)}}}}).catch(n=>{throw Kn.create("idb-open",{originalErrorMessage:n.message})})),sl}async function UT(n){try{const t=(await Rm()).transaction(ls),r=await t.objectStore(ls).get(Cm(n));return await t.done,r}catch(e){if(e instanceof Pn)In.warn(e.message);else{const t=Kn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});In.warn(t.message)}}}async function md(n,e){try{const r=(await Rm()).transaction(ls,"readwrite");await r.objectStore(ls).put(e,Cm(n)),await r.done}catch(t){if(t instanceof Pn)In.warn(t.message);else{const r=Kn.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});In.warn(r.message)}}}function Cm(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HT=1024,BT=30;class $T{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new zT(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=gd();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>BT){const o=jT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){In.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=gd(),{heartbeatsToSend:r,unsentEntries:i}=qT(this._heartbeatsCache.heartbeats),s=Mo(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return In.warn(t),""}}}function gd(){return new Date().toISOString().substring(0,10)}function qT(n,e=HT){const t=[];let r=n.slice();for(const i of n){const s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),yd(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),yd(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class zT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return PE()?ME().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await UT(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return md(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return md(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function yd(n){return Mo(JSON.stringify({version:2,heartbeats:n})).length}function jT(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WT(n){oi(new Rr("platform-logger",e=>new sT(e),"PRIVATE")),oi(new Rr("heartbeat",e=>new $T(e),"PRIVATE")),Xn(Ql,fd,n),Xn(Ql,fd,"esm2017"),Xn("fire-js","")}WT("");var KT="firebase",XT="11.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xn(KT,XT,"app");function Fc(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function km(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const QT=km,Pm=new Ts("auth","Firebase",km());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oo=new Vc("@firebase/auth");function YT(n,...e){Oo.logLevel<=Ae.WARN&&Oo.warn(`Auth (${pi}): ${n}`,...e)}function co(n,...e){Oo.logLevel<=Ae.ERROR&&Oo.error(`Auth (${pi}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(n,...e){throw Gc(n,...e)}function on(n,...e){return Gc(n,...e)}function Mm(n,e,t){const r=Object.assign(Object.assign({},QT()),{[e]:t});return new Ts("auth","Firebase",r).create(e,{appName:n.name})}function Qn(n){return Mm(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Gc(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Pm.create(n,...e)}function ge(n,e,...t){if(!n)throw Gc(e,...t)}function wn(n){const e="INTERNAL ASSERTION FAILED: "+n;throw co(e),new Error(e)}function Sn(n,e){n||wn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zl(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function JT(){return _d()==="http:"||_d()==="https:"}function _d(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZT(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(JT()||SE()||"connection"in navigator)?navigator.onLine:!0}function eb(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e,t){this.shortDelay=e,this.longDelay=t,Sn(t>e,"Short delay should be less than long delay!"),this.isMobile=AE()||RE()}get(){return ZT()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uc(n,e){Sn(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;wn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;wn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;wn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tb={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nb=new As(3e4,6e4);function da(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function mi(n,e,t,r,i={}){return Om(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const l=bs(Object.assign({key:n.config.apiKey},o)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);const h=Object.assign({method:e,headers:c},s);return DE()||(h.referrerPolicy="no-referrer"),Nm.fetch()(Lm(n,n.config.apiHost,t,l),h)})}async function Om(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},tb),e);try{const i=new rb(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Ys(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const l=s.ok?o.errorMessage:o.error.message,[c,h]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ys(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Ys(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw Ys(n,"user-disabled",o);const f=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw Mm(n,f,h);Dn(n,f)}}catch(i){if(i instanceof Pn)throw i;Dn(n,"network-request-failed",{message:String(i)})}}async function Vm(n,e,t,r,i={}){const s=await mi(n,e,t,r,i);return"mfaPendingCredential"in s&&Dn(n,"multi-factor-auth-required",{_serverResponse:s}),s}function Lm(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?Uc(n.config,i):`${n.config.apiScheme}://${i}`}class rb{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(on(this.auth,"network-request-failed")),nb.get())})}}function Ys(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=on(n,e,r);return i.customData._tokenResponse=t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ib(n,e){return mi(n,"POST","/v1/accounts:delete",e)}async function xm(n,e){return mi(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xi(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function sb(n,e=!1){const t=Gt(n),r=await t.getIdToken(e),i=Hc(r);ge(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Xi(ol(i.auth_time)),issuedAtTime:Xi(ol(i.iat)),expirationTime:Xi(ol(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function ol(n){return Number(n)*1e3}function Hc(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return co("JWT malformed, contained fewer than 3 sections"),null;try{const i=wm(t);return i?JSON.parse(i):(co("Failed to decode base64 JWT payload"),null)}catch(i){return co("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function vd(n){const e=Hc(n);return ge(e,"internal-error"),ge(typeof e.exp<"u","internal-error"),ge(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cs(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Pn&&ob(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function ob({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xi(this.lastLoginAt),this.creationTime=Xi(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vo(n){var e;const t=n.auth,r=await n.getIdToken(),i=await cs(n,xm(t,{idToken:r}));ge(i==null?void 0:i.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Fm(s.providerUserInfo):[],l=cb(n.providerData,o),c=n.isAnonymous,h=!(n.email&&s.passwordHash)&&!(l!=null&&l.length),f=c?h:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new ec(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(n,p)}async function lb(n){const e=Gt(n);await Vo(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function cb(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Fm(n){return n.map(e=>{var{providerId:t}=e,r=Fc(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ub(n,e){const t=await Om(n,{},async()=>{const r=bs({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=Lm(n,i,"/v1/token",`key=${s}`),l=await n._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",Nm.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function hb(n,e){return mi(n,"POST","/v2/accounts:revokeToken",da(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ge(e.idToken,"internal-error"),ge(typeof e.idToken<"u","internal-error"),ge(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):vd(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ge(e.length!==0,"internal-error");const t=vd(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ge(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await ub(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new ti;return r&&(ge(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ge(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ge(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ti,this.toJSON())}_performRefresh(){return wn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(n,e){ge(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class En{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=Fc(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ab(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new ec(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await cs(this,this.stsTokenManager.getToken(this.auth,e));return ge(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return sb(this,e)}reload(){return lb(this)}_assign(e){this!==e&&(ge(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new En(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ge(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Vo(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Wt(this.auth.app))return Promise.reject(Qn(this.auth));const e=await this.getIdToken();return await cs(this,ib(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,l,c,h,f;const p=(r=t.displayName)!==null&&r!==void 0?r:void 0,_=(i=t.email)!==null&&i!==void 0?i:void 0,A=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,S=(o=t.photoURL)!==null&&o!==void 0?o:void 0,C=(l=t.tenantId)!==null&&l!==void 0?l:void 0,N=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,j=(h=t.createdAt)!==null&&h!==void 0?h:void 0,B=(f=t.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:$,emailVerified:F,isAnonymous:se,providerData:Q,stsTokenManager:v}=t;ge($&&v,e,"internal-error");const y=ti.fromJSON(this.name,v);ge(typeof $=="string",e,"internal-error"),xn(p,e.name),xn(_,e.name),ge(typeof F=="boolean",e,"internal-error"),ge(typeof se=="boolean",e,"internal-error"),xn(A,e.name),xn(S,e.name),xn(C,e.name),xn(N,e.name),xn(j,e.name),xn(B,e.name);const g=new En({uid:$,auth:e,email:_,emailVerified:F,displayName:p,isAnonymous:se,photoURL:S,phoneNumber:A,tenantId:C,stsTokenManager:y,createdAt:j,lastLoginAt:B});return Q&&Array.isArray(Q)&&(g.providerData=Q.map(E=>Object.assign({},E))),N&&(g._redirectEventId=N),g}static async _fromIdTokenResponse(e,t,r=!1){const i=new ti;i.updateFromServerResponse(t);const s=new En({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Vo(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];ge(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?Fm(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),l=new ti;l.updateFromIdToken(r);const c=new En({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:o}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new ec(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,h),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wd=new Map;function Tn(n){Sn(n instanceof Function,"Expected a class definition");let e=wd.get(n);return e?(Sn(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,wd.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Gm.type="NONE";const Ed=Gm;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uo(n,e,t){return`firebase:${n}:${e}:${t}`}class ni{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=uo(this.userKey,i.apiKey,s),this.fullPersistenceKey=uo("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?En._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new ni(Tn(Ed),e,r);const i=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=i[0]||Tn(Ed);const o=uo(r,e.config.apiKey,e.name);let l=null;for(const h of t)try{const f=await h._get(o);if(f){const p=En._fromJSON(e,f);h!==s&&(l=p),s=h;break}}catch{}const c=i.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new ni(s,e,r):(s=c[0],l&&await s._set(o,l.toJSON()),await Promise.all(t.map(async h=>{if(h!==s)try{await h._remove(o)}catch{}})),new ni(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Td(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if($m(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Um(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(zm(e))return"Blackberry";if(jm(e))return"Webos";if(Hm(e))return"Safari";if((e.includes("chrome/")||Bm(e))&&!e.includes("edge/"))return"Chrome";if(qm(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Um(n=Dt()){return/firefox\//i.test(n)}function Hm(n=Dt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Bm(n=Dt()){return/crios\//i.test(n)}function $m(n=Dt()){return/iemobile/i.test(n)}function qm(n=Dt()){return/android/i.test(n)}function zm(n=Dt()){return/blackberry/i.test(n)}function jm(n=Dt()){return/webos/i.test(n)}function Bc(n=Dt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function db(n=Dt()){var e;return Bc(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function fb(){return CE()&&document.documentMode===10}function Wm(n=Dt()){return Bc(n)||qm(n)||jm(n)||zm(n)||/windows phone/i.test(n)||$m(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Km(n,e=[]){let t;switch(n){case"Browser":t=Td(Dt());break;case"Worker":t=`${Td(Dt())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${pi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((o,l)=>{try{const c=e(s);o(c)}catch(c){l(c)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mb(n,e={}){return mi(n,"GET","/v2/passwordPolicy",da(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gb=6;class yb{constructor(e){var t,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:gb,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new bd(this),this.idTokenSubscription=new bd(this),this.beforeStateQueue=new pb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Pm,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Tn(t)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await ni.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await xm(this,{idToken:e}),r=await En._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Wt(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,l=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ge(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Vo(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=eb()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Wt(this.app))return Promise.reject(Qn(this));const t=e?Gt(e):null;return t&&ge(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ge(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Wt(this.app)?Promise.reject(Qn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Wt(this.app)?Promise.reject(Qn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Tn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await mb(this),t=new yb(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ts("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await hb(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Tn(e)||this._popupRedirectResolver;ge(t,this,"argument-error"),this.redirectPersistenceManager=await ni.create(this,[Tn(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ge(l,this,"internal-error"),l.then(()=>{o||s(this.currentUser)}),typeof t=="function"){const c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{const c=e.addObserver(t);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ge(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Km(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(Wt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&YT(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function fa(n){return Gt(n)}class bd{constructor(e){this.auth=e,this.observer=null,this.addObserver=xE(t=>this.observer=t)}get next(){return ge(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $c={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function vb(n){$c=n}function wb(n){return $c.loadJS(n)}function Eb(){return $c.gapiScript}function Tb(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bb(n,e){const t=xc(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(Sr(s,e??{}))return i;Dn(i,"already-initialized")}return t.initialize({options:e})}function Ab(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Tn);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Ib(n,e,t){const r=fa(n);ge(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=Xm(e),{host:o,port:l}=Db(e),c=l===null?"":`:${l}`,h={url:`${s}//${o}${c}/`},f=Object.freeze({host:o,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){ge(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ge(Sr(h,r.config.emulator)&&Sr(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,Sb()}function Xm(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Db(n){const e=Xm(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Ad(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Ad(o)}}}function Ad(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function Sb(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return wn("not implemented")}_getIdTokenResponse(e){return wn("not implemented")}_linkToIdToken(e,t){return wn("not implemented")}_getReauthenticationResolver(e){return wn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ri(n,e){return Vm(n,"POST","/v1/accounts:signInWithIdp",da(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rb="http://localhost";class Cr extends Qm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Cr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Dn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=Fc(t,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Cr(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return ri(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,ri(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ri(e,t)}buildRequest(){const e={requestUri:Rb,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=bs(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is extends Ym{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn extends Is{constructor(){super("facebook.com")}static credential(e){return Cr._fromParams({providerId:Hn.PROVIDER_ID,signInMethod:Hn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hn.credentialFromTaggedObject(e)}static credentialFromError(e){return Hn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hn.credential(e.oauthAccessToken)}catch{return null}}}Hn.FACEBOOK_SIGN_IN_METHOD="facebook.com";Hn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn extends Is{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Cr._fromParams({providerId:Bn.PROVIDER_ID,signInMethod:Bn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Bn.credentialFromTaggedObject(e)}static credentialFromError(e){return Bn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Bn.credential(t,r)}catch{return null}}}Bn.GOOGLE_SIGN_IN_METHOD="google.com";Bn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n extends Is{constructor(){super("github.com")}static credential(e){return Cr._fromParams({providerId:$n.PROVIDER_ID,signInMethod:$n.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $n.credentialFromTaggedObject(e)}static credentialFromError(e){return $n.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $n.credential(e.oauthAccessToken)}catch{return null}}}$n.GITHUB_SIGN_IN_METHOD="github.com";$n.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn extends Is{constructor(){super("twitter.com")}static credential(e,t){return Cr._fromParams({providerId:qn.PROVIDER_ID,signInMethod:qn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return qn.credentialFromTaggedObject(e)}static credentialFromError(e){return qn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return qn.credential(t,r)}catch{return null}}}qn.TWITTER_SIGN_IN_METHOD="twitter.com";qn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cb(n,e){return Vm(n,"POST","/v1/accounts:signUp",da(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await En._fromIdTokenResponse(e,r,i),o=Id(r);return new tr({user:s,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=Id(r);return new tr({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function Id(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kb(n){var e;if(Wt(n.app))return Promise.reject(Qn(n));const t=fa(n);if(await t._initializationPromise,!((e=t.currentUser)===null||e===void 0)&&e.isAnonymous)return new tr({user:t.currentUser,providerId:null,operationType:"signIn"});const r=await Cb(t,{returnSecureToken:!0}),i=await tr._fromIdTokenResponse(t,"signIn",r,!0);return await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo extends Pn{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Lo.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Lo(e,t,r,i)}}function Jm(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Lo._fromErrorAndOperation(n,s,e,r):s})}async function Pb(n,e,t=!1){const r=await cs(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return tr._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mb(n,e,t=!1){const{auth:r}=n;if(Wt(r.app))return Promise.reject(Qn(r));const i="reauthenticate";try{const s=await cs(n,Jm(r,i,e,n),t);ge(s.idToken,r,"internal-error");const o=Hc(s.idToken);ge(o,r,"internal-error");const{sub:l}=o;return ge(n.uid===l,r,"user-mismatch"),tr._forOperation(n,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Dn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nb(n,e,t=!1){if(Wt(n.app))return Promise.reject(Qn(n));const r="signIn",i=await Jm(n,r,e),s=await tr._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}function Ob(n,e,t,r){return Gt(n).onIdTokenChanged(e,t,r)}function Vb(n,e,t){return Gt(n).beforeAuthStateChanged(e,t)}const xo="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(xo,"1"),this.storage.removeItem(xo),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lb=1e3,xb=10;class eg extends Zm{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Wm(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!t&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);fb()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,xb):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},Lb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}eg.type="LOCAL";const Fb=eg;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg extends Zm{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}tg.type="SESSION";const ng=tg;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gb(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new pa(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(o).map(async h=>h(t.origin,s)),c=await Gb(l);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}pa.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qc(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((l,c)=>{const h=qc("",20);i.port1.start();const f=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){const _=p;if(_.data.eventId===h)switch(_.data.status){case"ack":clearTimeout(f),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(_.data.response);break;default:clearTimeout(f),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(){return window}function Hb(n){an().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rg(){return typeof an().WorkerGlobalScope<"u"&&typeof an().importScripts=="function"}async function Bb(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function $b(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function qb(){return rg()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ig="firebaseLocalStorageDb",zb=1,Fo="firebaseLocalStorage",sg="fbase_key";class Ds{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function ma(n,e){return n.transaction([Fo],e?"readwrite":"readonly").objectStore(Fo)}function jb(){const n=indexedDB.deleteDatabase(ig);return new Ds(n).toPromise()}function tc(){const n=indexedDB.open(ig,zb);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Fo,{keyPath:sg})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Fo)?e(r):(r.close(),await jb(),e(await tc()))})})}async function Dd(n,e,t){const r=ma(n,!0).put({[sg]:e,value:t});return new Ds(r).toPromise()}async function Wb(n,e){const t=ma(n,!1).get(e),r=await new Ds(t).toPromise();return r===void 0?null:r.value}function Sd(n,e){const t=ma(n,!0).delete(e);return new Ds(t).toPromise()}const Kb=800,Xb=3;class og{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await tc(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>Xb)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return rg()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=pa._getInstance(qb()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await Bb(),!this.activeServiceWorker)return;this.sender=new Ub(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||$b()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await tc();return await Dd(e,xo,"1"),await Sd(e,xo),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Dd(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>Wb(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Sd(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=ma(i,!1).getAll();return new Ds(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Kb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}og.type="LOCAL";const Qb=og;new As(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yb(n,e){return e?Tn(e):(ge(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc extends Qm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ri(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ri(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ri(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Jb(n){return Nb(n.auth,new zc(n),n.bypassAuthState)}function Zb(n){const{auth:e,user:t}=n;return ge(t,e,"internal-error"),Mb(t,new zc(n),n.bypassAuthState)}async function eA(n){const{auth:e,user:t}=n;return ge(t,e,"internal-error"),Pb(t,new zc(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Jb;case"linkViaPopup":case"linkViaRedirect":return eA;case"reauthViaPopup":case"reauthViaRedirect":return Zb;default:Dn(this.auth,"internal-error")}}resolve(e){Sn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Sn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA=new As(2e3,1e4);class Wr extends ag{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Wr.currentPopupAction&&Wr.currentPopupAction.cancel(),Wr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ge(e,this.auth,"internal-error"),e}async onExecution(){Sn(this.filter.length===1,"Popup operations only handle one event");const e=qc();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(on(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(on(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Wr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(on(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,tA.get())};e()}}Wr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nA="pendingRedirect",ho=new Map;class rA extends ag{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=ho.get(this.auth._key());if(!e){try{const r=await iA(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}ho.set(this.auth._key(),e)}return this.bypassAuthState||ho.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function iA(n,e){const t=aA(e),r=oA(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function sA(n,e){ho.set(n._key(),e)}function oA(n){return Tn(n._redirectPersistence)}function aA(n){return uo(nA,n.config.apiKey,n.name)}async function lA(n,e,t=!1){if(Wt(n.app))return Promise.reject(Qn(n));const r=fa(n),i=Yb(r,e),o=await new rA(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA=10*60*1e3;class uA{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!hA(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!lg(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(on(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=cA&&this.cachedEventUids.clear(),this.cachedEventUids.has(Rd(e))}saveEventToCache(e){this.cachedEventUids.add(Rd(e)),this.lastProcessedEventTime=Date.now()}}function Rd(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function lg({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function hA(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return lg(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dA(n,e={}){return mi(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,pA=/^https?/;async function mA(n){if(n.config.emulator)return;const{authorizedDomains:e}=await dA(n);for(const t of e)try{if(gA(t))return}catch{}Dn(n,"unauthorized-domain")}function gA(n){const e=Zl(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!pA.test(t))return!1;if(fA.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yA=new As(3e4,6e4);function Cd(){const n=an().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function _A(n){return new Promise((e,t)=>{var r,i,s;function o(){Cd(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Cd(),t(on(n,"network-request-failed"))},timeout:yA.get()})}if(!((i=(r=an().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=an().gapi)===null||s===void 0)&&s.load)o();else{const l=Tb("iframefcb");return an()[l]=()=>{gapi.load?o():t(on(n,"network-request-failed"))},wb(`${Eb()}?onload=${l}`).catch(c=>t(c))}}).catch(e=>{throw fo=null,e})}let fo=null;function vA(n){return fo=fo||_A(n),fo}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA=new As(5e3,15e3),EA="__/auth/iframe",TA="emulator/auth/iframe",bA={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},AA=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function IA(n){const e=n.config;ge(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Uc(e,TA):`https://${n.config.authDomain}/${EA}`,r={apiKey:e.apiKey,appName:n.name,v:pi},i=AA.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${bs(r).slice(1)}`}async function DA(n){const e=await vA(n),t=an().gapi;return ge(t,n,"internal-error"),e.open({where:document.body,url:IA(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:bA,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=on(n,"network-request-failed"),l=an().setTimeout(()=>{s(o)},wA.get());function c(){an().clearTimeout(l),i(r)}r.ping(c).then(c,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SA={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},RA=500,CA=600,kA="_blank",PA="http://localhost";class kd{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function MA(n,e,t,r=RA,i=CA){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c=Object.assign(Object.assign({},SA),{width:r.toString(),height:i.toString(),top:s,left:o}),h=Dt().toLowerCase();t&&(l=Bm(h)?kA:t),Um(h)&&(e=e||PA,c.scrollbars="yes");const f=Object.entries(c).reduce((_,[A,S])=>`${_}${A}=${S},`,"");if(db(h)&&l!=="_self")return NA(e||"",l),new kd(null);const p=window.open(e||"",l,f);ge(p,n,"popup-blocked");try{p.focus()}catch{}return new kd(p)}function NA(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA="__/auth/handler",VA="emulator/auth/handler",LA=encodeURIComponent("fac");async function Pd(n,e,t,r,i,s){ge(n.config.authDomain,n,"auth-domain-config-required"),ge(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:pi,eventId:i};if(e instanceof Ym){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",LE(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))o[f]=p}if(e instanceof Is){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(o.scopes=f.join(","))}n.tenantId&&(o.tid=n.tenantId);const l=o;for(const f of Object.keys(l))l[f]===void 0&&delete l[f];const c=await n._getAppCheckToken(),h=c?`#${LA}=${encodeURIComponent(c)}`:"";return`${xA(n)}?${bs(l).slice(1)}${h}`}function xA({config:n}){return n.emulator?Uc(n,VA):`https://${n.authDomain}/${OA}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const al="webStorageSupport";class FA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ng,this._completeRedirectFn=lA,this._overrideRedirectResult=sA}async _openPopup(e,t,r,i){var s;Sn((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Pd(e,t,r,Zl(),i);return MA(e,o,qc())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await Pd(e,t,r,Zl(),i);return Hb(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Sn(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await DA(e),r=new uA(e);return t.register("authEvent",i=>(ge(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(al,{type:al},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[al];o!==void 0&&t(!!o),Dn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=mA(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Wm()||Hm()||Bc()}}const GA=FA;var Md="@firebase/auth",Nd="1.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ge(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HA(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function BA(n){oi(new Rr("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;ge(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Km(n)},h=new _b(r,i,s,c);return Ab(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),oi(new Rr("auth-internal",e=>{const t=fa(e.getProvider("auth").getImmediate());return(r=>new UA(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Xn(Md,Nd,HA(n)),Xn(Md,Nd,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A=5*60,qA=bm("authIdTokenMaxAge")||$A;let Od=null;const zA=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>qA)return;const i=t==null?void 0:t.token;Od!==i&&(Od=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function jA(n=Sm()){const e=xc(n,"auth");if(e.isInitialized())return e.getImmediate();const t=bb(n,{popupRedirectResolver:GA,persistence:[Qb,Fb,ng]}),r=bm("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=zA(s.toString());Vb(t,o,()=>o(t.currentUser)),Ob(t,l=>o(l))}}const i=Em("auth");return i&&Ib(t,`http://${i}`),t}function WA(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}vb({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=on("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",WA().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});BA("Browser");var Vd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Yn,cg;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(v,y){function g(){}g.prototype=y.prototype,v.D=y.prototype,v.prototype=new g,v.prototype.constructor=v,v.C=function(E,I,b){for(var w=Array(arguments.length-2),we=2;we<arguments.length;we++)w[we-2]=arguments[we];return y.prototype[I].apply(E,w)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(v,y,g){g||(g=0);var E=Array(16);if(typeof y=="string")for(var I=0;16>I;++I)E[I]=y.charCodeAt(g++)|y.charCodeAt(g++)<<8|y.charCodeAt(g++)<<16|y.charCodeAt(g++)<<24;else for(I=0;16>I;++I)E[I]=y[g++]|y[g++]<<8|y[g++]<<16|y[g++]<<24;y=v.g[0],g=v.g[1],I=v.g[2];var b=v.g[3],w=y+(b^g&(I^b))+E[0]+3614090360&4294967295;y=g+(w<<7&4294967295|w>>>25),w=b+(I^y&(g^I))+E[1]+3905402710&4294967295,b=y+(w<<12&4294967295|w>>>20),w=I+(g^b&(y^g))+E[2]+606105819&4294967295,I=b+(w<<17&4294967295|w>>>15),w=g+(y^I&(b^y))+E[3]+3250441966&4294967295,g=I+(w<<22&4294967295|w>>>10),w=y+(b^g&(I^b))+E[4]+4118548399&4294967295,y=g+(w<<7&4294967295|w>>>25),w=b+(I^y&(g^I))+E[5]+1200080426&4294967295,b=y+(w<<12&4294967295|w>>>20),w=I+(g^b&(y^g))+E[6]+2821735955&4294967295,I=b+(w<<17&4294967295|w>>>15),w=g+(y^I&(b^y))+E[7]+4249261313&4294967295,g=I+(w<<22&4294967295|w>>>10),w=y+(b^g&(I^b))+E[8]+1770035416&4294967295,y=g+(w<<7&4294967295|w>>>25),w=b+(I^y&(g^I))+E[9]+2336552879&4294967295,b=y+(w<<12&4294967295|w>>>20),w=I+(g^b&(y^g))+E[10]+4294925233&4294967295,I=b+(w<<17&4294967295|w>>>15),w=g+(y^I&(b^y))+E[11]+2304563134&4294967295,g=I+(w<<22&4294967295|w>>>10),w=y+(b^g&(I^b))+E[12]+1804603682&4294967295,y=g+(w<<7&4294967295|w>>>25),w=b+(I^y&(g^I))+E[13]+4254626195&4294967295,b=y+(w<<12&4294967295|w>>>20),w=I+(g^b&(y^g))+E[14]+2792965006&4294967295,I=b+(w<<17&4294967295|w>>>15),w=g+(y^I&(b^y))+E[15]+1236535329&4294967295,g=I+(w<<22&4294967295|w>>>10),w=y+(I^b&(g^I))+E[1]+4129170786&4294967295,y=g+(w<<5&4294967295|w>>>27),w=b+(g^I&(y^g))+E[6]+3225465664&4294967295,b=y+(w<<9&4294967295|w>>>23),w=I+(y^g&(b^y))+E[11]+643717713&4294967295,I=b+(w<<14&4294967295|w>>>18),w=g+(b^y&(I^b))+E[0]+3921069994&4294967295,g=I+(w<<20&4294967295|w>>>12),w=y+(I^b&(g^I))+E[5]+3593408605&4294967295,y=g+(w<<5&4294967295|w>>>27),w=b+(g^I&(y^g))+E[10]+38016083&4294967295,b=y+(w<<9&4294967295|w>>>23),w=I+(y^g&(b^y))+E[15]+3634488961&4294967295,I=b+(w<<14&4294967295|w>>>18),w=g+(b^y&(I^b))+E[4]+3889429448&4294967295,g=I+(w<<20&4294967295|w>>>12),w=y+(I^b&(g^I))+E[9]+568446438&4294967295,y=g+(w<<5&4294967295|w>>>27),w=b+(g^I&(y^g))+E[14]+3275163606&4294967295,b=y+(w<<9&4294967295|w>>>23),w=I+(y^g&(b^y))+E[3]+4107603335&4294967295,I=b+(w<<14&4294967295|w>>>18),w=g+(b^y&(I^b))+E[8]+1163531501&4294967295,g=I+(w<<20&4294967295|w>>>12),w=y+(I^b&(g^I))+E[13]+2850285829&4294967295,y=g+(w<<5&4294967295|w>>>27),w=b+(g^I&(y^g))+E[2]+4243563512&4294967295,b=y+(w<<9&4294967295|w>>>23),w=I+(y^g&(b^y))+E[7]+1735328473&4294967295,I=b+(w<<14&4294967295|w>>>18),w=g+(b^y&(I^b))+E[12]+2368359562&4294967295,g=I+(w<<20&4294967295|w>>>12),w=y+(g^I^b)+E[5]+4294588738&4294967295,y=g+(w<<4&4294967295|w>>>28),w=b+(y^g^I)+E[8]+2272392833&4294967295,b=y+(w<<11&4294967295|w>>>21),w=I+(b^y^g)+E[11]+1839030562&4294967295,I=b+(w<<16&4294967295|w>>>16),w=g+(I^b^y)+E[14]+4259657740&4294967295,g=I+(w<<23&4294967295|w>>>9),w=y+(g^I^b)+E[1]+2763975236&4294967295,y=g+(w<<4&4294967295|w>>>28),w=b+(y^g^I)+E[4]+1272893353&4294967295,b=y+(w<<11&4294967295|w>>>21),w=I+(b^y^g)+E[7]+4139469664&4294967295,I=b+(w<<16&4294967295|w>>>16),w=g+(I^b^y)+E[10]+3200236656&4294967295,g=I+(w<<23&4294967295|w>>>9),w=y+(g^I^b)+E[13]+681279174&4294967295,y=g+(w<<4&4294967295|w>>>28),w=b+(y^g^I)+E[0]+3936430074&4294967295,b=y+(w<<11&4294967295|w>>>21),w=I+(b^y^g)+E[3]+3572445317&4294967295,I=b+(w<<16&4294967295|w>>>16),w=g+(I^b^y)+E[6]+76029189&4294967295,g=I+(w<<23&4294967295|w>>>9),w=y+(g^I^b)+E[9]+3654602809&4294967295,y=g+(w<<4&4294967295|w>>>28),w=b+(y^g^I)+E[12]+3873151461&4294967295,b=y+(w<<11&4294967295|w>>>21),w=I+(b^y^g)+E[15]+530742520&4294967295,I=b+(w<<16&4294967295|w>>>16),w=g+(I^b^y)+E[2]+3299628645&4294967295,g=I+(w<<23&4294967295|w>>>9),w=y+(I^(g|~b))+E[0]+4096336452&4294967295,y=g+(w<<6&4294967295|w>>>26),w=b+(g^(y|~I))+E[7]+1126891415&4294967295,b=y+(w<<10&4294967295|w>>>22),w=I+(y^(b|~g))+E[14]+2878612391&4294967295,I=b+(w<<15&4294967295|w>>>17),w=g+(b^(I|~y))+E[5]+4237533241&4294967295,g=I+(w<<21&4294967295|w>>>11),w=y+(I^(g|~b))+E[12]+1700485571&4294967295,y=g+(w<<6&4294967295|w>>>26),w=b+(g^(y|~I))+E[3]+2399980690&4294967295,b=y+(w<<10&4294967295|w>>>22),w=I+(y^(b|~g))+E[10]+4293915773&4294967295,I=b+(w<<15&4294967295|w>>>17),w=g+(b^(I|~y))+E[1]+2240044497&4294967295,g=I+(w<<21&4294967295|w>>>11),w=y+(I^(g|~b))+E[8]+1873313359&4294967295,y=g+(w<<6&4294967295|w>>>26),w=b+(g^(y|~I))+E[15]+4264355552&4294967295,b=y+(w<<10&4294967295|w>>>22),w=I+(y^(b|~g))+E[6]+2734768916&4294967295,I=b+(w<<15&4294967295|w>>>17),w=g+(b^(I|~y))+E[13]+1309151649&4294967295,g=I+(w<<21&4294967295|w>>>11),w=y+(I^(g|~b))+E[4]+4149444226&4294967295,y=g+(w<<6&4294967295|w>>>26),w=b+(g^(y|~I))+E[11]+3174756917&4294967295,b=y+(w<<10&4294967295|w>>>22),w=I+(y^(b|~g))+E[2]+718787259&4294967295,I=b+(w<<15&4294967295|w>>>17),w=g+(b^(I|~y))+E[9]+3951481745&4294967295,v.g[0]=v.g[0]+y&4294967295,v.g[1]=v.g[1]+(I+(w<<21&4294967295|w>>>11))&4294967295,v.g[2]=v.g[2]+I&4294967295,v.g[3]=v.g[3]+b&4294967295}r.prototype.u=function(v,y){y===void 0&&(y=v.length);for(var g=y-this.blockSize,E=this.B,I=this.h,b=0;b<y;){if(I==0)for(;b<=g;)i(this,v,b),b+=this.blockSize;if(typeof v=="string"){for(;b<y;)if(E[I++]=v.charCodeAt(b++),I==this.blockSize){i(this,E),I=0;break}}else for(;b<y;)if(E[I++]=v[b++],I==this.blockSize){i(this,E),I=0;break}}this.h=I,this.o+=y},r.prototype.v=function(){var v=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);v[0]=128;for(var y=1;y<v.length-8;++y)v[y]=0;var g=8*this.o;for(y=v.length-8;y<v.length;++y)v[y]=g&255,g/=256;for(this.u(v),v=Array(16),y=g=0;4>y;++y)for(var E=0;32>E;E+=8)v[g++]=this.g[y]>>>E&255;return v};function s(v,y){var g=l;return Object.prototype.hasOwnProperty.call(g,v)?g[v]:g[v]=y(v)}function o(v,y){this.h=y;for(var g=[],E=!0,I=v.length-1;0<=I;I--){var b=v[I]|0;E&&b==y||(g[I]=b,E=!1)}this.g=g}var l={};function c(v){return-128<=v&&128>v?s(v,function(y){return new o([y|0],0>y?-1:0)}):new o([v|0],0>v?-1:0)}function h(v){if(isNaN(v)||!isFinite(v))return p;if(0>v)return N(h(-v));for(var y=[],g=1,E=0;v>=g;E++)y[E]=v/g|0,g*=4294967296;return new o(y,0)}function f(v,y){if(v.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(v.charAt(0)=="-")return N(f(v.substring(1),y));if(0<=v.indexOf("-"))throw Error('number format error: interior "-" character');for(var g=h(Math.pow(y,8)),E=p,I=0;I<v.length;I+=8){var b=Math.min(8,v.length-I),w=parseInt(v.substring(I,I+b),y);8>b?(b=h(Math.pow(y,b)),E=E.j(b).add(h(w))):(E=E.j(g),E=E.add(h(w)))}return E}var p=c(0),_=c(1),A=c(16777216);n=o.prototype,n.m=function(){if(C(this))return-N(this).m();for(var v=0,y=1,g=0;g<this.g.length;g++){var E=this.i(g);v+=(0<=E?E:4294967296+E)*y,y*=4294967296}return v},n.toString=function(v){if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(S(this))return"0";if(C(this))return"-"+N(this).toString(v);for(var y=h(Math.pow(v,6)),g=this,E="";;){var I=F(g,y).g;g=j(g,I.j(y));var b=((0<g.g.length?g.g[0]:g.h)>>>0).toString(v);if(g=I,S(g))return b+E;for(;6>b.length;)b="0"+b;E=b+E}},n.i=function(v){return 0>v?0:v<this.g.length?this.g[v]:this.h};function S(v){if(v.h!=0)return!1;for(var y=0;y<v.g.length;y++)if(v.g[y]!=0)return!1;return!0}function C(v){return v.h==-1}n.l=function(v){return v=j(this,v),C(v)?-1:S(v)?0:1};function N(v){for(var y=v.g.length,g=[],E=0;E<y;E++)g[E]=~v.g[E];return new o(g,~v.h).add(_)}n.abs=function(){return C(this)?N(this):this},n.add=function(v){for(var y=Math.max(this.g.length,v.g.length),g=[],E=0,I=0;I<=y;I++){var b=E+(this.i(I)&65535)+(v.i(I)&65535),w=(b>>>16)+(this.i(I)>>>16)+(v.i(I)>>>16);E=w>>>16,b&=65535,w&=65535,g[I]=w<<16|b}return new o(g,g[g.length-1]&-2147483648?-1:0)};function j(v,y){return v.add(N(y))}n.j=function(v){if(S(this)||S(v))return p;if(C(this))return C(v)?N(this).j(N(v)):N(N(this).j(v));if(C(v))return N(this.j(N(v)));if(0>this.l(A)&&0>v.l(A))return h(this.m()*v.m());for(var y=this.g.length+v.g.length,g=[],E=0;E<2*y;E++)g[E]=0;for(E=0;E<this.g.length;E++)for(var I=0;I<v.g.length;I++){var b=this.i(E)>>>16,w=this.i(E)&65535,we=v.i(I)>>>16,Je=v.i(I)&65535;g[2*E+2*I]+=w*Je,B(g,2*E+2*I),g[2*E+2*I+1]+=b*Je,B(g,2*E+2*I+1),g[2*E+2*I+1]+=w*we,B(g,2*E+2*I+1),g[2*E+2*I+2]+=b*we,B(g,2*E+2*I+2)}for(E=0;E<y;E++)g[E]=g[2*E+1]<<16|g[2*E];for(E=y;E<2*y;E++)g[E]=0;return new o(g,0)};function B(v,y){for(;(v[y]&65535)!=v[y];)v[y+1]+=v[y]>>>16,v[y]&=65535,y++}function $(v,y){this.g=v,this.h=y}function F(v,y){if(S(y))throw Error("division by zero");if(S(v))return new $(p,p);if(C(v))return y=F(N(v),y),new $(N(y.g),N(y.h));if(C(y))return y=F(v,N(y)),new $(N(y.g),y.h);if(30<v.g.length){if(C(v)||C(y))throw Error("slowDivide_ only works with positive integers.");for(var g=_,E=y;0>=E.l(v);)g=se(g),E=se(E);var I=Q(g,1),b=Q(E,1);for(E=Q(E,2),g=Q(g,2);!S(E);){var w=b.add(E);0>=w.l(v)&&(I=I.add(g),b=w),E=Q(E,1),g=Q(g,1)}return y=j(v,I.j(y)),new $(I,y)}for(I=p;0<=v.l(y);){for(g=Math.max(1,Math.floor(v.m()/y.m())),E=Math.ceil(Math.log(g)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),b=h(g),w=b.j(y);C(w)||0<w.l(v);)g-=E,b=h(g),w=b.j(y);S(b)&&(b=_),I=I.add(b),v=j(v,w)}return new $(I,v)}n.A=function(v){return F(this,v).h},n.and=function(v){for(var y=Math.max(this.g.length,v.g.length),g=[],E=0;E<y;E++)g[E]=this.i(E)&v.i(E);return new o(g,this.h&v.h)},n.or=function(v){for(var y=Math.max(this.g.length,v.g.length),g=[],E=0;E<y;E++)g[E]=this.i(E)|v.i(E);return new o(g,this.h|v.h)},n.xor=function(v){for(var y=Math.max(this.g.length,v.g.length),g=[],E=0;E<y;E++)g[E]=this.i(E)^v.i(E);return new o(g,this.h^v.h)};function se(v){for(var y=v.g.length+1,g=[],E=0;E<y;E++)g[E]=v.i(E)<<1|v.i(E-1)>>>31;return new o(g,v.h)}function Q(v,y){var g=y>>5;y%=32;for(var E=v.g.length-g,I=[],b=0;b<E;b++)I[b]=0<y?v.i(b+g)>>>y|v.i(b+g+1)<<32-y:v.i(b+g);return new o(I,v.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,cg=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=f,Yn=o}).apply(typeof Vd<"u"?Vd:typeof self<"u"?self:typeof window<"u"?window:{});var Js=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ug,Gi,hg,po,nc,dg,fg,pg;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,u,d){return a==Array.prototype||a==Object.prototype||(a[u]=d.value),a};function t(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Js=="object"&&Js];for(var u=0;u<a.length;++u){var d=a[u];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var r=t(this);function i(a,u){if(u)e:{var d=r;a=a.split(".");for(var m=0;m<a.length-1;m++){var R=a[m];if(!(R in d))break e;d=d[R]}a=a[a.length-1],m=d[a],u=u(m),u!=m&&u!=null&&e(d,a,{configurable:!0,writable:!0,value:u})}}function s(a,u){a instanceof String&&(a+="");var d=0,m=!1,R={next:function(){if(!m&&d<a.length){var M=d++;return{value:u(M,a[M]),done:!1}}return m=!0,{done:!0,value:void 0}}};return R[Symbol.iterator]=function(){return R},R}i("Array.prototype.values",function(a){return a||function(){return s(this,function(u,d){return d})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(a){var u=typeof a;return u=u!="object"?u:a?Array.isArray(a)?"array":u:"null",u=="array"||u=="object"&&typeof a.length=="number"}function h(a){var u=typeof a;return u=="object"&&a!=null||u=="function"}function f(a,u,d){return a.call.apply(a.bind,arguments)}function p(a,u,d){if(!a)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var R=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(R,m),a.apply(u,R)}}return function(){return a.apply(u,arguments)}}function _(a,u,d){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,_.apply(null,arguments)}function A(a,u){var d=Array.prototype.slice.call(arguments,1);return function(){var m=d.slice();return m.push.apply(m,arguments),a.apply(this,m)}}function S(a,u){function d(){}d.prototype=u.prototype,a.aa=u.prototype,a.prototype=new d,a.prototype.constructor=a,a.Qb=function(m,R,M){for(var X=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)X[Le-2]=arguments[Le];return u.prototype[R].apply(m,X)}}function C(a){const u=a.length;if(0<u){const d=Array(u);for(let m=0;m<u;m++)d[m]=a[m];return d}return[]}function N(a,u){for(let d=1;d<arguments.length;d++){const m=arguments[d];if(c(m)){const R=a.length||0,M=m.length||0;a.length=R+M;for(let X=0;X<M;X++)a[R+X]=m[X]}else a.push(m)}}class j{constructor(u,d){this.i=u,this.j=d,this.h=0,this.g=null}get(){let u;return 0<this.h?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function B(a){return/^[\s\xa0]*$/.test(a)}function $(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function F(a){return F[" "](a),a}F[" "]=function(){};var se=$().indexOf("Gecko")!=-1&&!($().toLowerCase().indexOf("webkit")!=-1&&$().indexOf("Edge")==-1)&&!($().indexOf("Trident")!=-1||$().indexOf("MSIE")!=-1)&&$().indexOf("Edge")==-1;function Q(a,u,d){for(const m in a)u.call(d,a[m],m,a)}function v(a,u){for(const d in a)u.call(void 0,a[d],d,a)}function y(a){const u={};for(const d in a)u[d]=a[d];return u}const g="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(a,u){let d,m;for(let R=1;R<arguments.length;R++){m=arguments[R];for(d in m)a[d]=m[d];for(let M=0;M<g.length;M++)d=g[M],Object.prototype.hasOwnProperty.call(m,d)&&(a[d]=m[d])}}function I(a){var u=1;a=a.split(":");const d=[];for(;0<u&&a.length;)d.push(a.shift()),u--;return a.length&&d.push(a.join(":")),d}function b(a){l.setTimeout(()=>{throw a},0)}function w(){var a=G;let u=null;return a.g&&(u=a.g,a.g=a.g.next,a.g||(a.h=null),u.next=null),u}class we{constructor(){this.h=this.g=null}add(u,d){const m=Je.get();m.set(u,d),this.h?this.h.next=m:this.g=m,this.h=m}}var Je=new j(()=>new Ge,a=>a.reset());class Ge{constructor(){this.next=this.g=this.h=null}set(u,d){this.h=u,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let De,be=!1,G=new we,x=()=>{const a=l.Promise.resolve(void 0);De=()=>{a.then(z)}};var z=()=>{for(var a;a=w();){try{a.h.call(a.g)}catch(d){b(d)}var u=Je;u.j(a),100>u.h&&(u.h++,a.next=u.g,u.g=a)}be=!1};function ne(){this.s=this.s,this.C=this.C}ne.prototype.s=!1,ne.prototype.ma=function(){this.s||(this.s=!0,this.N())},ne.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Z(a,u){this.type=a,this.g=this.target=u,this.defaultPrevented=!1}Z.prototype.h=function(){this.defaultPrevented=!0};var Re=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,u=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const d=()=>{};l.addEventListener("test",d,u),l.removeEventListener("test",d,u)}catch{}return a}();function qe(a,u){if(Z.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var d=this.type=a.type,m=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=u,u=a.relatedTarget){if(se){e:{try{F(u.nodeName);var R=!0;break e}catch{}R=!1}R||(u=null)}}else d=="mouseover"?u=a.fromElement:d=="mouseout"&&(u=a.toElement);this.relatedTarget=u,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:ze[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&qe.aa.h.call(this)}}S(qe,Z);var ze={2:"touch",3:"pen",4:"mouse"};qe.prototype.h=function(){qe.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var je="closure_listenable_"+(1e6*Math.random()|0),Xe=0;function _e(a,u,d,m,R){this.listener=a,this.proxy=null,this.src=u,this.type=d,this.capture=!!m,this.ha=R,this.key=++Xe,this.da=this.fa=!1}function fe(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Ve(a){this.src=a,this.g={},this.h=0}Ve.prototype.add=function(a,u,d,m,R){var M=a.toString();a=this.g[M],a||(a=this.g[M]=[],this.h++);var X=D(a,u,m,R);return-1<X?(u=a[X],d||(u.fa=!1)):(u=new _e(u,this.src,M,!!m,R),u.fa=d,a.push(u)),u};function T(a,u){var d=u.type;if(d in a.g){var m=a.g[d],R=Array.prototype.indexOf.call(m,u,void 0),M;(M=0<=R)&&Array.prototype.splice.call(m,R,1),M&&(fe(u),a.g[d].length==0&&(delete a.g[d],a.h--))}}function D(a,u,d,m){for(var R=0;R<a.length;++R){var M=a[R];if(!M.da&&M.listener==u&&M.capture==!!d&&M.ha==m)return R}return-1}var P="closure_lm_"+(1e6*Math.random()|0),H={};function L(a,u,d,m,R){if(Array.isArray(u)){for(var M=0;M<u.length;M++)L(a,u[M],d,m,R);return null}return d=pe(d),a&&a[je]?a.K(u,d,h(m)?!!m.capture:!1,R):U(a,u,d,!1,m,R)}function U(a,u,d,m,R,M){if(!u)throw Error("Invalid event type");var X=h(R)?!!R.capture:!!R,Le=J(a);if(Le||(a[P]=Le=new Ve(a)),d=Le.add(u,d,m,X,M),d.proxy)return d;if(m=Y(),d.proxy=m,m.src=a,m.listener=d,a.addEventListener)Re||(R=X),R===void 0&&(R=!1),a.addEventListener(u.toString(),m,R);else if(a.attachEvent)a.attachEvent(q(u.toString()),m);else if(a.addListener&&a.removeListener)a.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return d}function Y(){function a(d){return u.call(a.src,a.listener,d)}const u=ue;return a}function K(a,u,d,m,R){if(Array.isArray(u))for(var M=0;M<u.length;M++)K(a,u[M],d,m,R);else m=h(m)?!!m.capture:!!m,d=pe(d),a&&a[je]?(a=a.i,u=String(u).toString(),u in a.g&&(M=a.g[u],d=D(M,d,m,R),-1<d&&(fe(M[d]),Array.prototype.splice.call(M,d,1),M.length==0&&(delete a.g[u],a.h--)))):a&&(a=J(a))&&(u=a.g[u.toString()],a=-1,u&&(a=D(u,d,m,R)),(d=-1<a?u[a]:null)&&W(d))}function W(a){if(typeof a!="number"&&a&&!a.da){var u=a.src;if(u&&u[je])T(u.i,a);else{var d=a.type,m=a.proxy;u.removeEventListener?u.removeEventListener(d,m,a.capture):u.detachEvent?u.detachEvent(q(d),m):u.addListener&&u.removeListener&&u.removeListener(m),(d=J(u))?(T(d,a),d.h==0&&(d.src=null,u[P]=null)):fe(a)}}}function q(a){return a in H?H[a]:H[a]="on"+a}function ue(a,u){if(a.da)a=!0;else{u=new qe(u,this);var d=a.listener,m=a.ha||a.src;a.fa&&W(a),a=d.call(m,u)}return a}function J(a){return a=a[P],a instanceof Ve?a:null}var ae="__closure_events_fn_"+(1e9*Math.random()>>>0);function pe(a){return typeof a=="function"?a:(a[ae]||(a[ae]=function(u){return a.handleEvent(u)}),a[ae])}function he(){ne.call(this),this.i=new Ve(this),this.M=this,this.F=null}S(he,ne),he.prototype[je]=!0,he.prototype.removeEventListener=function(a,u,d,m){K(this,a,u,d,m)};function Te(a,u){var d,m=a.F;if(m)for(d=[];m;m=m.F)d.push(m);if(a=a.M,m=u.type||u,typeof u=="string")u=new Z(u,a);else if(u instanceof Z)u.target=u.target||a;else{var R=u;u=new Z(m,a),E(u,R)}if(R=!0,d)for(var M=d.length-1;0<=M;M--){var X=u.g=d[M];R=Ce(X,m,!0,u)&&R}if(X=u.g=a,R=Ce(X,m,!0,u)&&R,R=Ce(X,m,!1,u)&&R,d)for(M=0;M<d.length;M++)X=u.g=d[M],R=Ce(X,m,!1,u)&&R}he.prototype.N=function(){if(he.aa.N.call(this),this.i){var a=this.i,u;for(u in a.g){for(var d=a.g[u],m=0;m<d.length;m++)fe(d[m]);delete a.g[u],a.h--}}this.F=null},he.prototype.K=function(a,u,d,m){return this.i.add(String(a),u,!1,d,m)},he.prototype.L=function(a,u,d,m){return this.i.add(String(a),u,!0,d,m)};function Ce(a,u,d,m){if(u=a.i.g[String(u)],!u)return!0;u=u.concat();for(var R=!0,M=0;M<u.length;++M){var X=u[M];if(X&&!X.da&&X.capture==d){var Le=X.listener,at=X.ha||X.src;X.fa&&T(a.i,X),R=Le.call(at,m)!==!1&&R}}return R&&!m.defaultPrevented}function pt(a,u,d){if(typeof a=="function")d&&(a=_(a,d));else if(a&&typeof a.handleEvent=="function")a=_(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(u)?-1:l.setTimeout(a,u||0)}function st(a){a.g=pt(()=>{a.g=null,a.i&&(a.i=!1,st(a))},a.l);const u=a.h;a.h=null,a.m.apply(null,u)}class Ut extends ne{constructor(u,d){super(),this.m=u,this.l=d,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:st(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function mt(a){ne.call(this),this.h=a,this.g={}}S(mt,ne);var Mn=[];function Ei(a){Q(a.g,function(u,d){this.g.hasOwnProperty(d)&&W(u)},a),a.g={}}mt.prototype.N=function(){mt.aa.N.call(this),Ei(this)},mt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ot=l.JSON.stringify,Ht=l.JSON.parse,Ps=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function Ca(){}Ca.prototype.h=null;function Mu(a){return a.h||(a.h=a.i())}function Nu(){}var Ti={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ka(){Z.call(this,"d")}S(ka,Z);function Pa(){Z.call(this,"c")}S(Pa,Z);var hr={},Ou=null;function Ms(){return Ou=Ou||new he}hr.La="serverreachability";function Vu(a){Z.call(this,hr.La,a)}S(Vu,Z);function bi(a){const u=Ms();Te(u,new Vu(u))}hr.STAT_EVENT="statevent";function Lu(a,u){Z.call(this,hr.STAT_EVENT,a),this.stat=u}S(Lu,Z);function St(a){const u=Ms();Te(u,new Lu(u,a))}hr.Ma="timingevent";function xu(a,u){Z.call(this,hr.Ma,a),this.size=u}S(xu,Z);function Ai(a,u){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},u)}function Ii(){this.g=!0}Ii.prototype.xa=function(){this.g=!1};function zy(a,u,d,m,R,M){a.info(function(){if(a.g)if(M)for(var X="",Le=M.split("&"),at=0;at<Le.length;at++){var Pe=Le[at].split("=");if(1<Pe.length){var gt=Pe[0];Pe=Pe[1];var yt=gt.split("_");X=2<=yt.length&&yt[1]=="type"?X+(gt+"="+Pe+"&"):X+(gt+"=redacted&")}}else X=null;else X=M;return"XMLHTTP REQ ("+m+") [attempt "+R+"]: "+u+`
`+d+`
`+X})}function jy(a,u,d,m,R,M,X){a.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+R+"]: "+u+`
`+d+`
`+M+" "+X})}function xr(a,u,d,m){a.info(function(){return"XMLHTTP TEXT ("+u+"): "+Ky(a,d)+(m?" "+m:"")})}function Wy(a,u){a.info(function(){return"TIMEOUT: "+u})}Ii.prototype.info=function(){};function Ky(a,u){if(!a.g)return u;if(!u)return null;try{var d=JSON.parse(u);if(d){for(a=0;a<d.length;a++)if(Array.isArray(d[a])){var m=d[a];if(!(2>m.length)){var R=m[1];if(Array.isArray(R)&&!(1>R.length)){var M=R[0];if(M!="noop"&&M!="stop"&&M!="close")for(var X=1;X<R.length;X++)R[X]=""}}}}return ot(d)}catch{return u}}var Ns={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Fu={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ma;function Os(){}S(Os,Ca),Os.prototype.g=function(){return new XMLHttpRequest},Os.prototype.i=function(){return{}},Ma=new Os;function Nn(a,u,d,m){this.j=a,this.i=u,this.l=d,this.R=m||1,this.U=new mt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Gu}function Gu(){this.i=null,this.g="",this.h=!1}var Uu={},Na={};function Oa(a,u,d){a.L=1,a.v=Fs(fn(u)),a.m=d,a.P=!0,Hu(a,null)}function Hu(a,u){a.F=Date.now(),Vs(a),a.A=fn(a.v);var d=a.A,m=a.R;Array.isArray(m)||(m=[String(m)]),th(d.i,"t",m),a.C=0,d=a.j.J,a.h=new Gu,a.g=vh(a.j,d?u:null,!a.m),0<a.O&&(a.M=new Ut(_(a.Y,a,a.g),a.O)),u=a.U,d=a.g,m=a.ca;var R="readystatechange";Array.isArray(R)||(R&&(Mn[0]=R.toString()),R=Mn);for(var M=0;M<R.length;M++){var X=L(d,R[M],m||u.handleEvent,!1,u.h||u);if(!X)break;u.g[X.key]=X}u=a.H?y(a.H):{},a.m?(a.u||(a.u="POST"),u["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,u)):(a.u="GET",a.g.ea(a.A,a.u,null,u)),bi(),zy(a.i,a.u,a.A,a.l,a.R,a.m)}Nn.prototype.ca=function(a){a=a.target;const u=this.M;u&&pn(a)==3?u.j():this.Y(a)},Nn.prototype.Y=function(a){try{if(a==this.g)e:{const yt=pn(this.g);var u=this.g.Ba();const Ur=this.g.Z();if(!(3>yt)&&(yt!=3||this.g&&(this.h.h||this.g.oa()||lh(this.g)))){this.J||yt!=4||u==7||(u==8||0>=Ur?bi(3):bi(2)),Va(this);var d=this.g.Z();this.X=d;t:if(Bu(this)){var m=lh(this.g);a="";var R=m.length,M=pn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){dr(this),Di(this);var X="";break t}this.h.i=new l.TextDecoder}for(u=0;u<R;u++)this.h.h=!0,a+=this.h.i.decode(m[u],{stream:!(M&&u==R-1)});m.length=0,this.h.g+=a,this.C=0,X=this.h.g}else X=this.g.oa();if(this.o=d==200,jy(this.i,this.u,this.A,this.l,this.R,yt,d),this.o){if(this.T&&!this.K){t:{if(this.g){var Le,at=this.g;if((Le=at.g?at.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!B(Le)){var Pe=Le;break t}}Pe=null}if(d=Pe)xr(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,La(this,d);else{this.o=!1,this.s=3,St(12),dr(this),Di(this);break e}}if(this.P){d=!0;let jt;for(;!this.J&&this.C<X.length;)if(jt=Xy(this,X),jt==Na){yt==4&&(this.s=4,St(14),d=!1),xr(this.i,this.l,null,"[Incomplete Response]");break}else if(jt==Uu){this.s=4,St(15),xr(this.i,this.l,X,"[Invalid Chunk]"),d=!1;break}else xr(this.i,this.l,jt,null),La(this,jt);if(Bu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),yt!=4||X.length!=0||this.h.h||(this.s=1,St(16),d=!1),this.o=this.o&&d,!d)xr(this.i,this.l,X,"[Invalid Chunked Response]"),dr(this),Di(this);else if(0<X.length&&!this.W){this.W=!0;var gt=this.j;gt.g==this&&gt.ba&&!gt.M&&(gt.j.info("Great, no buffering proxy detected. Bytes received: "+X.length),Ba(gt),gt.M=!0,St(11))}}else xr(this.i,this.l,X,null),La(this,X);yt==4&&dr(this),this.o&&!this.J&&(yt==4?mh(this.j,this):(this.o=!1,Vs(this)))}else d_(this.g),d==400&&0<X.indexOf("Unknown SID")?(this.s=3,St(12)):(this.s=0,St(13)),dr(this),Di(this)}}}catch{}finally{}};function Bu(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function Xy(a,u){var d=a.C,m=u.indexOf(`
`,d);return m==-1?Na:(d=Number(u.substring(d,m)),isNaN(d)?Uu:(m+=1,m+d>u.length?Na:(u=u.slice(m,m+d),a.C=m+d,u)))}Nn.prototype.cancel=function(){this.J=!0,dr(this)};function Vs(a){a.S=Date.now()+a.I,$u(a,a.I)}function $u(a,u){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Ai(_(a.ba,a),u)}function Va(a){a.B&&(l.clearTimeout(a.B),a.B=null)}Nn.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(Wy(this.i,this.A),this.L!=2&&(bi(),St(17)),dr(this),this.s=2,Di(this)):$u(this,this.S-a)};function Di(a){a.j.G==0||a.J||mh(a.j,a)}function dr(a){Va(a);var u=a.M;u&&typeof u.ma=="function"&&u.ma(),a.M=null,Ei(a.U),a.g&&(u=a.g,a.g=null,u.abort(),u.ma())}function La(a,u){try{var d=a.j;if(d.G!=0&&(d.g==a||xa(d.h,a))){if(!a.K&&xa(d.h,a)&&d.G==3){try{var m=d.Da.g.parse(u)}catch{m=null}if(Array.isArray(m)&&m.length==3){var R=m;if(R[0]==0){e:if(!d.u){if(d.g)if(d.g.F+3e3<a.F)qs(d),Bs(d);else break e;Ha(d),St(18)}}else d.za=R[1],0<d.za-d.T&&37500>R[2]&&d.F&&d.v==0&&!d.C&&(d.C=Ai(_(d.Za,d),6e3));if(1>=ju(d.h)&&d.ca){try{d.ca()}catch{}d.ca=void 0}}else pr(d,11)}else if((a.K||d.g==a)&&qs(d),!B(u))for(R=d.Da.g.parse(u),u=0;u<R.length;u++){let Pe=R[u];if(d.T=Pe[0],Pe=Pe[1],d.G==2)if(Pe[0]=="c"){d.K=Pe[1],d.ia=Pe[2];const gt=Pe[3];gt!=null&&(d.la=gt,d.j.info("VER="+d.la));const yt=Pe[4];yt!=null&&(d.Aa=yt,d.j.info("SVER="+d.Aa));const Ur=Pe[5];Ur!=null&&typeof Ur=="number"&&0<Ur&&(m=1.5*Ur,d.L=m,d.j.info("backChannelRequestTimeoutMs_="+m)),m=d;const jt=a.g;if(jt){const js=jt.g?jt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(js){var M=m.h;M.g||js.indexOf("spdy")==-1&&js.indexOf("quic")==-1&&js.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(Fa(M,M.h),M.h=null))}if(m.D){const $a=jt.g?jt.g.getResponseHeader("X-HTTP-Session-Id"):null;$a&&(m.ya=$a,Be(m.I,m.D,$a))}}d.G=3,d.l&&d.l.ua(),d.ba&&(d.R=Date.now()-a.F,d.j.info("Handshake RTT: "+d.R+"ms")),m=d;var X=a;if(m.qa=_h(m,m.J?m.ia:null,m.W),X.K){Wu(m.h,X);var Le=X,at=m.L;at&&(Le.I=at),Le.B&&(Va(Le),Vs(Le)),m.g=X}else fh(m);0<d.i.length&&$s(d)}else Pe[0]!="stop"&&Pe[0]!="close"||pr(d,7);else d.G==3&&(Pe[0]=="stop"||Pe[0]=="close"?Pe[0]=="stop"?pr(d,7):Ua(d):Pe[0]!="noop"&&d.l&&d.l.ta(Pe),d.v=0)}}bi(4)}catch{}}var Qy=class{constructor(a,u){this.g=a,this.map=u}};function qu(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function zu(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function ju(a){return a.h?1:a.g?a.g.size:0}function xa(a,u){return a.h?a.h==u:a.g?a.g.has(u):!1}function Fa(a,u){a.g?a.g.add(u):a.h=u}function Wu(a,u){a.h&&a.h==u?a.h=null:a.g&&a.g.has(u)&&a.g.delete(u)}qu.prototype.cancel=function(){if(this.i=Ku(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Ku(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let u=a.i;for(const d of a.g.values())u=u.concat(d.D);return u}return C(a.i)}function Yy(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(c(a)){for(var u=[],d=a.length,m=0;m<d;m++)u.push(a[m]);return u}u=[],d=0;for(m in a)u[d++]=a[m];return u}function Jy(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(c(a)||typeof a=="string"){var u=[];a=a.length;for(var d=0;d<a;d++)u.push(d);return u}u=[],d=0;for(const m in a)u[d++]=m;return u}}}function Xu(a,u){if(a.forEach&&typeof a.forEach=="function")a.forEach(u,void 0);else if(c(a)||typeof a=="string")Array.prototype.forEach.call(a,u,void 0);else for(var d=Jy(a),m=Yy(a),R=m.length,M=0;M<R;M++)u.call(void 0,m[M],d&&d[M],a)}var Qu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Zy(a,u){if(a){a=a.split("&");for(var d=0;d<a.length;d++){var m=a[d].indexOf("="),R=null;if(0<=m){var M=a[d].substring(0,m);R=a[d].substring(m+1)}else M=a[d];u(M,R?decodeURIComponent(R.replace(/\+/g," ")):"")}}}function fr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof fr){this.h=a.h,Ls(this,a.j),this.o=a.o,this.g=a.g,xs(this,a.s),this.l=a.l;var u=a.i,d=new Ci;d.i=u.i,u.g&&(d.g=new Map(u.g),d.h=u.h),Yu(this,d),this.m=a.m}else a&&(u=String(a).match(Qu))?(this.h=!1,Ls(this,u[1]||"",!0),this.o=Si(u[2]||""),this.g=Si(u[3]||"",!0),xs(this,u[4]),this.l=Si(u[5]||"",!0),Yu(this,u[6]||"",!0),this.m=Si(u[7]||"")):(this.h=!1,this.i=new Ci(null,this.h))}fr.prototype.toString=function(){var a=[],u=this.j;u&&a.push(Ri(u,Ju,!0),":");var d=this.g;return(d||u=="file")&&(a.push("//"),(u=this.o)&&a.push(Ri(u,Ju,!0),"@"),a.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.s,d!=null&&a.push(":",String(d))),(d=this.l)&&(this.g&&d.charAt(0)!="/"&&a.push("/"),a.push(Ri(d,d.charAt(0)=="/"?n_:t_,!0))),(d=this.i.toString())&&a.push("?",d),(d=this.m)&&a.push("#",Ri(d,i_)),a.join("")};function fn(a){return new fr(a)}function Ls(a,u,d){a.j=d?Si(u,!0):u,a.j&&(a.j=a.j.replace(/:$/,""))}function xs(a,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);a.s=u}else a.s=null}function Yu(a,u,d){u instanceof Ci?(a.i=u,s_(a.i,a.h)):(d||(u=Ri(u,r_)),a.i=new Ci(u,a.h))}function Be(a,u,d){a.i.set(u,d)}function Fs(a){return Be(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Si(a,u){return a?u?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Ri(a,u,d){return typeof a=="string"?(a=encodeURI(a).replace(u,e_),d&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function e_(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Ju=/[#\/\?@]/g,t_=/[#\?:]/g,n_=/[#\?]/g,r_=/[#\?@]/g,i_=/#/g;function Ci(a,u){this.h=this.g=null,this.i=a||null,this.j=!!u}function On(a){a.g||(a.g=new Map,a.h=0,a.i&&Zy(a.i,function(u,d){a.add(decodeURIComponent(u.replace(/\+/g," ")),d)}))}n=Ci.prototype,n.add=function(a,u){On(this),this.i=null,a=Fr(this,a);var d=this.g.get(a);return d||this.g.set(a,d=[]),d.push(u),this.h+=1,this};function Zu(a,u){On(a),u=Fr(a,u),a.g.has(u)&&(a.i=null,a.h-=a.g.get(u).length,a.g.delete(u))}function eh(a,u){return On(a),u=Fr(a,u),a.g.has(u)}n.forEach=function(a,u){On(this),this.g.forEach(function(d,m){d.forEach(function(R){a.call(u,R,m,this)},this)},this)},n.na=function(){On(this);const a=Array.from(this.g.values()),u=Array.from(this.g.keys()),d=[];for(let m=0;m<u.length;m++){const R=a[m];for(let M=0;M<R.length;M++)d.push(u[m])}return d},n.V=function(a){On(this);let u=[];if(typeof a=="string")eh(this,a)&&(u=u.concat(this.g.get(Fr(this,a))));else{a=Array.from(this.g.values());for(let d=0;d<a.length;d++)u=u.concat(a[d])}return u},n.set=function(a,u){return On(this),this.i=null,a=Fr(this,a),eh(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[u]),this.h+=1,this},n.get=function(a,u){return a?(a=this.V(a),0<a.length?String(a[0]):u):u};function th(a,u,d){Zu(a,u),0<d.length&&(a.i=null,a.g.set(Fr(a,u),C(d)),a.h+=d.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],u=Array.from(this.g.keys());for(var d=0;d<u.length;d++){var m=u[d];const M=encodeURIComponent(String(m)),X=this.V(m);for(m=0;m<X.length;m++){var R=M;X[m]!==""&&(R+="="+encodeURIComponent(String(X[m]))),a.push(R)}}return this.i=a.join("&")};function Fr(a,u){return u=String(u),a.j&&(u=u.toLowerCase()),u}function s_(a,u){u&&!a.j&&(On(a),a.i=null,a.g.forEach(function(d,m){var R=m.toLowerCase();m!=R&&(Zu(this,m),th(this,R,d))},a)),a.j=u}function o_(a,u){const d=new Ii;if(l.Image){const m=new Image;m.onload=A(Vn,d,"TestLoadImage: loaded",!0,u,m),m.onerror=A(Vn,d,"TestLoadImage: error",!1,u,m),m.onabort=A(Vn,d,"TestLoadImage: abort",!1,u,m),m.ontimeout=A(Vn,d,"TestLoadImage: timeout",!1,u,m),l.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=a}else u(!1)}function a_(a,u){const d=new Ii,m=new AbortController,R=setTimeout(()=>{m.abort(),Vn(d,"TestPingServer: timeout",!1,u)},1e4);fetch(a,{signal:m.signal}).then(M=>{clearTimeout(R),M.ok?Vn(d,"TestPingServer: ok",!0,u):Vn(d,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(R),Vn(d,"TestPingServer: error",!1,u)})}function Vn(a,u,d,m,R){try{R&&(R.onload=null,R.onerror=null,R.onabort=null,R.ontimeout=null),m(d)}catch{}}function l_(){this.g=new Ps}function c_(a,u,d){const m=d||"";try{Xu(a,function(R,M){let X=R;h(R)&&(X=ot(R)),u.push(m+M+"="+encodeURIComponent(X))})}catch(R){throw u.push(m+"type="+encodeURIComponent("_badmap")),R}}function Gs(a){this.l=a.Ub||null,this.j=a.eb||!1}S(Gs,Ca),Gs.prototype.g=function(){return new Us(this.l,this.j)},Gs.prototype.i=function(a){return function(){return a}}({});function Us(a,u){he.call(this),this.D=a,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(Us,he),n=Us.prototype,n.open=function(a,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=u,this.readyState=1,Pi(this)},n.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const u={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(u.body=a),(this.D||l).fetch(new Request(this.A,u)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ki(this)),this.readyState=0},n.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Pi(this)),this.g&&(this.readyState=3,Pi(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;nh(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function nh(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}n.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var u=a.value?a.value:new Uint8Array(0);(u=this.v.decode(u,{stream:!a.done}))&&(this.response=this.responseText+=u)}a.done?ki(this):Pi(this),this.readyState==3&&nh(this)}},n.Ra=function(a){this.g&&(this.response=this.responseText=a,ki(this))},n.Qa=function(a){this.g&&(this.response=a,ki(this))},n.ga=function(){this.g&&ki(this)};function ki(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Pi(a)}n.setRequestHeader=function(a,u){this.u.append(a,u)},n.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],u=this.h.entries();for(var d=u.next();!d.done;)d=d.value,a.push(d[0]+": "+d[1]),d=u.next();return a.join(`\r
`)};function Pi(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Us.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function rh(a){let u="";return Q(a,function(d,m){u+=m,u+=":",u+=d,u+=`\r
`}),u}function Ga(a,u,d){e:{for(m in d){var m=!1;break e}m=!0}m||(d=rh(d),typeof a=="string"?d!=null&&encodeURIComponent(String(d)):Be(a,u,d))}function Qe(a){he.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(Qe,he);var u_=/^https?$/i,h_=["POST","PUT"];n=Qe.prototype,n.Ha=function(a){this.J=a},n.ea=function(a,u,d,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);u=u?u.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ma.g(),this.v=this.o?Mu(this.o):Mu(Ma),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(u,String(a),!0),this.B=!1}catch(M){ih(this,M);return}if(a=d||"",d=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var R in m)d.set(R,m[R]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(const M of m.keys())d.set(M,m.get(M));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(d.keys()).find(M=>M.toLowerCase()=="content-type"),R=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(h_,u,void 0))||m||R||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[M,X]of d)this.g.setRequestHeader(M,X);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ah(this),this.u=!0,this.g.send(a),this.u=!1}catch(M){ih(this,M)}};function ih(a,u){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=u,a.m=5,sh(a),Hs(a)}function sh(a){a.A||(a.A=!0,Te(a,"complete"),Te(a,"error"))}n.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,Te(this,"complete"),Te(this,"abort"),Hs(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Hs(this,!0)),Qe.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?oh(this):this.bb())},n.bb=function(){oh(this)};function oh(a){if(a.h&&typeof o<"u"&&(!a.v[1]||pn(a)!=4||a.Z()!=2)){if(a.u&&pn(a)==4)pt(a.Ea,0,a);else if(Te(a,"readystatechange"),pn(a)==4){a.h=!1;try{const X=a.Z();e:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break e;default:u=!1}var d;if(!(d=u)){var m;if(m=X===0){var R=String(a.D).match(Qu)[1]||null;!R&&l.self&&l.self.location&&(R=l.self.location.protocol.slice(0,-1)),m=!u_.test(R?R.toLowerCase():"")}d=m}if(d)Te(a,"complete"),Te(a,"success");else{a.m=6;try{var M=2<pn(a)?a.g.statusText:""}catch{M=""}a.l=M+" ["+a.Z()+"]",sh(a)}}finally{Hs(a)}}}}function Hs(a,u){if(a.g){ah(a);const d=a.g,m=a.v[0]?()=>{}:null;a.g=null,a.v=null,u||Te(a,"ready");try{d.onreadystatechange=m}catch{}}}function ah(a){a.I&&(l.clearTimeout(a.I),a.I=null)}n.isActive=function(){return!!this.g};function pn(a){return a.g?a.g.readyState:0}n.Z=function(){try{return 2<pn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(a){if(this.g){var u=this.g.responseText;return a&&u.indexOf(a)==0&&(u=u.substring(a.length)),Ht(u)}};function lh(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function d_(a){const u={};a=(a.g&&2<=pn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<a.length;m++){if(B(a[m]))continue;var d=I(a[m]);const R=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const M=u[R]||[];u[R]=M,M.push(d)}v(u,function(m){return m.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Mi(a,u,d){return d&&d.internalChannelParams&&d.internalChannelParams[a]||u}function ch(a){this.Aa=0,this.i=[],this.j=new Ii,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Mi("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Mi("baseRetryDelayMs",5e3,a),this.cb=Mi("retryDelaySeedMs",1e4,a),this.Wa=Mi("forwardChannelMaxRetries",2,a),this.wa=Mi("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new qu(a&&a.concurrentRequestLimit),this.Da=new l_,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=ch.prototype,n.la=8,n.G=1,n.connect=function(a,u,d,m){St(0),this.W=a,this.H=u||{},d&&m!==void 0&&(this.H.OSID=d,this.H.OAID=m),this.F=this.X,this.I=_h(this,null,this.W),$s(this)};function Ua(a){if(uh(a),a.G==3){var u=a.U++,d=fn(a.I);if(Be(d,"SID",a.K),Be(d,"RID",u),Be(d,"TYPE","terminate"),Ni(a,d),u=new Nn(a,a.j,u),u.L=2,u.v=Fs(fn(d)),d=!1,l.navigator&&l.navigator.sendBeacon)try{d=l.navigator.sendBeacon(u.v.toString(),"")}catch{}!d&&l.Image&&(new Image().src=u.v,d=!0),d||(u.g=vh(u.j,null),u.g.ea(u.v)),u.F=Date.now(),Vs(u)}yh(a)}function Bs(a){a.g&&(Ba(a),a.g.cancel(),a.g=null)}function uh(a){Bs(a),a.u&&(l.clearTimeout(a.u),a.u=null),qs(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function $s(a){if(!zu(a.h)&&!a.s){a.s=!0;var u=a.Ga;De||x(),be||(De(),be=!0),G.add(u,a),a.B=0}}function f_(a,u){return ju(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=u.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Ai(_(a.Ga,a,u),gh(a,a.B)),a.B++,!0)}n.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const R=new Nn(this,this.j,a);let M=this.o;if(this.S&&(M?(M=y(M),E(M,this.S)):M=this.S),this.m!==null||this.O||(R.H=M,M=null),this.P)e:{for(var u=0,d=0;d<this.i.length;d++){t:{var m=this.i[d];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(u+=m,4096<u){u=d;break e}if(u===4096||d===this.i.length-1){u=d+1;break e}}u=1e3}else u=1e3;u=dh(this,R,u),d=fn(this.I),Be(d,"RID",a),Be(d,"CVER",22),this.D&&Be(d,"X-HTTP-Session-Id",this.D),Ni(this,d),M&&(this.O?u="headers="+encodeURIComponent(String(rh(M)))+"&"+u:this.m&&Ga(d,this.m,M)),Fa(this.h,R),this.Ua&&Be(d,"TYPE","init"),this.P?(Be(d,"$req",u),Be(d,"SID","null"),R.T=!0,Oa(R,d,null)):Oa(R,d,u),this.G=2}}else this.G==3&&(a?hh(this,a):this.i.length==0||zu(this.h)||hh(this))};function hh(a,u){var d;u?d=u.l:d=a.U++;const m=fn(a.I);Be(m,"SID",a.K),Be(m,"RID",d),Be(m,"AID",a.T),Ni(a,m),a.m&&a.o&&Ga(m,a.m,a.o),d=new Nn(a,a.j,d,a.B+1),a.m===null&&(d.H=a.o),u&&(a.i=u.D.concat(a.i)),u=dh(a,d,1e3),d.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Fa(a.h,d),Oa(d,m,u)}function Ni(a,u){a.H&&Q(a.H,function(d,m){Be(u,m,d)}),a.l&&Xu({},function(d,m){Be(u,m,d)})}function dh(a,u,d){d=Math.min(a.i.length,d);var m=a.l?_(a.l.Na,a.l,a):null;e:{var R=a.i;let M=-1;for(;;){const X=["count="+d];M==-1?0<d?(M=R[0].g,X.push("ofs="+M)):M=0:X.push("ofs="+M);let Le=!0;for(let at=0;at<d;at++){let Pe=R[at].g;const gt=R[at].map;if(Pe-=M,0>Pe)M=Math.max(0,R[at].g-100),Le=!1;else try{c_(gt,X,"req"+Pe+"_")}catch{m&&m(gt)}}if(Le){m=X.join("&");break e}}}return a=a.i.splice(0,d),u.D=a,m}function fh(a){if(!a.g&&!a.u){a.Y=1;var u=a.Fa;De||x(),be||(De(),be=!0),G.add(u,a),a.v=0}}function Ha(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Ai(_(a.Fa,a),gh(a,a.v)),a.v++,!0)}n.Fa=function(){if(this.u=null,ph(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Ai(_(this.ab,this),a)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,St(10),Bs(this),ph(this))};function Ba(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function ph(a){a.g=new Nn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var u=fn(a.qa);Be(u,"RID","rpc"),Be(u,"SID",a.K),Be(u,"AID",a.T),Be(u,"CI",a.F?"0":"1"),!a.F&&a.ja&&Be(u,"TO",a.ja),Be(u,"TYPE","xmlhttp"),Ni(a,u),a.m&&a.o&&Ga(u,a.m,a.o),a.L&&(a.g.I=a.L);var d=a.g;a=a.ia,d.L=1,d.v=Fs(fn(u)),d.m=null,d.P=!0,Hu(d,a)}n.Za=function(){this.C!=null&&(this.C=null,Bs(this),Ha(this),St(19))};function qs(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function mh(a,u){var d=null;if(a.g==u){qs(a),Ba(a),a.g=null;var m=2}else if(xa(a.h,u))d=u.D,Wu(a.h,u),m=1;else return;if(a.G!=0){if(u.o)if(m==1){d=u.m?u.m.length:0,u=Date.now()-u.F;var R=a.B;m=Ms(),Te(m,new xu(m,d)),$s(a)}else fh(a);else if(R=u.s,R==3||R==0&&0<u.X||!(m==1&&f_(a,u)||m==2&&Ha(a)))switch(d&&0<d.length&&(u=a.h,u.i=u.i.concat(d)),R){case 1:pr(a,5);break;case 4:pr(a,10);break;case 3:pr(a,6);break;default:pr(a,2)}}}function gh(a,u){let d=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(d*=2),d*u}function pr(a,u){if(a.j.info("Error code "+u),u==2){var d=_(a.fb,a),m=a.Xa;const R=!m;m=new fr(m||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Ls(m,"https"),Fs(m),R?o_(m.toString(),d):a_(m.toString(),d)}else St(2);a.G=0,a.l&&a.l.sa(u),yh(a),uh(a)}n.fb=function(a){a?(this.j.info("Successfully pinged google.com"),St(2)):(this.j.info("Failed to ping google.com"),St(1))};function yh(a){if(a.G=0,a.ka=[],a.l){const u=Ku(a.h);(u.length!=0||a.i.length!=0)&&(N(a.ka,u),N(a.ka,a.i),a.h.i.length=0,C(a.i),a.i.length=0),a.l.ra()}}function _h(a,u,d){var m=d instanceof fr?fn(d):new fr(d);if(m.g!="")u&&(m.g=u+"."+m.g),xs(m,m.s);else{var R=l.location;m=R.protocol,u=u?u+"."+R.hostname:R.hostname,R=+R.port;var M=new fr(null);m&&Ls(M,m),u&&(M.g=u),R&&xs(M,R),d&&(M.l=d),m=M}return d=a.D,u=a.ya,d&&u&&Be(m,d,u),Be(m,"VER",a.la),Ni(a,m),m}function vh(a,u,d){if(u&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return u=a.Ca&&!a.pa?new Qe(new Gs({eb:d})):new Qe(a.pa),u.Ha(a.J),u}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function wh(){}n=wh.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function zs(){}zs.prototype.g=function(a,u){return new Ot(a,u)};function Ot(a,u){he.call(this),this.g=new ch(u),this.l=a,this.h=u&&u.messageUrlParams||null,a=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(a?a["X-WebChannel-Content-Type"]=u.messageContentType:a={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.va&&(a?a["X-WebChannel-Client-Profile"]=u.va:a={"X-WebChannel-Client-Profile":u.va}),this.g.S=a,(a=u&&u.Sb)&&!B(a)&&(this.g.m=a),this.v=u&&u.supportsCrossDomainXhr||!1,this.u=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!B(u)&&(this.g.D=u,a=this.h,a!==null&&u in a&&(a=this.h,u in a&&delete a[u])),this.j=new Gr(this)}S(Ot,he),Ot.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ot.prototype.close=function(){Ua(this.g)},Ot.prototype.o=function(a){var u=this.g;if(typeof a=="string"){var d={};d.__data__=a,a=d}else this.u&&(d={},d.__data__=ot(a),a=d);u.i.push(new Qy(u.Ya++,a)),u.G==3&&$s(u)},Ot.prototype.N=function(){this.g.l=null,delete this.j,Ua(this.g),delete this.g,Ot.aa.N.call(this)};function Eh(a){ka.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var u=a.__sm__;if(u){e:{for(const d in u){a=d;break e}a=void 0}(this.i=a)&&(a=this.i,u=u!==null&&a in u?u[a]:void 0),this.data=u}else this.data=a}S(Eh,ka);function Th(){Pa.call(this),this.status=1}S(Th,Pa);function Gr(a){this.g=a}S(Gr,wh),Gr.prototype.ua=function(){Te(this.g,"a")},Gr.prototype.ta=function(a){Te(this.g,new Eh(a))},Gr.prototype.sa=function(a){Te(this.g,new Th)},Gr.prototype.ra=function(){Te(this.g,"b")},zs.prototype.createWebChannel=zs.prototype.g,Ot.prototype.send=Ot.prototype.o,Ot.prototype.open=Ot.prototype.m,Ot.prototype.close=Ot.prototype.close,pg=function(){return new zs},fg=function(){return Ms()},dg=hr,nc={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ns.NO_ERROR=0,Ns.TIMEOUT=8,Ns.HTTP_ERROR=6,po=Ns,Fu.COMPLETE="complete",hg=Fu,Nu.EventType=Ti,Ti.OPEN="a",Ti.CLOSE="b",Ti.ERROR="c",Ti.MESSAGE="d",he.prototype.listen=he.prototype.K,Gi=Nu,Qe.prototype.listenOnce=Qe.prototype.L,Qe.prototype.getLastError=Qe.prototype.Ka,Qe.prototype.getLastErrorCode=Qe.prototype.Ba,Qe.prototype.getStatus=Qe.prototype.Z,Qe.prototype.getResponseJson=Qe.prototype.Oa,Qe.prototype.getResponseText=Qe.prototype.oa,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Ha,ug=Qe}).apply(typeof Js<"u"?Js:typeof self<"u"?self:typeof window<"u"?window:{});const Ld="@firebase/firestore",xd="4.7.9";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}vt.UNAUTHENTICATED=new vt(null),vt.GOOGLE_CREDENTIALS=new vt("google-credentials-uid"),vt.FIRST_PARTY=new vt("first-party-uid"),vt.MOCK_USER=new vt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gi="11.4.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kr=new Vc("@firebase/firestore");function $r(){return kr.logLevel}function ee(n,...e){if(kr.logLevel<=Ae.DEBUG){const t=e.map(jc);kr.debug(`Firestore (${gi}): ${n}`,...t)}}function Rn(n,...e){if(kr.logLevel<=Ae.ERROR){const t=e.map(jc);kr.error(`Firestore (${gi}): ${n}`,...t)}}function ai(n,...e){if(kr.logLevel<=Ae.WARN){const t=e.map(jc);kr.warn(`Firestore (${gi}): ${n}`,...t)}}function jc(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function me(n="Unexpected state"){const e=`FIRESTORE (${gi}) INTERNAL ASSERTION FAILED: `+n;throw Rn(e),new Error(e)}function Oe(n,e){n||me()}function ve(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class te extends Pn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class KA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(vt.UNAUTHENTICATED))}shutdown(){}}class XA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class QA{constructor(e){this.t=e,this.currentUser=vt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Oe(this.o===void 0);let r=this.i;const i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve();let s=new Ir;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ir,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},l=c=>{ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ir)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Oe(typeof r.accessToken=="string"),new mg(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Oe(e===null||typeof e=="string"),new vt(e)}}class YA{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=vt.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class JA{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new YA(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(vt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Fd{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ZA{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,Wt(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){Oe(this.o===void 0);const r=s=>{s.error!=null&&ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,ee("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new Fd(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Oe(typeof t.token=="string"),this.R=t.token,new Fd(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eI(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=eI(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}}function Se(n,e){return n<e?-1:n>e?1:0}function li(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gd=-62135596800,Ud=1e6;class nt{static now(){return nt.fromMillis(Date.now())}static fromDate(e){return nt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Ud);return new nt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new te(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new te(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Gd)throw new te(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new te(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ud}_compareTo(e){return this.seconds===e.seconds?Se(this.nanoseconds,e.nanoseconds):Se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Gd;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{static fromTimestamp(e){return new ye(e)}static min(){return new ye(new nt(0,0))}static max(){return new ye(new nt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hd="__name__";class nn{constructor(e,t,r){t===void 0?t=0:t>e.length&&me(),r===void 0?r=e.length-t:r>e.length-t&&me(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return nn.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof nn?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=nn.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return Math.sign(e.length-t.length)}static compareSegments(e,t){const r=nn.isNumericId(e),i=nn.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?nn.extractNumericId(e).compare(nn.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Yn.fromString(e.substring(4,e.length-2))}}class $e extends nn{construct(e,t,r){return new $e(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new te(V.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new $e(t)}static emptyPath(){return new $e([])}}const tI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ht extends nn{construct(e,t,r){return new ht(e,t,r)}static isValidIdentifier(e){return tI.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ht.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Hd}static keyField(){return new ht([Hd])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(r.length===0)throw new te(V.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new te(V.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new te(V.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(r+=l,i++):(s(),i++)}if(s(),o)throw new te(V.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ht(t)}static emptyPath(){return new ht([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.path=e}static fromPath(e){return new ce($e.fromString(e))}static fromName(e){return new ce($e.fromString(e).popFirst(5))}static empty(){return new ce($e.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&$e.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return $e.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ce(new $e(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const us=-1;function nI(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ye.fromTimestamp(r===1e9?new nt(t+1,0):new nt(t,r));return new nr(i,ce.empty(),e)}function rI(n){return new nr(n.readTime,n.key,us)}class nr{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new nr(ye.min(),ce.empty(),us)}static max(){return new nr(ye.max(),ce.empty(),us)}}function iI(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ce.comparator(n.documentKey,e.documentKey),t!==0?t:Se(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class oI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yi(n){if(n.code!==V.FAILED_PRECONDITION||n.message!==sI)throw n;ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&me(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new O((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof O?t:O.resolve(t)}catch(t){return O.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):O.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):O.reject(t)}static resolve(e){return new O((t,r)=>{t(e)})}static reject(e){return new O((t,r)=>{r(e)})}static waitFor(e){return new O((t,r)=>{let i=0,s=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=O.resolve(!1);for(const r of e)t=t.next(i=>i?O.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new O((r,i)=>{const s=e.length,o=new Array(s);let l=0;for(let c=0;c<s;c++){const h=c;t(e[h]).next(f=>{o[h]=f,++l,l===s&&r(o)},f=>i(f))}})}static doWhile(e,t){return new O((r,i)=>{const s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}}function aI(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function _i(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.oe(r),this._e=r=>t.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}ga.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wc=-1;function ya(n){return n==null}function Go(n){return n===0&&1/n==-1/0}function lI(n){return typeof n=="number"&&Number.isInteger(n)&&!Go(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yg="";function cI(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Bd(e)),e=uI(n.get(t),e);return Bd(e)}function uI(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="";break;case yg:t+="";break;default:t+=s}}return t}function Bd(n){return n+yg+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $d(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Mr(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function _g(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e,t){this.comparator=e,this.root=t||lt.EMPTY}insert(e,t){return new Ke(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,lt.BLACK,null,null))}remove(e){return new Ke(this.comparator,this.root.remove(e,this.comparator).copy(null,null,lt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zs(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zs(this.root,e,this.comparator,!0)}}class Zs{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class lt{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??lt.RED,this.left=i??lt.EMPTY,this.right=s??lt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new lt(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return lt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return lt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,lt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,lt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw me();const e=this.left.check();if(e!==this.right.check())throw me();return e+(this.isRed()?0:1)}}lt.EMPTY=null,lt.RED=!0,lt.BLACK=!1;lt.EMPTY=new class{constructor(){this.size=0}get key(){throw me()}get value(){throw me()}get color(){throw me()}get left(){throw me()}get right(){throw me()}copy(e,t,r,i,s){return this}insert(e,t,r){return new lt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e){this.comparator=e,this.data=new Ke(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new qd(this.data.getIterator())}getIteratorFrom(e){return new qd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof rt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new rt(this.comparator);return t.data=e,t}}class qd{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.fields=e,e.sort(ht.comparator)}static empty(){return new Kt([])}unionWith(e){let t=new rt(ht.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Kt(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return li(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new vg("Invalid base64 string: "+s):s}}(e);return new ft(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new ft(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ft.EMPTY_BYTE_STRING=new ft("");const hI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function rr(n){if(Oe(!!n),typeof n=="string"){let e=0;const t=hI.exec(n);if(Oe(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ze(n.seconds),nanos:Ze(n.nanos)}}function Ze(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ir(n){return typeof n=="string"?ft.fromBase64String(n):ft.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wg="server_timestamp",Eg="__type__",Tg="__previous_value__",bg="__local_write_time__";function Kc(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[Eg])===null||t===void 0?void 0:t.stringValue)===wg}function _a(n){const e=n.mapValue.fields[Tg];return Kc(e)?_a(e):e}function hs(n){const e=rr(n.mapValue.fields[bg].timestampValue);return new nt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(e,t,r,i,s,o,l,c,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=h}}const Uo="(default)";class ds{constructor(e,t){this.projectId=e,this.database=t||Uo}static empty(){return new ds("","")}get isDefaultDatabase(){return this.database===Uo}isEqual(e){return e instanceof ds&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ag="__type__",fI="__max__",eo={mapValue:{}},Ig="__vector__",Ho="value";function sr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Kc(n)?4:mI(n)?9007199254740991:pI(n)?10:11:me()}function hn(n,e){if(n===e)return!0;const t=sr(n);if(t!==sr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return hs(n).isEqual(hs(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=rr(i.timestampValue),l=rr(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return ir(i.bytesValue).isEqual(ir(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return Ze(i.geoPointValue.latitude)===Ze(s.geoPointValue.latitude)&&Ze(i.geoPointValue.longitude)===Ze(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ze(i.integerValue)===Ze(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Ze(i.doubleValue),l=Ze(s.doubleValue);return o===l?Go(o)===Go(l):isNaN(o)&&isNaN(l)}return!1}(n,e);case 9:return li(n.arrayValue.values||[],e.arrayValue.values||[],hn);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},l=s.mapValue.fields||{};if($d(o)!==$d(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!hn(o[c],l[c])))return!1;return!0}(n,e);default:return me()}}function fs(n,e){return(n.values||[]).find(t=>hn(t,e))!==void 0}function ci(n,e){if(n===e)return 0;const t=sr(n),r=sr(e);if(t!==r)return Se(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Se(n.booleanValue,e.booleanValue);case 2:return function(s,o){const l=Ze(s.integerValue||s.doubleValue),c=Ze(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(n,e);case 3:return zd(n.timestampValue,e.timestampValue);case 4:return zd(hs(n),hs(e));case 5:return Se(n.stringValue,e.stringValue);case 6:return function(s,o){const l=ir(s),c=ir(o);return l.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const l=s.split("/"),c=o.split("/");for(let h=0;h<l.length&&h<c.length;h++){const f=Se(l[h],c[h]);if(f!==0)return f}return Se(l.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const l=Se(Ze(s.latitude),Ze(o.latitude));return l!==0?l:Se(Ze(s.longitude),Ze(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return jd(n.arrayValue,e.arrayValue);case 10:return function(s,o){var l,c,h,f;const p=s.fields||{},_=o.fields||{},A=(l=p[Ho])===null||l===void 0?void 0:l.arrayValue,S=(c=_[Ho])===null||c===void 0?void 0:c.arrayValue,C=Se(((h=A==null?void 0:A.values)===null||h===void 0?void 0:h.length)||0,((f=S==null?void 0:S.values)===null||f===void 0?void 0:f.length)||0);return C!==0?C:jd(A,S)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===eo.mapValue&&o===eo.mapValue)return 0;if(s===eo.mapValue)return 1;if(o===eo.mapValue)return-1;const l=s.fields||{},c=Object.keys(l),h=o.fields||{},f=Object.keys(h);c.sort(),f.sort();for(let p=0;p<c.length&&p<f.length;++p){const _=Se(c[p],f[p]);if(_!==0)return _;const A=ci(l[c[p]],h[f[p]]);if(A!==0)return A}return Se(c.length,f.length)}(n.mapValue,e.mapValue);default:throw me()}}function zd(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Se(n,e);const t=rr(n),r=rr(e),i=Se(t.seconds,r.seconds);return i!==0?i:Se(t.nanos,r.nanos)}function jd(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=ci(t[i],r[i]);if(s)return s}return Se(t.length,r.length)}function ui(n){return rc(n)}function rc(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=rr(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return ir(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return ce.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=rc(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${rc(t.fields[o])}`;return i+"}"}(n.mapValue):me()}function mo(n){switch(sr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=_a(n);return e?16+mo(e):16;case 5:return 2*n.stringValue.length;case 6:return ir(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+mo(s),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Mr(r.fields,(s,o)=>{i+=s.length+mo(o)}),i}(n.mapValue);default:throw me()}}function Wd(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function ic(n){return!!n&&"integerValue"in n}function Xc(n){return!!n&&"arrayValue"in n}function Kd(n){return!!n&&"nullValue"in n}function Xd(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function go(n){return!!n&&"mapValue"in n}function pI(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[Ag])===null||t===void 0?void 0:t.stringValue)===Ig}function Qi(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Mr(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Qi(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Qi(n.arrayValue.values[t]);return e}return Object.assign({},n)}function mI(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===fI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.value=e}static empty(){return new $t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!go(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Qi(t)}setAll(e){let t=ht.emptyPath(),r={},i=[];e.forEach((o,l)=>{if(!t.isImmediateParentOf(l)){const c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=l.popLast()}o?r[l.lastSegment()]=Qi(o):i.push(l.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());go(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return hn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];go(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Mr(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new $t(Qi(this.value))}}function Dg(n){const e=[];return Mr(n.fields,(t,r)=>{const i=new ht([t]);if(go(r)){const s=Dg(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Kt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e,t,r,i,s,o,l){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Tt(e,0,ye.min(),ye.min(),ye.min(),$t.empty(),0)}static newFoundDocument(e,t,r,i){return new Tt(e,1,t,ye.min(),r,i,0)}static newNoDocument(e,t){return new Tt(e,2,t,ye.min(),ye.min(),$t.empty(),0)}static newUnknownDocument(e,t){return new Tt(e,3,t,ye.min(),ye.min(),$t.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ye.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=$t.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=$t.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ye.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Tt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e,t){this.position=e,this.inclusive=t}}function Qd(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(s.field.isKeyField()?r=ce.comparator(ce.fromName(o.referenceValue),t.key):r=ci(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Yd(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!hn(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e,t="asc"){this.field=e,this.dir=t}}function gI(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{}class tt extends Sg{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new _I(e,t,r):t==="array-contains"?new EI(e,r):t==="in"?new TI(e,r):t==="not-in"?new bI(e,r):t==="array-contains-any"?new AI(e,r):new tt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new vI(e,r):new wI(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(ci(t,this.value)):t!==null&&sr(this.value)===sr(t)&&this.matchesComparison(ci(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return me()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Jt extends Sg{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new Jt(e,t)}matches(e){return Rg(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function Rg(n){return n.op==="and"}function Cg(n){return yI(n)&&Rg(n)}function yI(n){for(const e of n.filters)if(e instanceof Jt)return!1;return!0}function sc(n){if(n instanceof tt)return n.field.canonicalString()+n.op.toString()+ui(n.value);if(Cg(n))return n.filters.map(e=>sc(e)).join(",");{const e=n.filters.map(t=>sc(t)).join(",");return`${n.op}(${e})`}}function kg(n,e){return n instanceof tt?function(r,i){return i instanceof tt&&r.op===i.op&&r.field.isEqual(i.field)&&hn(r.value,i.value)}(n,e):n instanceof Jt?function(r,i){return i instanceof Jt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,l)=>s&&kg(o,i.filters[l]),!0):!1}(n,e):void me()}function Pg(n){return n instanceof tt?function(t){return`${t.field.canonicalString()} ${t.op} ${ui(t.value)}`}(n):n instanceof Jt?function(t){return t.op.toString()+" {"+t.getFilters().map(Pg).join(" ,")+"}"}(n):"Filter"}class _I extends tt{constructor(e,t,r){super(e,t,r),this.key=ce.fromName(r.referenceValue)}matches(e){const t=ce.comparator(e.key,this.key);return this.matchesComparison(t)}}class vI extends tt{constructor(e,t){super(e,"in",t),this.keys=Mg("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class wI extends tt{constructor(e,t){super(e,"not-in",t),this.keys=Mg("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Mg(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>ce.fromName(r.referenceValue))}class EI extends tt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Xc(t)&&fs(t.arrayValue,this.value)}}class TI extends tt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&fs(this.value.arrayValue,t)}}class bI extends tt{constructor(e,t){super(e,"not-in",t)}matches(e){if(fs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!fs(this.value.arrayValue,t)}}class AI extends tt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Xc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>fs(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(e,t=null,r=[],i=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=l,this.le=null}}function Jd(n,e=null,t=[],r=[],i=null,s=null,o=null){return new II(n,e,t,r,i,s,o)}function Qc(n){const e=ve(n);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>sc(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),ya(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ui(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ui(r)).join(",")),e.le=t}return e.le}function Yc(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!gI(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!kg(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Yd(n.startAt,e.startAt)&&Yd(n.endAt,e.endAt)}function oc(n){return ce.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e,t=null,r=[],i=[],s=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=c,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function DI(n,e,t,r,i,s,o,l){return new vi(n,e,t,r,i,s,o,l)}function Jc(n){return new vi(n)}function Zd(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Ng(n){return n.collectionGroup!==null}function Yi(n){const e=ve(n);if(e.he===null){e.he=[];const t=new Set;for(const s of e.explicitOrderBy)e.he.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new rt(ht.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.he.push(new ps(s,r))}),t.has(ht.keyField().canonicalString())||e.he.push(new ps(ht.keyField(),r))}return e.he}function ln(n){const e=ve(n);return e.Pe||(e.Pe=SI(e,Yi(n))),e.Pe}function SI(n,e){if(n.limitType==="F")return Jd(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new ps(i.field,s)});const t=n.endAt?new Bo(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Bo(n.startAt.position,n.startAt.inclusive):null;return Jd(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function ac(n,e){const t=n.filters.concat([e]);return new vi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function lc(n,e,t){return new vi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function va(n,e){return Yc(ln(n),ln(e))&&n.limitType===e.limitType}function Og(n){return`${Qc(ln(n))}|lt:${n.limitType}`}function qr(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>Pg(i)).join(", ")}]`),ya(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>ui(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>ui(i)).join(",")),`Target(${r})`}(ln(n))}; limitType=${n.limitType})`}function wa(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ce.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of Yi(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,l,c){const h=Qd(o,l,c);return o.inclusive?h<=0:h<0}(r.startAt,Yi(r),i)||r.endAt&&!function(o,l,c){const h=Qd(o,l,c);return o.inclusive?h>=0:h>0}(r.endAt,Yi(r),i))}(n,e)}function RI(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Vg(n){return(e,t)=>{let r=!1;for(const i of Yi(n)){const s=CI(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function CI(n,e,t){const r=n.field.isKeyField()?ce.comparator(e.key,t.key):function(s,o,l){const c=o.data.field(s),h=l.data.field(s);return c!==null&&h!==null?ci(c,h):me()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return me()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Mr(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return _g(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kI=new Ke(ce.comparator);function Cn(){return kI}const Lg=new Ke(ce.comparator);function Ui(...n){let e=Lg;for(const t of n)e=e.insert(t.key,t);return e}function xg(n){let e=Lg;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function br(){return Ji()}function Fg(){return Ji()}function Ji(){return new Nr(n=>n.toString(),(n,e)=>n.isEqual(e))}const PI=new Ke(ce.comparator),MI=new rt(ce.comparator);function Ie(...n){let e=MI;for(const t of n)e=e.add(t);return e}const NI=new rt(Se);function OI(){return NI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zc(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Go(e)?"-0":e}}function Gg(n){return{integerValue:""+n}}function VI(n,e){return lI(e)?Gg(e):Zc(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(){this._=void 0}}function LI(n,e,t){return n instanceof ms?function(i,s){const o={fields:{[Eg]:{stringValue:wg},[bg]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Kc(s)&&(s=_a(s)),s&&(o.fields[Tg]=s),{mapValue:o}}(t,e):n instanceof gs?Hg(n,e):n instanceof ys?Bg(n,e):function(i,s){const o=Ug(i,s),l=ef(o)+ef(i.Ie);return ic(o)&&ic(i.Ie)?Gg(l):Zc(i.serializer,l)}(n,e)}function xI(n,e,t){return n instanceof gs?Hg(n,e):n instanceof ys?Bg(n,e):t}function Ug(n,e){return n instanceof $o?function(r){return ic(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class ms extends Ea{}class gs extends Ea{constructor(e){super(),this.elements=e}}function Hg(n,e){const t=$g(e);for(const r of n.elements)t.some(i=>hn(i,r))||t.push(r);return{arrayValue:{values:t}}}class ys extends Ea{constructor(e){super(),this.elements=e}}function Bg(n,e){let t=$g(e);for(const r of n.elements)t=t.filter(i=>!hn(i,r));return{arrayValue:{values:t}}}class $o extends Ea{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function ef(n){return Ze(n.integerValue||n.doubleValue)}function $g(n){return Xc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(e,t){this.field=e,this.transform=t}}function GI(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof gs&&i instanceof gs||r instanceof ys&&i instanceof ys?li(r.elements,i.elements,hn):r instanceof $o&&i instanceof $o?hn(r.Ie,i.Ie):r instanceof ms&&i instanceof ms}(n.transform,e.transform)}class UI{constructor(e,t){this.version=e,this.transformResults=t}}class bn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new bn}static exists(e){return new bn(void 0,e)}static updateTime(e){return new bn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yo(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Ta{}function qg(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new jg(n.key,bn.none()):new Ss(n.key,n.data,bn.none());{const t=n.data,r=$t.empty();let i=new rt(ht.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Or(n.key,r,new Kt(i.toArray()),bn.none())}}function HI(n,e,t){n instanceof Ss?function(i,s,o){const l=i.value.clone(),c=nf(i.fieldTransforms,s,o.transformResults);l.setAll(c),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Or?function(i,s,o){if(!yo(i.precondition,s))return void s.convertToUnknownDocument(o.version);const l=nf(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(zg(i)),c.setAll(l),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function Zi(n,e,t,r){return n instanceof Ss?function(s,o,l,c){if(!yo(s.precondition,o))return l;const h=s.value.clone(),f=rf(s.fieldTransforms,c,o);return h.setAll(f),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(n,e,t,r):n instanceof Or?function(s,o,l,c){if(!yo(s.precondition,o))return l;const h=rf(s.fieldTransforms,c,o),f=o.data;return f.setAll(zg(s)),f.setAll(h),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(s,o,l){return yo(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(n,e,t)}function BI(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=Ug(r.transform,i||null);s!=null&&(t===null&&(t=$t.empty()),t.set(r.field,s))}return t||null}function tf(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&li(r,i,(s,o)=>GI(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Ss extends Ta{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Or extends Ta{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function zg(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function nf(n,e,t){const r=new Map;Oe(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,l=e.data.field(s.field);r.set(s.field,xI(o,l,t[i]))}return r}function rf(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,LI(s,o,e))}return r}class jg extends Ta{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $I extends Ta{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&HI(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Zi(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Zi(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Fg();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=t.has(i.key)?null:l;const c=qg(o,l);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(ye.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ie())}isEqual(e){return this.batchId===e.batchId&&li(this.mutations,e.mutations,(t,r)=>tf(t,r))&&li(this.baseMutations,e.baseMutations,(t,r)=>tf(t,r))}}class eu{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Oe(e.mutations.length===r.length);let i=function(){return PI}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new eu(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var et,ke;function WI(n){switch(n){case V.OK:return me();case V.CANCELLED:case V.UNKNOWN:case V.DEADLINE_EXCEEDED:case V.RESOURCE_EXHAUSTED:case V.INTERNAL:case V.UNAVAILABLE:case V.UNAUTHENTICATED:return!1;case V.INVALID_ARGUMENT:case V.NOT_FOUND:case V.ALREADY_EXISTS:case V.PERMISSION_DENIED:case V.FAILED_PRECONDITION:case V.ABORTED:case V.OUT_OF_RANGE:case V.UNIMPLEMENTED:case V.DATA_LOSS:return!0;default:return me()}}function Wg(n){if(n===void 0)return Rn("GRPC error has no .code"),V.UNKNOWN;switch(n){case et.OK:return V.OK;case et.CANCELLED:return V.CANCELLED;case et.UNKNOWN:return V.UNKNOWN;case et.DEADLINE_EXCEEDED:return V.DEADLINE_EXCEEDED;case et.RESOURCE_EXHAUSTED:return V.RESOURCE_EXHAUSTED;case et.INTERNAL:return V.INTERNAL;case et.UNAVAILABLE:return V.UNAVAILABLE;case et.UNAUTHENTICATED:return V.UNAUTHENTICATED;case et.INVALID_ARGUMENT:return V.INVALID_ARGUMENT;case et.NOT_FOUND:return V.NOT_FOUND;case et.ALREADY_EXISTS:return V.ALREADY_EXISTS;case et.PERMISSION_DENIED:return V.PERMISSION_DENIED;case et.FAILED_PRECONDITION:return V.FAILED_PRECONDITION;case et.ABORTED:return V.ABORTED;case et.OUT_OF_RANGE:return V.OUT_OF_RANGE;case et.UNIMPLEMENTED:return V.UNIMPLEMENTED;case et.DATA_LOSS:return V.DATA_LOSS;default:return me()}}(ke=et||(et={}))[ke.OK=0]="OK",ke[ke.CANCELLED=1]="CANCELLED",ke[ke.UNKNOWN=2]="UNKNOWN",ke[ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ke[ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ke[ke.NOT_FOUND=5]="NOT_FOUND",ke[ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",ke[ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",ke[ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",ke[ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ke[ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ke[ke.ABORTED=10]="ABORTED",ke[ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",ke[ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",ke[ke.INTERNAL=13]="INTERNAL",ke[ke.UNAVAILABLE=14]="UNAVAILABLE",ke[ke.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XI=new Yn([4294967295,4294967295],0);function sf(n){const e=KI().encode(n),t=new cg;return t.update(e),new Uint8Array(t.digest())}function of(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Yn([t,r],0),new Yn([i,s],0)]}class tu{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Hi(`Invalid padding: ${t}`);if(r<0)throw new Hi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Hi(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Hi(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=Yn.fromNumber(this.Ee)}Ae(e,t,r){let i=e.add(t.multiply(Yn.fromNumber(r)));return i.compare(XI)===1&&(i=new Yn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=sf(e),[r,i]=of(t);for(let s=0;s<this.hashCount;s++){const o=this.Ae(r,i,s);if(!this.Re(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new tu(s,i,t);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ee===0)return;const t=sf(e),[r,i]=of(t);for(let s=0;s<this.hashCount;s++){const o=this.Ae(r,i,s);this.Ve(o)}}Ve(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Hi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Rs.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new ba(ye.min(),i,new Ke(Se),Cn(),Ie())}}class Rs{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Rs(r,t,Ie(),Ie(),Ie())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e,t,r,i){this.me=e,this.removedTargetIds=t,this.key=r,this.fe=i}}class Kg{constructor(e,t){this.targetId=e,this.ge=t}}class Xg{constructor(e,t,r=ft.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class af{constructor(){this.pe=0,this.ye=lf(),this.we=ft.EMPTY_BYTE_STRING,this.be=!1,this.Se=!0}get current(){return this.be}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.we=e)}Fe(){let e=Ie(),t=Ie(),r=Ie();return this.ye.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:me()}}),new Rs(this.we,this.be,e,t,r)}Me(){this.Se=!1,this.ye=lf()}xe(e,t){this.Se=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.Se=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,Oe(this.pe>=0)}Le(){this.Se=!0,this.be=!0}}class QI{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Cn(),this.$e=to(),this.Ke=to(),this.Ue=new Ke(Se)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const r=this.He(t);switch(e.state){case 0:this.Je(t)&&r.Ce(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(e.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(t);break;case 3:this.Je(t)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),r.Ce(e.resumeToken));break;default:me()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((r,i)=>{this.Je(i)&&t(i)})}Ze(e){const t=e.targetId,r=e.ge.count,i=this.Xe(t);if(i){const s=i.target;if(oc(s))if(r===0){const o=new ce(s.path);this.ze(t,o,Tt.newNoDocument(o,ye.min()))}else Oe(r===1);else{const o=this.et(t);if(o!==r){const l=this.tt(e),c=l?this.nt(l,e,o):1;if(c!==0){this.Ye(t);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(t,h)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,l;try{o=ir(r).toUint8Array()}catch(c){if(c instanceof vg)return ai("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new tu(o,i,s)}catch(c){return ai(c instanceof Hi?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.Ee===0?null:l}nt(e,t,r){return t.ge.count===r-this.st(e,t.targetId)?0:2}st(e,t){const r=this.ke.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.ke.it(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.ze(t,s,null),i++)}),i}ot(e){const t=new Map;this.qe.forEach((s,o)=>{const l=this.Xe(o);if(l){if(s.current&&oc(l.target)){const c=new ce(l.target.path);this._t(c).has(o)||this.ut(o,c)||this.ze(o,c,Tt.newNoDocument(c,e))}s.ve&&(t.set(o,s.Fe()),s.Me())}});let r=Ie();this.Ke.forEach((s,o)=>{let l=!0;o.forEachWhile(c=>{const h=this.Xe(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.Qe.forEach((s,o)=>o.setReadTime(e));const i=new ba(e,t,this.Ue,this.Qe,r);return this.Qe=Cn(),this.$e=to(),this.Ke=to(),this.Ue=new Ke(Se),i}Ge(e,t){if(!this.Je(e))return;const r=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,r),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ke=this.Ke.insert(t.key,this.ct(t.key).add(e))}ze(e,t,r){if(!this.Je(e))return;const i=this.He(e);this.ut(e,t)?i.xe(t,1):i.Oe(t),this.Ke=this.Ke.insert(t,this.ct(t).delete(e)),this.Ke=this.Ke.insert(t,this.ct(t).add(e)),r&&(this.Qe=this.Qe.insert(t,r))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new af,this.qe.set(e,t)),t}ct(e){let t=this.Ke.get(e);return t||(t=new rt(Se),this.Ke=this.Ke.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new rt(Se),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||ee("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new af),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function to(){return new Ke(ce.comparator)}function lf(){return new Ke(ce.comparator)}const YI={asc:"ASCENDING",desc:"DESCENDING"},JI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ZI={and:"AND",or:"OR"};class eD{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function cc(n,e){return n.useProto3Json||ya(e)?e:{value:e}}function qo(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Qg(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function tD(n,e){return qo(n,e.toTimestamp())}function cn(n){return Oe(!!n),ye.fromTimestamp(function(t){const r=rr(t);return new nt(r.seconds,r.nanos)}(n))}function nu(n,e){return uc(n,e).canonicalString()}function uc(n,e){const t=function(i){return new $e(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function Yg(n){const e=$e.fromString(n);return Oe(ny(e)),e}function hc(n,e){return nu(n.databaseId,e.path)}function ll(n,e){const t=Yg(e);if(t.get(1)!==n.databaseId.projectId)throw new te(V.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new te(V.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ce(Zg(t))}function Jg(n,e){return nu(n.databaseId,e)}function nD(n){const e=Yg(n);return e.length===4?$e.emptyPath():Zg(e)}function dc(n){return new $e(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Zg(n){return Oe(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function cf(n,e,t){return{name:hc(n,e),fields:t.value.mapValue.fields}}function rD(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:me()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(h,f){return h.useProto3Json?(Oe(f===void 0||typeof f=="string"),ft.fromBase64String(f||"")):(Oe(f===void 0||f instanceof Buffer||f instanceof Uint8Array),ft.fromUint8Array(f||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(h){const f=h.code===void 0?V.UNKNOWN:Wg(h.code);return new te(f,h.message||"")}(o);t=new Xg(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=ll(n,r.document.name),s=cn(r.document.updateTime),o=r.document.createTime?cn(r.document.createTime):ye.min(),l=new $t({mapValue:{fields:r.document.fields}}),c=Tt.newFoundDocument(i,s,o,l),h=r.targetIds||[],f=r.removedTargetIds||[];t=new _o(h,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=ll(n,r.document),s=r.readTime?cn(r.readTime):ye.min(),o=Tt.newNoDocument(i,s),l=r.removedTargetIds||[];t=new _o([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=ll(n,r.document),s=r.removedTargetIds||[];t=new _o([],s,i,null)}else{if(!("filter"in e))return me();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new jI(i,s),l=r.targetId;t=new Kg(l,o)}}return t}function iD(n,e){let t;if(e instanceof Ss)t={update:cf(n,e.key,e.value)};else if(e instanceof jg)t={delete:hc(n,e.key)};else if(e instanceof Or)t={update:cf(n,e.key,e.data),updateMask:fD(e.fieldMask)};else{if(!(e instanceof $I))return me();t={verify:hc(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const l=o.transform;if(l instanceof ms)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof gs)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof ys)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof $o)return{fieldPath:o.field.canonicalString(),increment:l.Ie};throw me()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:tD(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:me()}(n,e.precondition)),t}function sD(n,e){return n&&n.length>0?(Oe(e!==void 0),n.map(t=>function(i,s){let o=i.updateTime?cn(i.updateTime):cn(s);return o.isEqual(ye.min())&&(o=cn(s)),new UI(o,i.transformResults||[])}(t,e))):[]}function oD(n,e){return{documents:[Jg(n,e.path)]}}function aD(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Jg(n,i);const s=function(h){if(h.length!==0)return ty(Jt.create(h,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(h){if(h.length!==0)return h.map(f=>function(_){return{field:zr(_.field),direction:uD(_.dir)}}(f))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const l=cc(n,e.limit);return l!==null&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{ht:t,parent:i}}function lD(n){let e=nD(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Oe(r===1);const f=t.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];t.where&&(s=function(p){const _=ey(p);return _ instanceof Jt&&Cg(_)?_.getFilters():[_]}(t.where));let o=[];t.orderBy&&(o=function(p){return p.map(_=>function(S){return new ps(jr(S.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(_))}(t.orderBy));let l=null;t.limit&&(l=function(p){let _;return _=typeof p=="object"?p.value:p,ya(_)?null:_}(t.limit));let c=null;t.startAt&&(c=function(p){const _=!!p.before,A=p.values||[];return new Bo(A,_)}(t.startAt));let h=null;return t.endAt&&(h=function(p){const _=!p.before,A=p.values||[];return new Bo(A,_)}(t.endAt)),DI(e,i,o,s,l,"F",c,h)}function cD(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return me()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function ey(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=jr(t.unaryFilter.field);return tt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=jr(t.unaryFilter.field);return tt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=jr(t.unaryFilter.field);return tt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=jr(t.unaryFilter.field);return tt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return me()}}(n):n.fieldFilter!==void 0?function(t){return tt.create(jr(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return me()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Jt.create(t.compositeFilter.filters.map(r=>ey(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return me()}}(t.compositeFilter.op))}(n):me()}function uD(n){return YI[n]}function hD(n){return JI[n]}function dD(n){return ZI[n]}function zr(n){return{fieldPath:n.canonicalString()}}function jr(n){return ht.fromServerFormat(n.fieldPath)}function ty(n){return n instanceof tt?function(t){if(t.op==="=="){if(Xd(t.value))return{unaryFilter:{field:zr(t.field),op:"IS_NAN"}};if(Kd(t.value))return{unaryFilter:{field:zr(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Xd(t.value))return{unaryFilter:{field:zr(t.field),op:"IS_NOT_NAN"}};if(Kd(t.value))return{unaryFilter:{field:zr(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zr(t.field),op:hD(t.op),value:t.value}}}(n):n instanceof Jt?function(t){const r=t.getFilters().map(i=>ty(i));return r.length===1?r[0]:{compositeFilter:{op:dD(t.op),filters:r}}}(n):me()}function fD(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function ny(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e,t,r,i,s=ye.min(),o=ye.min(),l=ft.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new zn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new zn(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new zn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new zn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(e){this.Tt=e}}function mD(n){const e=lD({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?lc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(){this.Tn=new yD}addToCollectionParentIndex(e,t){return this.Tn.add(t),O.resolve()}getCollectionParents(e,t){return O.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return O.resolve()}deleteFieldIndex(e,t){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,t){return O.resolve()}getDocumentsMatchingTarget(e,t){return O.resolve(null)}getIndexType(e,t){return O.resolve(0)}getFieldIndexes(e,t){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,t){return O.resolve(nr.min())}getMinOffsetFromCollectionGroup(e,t){return O.resolve(nr.min())}updateCollectionGroup(e,t,r){return O.resolve()}updateIndexEntries(e,t){return O.resolve()}}class yD{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new rt($e.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new rt($e.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ry=41943040;class kt{static withCacheSize(e){return new kt(e,kt.DEFAULT_COLLECTION_PERCENTILE,kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kt.DEFAULT_COLLECTION_PERCENTILE=10,kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,kt.DEFAULT=new kt(ry,kt.DEFAULT_COLLECTION_PERCENTILE,kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),kt.DISABLED=new kt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Kn(){return new hi(0)}static Un(){return new hi(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hf="LruGarbageCollector",_D=1048576;function df([n,e],[t,r]){const i=Se(n,t);return i===0?Se(e,r):i}class vD{constructor(e){this.Hn=e,this.buffer=new rt(df),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();df(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class wD{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){ee(hf,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){_i(t)?ee(hf,"Ignoring IndexedDB error during garbage collection: ",t):await yi(t)}await this.er(3e5)})}}class ED{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return O.resolve(ga.ae);const r=new vD(t);return this.tr.forEachTarget(e,i=>r.Zn(i.sequenceNumber)).next(()=>this.tr.rr(e,i=>r.Zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.tr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ee("LruGarbageCollector","Garbage collection skipped; disabled"),O.resolve(uf)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),uf):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let r,i,s,o,l,c,h;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,o=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,l=Date.now(),this.removeTargets(e,r,t))).next(p=>(s=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(h=Date.now(),$r()<=Ae.DEBUG&&ee("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${i} in `+(l-o)+`ms
	Removed ${s} targets in `+(c-l)+`ms
	Removed ${p} documents in `+(h-c)+`ms
Total Duration: ${h-f}ms`),O.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:p})))}}function TD(n,e){return new ED(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bD{constructor(){this.changes=new Nr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Tt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?O.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Zi(r.mutation,i,Kt.empty(),nt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ie()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ie()){const i=br();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Ui();return s.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=br();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ie()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,l)=>{t.set(o,l)})})}computeViews(e,t,r,i){let s=Cn();const o=Ji(),l=function(){return Ji()}();return t.forEach((c,h)=>{const f=r.get(h.key);i.has(h.key)&&(f===void 0||f.mutation instanceof Or)?s=s.insert(h.key,h):f!==void 0?(o.set(h.key,f.mutation.getFieldMask()),Zi(f.mutation,h,f.mutation.getFieldMask(),nt.now())):o.set(h.key,Kt.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((h,f)=>o.set(h,f)),t.forEach((h,f)=>{var p;return l.set(h,new AD(f,(p=o.get(h))!==null&&p!==void 0?p:null))}),l))}recalculateAndSaveOverlays(e,t){const r=Ji();let i=new Ke((o,l)=>o-l),s=Ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const l of o)l.keys().forEach(c=>{const h=t.get(c);if(h===null)return;let f=r.get(c)||Kt.empty();f=l.applyToLocalView(h,f),r.set(c,f);const p=(i.get(l.batchId)||Ie()).add(c);i=i.insert(l.batchId,p)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),h=c.key,f=c.value,p=Fg();f.forEach(_=>{if(!s.has(_)){const A=qg(t.get(_),r.get(_));A!==null&&p.set(_,A),s=s.add(_)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,p))}return O.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return ce.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Ng(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):O.resolve(br());let l=us,c=s;return o.next(h=>O.forEach(h,(f,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),s.get(f)?O.resolve():this.remoteDocumentCache.getEntry(e,f).next(_=>{c=c.insert(f,_)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,c,h,Ie())).next(f=>({batchId:l,changes:xg(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ce(t)).next(r=>{let i=Ui();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=Ui();return this.indexManager.getCollectionParents(e,s).next(l=>O.forEach(l,c=>{const h=function(p,_){return new vi(_,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(f=>{f.forEach((p,_)=>{o=o.insert(p,_)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,h)=>{const f=h.getKey();o.get(f)===null&&(o=o.insert(f,Tt.newInvalidDocument(f)))});let l=Ui();return o.forEach((c,h)=>{const f=s.get(c);f!==void 0&&Zi(f.mutation,h,Kt.empty(),nt.now()),wa(t,h)&&(l=l.insert(c,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return O.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:cn(i.createTime)}}(t)),O.resolve()}getNamedQuery(e,t){return O.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(i){return{name:i.name,query:mD(i.bundledQuery),readTime:cn(i.readTime)}}(t)),O.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(){this.overlays=new Ke(ce.comparator),this.Rr=new Map}getOverlay(e,t){return O.resolve(this.overlays.get(t))}getOverlays(e,t){const r=br();return O.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.Et(e,t,s)}),O.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Rr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Rr.delete(r)),O.resolve()}getOverlaysForCollection(e,t,r){const i=br(),s=t.length+1,o=new ce(t.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,h=c.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return O.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Ke((h,f)=>h-f);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>r){let f=s.get(h.largestBatchId);f===null&&(f=br(),s=s.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}const l=br(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((h,f)=>l.set(h,f)),!(l.size()>=i)););return O.resolve(l)}Et(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Rr.get(i.largestBatchId).delete(r.key);this.Rr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new zI(t,r));let s=this.Rr.get(t);s===void 0&&(s=Ie(),this.Rr.set(t,s)),this.Rr.set(t,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{constructor(){this.sessionToken=ft.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,O.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(){this.Vr=new rt(it.mr),this.gr=new rt(it.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const r=new it(e,t);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.wr(new it(e,t))}br(e,t){e.forEach(r=>this.removeReference(r,t))}Sr(e){const t=new ce(new $e([])),r=new it(t,e),i=new it(t,e+1),s=[];return this.gr.forEachInRange([r,i],o=>{this.wr(o),s.push(o.key)}),s}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new ce(new $e([])),r=new it(t,e),i=new it(t,e+1);let s=Ie();return this.gr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new it(e,0),r=this.Vr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class it{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return ce.comparator(e.key,t.key)||Se(e.Cr,t.Cr)}static pr(e,t){return Se(e.Cr,t.Cr)||ce.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new rt(it.mr)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const s=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new qI(s,t,r,i);this.mutationQueue.push(o);for(const l of i)this.Mr=this.Mr.add(new it(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return O.resolve(o)}lookupMutationBatch(e,t){return O.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.Nr(r),s=i<0?0:i;return O.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?Wc:this.Fr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new it(t,0),i=new it(t,Number.POSITIVE_INFINITY),s=[];return this.Mr.forEachInRange([r,i],o=>{const l=this.Or(o.Cr);s.push(l)}),O.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new rt(Se);return t.forEach(i=>{const s=new it(i,0),o=new it(i,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([s,o],l=>{r=r.add(l.Cr)})}),O.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;ce.isDocumentKey(s)||(s=s.child(""));const o=new it(new ce(s),0);let l=new rt(Se);return this.Mr.forEachWhile(c=>{const h=c.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(l=l.add(c.Cr)),!0)},o),O.resolve(this.Br(l))}Br(e){const t=[];return e.forEach(r=>{const i=this.Or(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Oe(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return O.forEach(t.mutations,i=>{const s=new it(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Mr=r})}qn(e){}containsKey(e,t){const r=new it(t,0),i=this.Mr.firstAfterOrEqual(r);return O.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(e){this.kr=e,this.docs=function(){return new Ke(ce.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.kr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return O.resolve(r?r.document.mutableCopy():Tt.newInvalidDocument(t))}getEntries(e,t){let r=Cn();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Tt.newInvalidDocument(i))}),O.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Cn();const o=t.path,l=new ce(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:h,value:{document:f}}=c.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||iI(rI(f),r)<=0||(i.has(f.key)||wa(t,f))&&(s=s.insert(f.key,f.mutableCopy()))}return O.resolve(s)}getAllFromCollectionGroup(e,t,r,i){me()}qr(e,t){return O.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new PD(this)}getSize(e){return O.resolve(this.size)}}class PD extends bD{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Ir.addEntry(e,i)):this.Ir.removeEntry(r)}),O.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(e){this.persistence=e,this.Qr=new Nr(t=>Qc(t),Yc),this.lastRemoteSnapshotVersion=ye.min(),this.highestTargetId=0,this.$r=0,this.Kr=new ru,this.targetCount=0,this.Ur=hi.Kn()}forEachTarget(e,t){return this.Qr.forEach((r,i)=>t(i)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Ur.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$r&&(this.$r=t),O.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ur=new hi(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,O.resolve()}updateTargetData(e,t){return this.zn(t),O.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Kr.Sr(t.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Qr.forEach((o,l)=>{l.sequenceNumber<=t&&r.get(l.targetId)===null&&(this.Qr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),O.waitFor(s).next(()=>i)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,t){const r=this.Qr.get(t)||null;return O.resolve(r)}addMatchingKeys(e,t,r){return this.Kr.yr(t,r),O.resolve()}removeMatchingKeys(e,t,r){this.Kr.br(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),O.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Kr.Sr(t),O.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Kr.vr(t);return O.resolve(r)}containsKey(e,t){return O.resolve(this.Kr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new ga(0),this.zr=!1,this.zr=!0,this.jr=new RD,this.referenceDelegate=e(this),this.Hr=new MD(this),this.indexManager=new gD,this.remoteDocumentCache=function(i){return new kD(i)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new pD(t),this.Yr=new DD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new SD,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Wr[e.toKey()];return r||(r=new CD(t,this.referenceDelegate),this.Wr[e.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,r){ee("MemoryPersistence","Starting transaction:",e);const i=new ND(this.Gr.next());return this.referenceDelegate.Zr(),r(i).next(s=>this.referenceDelegate.Xr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}ei(e,t){return O.or(Object.values(this.Wr).map(r=>()=>r.containsKey(e,t)))}}class ND extends oI{constructor(e){super(),this.currentSequenceNumber=e}}class iu{constructor(e){this.persistence=e,this.ti=new ru,this.ni=null}static ri(e){return new iu(e)}get ii(){if(this.ni)return this.ni;throw me()}addReference(e,t,r){return this.ti.addReference(r,t),this.ii.delete(r.toString()),O.resolve()}removeReference(e,t,r){return this.ti.removeReference(r,t),this.ii.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),O.resolve()}removeTarget(e,t){this.ti.Sr(t.targetId).forEach(i=>this.ii.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.ii.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.ii,r=>{const i=ce.fromPath(r);return this.si(e,i).next(s=>{s||t.removeEntry(i,ye.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(r=>{r?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return O.or([()=>O.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class zo{constructor(e,t){this.persistence=e,this.oi=new Nr(r=>cI(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=TD(this,t)}static ri(e,t){return new zo(e,t)}Zr(){}Xr(e){return O.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}sr(e){let t=0;return this.rr(e,r=>{t++}).next(()=>t)}rr(e,t){return O.forEach(this.oi,(r,i)=>this.ar(e,r,i).next(s=>s?O.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.qr(e,o=>this.ar(e,o,t).next(l=>{l||(r++,s.removeEntry(o,ye.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),O.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),O.resolve()}removeReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),O.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),O.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=mo(e.data.value)),t}ar(e,t,r){return O.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.oi.get(t);return O.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Hi=r,this.Ji=i}static Yi(e,t){let r=Ie(),i=Ie();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new su(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return kE()?8:aI(Dt())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.rs(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ss(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new OD;return this._s(e,t,o).next(l=>{if(s.result=l,this.Xi)return this.us(e,t,o,l.size)})}).next(()=>s.result)}us(e,t,r,i){return r.documentReadCount<this.es?($r()<=Ae.DEBUG&&ee("QueryEngine","SDK will not create cache indexes for query:",qr(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),O.resolve()):($r()<=Ae.DEBUG&&ee("QueryEngine","Query:",qr(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ts*i?($r()<=Ae.DEBUG&&ee("QueryEngine","The SDK decides to create cache indexes for query:",qr(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ln(t))):O.resolve())}rs(e,t){if(Zd(t))return O.resolve(null);let r=ln(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=lc(t,null,"F"),r=ln(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Ie(...s);return this.ns.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const h=this.cs(t,l);return this.ls(t,h,o,c.readTime)?this.rs(e,lc(t,null,"F")):this.hs(e,h,t,c)}))})))}ss(e,t,r,i){return Zd(t)||i.isEqual(ye.min())?O.resolve(null):this.ns.getDocuments(e,r).next(s=>{const o=this.cs(t,s);return this.ls(t,o,r,i)?O.resolve(null):($r()<=Ae.DEBUG&&ee("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),qr(t)),this.hs(e,o,t,nI(i,us)).next(l=>l))})}cs(e,t){let r=new rt(Vg(e));return t.forEach((i,s)=>{wa(e,s)&&(r=r.add(s))}),r}ls(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}_s(e,t,r){return $r()<=Ae.DEBUG&&ee("QueryEngine","Using full collection scan to execute query:",qr(t)),this.ns.getDocumentsMatchingQuery(e,t,nr.min(),r)}hs(e,t,r,i){return this.ns.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ou="LocalStore",LD=3e8;class xD{constructor(e,t,r,i){this.persistence=e,this.Ps=t,this.serializer=i,this.Ts=new Ke(Se),this.Is=new Nr(s=>Qc(s),Yc),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(r)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ID(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function FD(n,e,t,r){return new xD(n,e,t,r)}async function sy(n,e){const t=ve(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.As(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],l=[];let c=Ie();for(const h of i){o.push(h.batchId);for(const f of h.mutations)c=c.add(f.key)}for(const h of s){l.push(h.batchId);for(const f of h.mutations)c=c.add(f.key)}return t.localDocuments.getDocuments(r,c).next(h=>({Rs:h,removedBatchIds:o,addedBatchIds:l}))})})}function GD(n,e){const t=ve(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.ds.newChangeBuffer({trackRemovals:!0});return function(l,c,h,f){const p=h.batch,_=p.keys();let A=O.resolve();return _.forEach(S=>{A=A.next(()=>f.getEntry(c,S)).next(C=>{const N=h.docVersions.get(S);Oe(N!==null),C.version.compareTo(N)<0&&(p.applyToRemoteDocument(C,h),C.isValidDocument()&&(C.setReadTime(h.commitVersion),f.addEntry(C)))})}),A.next(()=>l.mutationQueue.removeMutationBatch(c,p))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=Ie();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(c=c.add(l.batch.mutations[h].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function oy(n){const e=ve(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function UD(n,e){const t=ve(n),r=e.snapshotVersion;let i=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.ds.newChangeBuffer({trackRemovals:!0});i=t.Ts;const l=[];e.targetChanges.forEach((f,p)=>{const _=i.get(p);if(!_)return;l.push(t.Hr.removeMatchingKeys(s,f.removedDocuments,p).next(()=>t.Hr.addMatchingKeys(s,f.addedDocuments,p)));let A=_.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?A=A.withResumeToken(ft.EMPTY_BYTE_STRING,ye.min()).withLastLimboFreeSnapshotVersion(ye.min()):f.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(f.resumeToken,r)),i=i.insert(p,A),function(C,N,j){return C.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=LD?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0}(_,A,f)&&l.push(t.Hr.updateTargetData(s,A))});let c=Cn(),h=Ie();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(t.persistence.referenceDelegate.updateLimboDocument(s,f))}),l.push(HD(s,o,e.documentUpdates).next(f=>{c=f.Vs,h=f.fs})),!r.isEqual(ye.min())){const f=t.Hr.getLastRemoteSnapshotVersion(s).next(p=>t.Hr.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(f)}return O.waitFor(l).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,h)).next(()=>c)}).then(s=>(t.Ts=i,s))}function HD(n,e,t){let r=Ie(),i=Ie();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Cn();return t.forEach((l,c)=>{const h=s.get(l);c.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(l)),c.isNoDocument()&&c.version.isEqual(ye.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):ee(ou,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",c.version)}),{Vs:o,fs:i}})}function BD(n,e){const t=ve(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Wc),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function $D(n,e){const t=ve(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Hr.getTargetData(r,e).next(s=>s?(i=s,O.resolve(i)):t.Hr.allocateTargetId(r).next(o=>(i=new zn(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Hr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ts.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(r.targetId,r),t.Is.set(e,r.targetId)),r})}async function fc(n,e,t){const r=ve(n),i=r.Ts.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!_i(o))throw o;ee(ou,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ts=r.Ts.remove(e),r.Is.delete(i.target)}function ff(n,e,t){const r=ve(n);let i=ye.min(),s=Ie();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,h,f){const p=ve(c),_=p.Is.get(f);return _!==void 0?O.resolve(p.Ts.get(_)):p.Hr.getTargetData(h,f)}(r,o,ln(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(o,l.targetId).next(c=>{s=c})}).next(()=>r.Ps.getDocumentsMatchingQuery(o,e,t?i:ye.min(),t?s:Ie())).next(l=>(qD(r,RI(e),l),{documents:l,gs:s})))}function qD(n,e,t){let r=n.Es.get(e)||ye.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Es.set(e,r)}class pf{constructor(){this.activeTargetIds=OI()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ss(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class zD{constructor(){this.ho=new pf,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,r){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new pf,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mf="ConnectivityMonitor";class gf{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){ee(mf,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){ee(mf,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let no=null;function pc(){return no===null?no=function(){return 268435456+Math.round(2147483648*Math.random())}():no++,"0x"+no.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cl="RestConnection",WD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class KD{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${r}/databases/${i}`,this.wo=this.databaseId.database===Uo?`project_id=${r}`:`project_id=${r}&database_id=${i}`}bo(e,t,r,i,s){const o=pc(),l=this.So(e,t.toUriEncodedString());ee(cl,`Sending RPC '${e}' ${o}:`,l,r);const c={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(c,i,s),this.vo(e,l,c,r).then(h=>(ee(cl,`Received RPC '${e}' ${o}: `,h),h),h=>{throw ai(cl,`RPC '${e}' ${o} failed with error: `,h,"url: ",l,"request:",r),h})}Co(e,t,r,i,s,o){return this.bo(e,t,r,i,s)}Do(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+gi}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}So(e,t){const r=WD[e];return`${this.po}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Ko(e){this.ko(e)}Uo(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _t="WebChannelConnection";class QD extends KD{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,r,i){const s=pc();return new Promise((o,l)=>{const c=new ug;c.setWithCredentials(!0),c.listenOnce(hg.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case po.NO_ERROR:const f=c.getResponseJson();ee(_t,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case po.TIMEOUT:ee(_t,`RPC '${e}' ${s} timed out`),l(new te(V.DEADLINE_EXCEEDED,"Request time out"));break;case po.HTTP_ERROR:const p=c.getStatus();if(ee(_t,`RPC '${e}' ${s} failed with status:`,p,"response text:",c.getResponseText()),p>0){let _=c.getResponseJson();Array.isArray(_)&&(_=_[0]);const A=_==null?void 0:_.error;if(A&&A.status&&A.message){const S=function(N){const j=N.toLowerCase().replace(/_/g,"-");return Object.values(V).indexOf(j)>=0?j:V.UNKNOWN}(A.status);l(new te(S,A.message))}else l(new te(V.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new te(V.UNAVAILABLE,"Connection failed."));break;default:me()}}finally{ee(_t,`RPC '${e}' ${s} completed.`)}});const h=JSON.stringify(i);ee(_t,`RPC '${e}' ${s} sending request:`,i),c.send(t,"POST",h,r,15)})}Wo(e,t,r){const i=pc(),s=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=pg(),l=fg(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Do(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const f=s.join("");ee(_t,`Creating RPC '${e}' stream ${i}: ${f}`,c);const p=o.createWebChannel(f,c);let _=!1,A=!1;const S=new XD({Fo:N=>{A?ee(_t,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(_||(ee(_t,`Opening RPC '${e}' stream ${i} transport.`),p.open(),_=!0),ee(_t,`RPC '${e}' stream ${i} sending:`,N),p.send(N))},Mo:()=>p.close()}),C=(N,j,B)=>{N.listen(j,$=>{try{B($)}catch(F){setTimeout(()=>{throw F},0)}})};return C(p,Gi.EventType.OPEN,()=>{A||(ee(_t,`RPC '${e}' stream ${i} transport opened.`),S.Qo())}),C(p,Gi.EventType.CLOSE,()=>{A||(A=!0,ee(_t,`RPC '${e}' stream ${i} transport closed`),S.Ko())}),C(p,Gi.EventType.ERROR,N=>{A||(A=!0,ai(_t,`RPC '${e}' stream ${i} transport errored:`,N),S.Ko(new te(V.UNAVAILABLE,"The operation could not be completed")))}),C(p,Gi.EventType.MESSAGE,N=>{var j;if(!A){const B=N.data[0];Oe(!!B);const $=B,F=($==null?void 0:$.error)||((j=$[0])===null||j===void 0?void 0:j.error);if(F){ee(_t,`RPC '${e}' stream ${i} received error:`,F);const se=F.status;let Q=function(g){const E=et[g];if(E!==void 0)return Wg(E)}(se),v=F.message;Q===void 0&&(Q=V.INTERNAL,v="Unknown error status: "+se+" with message "+F.message),A=!0,S.Ko(new te(Q,v)),p.close()}else ee(_t,`RPC '${e}' stream ${i} received:`,B),S.Uo(B)}}),C(l,dg.STAT_EVENT,N=>{N.stat===nc.PROXY?ee(_t,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===nc.NOPROXY&&ee(_t,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.$o()},0),S}}function ul(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aa(n){return new eD(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Ti=e,this.timerId=t,this.Go=r,this.zo=i,this.jo=s,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),i=Math.max(0,t-r);i>0&&ee("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,i,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yf="PersistentStream";class ly{constructor(e,t,r,i,s,o,l,c){this.Ti=e,this.n_=r,this.r_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new ay(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===V.RESOURCE_EXHAUSTED?(Rn(t.toString()),Rn("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===V.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.i_===t&&this.V_(r,i)},r=>{e(()=>{const i=new te(V.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(i)})})}V_(e,t){const r=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(i=>{r(()=>this.m_(i))}),this.stream.onMessage(i=>{r(()=>++this.__==1?this.g_(i):this.onNext(i))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return ee(yf,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(ee(yf,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class YD extends ly{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=rD(this.serializer,e),r=function(s){if(!("targetChange"in s))return ye.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ye.min():o.readTime?cn(o.readTime):ye.min()}(e);return this.listener.p_(t,r)}y_(e){const t={};t.database=dc(this.serializer),t.addTarget=function(s,o){let l;const c=o.target;if(l=oc(c)?{documents:oD(s,c)}:{query:aD(s,c).ht},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=Qg(s,o.resumeToken);const h=cc(s,o.expectedCount);h!==null&&(l.expectedCount=h)}else if(o.snapshotVersion.compareTo(ye.min())>0){l.readTime=qo(s,o.snapshotVersion.toTimestamp());const h=cc(s,o.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=cD(this.serializer,e);r&&(t.labels=r),this.I_(t)}w_(e){const t={};t.database=dc(this.serializer),t.removeTarget=e,this.I_(t)}}class JD extends ly{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get b_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.b_&&this.S_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return Oe(!!e.streamToken),this.lastStreamToken=e.streamToken,Oe(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){Oe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=sD(e.writeResults,e.commitTime),r=cn(e.commitTime);return this.listener.v_(r,t)}C_(){const e={};e.database=dc(this.serializer),this.I_(e)}S_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>iD(this.serializer,r))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{}class e1 extends ZD{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.F_=!1}M_(){if(this.F_)throw new te(V.FAILED_PRECONDITION,"The client has already been terminated.")}bo(e,t,r,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.bo(e,uc(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new te(V.UNKNOWN,s.toString())})}Co(e,t,r,i,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Co(e,uc(t,r),i,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new te(V.UNKNOWN,o.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class t1{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Rn(t),this.N_=!1):ee("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pr="RemoteStore";class n1{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=s,this.z_.To(o=>{r.enqueueAndForget(async()=>{Vr(this)&&(ee(Pr,"Restarting streams for network reachability change."),await async function(c){const h=ve(c);h.W_.add(4),await Cs(h),h.j_.set("Unknown"),h.W_.delete(4),await Ia(h)}(this))})}),this.j_=new t1(r,i)}}async function Ia(n){if(Vr(n))for(const e of n.G_)await e(!0)}async function Cs(n){for(const e of n.G_)await e(!1)}function cy(n,e){const t=ve(n);t.U_.has(e.targetId)||(t.U_.set(e.targetId,e),uu(t)?cu(t):wi(t).c_()&&lu(t,e))}function au(n,e){const t=ve(n),r=wi(t);t.U_.delete(e),r.c_()&&uy(t,e),t.U_.size===0&&(r.c_()?r.P_():Vr(t)&&t.j_.set("Unknown"))}function lu(n,e){if(n.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ye.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}wi(n).y_(e)}function uy(n,e){n.H_.Ne(e),wi(n).w_(e)}function cu(n){n.H_=new QI({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>n.U_.get(e)||null,it:()=>n.datastore.serializer.databaseId}),wi(n).start(),n.j_.B_()}function uu(n){return Vr(n)&&!wi(n).u_()&&n.U_.size>0}function Vr(n){return ve(n).W_.size===0}function hy(n){n.H_=void 0}async function r1(n){n.j_.set("Online")}async function i1(n){n.U_.forEach((e,t)=>{lu(n,e)})}async function s1(n,e){hy(n),uu(n)?(n.j_.q_(e),cu(n)):n.j_.set("Unknown")}async function o1(n,e,t){if(n.j_.set("Online"),e instanceof Xg&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const l of s.targetIds)i.U_.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.U_.delete(l),i.H_.removeTarget(l))}(n,e)}catch(r){ee(Pr,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await jo(n,r)}else if(e instanceof _o?n.H_.We(e):e instanceof Kg?n.H_.Ze(e):n.H_.je(e),!t.isEqual(ye.min()))try{const r=await oy(n.localStore);t.compareTo(r)>=0&&await function(s,o){const l=s.H_.ot(o);return l.targetChanges.forEach((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const f=s.U_.get(h);f&&s.U_.set(h,f.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,h)=>{const f=s.U_.get(c);if(!f)return;s.U_.set(c,f.withResumeToken(ft.EMPTY_BYTE_STRING,f.snapshotVersion)),uy(s,c);const p=new zn(f.target,c,h,f.sequenceNumber);lu(s,p)}),s.remoteSyncer.applyRemoteEvent(l)}(n,t)}catch(r){ee(Pr,"Failed to raise snapshot:",r),await jo(n,r)}}async function jo(n,e,t){if(!_i(e))throw e;n.W_.add(1),await Cs(n),n.j_.set("Offline"),t||(t=()=>oy(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ee(Pr,"Retrying IndexedDB access"),await t(),n.W_.delete(1),await Ia(n)})}function dy(n,e){return e().catch(t=>jo(n,t,e))}async function Da(n){const e=ve(n),t=or(e);let r=e.K_.length>0?e.K_[e.K_.length-1].batchId:Wc;for(;a1(e);)try{const i=await BD(e.localStore,r);if(i===null){e.K_.length===0&&t.P_();break}r=i.batchId,l1(e,i)}catch(i){await jo(e,i)}fy(e)&&py(e)}function a1(n){return Vr(n)&&n.K_.length<10}function l1(n,e){n.K_.push(e);const t=or(n);t.c_()&&t.b_&&t.S_(e.mutations)}function fy(n){return Vr(n)&&!or(n).u_()&&n.K_.length>0}function py(n){or(n).start()}async function c1(n){or(n).C_()}async function u1(n){const e=or(n);for(const t of n.K_)e.S_(t.mutations)}async function h1(n,e,t){const r=n.K_.shift(),i=eu.from(r,e,t);await dy(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await Da(n)}async function d1(n,e){e&&or(n).b_&&await async function(r,i){if(function(o){return WI(o)&&o!==V.ABORTED}(i.code)){const s=r.K_.shift();or(r).h_(),await dy(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Da(r)}}(n,e),fy(n)&&py(n)}async function _f(n,e){const t=ve(n);t.asyncQueue.verifyOperationInProgress(),ee(Pr,"RemoteStore received new credentials");const r=Vr(t);t.W_.add(3),await Cs(t),r&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await Ia(t)}async function f1(n,e){const t=ve(n);e?(t.W_.delete(2),await Ia(t)):e||(t.W_.add(2),await Cs(t),t.j_.set("Unknown"))}function wi(n){return n.J_||(n.J_=function(t,r,i){const s=ve(t);return s.M_(),new YD(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{xo:r1.bind(null,n),No:i1.bind(null,n),Lo:s1.bind(null,n),p_:o1.bind(null,n)}),n.G_.push(async e=>{e?(n.J_.h_(),uu(n)?cu(n):n.j_.set("Unknown")):(await n.J_.stop(),hy(n))})),n.J_}function or(n){return n.Y_||(n.Y_=function(t,r,i){const s=ve(t);return s.M_(),new JD(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{xo:()=>Promise.resolve(),No:c1.bind(null,n),Lo:d1.bind(null,n),D_:u1.bind(null,n),v_:h1.bind(null,n)}),n.G_.push(async e=>{e?(n.Y_.h_(),await Da(n)):(await n.Y_.stop(),n.K_.length>0&&(ee(Pr,`Stopping write stream with ${n.K_.length} pending writes`),n.K_=[]))})),n.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ir,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,l=new hu(e,t,o,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new te(V.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function du(n,e){if(Rn("AsyncQueue",`${e}: ${n}`),_i(n))return new te(V.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{static emptySet(e){return new ii(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ce.comparator(t.key,r.key):(t,r)=>ce.comparator(t.key,r.key),this.keyedMap=Ui(),this.sortedSet=new Ke(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ii)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new ii;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(){this.Z_=new Ke(ce.comparator)}track(e){const t=e.doc.key,r=this.Z_.get(t);r?e.type!==0&&r.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&r.type!==1?this.Z_=this.Z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Z_=this.Z_.remove(t):e.type===1&&r.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):me():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,r)=>{e.push(r)}),e}}class di{constructor(e,t,r,i,s,o,l,c,h){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(l=>{o.push({type:0,doc:l})}),new di(e,t,ii.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&va(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class m1{constructor(){this.queries=wf(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,r){const i=ve(t),s=i.queries;i.queries=wf(),s.forEach((o,l)=>{for(const c of l.ta)c.onError(r)})})(this,new te(V.ABORTED,"Firestore shutting down"))}}function wf(){return new Nr(n=>Og(n),va)}async function g1(n,e){const t=ve(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.na()&&e.ra()&&(r=2):(s=new p1,r=e.ra()?0:1);try{switch(r){case 0:s.ea=await t.onListen(i,!0);break;case 1:s.ea=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){const l=du(o,`Initialization of query '${qr(e.query)}' failed`);return void e.onError(l)}t.queries.set(i,s),s.ta.push(e),e.sa(t.onlineState),s.ea&&e.oa(s.ea)&&fu(t)}async function y1(n,e){const t=ve(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.ta.indexOf(e);o>=0&&(s.ta.splice(o,1),s.ta.length===0?i=e.ra()?0:1:!s.na()&&e.ra()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function _1(n,e){const t=ve(n);let r=!1;for(const i of e){const s=i.query,o=t.queries.get(s);if(o){for(const l of o.ta)l.oa(i)&&(r=!0);o.ea=i}}r&&fu(t)}function v1(n,e,t){const r=ve(n),i=r.queries.get(e);if(i)for(const s of i.ta)s.onError(t);r.queries.delete(e)}function fu(n){n.ia.forEach(e=>{e.next()})}var mc,Ef;(Ef=mc||(mc={}))._a="default",Ef.Cache="cache";class w1{constructor(e,t,r){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new di(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const r=t!=="Offline";return(!this.options.Ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=di.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==mc.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{constructor(e){this.key=e}}class gy{constructor(e){this.key=e}}class E1{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Ie(),this.mutatedKeys=Ie(),this.ya=Vg(e),this.wa=new ii(this.ya)}get ba(){return this.fa}Sa(e,t){const r=t?t.Da:new vf,i=t?t.wa:this.wa;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,l=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,p)=>{const _=i.get(f),A=wa(this.query,p)?p:null,S=!!_&&this.mutatedKeys.has(_.key),C=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let N=!1;_&&A?_.data.isEqual(A.data)?S!==C&&(r.track({type:3,doc:A}),N=!0):this.va(_,A)||(r.track({type:2,doc:A}),N=!0,(c&&this.ya(A,c)>0||h&&this.ya(A,h)<0)&&(l=!0)):!_&&A?(r.track({type:0,doc:A}),N=!0):_&&!A&&(r.track({type:1,doc:_}),N=!0,(c||h)&&(l=!0)),N&&(A?(o=o.add(A),s=C?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{wa:o,Da:r,ls:l,mutatedKeys:s}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const o=e.Da.X_();o.sort((f,p)=>function(A,S){const C=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return me()}};return C(A)-C(S)}(f.type,p.type)||this.ya(f.doc,p.doc)),this.Ca(r),i=i!=null&&i;const l=t&&!i?this.Fa():[],c=this.pa.size===0&&this.current&&!i?1:0,h=c!==this.ga;return this.ga=c,o.length!==0||h?{snapshot:new di(this.query,e.wa,s,o,e.mutatedKeys,c===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:l}:{Ma:l}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new vf,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Ie(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});const t=[];return e.forEach(r=>{this.pa.has(r)||t.push(new gy(r))}),this.pa.forEach(r=>{e.has(r)||t.push(new my(r))}),t}Oa(e){this.fa=e.gs,this.pa=Ie();const t=this.Sa(e.documents);return this.applyChanges(t,!0)}Na(){return di.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const pu="SyncEngine";class T1{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class b1{constructor(e){this.key=e,this.Ba=!1}}class A1{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.La={},this.ka=new Nr(l=>Og(l),va),this.qa=new Map,this.Qa=new Set,this.$a=new Ke(ce.comparator),this.Ka=new Map,this.Ua=new ru,this.Wa={},this.Ga=new Map,this.za=hi.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function I1(n,e,t=!0){const r=Ty(n);let i;const s=r.ka.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Na()):i=await yy(r,e,t,!0),i}async function D1(n,e){const t=Ty(n);await yy(t,e,!0,!1)}async function yy(n,e,t,r){const i=await $D(n.localStore,ln(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t);let l;return r&&(l=await S1(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&cy(n.remoteStore,i),l}async function S1(n,e,t,r,i){n.Ha=(p,_,A)=>async function(C,N,j,B){let $=N.view.Sa(j);$.ls&&($=await ff(C.localStore,N.query,!1).then(({documents:v})=>N.view.Sa(v,$)));const F=B&&B.targetChanges.get(N.targetId),se=B&&B.targetMismatches.get(N.targetId)!=null,Q=N.view.applyChanges($,C.isPrimaryClient,F,se);return bf(C,N.targetId,Q.Ma),Q.snapshot}(n,p,_,A);const s=await ff(n.localStore,e,!0),o=new E1(e,s.gs),l=o.Sa(s.documents),c=Rs.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),h=o.applyChanges(l,n.isPrimaryClient,c);bf(n,t,h.Ma);const f=new T1(e,t,o);return n.ka.set(e,f),n.qa.has(t)?n.qa.get(t).push(e):n.qa.set(t,[e]),h.snapshot}async function R1(n,e,t){const r=ve(n),i=r.ka.get(e),s=r.qa.get(i.targetId);if(s.length>1)return r.qa.set(i.targetId,s.filter(o=>!va(o,e))),void r.ka.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await fc(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&au(r.remoteStore,i.targetId),gc(r,i.targetId)}).catch(yi)):(gc(r,i.targetId),await fc(r.localStore,i.targetId,!0))}async function C1(n,e){const t=ve(n),r=t.ka.get(e),i=t.qa.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),au(t.remoteStore,r.targetId))}async function k1(n,e,t){const r=x1(n);try{const i=await function(o,l){const c=ve(o),h=nt.now(),f=l.reduce((A,S)=>A.add(S.key),Ie());let p,_;return c.persistence.runTransaction("Locally write mutations","readwrite",A=>{let S=Cn(),C=Ie();return c.ds.getEntries(A,f).next(N=>{S=N,S.forEach((j,B)=>{B.isValidDocument()||(C=C.add(j))})}).next(()=>c.localDocuments.getOverlayedDocuments(A,S)).next(N=>{p=N;const j=[];for(const B of l){const $=BI(B,p.get(B.key).overlayedDocument);$!=null&&j.push(new Or(B.key,$,Dg($.value.mapValue),bn.exists(!0)))}return c.mutationQueue.addMutationBatch(A,h,j,l)}).next(N=>{_=N;const j=N.applyToLocalDocumentSet(p,C);return c.documentOverlayCache.saveOverlays(A,N.batchId,j)})}).then(()=>({batchId:_.batchId,changes:xg(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,c){let h=o.Wa[o.currentUser.toKey()];h||(h=new Ke(Se)),h=h.insert(l,c),o.Wa[o.currentUser.toKey()]=h}(r,i.batchId,t),await ks(r,i.changes),await Da(r.remoteStore)}catch(i){const s=du(i,"Failed to persist write");t.reject(s)}}async function _y(n,e){const t=ve(n);try{const r=await UD(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Ka.get(s);o&&(Oe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Ba=!0:i.modifiedDocuments.size>0?Oe(o.Ba):i.removedDocuments.size>0&&(Oe(o.Ba),o.Ba=!1))}),await ks(t,r,e)}catch(r){await yi(r)}}function Tf(n,e,t){const r=ve(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.ka.forEach((s,o)=>{const l=o.view.sa(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const c=ve(o);c.onlineState=l;let h=!1;c.queries.forEach((f,p)=>{for(const _ of p.ta)_.sa(l)&&(h=!0)}),h&&fu(c)}(r.eventManager,e),i.length&&r.La.p_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function P1(n,e,t){const r=ve(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Ka.get(e),s=i&&i.key;if(s){let o=new Ke(ce.comparator);o=o.insert(s,Tt.newNoDocument(s,ye.min()));const l=Ie().add(s),c=new ba(ye.min(),new Map,new Ke(Se),o,l);await _y(r,c),r.$a=r.$a.remove(s),r.Ka.delete(e),mu(r)}else await fc(r.localStore,e,!1).then(()=>gc(r,e,t)).catch(yi)}async function M1(n,e){const t=ve(n),r=e.batch.batchId;try{const i=await GD(t.localStore,e);wy(t,r,null),vy(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await ks(t,i)}catch(i){await yi(i)}}async function N1(n,e,t){const r=ve(n);try{const i=await function(o,l){const c=ve(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let f;return c.mutationQueue.lookupMutationBatch(h,l).next(p=>(Oe(p!==null),f=p.keys(),c.mutationQueue.removeMutationBatch(h,p))).next(()=>c.mutationQueue.performConsistencyCheck(h)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(h,f,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f)).next(()=>c.localDocuments.getDocuments(h,f))})}(r.localStore,e);wy(r,e,t),vy(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await ks(r,i)}catch(i){await yi(i)}}function vy(n,e){(n.Ga.get(e)||[]).forEach(t=>{t.resolve()}),n.Ga.delete(e)}function wy(n,e,t){const r=ve(n);let i=r.Wa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Wa[r.currentUser.toKey()]=i}}function gc(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.qa.get(e))n.ka.delete(r),t&&n.La.Ja(r,t);n.qa.delete(e),n.isPrimaryClient&&n.Ua.Sr(e).forEach(r=>{n.Ua.containsKey(r)||Ey(n,r)})}function Ey(n,e){n.Qa.delete(e.path.canonicalString());const t=n.$a.get(e);t!==null&&(au(n.remoteStore,t),n.$a=n.$a.remove(e),n.Ka.delete(t),mu(n))}function bf(n,e,t){for(const r of t)r instanceof my?(n.Ua.addReference(r.key,e),O1(n,r)):r instanceof gy?(ee(pu,"Document no longer in limbo: "+r.key),n.Ua.removeReference(r.key,e),n.Ua.containsKey(r.key)||Ey(n,r.key)):me()}function O1(n,e){const t=e.key,r=t.path.canonicalString();n.$a.get(t)||n.Qa.has(r)||(ee(pu,"New document in limbo: "+t),n.Qa.add(r),mu(n))}function mu(n){for(;n.Qa.size>0&&n.$a.size<n.maxConcurrentLimboResolutions;){const e=n.Qa.values().next().value;n.Qa.delete(e);const t=new ce($e.fromString(e)),r=n.za.next();n.Ka.set(r,new b1(t)),n.$a=n.$a.insert(t,r),cy(n.remoteStore,new zn(ln(Jc(t.path)),r,"TargetPurposeLimboResolution",ga.ae))}}async function ks(n,e,t){const r=ve(n),i=[],s=[],o=[];r.ka.isEmpty()||(r.ka.forEach((l,c)=>{o.push(r.Ha(c,e,t).then(h=>{var f;if((h||t)&&r.isPrimaryClient){const p=h?!h.fromCache:(f=t==null?void 0:t.targetChanges.get(c.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(h){i.push(h);const p=su.Yi(c.targetId,h);s.push(p)}}))}),await Promise.all(o),r.La.p_(i),await async function(c,h){const f=ve(c);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>O.forEach(h,_=>O.forEach(_.Hi,A=>f.persistence.referenceDelegate.addReference(p,_.targetId,A)).next(()=>O.forEach(_.Ji,A=>f.persistence.referenceDelegate.removeReference(p,_.targetId,A)))))}catch(p){if(!_i(p))throw p;ee(ou,"Failed to update sequence numbers: "+p)}for(const p of h){const _=p.targetId;if(!p.fromCache){const A=f.Ts.get(_),S=A.snapshotVersion,C=A.withLastLimboFreeSnapshotVersion(S);f.Ts=f.Ts.insert(_,C)}}}(r.localStore,s))}async function V1(n,e){const t=ve(n);if(!t.currentUser.isEqual(e)){ee(pu,"User change. New user:",e.toKey());const r=await sy(t.localStore,e);t.currentUser=e,function(s,o){s.Ga.forEach(l=>{l.forEach(c=>{c.reject(new te(V.CANCELLED,o))})}),s.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ks(t,r.Rs)}}function L1(n,e){const t=ve(n),r=t.Ka.get(e);if(r&&r.Ba)return Ie().add(r.key);{let i=Ie();const s=t.qa.get(e);if(!s)return i;for(const o of s){const l=t.ka.get(o);i=i.unionWith(l.view.ba)}return i}}function Ty(n){const e=ve(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=_y.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=L1.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=P1.bind(null,e),e.La.p_=_1.bind(null,e.eventManager),e.La.Ja=v1.bind(null,e.eventManager),e}function x1(n){const e=ve(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=M1.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=N1.bind(null,e),e}class Wo{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Aa(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return FD(this.persistence,new VD,e.initialUser,this.serializer)}Xa(e){return new iy(iu.ri,this.serializer)}Za(e){return new zD}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Wo.provider={build:()=>new Wo};class F1 extends Wo{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){Oe(this.persistence.referenceDelegate instanceof zo);const r=this.persistence.referenceDelegate.garbageCollector;return new wD(r,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?kt.withCacheSize(this.cacheSizeBytes):kt.DEFAULT;return new iy(r=>zo.ri(r,t),this.serializer)}}class yc{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Tf(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=V1.bind(null,this.syncEngine),await f1(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new m1}()}createDatastore(e){const t=Aa(e.databaseInfo.databaseId),r=function(s){return new QD(s)}(e.databaseInfo);return function(s,o,l,c){return new e1(s,o,l,c)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,s,o,l){return new n1(r,i,s,o,l)}(this.localStore,this.datastore,e.asyncQueue,t=>Tf(this.syncEngine,t,0),function(){return gf.D()?new gf:new jD}())}createSyncEngine(e,t){return function(i,s,o,l,c,h,f){const p=new A1(i,s,o,l,c,h);return f&&(p.ja=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const s=ve(i);ee(Pr,"RemoteStore shutting down."),s.W_.add(5),await Cs(s),s.z_.shutdown(),s.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}yc.provider={build:()=>new yc};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Rn("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ar="FirestoreClient";class U1{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=vt.UNAUTHENTICATED,this.clientId=gg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{ee(ar,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ee(ar,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ir;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=du(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function hl(n,e){n.asyncQueue.verifyOperationInProgress(),ee(ar,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await sy(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function Af(n,e){n.asyncQueue.verifyOperationInProgress();const t=await H1(n);ee(ar,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>_f(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>_f(e.remoteStore,i)),n._onlineComponents=e}async function H1(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ee(ar,"Using user provided OfflineComponentProvider");try{await hl(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===V.FAILED_PRECONDITION||i.code===V.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;ai("Error using user provided cache. Falling back to memory cache: "+t),await hl(n,new Wo)}}else ee(ar,"Using default OfflineComponentProvider"),await hl(n,new F1(void 0));return n._offlineComponents}async function by(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ee(ar,"Using user provided OnlineComponentProvider"),await Af(n,n._uninitializedComponentsProvider._online)):(ee(ar,"Using default OnlineComponentProvider"),await Af(n,new yc))),n._onlineComponents}function B1(n){return by(n).then(e=>e.syncEngine)}async function If(n){const e=await by(n),t=e.eventManager;return t.onListen=I1.bind(null,e.syncEngine),t.onUnlisten=R1.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=D1.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=C1.bind(null,e.syncEngine),t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ay(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Df=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iy(n,e,t){if(!t)throw new te(V.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function $1(n,e,t,r){if(e===!0&&r===!0)throw new te(V.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Sf(n){if(!ce.isDocumentKey(n))throw new te(V.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Rf(n){if(ce.isDocumentKey(n))throw new te(V.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Sa(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":me()}function es(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new te(V.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Sa(n);throw new te(V.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dy="firestore.googleapis.com",Cf=!0;class kf{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new te(V.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Dy,this.ssl=Cf}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Cf;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=ry;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<_D)throw new te(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}$1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ay((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new te(V.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new te(V.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new te(V.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ra{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kf({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new te(V.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new te(V.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kf(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new KA;switch(r.type){case"firstParty":return new JA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new te(V.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=Df.get(t);r&&(ee("ComponentProvider","Removing Datastore"),Df.delete(t),r.terminate())}(this),Promise.resolve()}}function q1(n,e,t,r={}){var i;const s=(n=es(n,Ra))._getSettings(),o=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),l=`${e}:${t}`;s.host!==Dy&&s.host!==l&&ai("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},s),{host:l,ssl:!1,emulatorOptions:r});if(!Sr(c,o)&&(n._setSettings(c),r.mockUserToken)){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=vt.MOCK_USER;else{h=bE(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new te(V.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new vt(p)}n._authCredentials=new XA(new mg(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Lr(this.firestore,e,this._query)}}class Ft{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Jn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ft(this.firestore,e,this._key)}}class Jn extends Lr{constructor(e,t,r){super(e,t,Jc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ft(this.firestore,null,new ce(e))}withConverter(e){return new Jn(this.firestore,e,this._path)}}function Ko(n,e,...t){if(n=Gt(n),Iy("collection","path",e),n instanceof Ra){const r=$e.fromString(e,...t);return Rf(r),new Jn(n,null,r)}{if(!(n instanceof Ft||n instanceof Jn))throw new te(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child($e.fromString(e,...t));return Rf(r),new Jn(n.firestore,null,r)}}function gu(n,e,...t){if(n=Gt(n),arguments.length===1&&(e=gg.newId()),Iy("doc","path",e),n instanceof Ra){const r=$e.fromString(e,...t);return Sf(r),new Ft(n,null,new ce(r))}{if(!(n instanceof Ft||n instanceof Jn))throw new te(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child($e.fromString(e,...t));return Sf(r),new Ft(n.firestore,n instanceof Jn?n.converter:null,new ce(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pf="AsyncQueue";class Mf{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new ay(this,"async_queue_retry"),this.bu=()=>{const r=ul();r&&ee(Pf,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.Su=e;const t=ul();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.bu)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=ul();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.bu)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new Ir;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!_i(e))throw e;ee(Pf,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.Su.then(()=>(this.pu=!0,e().catch(r=>{this.gu=r,this.pu=!1;const i=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw Rn("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.pu=!1,r))));return this.Su=t,t}enqueueAfterDelay(e,t,r){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const i=hu.createAndSchedule(this,e,t,r,s=>this.Fu(s));return this.fu.push(i),i}Du(){this.gu&&me()}verifyOperationInProgress(){}async Mu(){let e;do e=this.Su,await e;while(e!==this.Su)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}function Nf(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}class Xo extends Ra{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Mf,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Mf(e),this._firestoreClient=void 0,await e}}}function z1(n,e){const t=typeof n=="object"?n:Sm(),r=typeof n=="string"?n:Uo,i=xc(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=EE("firestore");s&&q1(i,...s)}return i}function Sy(n){if(n._terminated)throw new te(V.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||j1(n),n._firestoreClient}function j1(n){var e,t,r;const i=n._freezeSettings(),s=function(l,c,h,f){return new dI(l,c,h,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,Ay(f.experimentalLongPollingOptions),f.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new U1(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new fi(ft.fromBase64String(e))}catch(t){throw new te(V.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new fi(ft.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new te(V.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ht(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new te(V.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new te(V.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Se(this._lat,e._lat)||Se(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W1=/^__.*__$/;class K1{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Or(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ss(e,this.data,t,this.fieldTransforms)}}function Ry(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw me()}}class Eu{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Bu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new Eu(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ku({path:r,Qu:!1});return i.$u(e),i}Ku(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ku({path:r,Qu:!1});return i.Bu(),i}Uu(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return Qo(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(Ry(this.Lu)&&W1.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class X1{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Aa(e)}ju(e,t,r,i=!1){return new Eu({Lu:e,methodName:t,zu:r,path:ht.emptyPath(),Qu:!1,Gu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Cy(n){const e=n._freezeSettings(),t=Aa(n._databaseId);return new X1(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Q1(n,e,t,r,i,s={}){const o=n.ju(s.merge||s.mergeFields?2:0,e,t,i);My("Data must be an object, but it was:",o,r);const l=ky(r,o);let c,h;if(s.merge)c=new Kt(o.fieldMask),h=o.fieldTransforms;else if(s.mergeFields){const f=[];for(const p of s.mergeFields){const _=J1(e,p,t);if(!o.contains(_))throw new te(V.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);eS(f,_)||f.push(_)}c=new Kt(f),h=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,h=o.fieldTransforms;return new K1(new $t(l),c,h)}class Tu extends _u{_toFieldTransform(e){return new FI(e.path,new ms)}isEqual(e){return e instanceof Tu}}function Y1(n,e,t,r=!1){return bu(t,n.ju(r?4:3,e))}function bu(n,e){if(Py(n=Gt(n)))return My("Unsupported field value:",e,n),ky(n,e);if(n instanceof _u)return function(r,i){if(!Ry(i.Lu))throw i.Wu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Wu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const l of r){let c=bu(l,i.Uu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=Gt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return VI(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=nt.fromDate(r);return{timestampValue:qo(i.serializer,s)}}if(r instanceof nt){const s=new nt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:qo(i.serializer,s)}}if(r instanceof vu)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof fi)return{bytesValue:Qg(i.serializer,r._byteString)};if(r instanceof Ft){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Wu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:nu(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof wu)return function(o,l){return{mapValue:{fields:{[Ag]:{stringValue:Ig},[Ho]:{arrayValue:{values:o.toArray().map(h=>{if(typeof h!="number")throw l.Wu("VectorValues must only contain numeric values.");return Zc(l.serializer,h)})}}}}}}(r,i);throw i.Wu(`Unsupported field value: ${Sa(r)}`)}(n,e)}function ky(n,e){const t={};return _g(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Mr(n,(r,i)=>{const s=bu(i,e.qu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function Py(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof nt||n instanceof vu||n instanceof fi||n instanceof Ft||n instanceof _u||n instanceof wu)}function My(n,e,t){if(!Py(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const r=Sa(t);throw r==="an object"?e.Wu(n+" a custom object"):e.Wu(n+" "+r)}}function J1(n,e,t){if((e=Gt(e))instanceof yu)return e._internalPath;if(typeof e=="string")return Ny(n,e);throw Qo("Field path arguments must be of type string or ",n,!1,void 0,t)}const Z1=new RegExp("[~\\*/\\[\\]]");function Ny(n,e,t){if(e.search(Z1)>=0)throw Qo(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new yu(...e.split("."))._internalPath}catch{throw Qo(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Qo(n,e,t,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;t&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new te(V.INVALID_ARGUMENT,l+n+c)}function eS(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ft(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new tS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Au("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class tS extends Oy{data(){return super.data()}}function Au(n,e){return typeof e=="string"?Ny(n,e):e instanceof yu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nS(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new te(V.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Iu{}class Vy extends Iu{}function Of(n,e,...t){let r=[];e instanceof Iu&&r.push(e),r=r.concat(t),function(s){const o=s.filter(c=>c instanceof Su).length,l=s.filter(c=>c instanceof Du).length;if(o>1||o>0&&l>0)throw new te(V.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class Du extends Vy{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Du(e,t,r)}_apply(e){const t=this._parse(e);return Ly(e._query,t),new Lr(e.firestore,e.converter,ac(e._query,t))}_parse(e){const t=Cy(e.firestore);return function(s,o,l,c,h,f,p){let _;if(h.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new te(V.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){xf(p,f);const S=[];for(const C of p)S.push(Lf(c,s,C));_={arrayValue:{values:S}}}else _=Lf(c,s,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||xf(p,f),_=Y1(l,o,p,f==="in"||f==="not-in");return tt.create(h,f,_)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class Su extends Iu{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Su(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Jt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let o=i;const l=s.getFlattenedFilters();for(const c of l)Ly(o,c),o=ac(o,c)}(e._query,t),new Lr(e.firestore,e.converter,ac(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ru extends Vy{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Ru(e,t)}_apply(e){const t=function(i,s,o){if(i.startAt!==null)throw new te(V.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new te(V.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ps(s,o)}(e._query,this._field,this._direction);return new Lr(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new vi(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function Vf(n,e="asc"){const t=e,r=Au("orderBy",n);return Ru._create(r,t)}function Lf(n,e,t){if(typeof(t=Gt(t))=="string"){if(t==="")throw new te(V.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ng(e)&&t.indexOf("/")!==-1)throw new te(V.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child($e.fromString(t));if(!ce.isDocumentKey(r))throw new te(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Wd(n,new ce(r))}if(t instanceof Ft)return Wd(n,t._key);throw new te(V.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Sa(t)}.`)}function xf(n,e){if(!Array.isArray(n)||n.length===0)throw new te(V.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Ly(n,e){const t=function(i,s){for(const o of i)for(const l of o.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new te(V.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new te(V.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class rS{convertValue(e,t="none"){switch(sr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ze(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ir(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw me()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Mr(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;const s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Ho].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Ze(o.doubleValue));return new wu(s)}convertGeoPoint(e){return new vu(Ze(e.latitude),Ze(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=_a(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(hs(e));default:return null}}convertTimestamp(e){const t=rr(e);return new nt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=$e.fromString(e);Oe(ny(r));const i=new ds(r.get(1),r.get(3)),s=new ce(r.popFirst(5));return i.isEqual(t)||Rn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iS(n,e,t){let r;return r=n?n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class xy extends Oy{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new vo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Au("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class vo extends xy{data(e={}){return super.data(e)}}class sS{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Bi(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new vo(this._firestore,this._userDataWriter,r.key,r,new Bi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new te(V.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>{const c=new vo(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Bi(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const c=new vo(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Bi(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,f=-1;return l.type!==0&&(h=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),f=o.indexOf(l.doc.key)),{type:oS(l.type),doc:c,oldIndex:h,newIndex:f}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function oS(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return me()}}class Fy extends rS{constructor(e){super(),this.firestore=e}convertBytes(e){return new fi(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ft(this.firestore,null,t)}}function Gy(n,e){const t=es(n.firestore,Xo),r=gu(n),i=iS(n.converter,e);return aS(t,[Q1(Cy(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,bn.exists(!1))]).then(()=>r)}function Ff(n,...e){var t,r,i;n=Gt(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Nf(e[o])||(s=e[o],o++);const l={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Nf(e[o])){const p=e[o];e[o]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let c,h,f;if(n instanceof Ft)h=es(n.firestore,Xo),f=Jc(n._key.path),c={next:p=>{e[o]&&e[o](lS(h,n,p))},error:e[o+1],complete:e[o+2]};else{const p=es(n,Lr);h=es(p.firestore,Xo),f=p._query;const _=new Fy(h);c={next:A=>{e[o]&&e[o](new sS(h,_,p,A))},error:e[o+1],complete:e[o+2]},nS(n._query)}return function(_,A,S,C){const N=new G1(C),j=new w1(A,N,S);return _.asyncQueue.enqueueAndForget(async()=>g1(await If(_),j)),()=>{N.su(),_.asyncQueue.enqueueAndForget(async()=>y1(await If(_),j))}}(Sy(h),f,l,c)}function aS(n,e){return function(r,i){const s=new Ir;return r.asyncQueue.enqueueAndForget(async()=>k1(await B1(r),i,s)),s.promise}(Sy(n),e)}function lS(n,e,t){const r=t.docs.get(e._key),i=new Fy(n);return new xy(n,i,e._key,r,new Bi(t.hasPendingWrites,t.fromCache),e.converter)}function Uy(){return new Tu("serverTimestamp")}(function(e,t=!0){(function(i){gi=i})(pi),oi(new Rr("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),l=new Xo(new QA(r.getProvider("auth-internal")),new ZA(o,r.getProvider("app-check-internal")),function(h,f){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new te(V.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ds(h.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Xn(Ld,xd,e),Xn(Ld,xd,"esm2017")})();const cS={apiKey:"AIzaSyDgCFw0pkkKukL8pNtF1i8Zs6KW1llwhSQ",authDomain:"eabox-feedback.firebaseapp.com",projectId:"eabox-feedback",storageBucket:"eabox-feedback.firebasestorage.app",messagingSenderId:"950431793460",appId:"1:950431793460:web:7edd82992abd61fce52561",measurementId:"G-K64TH5TNF4"},Hy=Dm(cS),Yo=z1(Hy),Cu=jA(Hy),uS=async()=>{try{await kb(Cu),console.log("匿名登入成功！")}catch(n){console.error("匿名登入失敗：",n.message)}},hS=async n=>{if(!n.trim())return console.error("留言内容无效");const e=Cu.currentUser;e&&await Gy(Ko(Yo,"messages"),{text:n.trim(),timestamp:Uy(),user:{uid:e.uid,name:"匿名用戶"}})},dS=n=>{const e=Of(Ko(Yo,"messages"),Vf("timestamp","asc"));Ff(e,async t=>{let r=t.docs.map(i=>({id:i.id,...i.data(),replies:[]}));for(const i of r){const s=Of(Ko(gu(Yo,"messages",i.id),"replies"),Vf("timestamp","asc"));Ff(s,o=>{i.replies=o.docs.map(l=>({id:l.id,...l.data()})),n([...r])})}n(r)},t=>{console.error("加载留言失败：",t),n([])})},fS=async(n,e)=>{if(!e.trim())return console.error("回复内容无效");const t=Cu.currentUser;t&&await Gy(Ko(gu(Yo,"messages",n),"replies"),{text:e.trim(),timestamp:Uy(),user:{uid:t.uid,name:"匿名用戶"}})},pS={class:"container"},mS={id:"app"},gS={id:"message-form"},yS={id:"messages"},_S={class:"message-text"},vS=["onClick"],wS={key:0},ES=["onUpdate:modelValue"],TS=["onClick"],bS={key:1,class:"replies"},AS={class:"reply-text"},IS={__name:"Feedback",setup(n){const e=re(""),t=re([]),r=re({});Zn(async()=>{await uS(),dS(l=>{t.value=l})});const i=async()=>{e.value.trim()?(await hS(e.value),e.value=""):console.error("Message content is invalid")},s=l=>{const c=t.value.findIndex(h=>h.id===l);c!==-1&&(t.value[c]={...t.value[c],showReply:!t.value[c].showReply},r.value[l]||(r.value[l]=""))},o=async l=>{var c;(c=r.value[l])!=null&&c.trim()?(await fS(l,r.value[l]),r.value[l]=""):console.error("Reply content is invalid")};return(l,c)=>(ie(),oe("div",pS,[k("div",mS,[c[2]||(c[2]=k("h1",null,"Anonymous Message Board",-1)),k("div",gS,[ct(k("textarea",{"onUpdate:modelValue":c[0]||(c[0]=h=>e.value=h),placeholder:"Enter your message"},null,512),[[Qt,e.value]]),k("button",{onClick:i},"Send")]),k("div",yS,[(ie(!0),oe(He,null,Nt(t.value,h=>(ie(),oe("div",{key:h.id,class:"message"},[k("strong",null,We(h.user.name),1),k("p",_S,We(h.text),1),k("button",{onClick:f=>s(h.id)},"Reply",8,vS),h.showReply?(ie(),oe("div",wS,[ct(k("textarea",{"onUpdate:modelValue":f=>r.value[h.id]=f,placeholder:"Enter your reply"},null,8,ES),[[Qt,r.value[h.id]]]),k("button",{onClick:f=>o(h.id)},"Send reply",8,TS)])):It("",!0),h.replies.length?(ie(),oe("div",bS,[c[1]||(c[1]=k("h4",null,"Replies:",-1)),(ie(!0),oe(He,null,Nt(h.replies,f=>(ie(),oe("div",{key:f.id},[k("strong",null,We(f.user.name),1),k("p",AS,We(f.text),1)]))),128))])):It("",!0)]))),128))])])]))}},DS=dn(IS,[["__scopeId","data-v-0a344c7e"]]);function SS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var dl={exports:{}},Gf;function RS(){return Gf||(Gf=1,function(n){var e=function(t){var r=Object.prototype,i=r.hasOwnProperty,s=Object.defineProperty||function(G,x,z){G[x]=z.value},o,l=typeof Symbol=="function"?Symbol:{},c=l.iterator||"@@iterator",h=l.asyncIterator||"@@asyncIterator",f=l.toStringTag||"@@toStringTag";function p(G,x,z){return Object.defineProperty(G,x,{value:z,enumerable:!0,configurable:!0,writable:!0}),G[x]}try{p({},"")}catch{p=function(x,z,ne){return x[z]=ne}}function _(G,x,z,ne){var Z=x&&x.prototype instanceof $?x:$,Re=Object.create(Z.prototype),qe=new Ge(ne||[]);return s(Re,"_invoke",{value:b(G,z,qe)}),Re}t.wrap=_;function A(G,x,z){try{return{type:"normal",arg:G.call(x,z)}}catch(ne){return{type:"throw",arg:ne}}}var S="suspendedStart",C="suspendedYield",N="executing",j="completed",B={};function $(){}function F(){}function se(){}var Q={};p(Q,c,function(){return this});var v=Object.getPrototypeOf,y=v&&v(v(De([])));y&&y!==r&&i.call(y,c)&&(Q=y);var g=se.prototype=$.prototype=Object.create(Q);F.prototype=se,s(g,"constructor",{value:se,configurable:!0}),s(se,"constructor",{value:F,configurable:!0}),F.displayName=p(se,f,"GeneratorFunction");function E(G){["next","throw","return"].forEach(function(x){p(G,x,function(z){return this._invoke(x,z)})})}t.isGeneratorFunction=function(G){var x=typeof G=="function"&&G.constructor;return x?x===F||(x.displayName||x.name)==="GeneratorFunction":!1},t.mark=function(G){return Object.setPrototypeOf?Object.setPrototypeOf(G,se):(G.__proto__=se,p(G,f,"GeneratorFunction")),G.prototype=Object.create(g),G},t.awrap=function(G){return{__await:G}};function I(G,x){function z(Re,qe,ze,je){var Xe=A(G[Re],G,qe);if(Xe.type==="throw")je(Xe.arg);else{var _e=Xe.arg,fe=_e.value;return fe&&typeof fe=="object"&&i.call(fe,"__await")?x.resolve(fe.__await).then(function(Ve){z("next",Ve,ze,je)},function(Ve){z("throw",Ve,ze,je)}):x.resolve(fe).then(function(Ve){_e.value=Ve,ze(_e)},function(Ve){return z("throw",Ve,ze,je)})}}var ne;function Z(Re,qe){function ze(){return new x(function(je,Xe){z(Re,qe,je,Xe)})}return ne=ne?ne.then(ze,ze):ze()}s(this,"_invoke",{value:Z})}E(I.prototype),p(I.prototype,h,function(){return this}),t.AsyncIterator=I,t.async=function(G,x,z,ne,Z){Z===void 0&&(Z=Promise);var Re=new I(_(G,x,z,ne),Z);return t.isGeneratorFunction(x)?Re:Re.next().then(function(qe){return qe.done?qe.value:Re.next()})};function b(G,x,z){var ne=S;return function(Re,qe){if(ne===N)throw new Error("Generator is already running");if(ne===j){if(Re==="throw")throw qe;return be()}for(z.method=Re,z.arg=qe;;){var ze=z.delegate;if(ze){var je=w(ze,z);if(je){if(je===B)continue;return je}}if(z.method==="next")z.sent=z._sent=z.arg;else if(z.method==="throw"){if(ne===S)throw ne=j,z.arg;z.dispatchException(z.arg)}else z.method==="return"&&z.abrupt("return",z.arg);ne=N;var Xe=A(G,x,z);if(Xe.type==="normal"){if(ne=z.done?j:C,Xe.arg===B)continue;return{value:Xe.arg,done:z.done}}else Xe.type==="throw"&&(ne=j,z.method="throw",z.arg=Xe.arg)}}}function w(G,x){var z=x.method,ne=G.iterator[z];if(ne===o)return x.delegate=null,z==="throw"&&G.iterator.return&&(x.method="return",x.arg=o,w(G,x),x.method==="throw")||z!=="return"&&(x.method="throw",x.arg=new TypeError("The iterator does not provide a '"+z+"' method")),B;var Z=A(ne,G.iterator,x.arg);if(Z.type==="throw")return x.method="throw",x.arg=Z.arg,x.delegate=null,B;var Re=Z.arg;if(!Re)return x.method="throw",x.arg=new TypeError("iterator result is not an object"),x.delegate=null,B;if(Re.done)x[G.resultName]=Re.value,x.next=G.nextLoc,x.method!=="return"&&(x.method="next",x.arg=o);else return Re;return x.delegate=null,B}E(g),p(g,f,"Generator"),p(g,c,function(){return this}),p(g,"toString",function(){return"[object Generator]"});function we(G){var x={tryLoc:G[0]};1 in G&&(x.catchLoc=G[1]),2 in G&&(x.finallyLoc=G[2],x.afterLoc=G[3]),this.tryEntries.push(x)}function Je(G){var x=G.completion||{};x.type="normal",delete x.arg,G.completion=x}function Ge(G){this.tryEntries=[{tryLoc:"root"}],G.forEach(we,this),this.reset(!0)}t.keys=function(G){var x=Object(G),z=[];for(var ne in x)z.push(ne);return z.reverse(),function Z(){for(;z.length;){var Re=z.pop();if(Re in x)return Z.value=Re,Z.done=!1,Z}return Z.done=!0,Z}};function De(G){if(G){var x=G[c];if(x)return x.call(G);if(typeof G.next=="function")return G;if(!isNaN(G.length)){var z=-1,ne=function Z(){for(;++z<G.length;)if(i.call(G,z))return Z.value=G[z],Z.done=!1,Z;return Z.value=o,Z.done=!0,Z};return ne.next=ne}}return{next:be}}t.values=De;function be(){return{value:o,done:!0}}return Ge.prototype={constructor:Ge,reset:function(G){if(this.prev=0,this.next=0,this.sent=this._sent=o,this.done=!1,this.delegate=null,this.method="next",this.arg=o,this.tryEntries.forEach(Je),!G)for(var x in this)x.charAt(0)==="t"&&i.call(this,x)&&!isNaN(+x.slice(1))&&(this[x]=o)},stop:function(){this.done=!0;var G=this.tryEntries[0],x=G.completion;if(x.type==="throw")throw x.arg;return this.rval},dispatchException:function(G){if(this.done)throw G;var x=this;function z(je,Xe){return Re.type="throw",Re.arg=G,x.next=je,Xe&&(x.method="next",x.arg=o),!!Xe}for(var ne=this.tryEntries.length-1;ne>=0;--ne){var Z=this.tryEntries[ne],Re=Z.completion;if(Z.tryLoc==="root")return z("end");if(Z.tryLoc<=this.prev){var qe=i.call(Z,"catchLoc"),ze=i.call(Z,"finallyLoc");if(qe&&ze){if(this.prev<Z.catchLoc)return z(Z.catchLoc,!0);if(this.prev<Z.finallyLoc)return z(Z.finallyLoc)}else if(qe){if(this.prev<Z.catchLoc)return z(Z.catchLoc,!0)}else if(ze){if(this.prev<Z.finallyLoc)return z(Z.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(G,x){for(var z=this.tryEntries.length-1;z>=0;--z){var ne=this.tryEntries[z];if(ne.tryLoc<=this.prev&&i.call(ne,"finallyLoc")&&this.prev<ne.finallyLoc){var Z=ne;break}}Z&&(G==="break"||G==="continue")&&Z.tryLoc<=x&&x<=Z.finallyLoc&&(Z=null);var Re=Z?Z.completion:{};return Re.type=G,Re.arg=x,Z?(this.method="next",this.next=Z.finallyLoc,B):this.complete(Re)},complete:function(G,x){if(G.type==="throw")throw G.arg;return G.type==="break"||G.type==="continue"?this.next=G.arg:G.type==="return"?(this.rval=this.arg=G.arg,this.method="return",this.next="end"):G.type==="normal"&&x&&(this.next=x),B},finish:function(G){for(var x=this.tryEntries.length-1;x>=0;--x){var z=this.tryEntries[x];if(z.finallyLoc===G)return this.complete(z.completion,z.afterLoc),Je(z),B}},catch:function(G){for(var x=this.tryEntries.length-1;x>=0;--x){var z=this.tryEntries[x];if(z.tryLoc===G){var ne=z.completion;if(ne.type==="throw"){var Z=ne.arg;Je(z)}return Z}}throw new Error("illegal catch attempt")},delegateYield:function(G,x,z){return this.delegate={iterator:De(G),resultName:x,nextLoc:z},this.method==="next"&&(this.arg=o),B}},t}(n.exports);try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}}(dl)),dl.exports}var fl,Uf;function ku(){return Uf||(Uf=1,fl=(n,e)=>`${n}-${e}-${Math.random().toString(16).slice(3,8)}`),fl}var pl,Hf;function By(){if(Hf)return pl;Hf=1;const n=ku();let e=0;return pl=({id:t,action:r,payload:i={}})=>{let s=t;return typeof s>"u"&&(s=n("Job",e),e+=1),{id:s,action:r,payload:i}},pl}var xi={},Bf;function Pu(){if(Bf)return xi;Bf=1;let n=!1;return xi.logging=n,xi.setLogging=e=>{n=e},xi.log=(...e)=>n?console.log.apply(this,e):null,xi}var ml,$f;function CS(){if($f)return ml;$f=1;const n=By(),{log:e}=Pu(),t=ku();let r=0;return ml=()=>{const i=t("Scheduler",r),s={},o={};let l=[];r+=1;const c=()=>l.length,h=()=>Object.keys(s).length,f=()=>{if(l.length!==0){const C=Object.keys(s);for(let N=0;N<C.length;N+=1)if(typeof o[C[N]]>"u"){l[0](s[C[N]]);break}}},p=(C,N)=>new Promise((j,B)=>{const $=n({action:C,payload:N});l.push(async F=>{l.shift(),o[F.id]=$;try{j(await F[C].apply(this,[...N,$.id]))}catch(se){B(se)}finally{delete o[F.id],f()}}),e(`[${i}]: Add ${$.id} to JobQueue`),e(`[${i}]: JobQueue length=${l.length}`),f()});return{addWorker:C=>(s[C.id]=C,e(`[${i}]: Add ${C.id}`),e(`[${i}]: Number of workers=${h()}`),f(),C.id),addJob:async(C,...N)=>{if(h()===0)throw Error(`[${i}]: You need to have at least one worker before adding jobs`);return p(C,N)},terminate:async()=>{Object.keys(s).forEach(async C=>{await s[C].terminate()}),l=[]},getQueueLen:c,getNumWorkers:h}},ml}function kS(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var gl,qf;function PS(){return qf||(qf=1,gl=n=>{const e={};return typeof WorkerGlobalScope<"u"?e.type="webworker":typeof document=="object"?e.type="browser":typeof process=="object"&&typeof kS=="function"&&(e.type="node"),typeof n>"u"?e:e[n]}),gl}var yl,zf;function MS(){if(zf)return yl;zf=1;const e=PS()("type")==="browser"?t=>new URL(t,window.location.href).href:t=>t;return yl=t=>{const r={...t};return["corePath","workerPath","langPath"].forEach(i=>{t[i]&&(r[i]=e(r[i]))}),r},yl}var _l,jf;function $y(){return jf||(jf=1,_l={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}),_l}const NS="6.0.0",OS={version:NS};var vl,Wf;function VS(){return Wf||(Wf=1,vl={workerBlobURL:!0,logger:()=>{}}),vl}var wl,Kf;function LS(){if(Kf)return wl;Kf=1;const n=OS.version;return wl={...VS(),workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${n}/dist/worker.min.js`},wl}var El,Xf;function xS(){return Xf||(Xf=1,El=({workerPath:n,workerBlobURL:e})=>{let t;if(Blob&&URL&&e){const r=new Blob([`importScripts("${n}");`],{type:"application/javascript"});t=new Worker(URL.createObjectURL(r))}else t=new Worker(n);return t}),El}var Tl,Qf;function FS(){return Qf||(Qf=1,Tl=n=>{n.terminate()}),Tl}var bl,Yf;function GS(){return Yf||(Yf=1,bl=(n,e)=>{n.onmessage=({data:t})=>{e(t)}}),bl}var Al,Jf;function US(){return Jf||(Jf=1,Al=async(n,e)=>{n.postMessage(e)}),Al}var Il,Zf;function HS(){if(Zf)return Il;Zf=1;const n=t=>new Promise((r,i)=>{const s=new FileReader;s.onload=()=>{r(s.result)},s.onerror=({target:{error:{code:o}}})=>{i(Error(`File could not be read! Code=${o}`))},s.readAsArrayBuffer(t)}),e=async t=>{let r=t;if(typeof t>"u")return"undefined";if(typeof t=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(t)?r=atob(t.split(",")[1]).split("").map(i=>i.charCodeAt(0)):r=await(await fetch(t)).arrayBuffer();else if(typeof HTMLElement<"u"&&t instanceof HTMLElement)t.tagName==="IMG"&&(r=await e(t.src)),t.tagName==="VIDEO"&&(r=await e(t.poster)),t.tagName==="CANVAS"&&await new Promise(i=>{t.toBlob(async s=>{r=await n(s),i()})});else if(typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas){const i=await t.convertToBlob();r=await n(i)}else(t instanceof File||t instanceof Blob)&&(r=await n(t));return new Uint8Array(r)};return Il=e,Il}var Dl,ep;function BS(){if(ep)return Dl;ep=1;const n=LS(),e=xS(),t=FS(),r=GS(),i=US(),s=HS();return Dl={defaultOptions:n,spawnWorker:e,terminateWorker:t,onMessage:r,send:i,loadImage:s},Dl}var Sl,tp;function qy(){if(tp)return Sl;tp=1;const n=MS(),e=By(),{log:t}=Pu(),r=ku(),i=$y(),{defaultOptions:s,spawnWorker:o,terminateWorker:l,onMessage:c,loadImage:h,send:f}=BS();let p=0;return Sl=async(_="eng",A=i.LSTM_ONLY,S={},C={})=>{const N=r("Worker",p),{logger:j,errorHandler:B,...$}=n({...s,...S}),F={},se=typeof _=="string"?_.split("+"):_;let Q=A,v=C;const y=[i.DEFAULT,i.LSTM_ONLY].includes(A)&&!$.legacyCore;let g,E;const I=new Promise((_e,fe)=>{E=_e,g=fe}),b=_e=>{g(_e.message)};let w=o($);w.onerror=b,p+=1;const we=({id:_e,action:fe,payload:Ve})=>new Promise((T,D)=>{t(`[${N}]: Start ${_e}, action=${fe}`);const P=`${fe}-${_e}`;F[P]={resolve:T,reject:D},f(w,{workerId:N,jobId:_e,action:fe,payload:Ve})}),Je=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),Ge=_e=>we(e({id:_e,action:"load",payload:{options:{lstmOnly:y,corePath:$.corePath,logging:$.logging}}})),De=(_e,fe,Ve)=>we(e({id:Ve,action:"FS",payload:{method:"writeFile",args:[_e,fe]}})),be=(_e,fe)=>we(e({id:fe,action:"FS",payload:{method:"readFile",args:[_e,{encoding:"utf8"}]}})),G=(_e,fe)=>we(e({id:fe,action:"FS",payload:{method:"unlink",args:[_e]}})),x=(_e,fe,Ve)=>we(e({id:Ve,action:"FS",payload:{method:_e,args:fe}})),z=(_e,fe)=>we(e({id:fe,action:"loadLanguage",payload:{langs:_e,options:{langPath:$.langPath,dataPath:$.dataPath,cachePath:$.cachePath,cacheMethod:$.cacheMethod,gzip:$.gzip,lstmOnly:[i.DEFAULT,i.LSTM_ONLY].includes(Q)&&!$.legacyLang}}})),ne=(_e,fe,Ve,T)=>we(e({id:T,action:"initialize",payload:{langs:_e,oem:fe,config:Ve}})),Z=(_e="eng",fe,Ve,T)=>{if(y&&[i.TESSERACT_ONLY,i.TESSERACT_LSTM_COMBINED].includes(fe))throw Error("Legacy model requested but code missing.");const D=fe||Q;Q=D;const P=Ve||v;v=P;const L=(typeof _e=="string"?_e.split("+"):_e).filter(U=>!se.includes(U));return se.push(...L),L.length>0?z(L,T).then(()=>ne(_e,D,P,T)):ne(_e,D,P,T)},Re=(_e={},fe)=>we(e({id:fe,action:"setParameters",payload:{params:_e}})),qe=async(_e,fe={},Ve={text:!0},T)=>we(e({id:T,action:"recognize",payload:{image:await h(_e),options:fe,output:Ve}})),ze=async(_e,fe)=>{if(y)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return we(e({id:fe,action:"detect",payload:{image:await h(_e)}}))},je=async()=>(w!==null&&(l(w),w=null),Promise.resolve());c(w,({workerId:_e,jobId:fe,status:Ve,action:T,data:D})=>{const P=`${T}-${fe}`;if(Ve==="resolve")t(`[${_e}]: Complete ${fe}`),F[P].resolve({jobId:fe,data:D}),delete F[P];else if(Ve==="reject")if(F[P].reject(D),delete F[P],T==="load"&&g(D),B)B(D);else throw Error(D);else Ve==="progress"&&j({...D,userJobId:fe})});const Xe={id:N,worker:w,load:Je,writeText:De,readText:be,removeFile:G,FS:x,reinitialize:Z,setParameters:Re,recognize:qe,detect:ze,terminate:je};return Ge().then(()=>z(_)).then(()=>ne(_,A,C)).then(()=>E(Xe)).catch(()=>{}),I},Sl}var Rl,np;function $S(){if(np)return Rl;np=1;const n=qy();return Rl={recognize:async(r,i,s)=>{const o=await n(i,1,s);return o.recognize(r).finally(async()=>{await o.terminate()})},detect:async(r,i)=>{const s=await n("osd",0,i);return s.detect(r).finally(async()=>{await s.terminate()})}},Rl}var Cl,rp;function qS(){return rp||(rp=1,Cl={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}),Cl}var kl,ip;function zS(){return ip||(ip=1,kl={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}),kl}var Pl,sp;function jS(){if(sp)return Pl;sp=1,RS();const n=CS(),e=qy(),t=$S(),r=qS(),i=$y(),s=zS(),{setLogging:o}=Pu();return Pl={languages:r,OEM:i,PSM:s,createScheduler:n,createWorker:e,setLogging:o,...t},Pl}var WS=jS();const Ml=SS(WS),KS={class:"ocr-container"},XS={class:"upload-section"},QS={class:"url-input"},YS={key:0,class:"image-container"},JS=["disabled"],ZS={key:1,class:"result"},eR={key:2,class:"error"},tR={__name:"cardOCR",setup(n){const e=re(null),t=re(null),r=re(null),i=re(""),s=re(""),o=re(!1),l=re(null),c=re(!1),h=re(0),f=re(0),p=re({x:0,y:0,width:0,height:0}),_=re({x:156.93746948242188,y:24.944427490234375,width:270,height:56}),A=re({x:113.93746948242188,y:655.1666870117188,width:360,height:160}),S=Q=>{const v=Q.target.files[0];v&&(r.value=URL.createObjectURL(v),s.value="",l.value=null,bo(()=>N()))},C=async()=>{if(!i.value){l.value="請輸入有效的圖片網址";return}o.value=!0,l.value=null,s.value="";try{const Q=new Image;Q.crossOrigin="Anonymous",await new Promise((v,y)=>{Q.onload=v,Q.onerror=y,Q.src=i.value}),r.value=i.value,bo(()=>N())}catch{l.value="無法載入圖片，請檢查網址是否正確"}finally{o.value=!1}},N=()=>{const Q=t.value.getContext("2d"),v=new Image;v.crossOrigin="Anonymous",v.onload=()=>{t.value.width=v.width,t.value.height=v.height,Q.drawImage(v,0,0)},v.onerror=()=>{l.value="圖片載入失敗"},v.src=r.value},j=Q=>{c.value=!0;const v=t.value.getBoundingClientRect();h.value=Q.clientX-v.left,f.value=Q.clientY-v.top},B=Q=>{if(!c.value)return;const v=t.value.getContext("2d"),y=t.value.getBoundingClientRect(),g=Q.clientX-y.left,E=Q.clientY-y.top;p.value.x=Math.min(h.value,g),p.value.y=Math.min(f.value,E),p.value.width=Math.abs(g-h.value),p.value.height=Math.abs(E-f.value);const I=new Image;I.crossOrigin="Anonymous",I.onload=()=>{v.clearRect(0,0,t.value.width,t.value.height),v.drawImage(I,0,0),v.strokeStyle="red",v.lineWidth=2,v.strokeRect(p.value.x,p.value.y,p.value.width,p.value.height)},I.src=r.value},$=()=>{c.value=!1},F=async()=>{if(r.value){o.value=!0,l.value=null;try{const Q=t.value.getContext("2d");let v="";if(p.value.x===0&&p.value.y===0&&p.value.width===0&&p.value.height===0){const y=Q.getImageData(_.value.x,_.value.y,_.value.width,_.value.height),g=Q.getImageData(A.value.x,A.value.y,A.value.width,A.value.height),E=document.createElement("canvas");E.width=_.value.width,E.height=_.value.height,E.getContext("2d").putImageData(y,0,0);const I=document.createElement("canvas");I.width=A.value.width,I.height=A.value.height,I.getContext("2d").putImageData(g,0,0);const b=await Ml.recognize(E,"chi_tra+eng",{logger:we=>console.log(we)}),w=await Ml.recognize(I,"chi_tra+eng",{logger:we=>console.log(we)});v=`${b.data.text}

${w.data.text}`}else{const y=Q.getImageData(p.value.x,p.value.y,p.value.width,p.value.height),g=document.createElement("canvas");g.width=p.value.width,g.height=p.value.height,g.getContext("2d").putImageData(y,0,0);const{data:{text:E}}=await Ml.recognize(g,"chi_tra+eng",{logger:I=>console.log(I)});v=E}s.value=v}catch(Q){l.value="文字辨識失敗："+Q.message}finally{o.value=!1}}},se=()=>{r.value=null,s.value="",l.value=null,p.value={x:0,y:0,width:0,height:0},i.value="",e.value&&(e.value.value="")};return Jr(()=>{r.value&&r.value.startsWith("blob:")&&URL.revokeObjectURL(r.value)}),(Q,v)=>(ie(),oe("div",KS,[v[2]||(v[2]=k("h2",null,"圖片文字辨識",-1)),k("div",XS,[k("input",{type:"file",accept:"image/*",onChange:S,ref_key:"fileInput",ref:e},null,544),k("div",QS,[ct(k("input",{type:"text","onUpdate:modelValue":v[0]||(v[0]=y=>i.value=y),placeholder:"輸入圖片網址",onKeyup:Bw(C,["enter"])},null,544),[[Qt,i.value]]),k("button",{onClick:C},"載入")])]),r.value?(ie(),oe("div",YS,[k("canvas",{ref_key:"canvas",ref:t,onMousedown:j,onMousemove:B,onMouseup:$},null,544)])):It("",!0),k("button",{disabled:!r.value||o.value,onClick:F},We(o.value?"辨識中...":"開始辨識"),9,JS),k("button",{onClick:se,class:"clear-button"}," 清除 "),s.value?(ie(),oe("div",ZS,[v[1]||(v[1]=k("h3",null,"辨識結果：",-1)),k("pre",null,We(s.value),1)])):It("",!0),l.value?(ie(),oe("div",eR,We(l.value),1)):It("",!0)]))}},nR=dn(tR,[["__scopeId","data-v-c8ecccca"]]),rR={class:"image-grid"},iR=["src"],sR={class:"image-grid"},oR=["src","alt"],aR={__name:"EquipImageSearch",setup(n){const e=re(""),t=re([]),r=re(["http://static.eredan.com/images/print/0e700fca41e768b1092a61370e58b823.png","http://static.eredan.com/images/print/2dc4fd25330f0b4290a869a6b06e8fbd.png","https://images-ext-2.discordapp.net/external/lbVY7VAMB9v-eLX3yVZ5KAwsneETchYwt7GeZOu8Nfw/http/static.eredan.com/images/web_big/037727064d89b993dd6e70a473fcebaf.png","http://static.eredan.com/images/print/5d09cf7da1d1356342da54478f260825.jpg","http://static.eredan.com/images/print/517ae72f6f1dedfad3ad7f83eecb5e9c.png"]),i=()=>{console.log(e.value);const o={id:e.value,url:"https://www.eredan-arena.com/images/HD/items/"+e.value+".png"};t.value.push(o),e.value++},s=()=>{t.value=[]};return(o,l)=>(ie(),oe(He,null,[l[1]||(l[1]=k("p",null,"Equip image search",-1)),k("div",rR,[(ie(!0),oe(He,null,Nt(r.value,c=>(ie(),oe("div",{key:o.index,class:"image-container"},[k("img",{src:c,class:"image"},null,8,iR)]))),128))]),ct(k("input",{type:"text","onUpdate:modelValue":l[0]||(l[0]=c=>e.value=c)},null,512),[[Qt,e.value]]),k("button",{onClick:i},"add"),k("button",{onClick:s},"cls"),k("div",sR,[(ie(!0),oe(He,null,Nt(t.value,(c,h)=>(ie(),oe("div",{key:h,class:"image-container"},[k("p",null,We(c.id),1),k("img",{src:c.url,alt:c.alt,class:"image"},null,8,oR)]))),128))])],64))}},lR=dn(aR,[["__scopeId","data-v-1fb7e061"]]),cR={class:"min-h-screen flex flex-col"},uR={class:"container_home"},hR={class:"logo"},dR=["onClick"],fR={__name:"Home",setup(n){const e=re(""),t=()=>{e.value=window.location.hash.replace("#","")};Zn(()=>{t(),window.addEventListener("hashchange",t)}),Jr(()=>{window.removeEventListener("hashchange",t)});const r=re(!0),i=re(0),s=re(!1),o=re(!1),l=re(0),c=re(null),h={intro:en(Jw),CardFilter:en(c0),SkillShow:en(S0),EquipShow:en(j0),AddData:en(iE),AddCard:en(dE),Feedback:en(DS),cardOCR:en(nR),EquipImageSearch:en(lR)},f=re(h.intro),p=re([]),_=()=>{e.value==="123"?p.value=[{vue:"AddData",name:"AddData"},{vue:"AddCard",name:"AddCard"},{vue:"EquipImageSearch",name:"EquipImg"},{vue:"cardOCR",name:"OCR"}]:p.value=[{vue:"CardFilter",name:"Card"},{vue:"SkillShow",name:"Skill"},{vue:"EquipShow",name:"Equip"},{vue:"Feedback",name:"Feedback"}]};so(e,_),_();const A=B=>{f.value=h[B],s.value=!1};let S;const C=()=>{const B=window.scrollY;clearTimeout(S),S=setTimeout(()=>{B>i.value&&B>100?r.value=!1:r.value=!0,o.value=B>200,i.value=B},100)},N=()=>{window.scrollTo({top:0,behavior:"smooth"})},j=()=>{s.value=!s.value};return Zn(()=>{const B=new ResizeObserver($=>{for(let F of $)l.value=F.contentRect.height});c.value&&B.observe(c.value),Jr(()=>{B.disconnect()}),window.addEventListener("scroll",C)}),Jr(()=>{window.removeEventListener("scroll",C)}),(B,$)=>(ie(),oe("div",cR,[k("nav",{ref_key:"navbarRef",ref:c,class:An(["navbar",{"navbar-hidden":!r.value}])},[k("div",uR,[k("div",hR,[k("a",{href:"#",onClick:$[0]||($[0]=sd(F=>A("intro"),["prevent"]))},$[1]||($[1]=[k("img",{src:Kw},null,-1)]))]),k("button",{class:"menu-toggle",onClick:j},"☰"),k("ul",{class:An({"nav-links":!0,"show-menu":s.value})},[(ie(!0),oe(He,null,Nt(p.value,F=>(ie(),oe("li",{key:F["1st"]},[k("a",{href:"#",onClick:sd(se=>A(F.vue),["prevent"])},We(F.name),9,dR)]))),128))],2)])],2),bt(vw,{name:"fade"},{default:Pc(()=>[ct(k("button",{onClick:N,class:"back-to-top"}," ⬆ ",512),[[zl,o.value]])]),_:1}),k("main",{class:"main",style:vs({paddingTop:`${l.value+32}px`})},[(ie(),Nc(Ev(f.value)))],4),$[2]||($[2]=k("footer",{class:"footer"}," Copyright © 2025 Eredan-Arena-Box. ",-1))]))}},pR=dn(fR,[["__scopeId","data-v-40abe7b2"]]),mR={__name:"App",setup(n){return(e,t)=>(ie(),Nc(pR))}};zw(mR).mount("#app");
