(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Kl(n){const e=Object.create(null);for(const t of n.split(","))e[t]=1;return t=>t in e}const Se={},zr=[],Wt=()=>{},wy=()=>!1,Ko=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),Xl=n=>n.startsWith("onUpdate:"),Ze=Object.assign,Ql=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},Ey=Object.prototype.hasOwnProperty,be=(n,e)=>Ey.call(n,e),ie=Array.isArray,jr=n=>ms(n)==="[object Map]",Xo=n=>ms(n)==="[object Set]",Yu=n=>ms(n)==="[object Date]",fe=n=>typeof n=="function",Le=n=>typeof n=="string",Zt=n=>typeof n=="symbol",Re=n=>n!==null&&typeof n=="object",ff=n=>(Re(n)||fe(n))&&fe(n.then)&&fe(n.catch),pf=Object.prototype.toString,ms=n=>pf.call(n),Ty=n=>ms(n).slice(8,-1),mf=n=>ms(n)==="[object Object]",Yl=n=>Le(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,Gi=Kl(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Qo=n=>{const e=Object.create(null);return t=>e[t]||(e[t]=n(t))},by=/-(\w)/g,Nt=Qo(n=>n.replace(by,(e,t)=>t?t.toUpperCase():"")),Ay=/\B([A-Z])/g,Sr=Qo(n=>n.replace(Ay,"-$1").toLowerCase()),Yo=Qo(n=>n.charAt(0).toUpperCase()+n.slice(1)),Ua=Qo(n=>n?`on${Yo(n)}`:""),Gn=(n,e)=>!Object.is(n,e),to=(n,...e)=>{for(let t=0;t<n.length;t++)n[t](...e)},gf=(n,e,t,r=!1)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,writable:r,value:t})},yo=n=>{const e=parseFloat(n);return isNaN(e)?n:e},Iy=n=>{const e=Le(n)?Number(n):NaN;return isNaN(e)?n:e};let Ju;const Jo=()=>Ju||(Ju=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function gs(n){if(ie(n)){const e={};for(let t=0;t<n.length;t++){const r=n[t],i=Le(r)?Cy(r):gs(r);if(i)for(const s in i)e[s]=i[s]}return e}else if(Le(n)||Re(n))return n}const Dy=/;(?![^(]*\))/g,Sy=/:([^]+)/,Ry=/\/\*[^]*?\*\//g;function Cy(n){const e={};return n.replace(Ry,"").split(Dy).forEach(t=>{if(t){const r=t.split(Sy);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function gn(n){let e="";if(Le(n))e=n;else if(ie(n))for(let t=0;t<n.length;t++){const r=gn(n[t]);r&&(e+=r+" ")}else if(Re(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}const ky="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Py=Kl(ky);function yf(n){return!!n||n===""}function My(n,e){if(n.length!==e.length)return!1;let t=!0;for(let r=0;t&&r<n.length;r++)t=Zo(n[r],e[r]);return t}function Zo(n,e){if(n===e)return!0;let t=Yu(n),r=Yu(e);if(t||r)return t&&r?n.getTime()===e.getTime():!1;if(t=Zt(n),r=Zt(e),t||r)return n===e;if(t=ie(n),r=ie(e),t||r)return t&&r?My(n,e):!1;if(t=Re(n),r=Re(e),t||r){if(!t||!r)return!1;const i=Object.keys(n).length,s=Object.keys(e).length;if(i!==s)return!1;for(const a in n){const l=n.hasOwnProperty(a),c=e.hasOwnProperty(a);if(l&&!c||!l&&c||!Zo(n[a],e[a]))return!1}}return String(n)===String(e)}function Vy(n,e){return n.findIndex(t=>Zo(t,e))}const _f=n=>!!(n&&n.__v_isRef===!0),Ue=n=>Le(n)?n:n==null?"":ie(n)||Re(n)&&(n.toString===pf||!fe(n.toString))?_f(n)?Ue(n.value):JSON.stringify(n,vf,2):String(n),vf=(n,e)=>_f(e)?vf(n,e.value):jr(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[r,i],s)=>(t[Ba(r,s)+" =>"]=i,t),{})}:Xo(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>Ba(t))}:Zt(e)?Ba(e):Re(e)&&!ie(e)&&!mf(e)?String(e):e,Ba=(n,e="")=>{var t;return Zt(n)?`Symbol(${(t=n.description)!=null?t:e})`:n};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let At;class Ny{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=At,!e&&At&&(this.index=(At.scopes||(At.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=At;try{return At=this,e()}finally{At=t}}}on(){At=this}off(){At=this.parent}stop(e){if(this._active){this._active=!1;let t,r;for(t=0,r=this.effects.length;t<r;t++)this.effects[t].stop();for(this.effects.length=0,t=0,r=this.cleanups.length;t<r;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function Oy(){return At}let ke;const $a=new WeakSet;class wf{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,At&&At.active&&At.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,$a.has(this)&&($a.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Tf(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Zu(this),bf(this);const e=ke,t=Gt;ke=this,Gt=!0;try{return this.fn()}finally{Af(this),ke=e,Gt=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)ec(e);this.deps=this.depsTail=void 0,Zu(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?$a.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){ul(this)&&this.run()}get dirty(){return ul(this)}}let Ef=0,Hi,Ui;function Tf(n,e=!1){if(n.flags|=8,e){n.next=Ui,Ui=n;return}n.next=Hi,Hi=n}function Jl(){Ef++}function Zl(){if(--Ef>0)return;if(Ui){let e=Ui;for(Ui=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let n;for(;Hi;){let e=Hi;for(Hi=void 0;e;){const t=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){n||(n=r)}e=t}}if(n)throw n}function bf(n){for(let e=n.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Af(n){let e,t=n.depsTail,r=t;for(;r;){const i=r.prevDep;r.version===-1?(r===t&&(t=i),ec(r),Ly(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}n.deps=e,n.depsTail=t}function ul(n){for(let e=n.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(If(e.dep.computed)||e.dep.version!==e.version))return!0;return!!n._dirty}function If(n){if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===Ji))return;n.globalVersion=Ji;const e=n.dep;if(n.flags|=2,e.version>0&&!n.isSSR&&n.deps&&!ul(n)){n.flags&=-3;return}const t=ke,r=Gt;ke=n,Gt=!0;try{bf(n);const i=n.fn(n._value);(e.version===0||Gn(i,n._value))&&(n._value=i,e.version++)}catch(i){throw e.version++,i}finally{ke=t,Gt=r,Af(n),n.flags&=-3}}function ec(n,e=!1){const{dep:t,prevSub:r,nextSub:i}=n;if(r&&(r.nextSub=i,n.prevSub=void 0),i&&(i.prevSub=r,n.nextSub=void 0),t.subs===n&&(t.subs=r,!r&&t.computed)){t.computed.flags&=-5;for(let s=t.computed.deps;s;s=s.nextDep)ec(s,!0)}!e&&!--t.sc&&t.map&&t.map.delete(t.key)}function Ly(n){const{prevDep:e,nextDep:t}=n;e&&(e.nextDep=t,n.prevDep=void 0),t&&(t.prevDep=e,n.nextDep=void 0)}let Gt=!0;const Df=[];function tr(){Df.push(Gt),Gt=!1}function nr(){const n=Df.pop();Gt=n===void 0?!0:n}function Zu(n){const{cleanup:e}=n;if(n.cleanup=void 0,e){const t=ke;ke=void 0;try{e()}finally{ke=t}}}let Ji=0;class xy{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class tc{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!ke||!Gt||ke===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==ke)t=this.activeLink=new xy(ke,this),ke.deps?(t.prevDep=ke.depsTail,ke.depsTail.nextDep=t,ke.depsTail=t):ke.deps=ke.depsTail=t,Sf(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const r=t.nextDep;r.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=r),t.prevDep=ke.depsTail,t.nextDep=void 0,ke.depsTail.nextDep=t,ke.depsTail=t,ke.deps===t&&(ke.deps=r)}return t}trigger(e){this.version++,Ji++,this.notify(e)}notify(e){Jl();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{Zl()}}}function Sf(n){if(n.dep.sc++,n.sub.flags&4){const e=n.dep.computed;if(e&&!n.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)Sf(r)}const t=n.dep.subs;t!==n&&(n.prevSub=t,t&&(t.nextSub=n)),n.dep.subs=n}}const hl=new WeakMap,vr=Symbol(""),dl=Symbol(""),Zi=Symbol("");function at(n,e,t){if(Gt&&ke){let r=hl.get(n);r||hl.set(n,r=new Map);let i=r.get(t);i||(r.set(t,i=new tc),i.map=r,i.key=t),i.track()}}function un(n,e,t,r,i,s){const a=hl.get(n);if(!a){Ji++;return}const l=c=>{c&&c.trigger()};if(Jl(),e==="clear")a.forEach(l);else{const c=ie(n),h=c&&Yl(t);if(c&&t==="length"){const f=Number(r);a.forEach((p,_)=>{(_==="length"||_===Zi||!Zt(_)&&_>=f)&&l(p)})}else switch((t!==void 0||a.has(void 0))&&l(a.get(t)),h&&l(a.get(Zi)),e){case"add":c?h&&l(a.get("length")):(l(a.get(vr)),jr(n)&&l(a.get(dl)));break;case"delete":c||(l(a.get(vr)),jr(n)&&l(a.get(dl)));break;case"set":jr(n)&&l(a.get(vr));break}}Zl()}function xr(n){const e=Te(n);return e===n?e:(at(e,"iterate",Zi),Vt(n)?e:e.map(lt))}function ea(n){return at(n=Te(n),"iterate",Zi),n}const Fy={__proto__:null,[Symbol.iterator](){return za(this,Symbol.iterator,lt)},concat(...n){return xr(this).concat(...n.map(e=>ie(e)?xr(e):e))},entries(){return za(this,"entries",n=>(n[1]=lt(n[1]),n))},every(n,e){return on(this,"every",n,e,void 0,arguments)},filter(n,e){return on(this,"filter",n,e,t=>t.map(lt),arguments)},find(n,e){return on(this,"find",n,e,lt,arguments)},findIndex(n,e){return on(this,"findIndex",n,e,void 0,arguments)},findLast(n,e){return on(this,"findLast",n,e,lt,arguments)},findLastIndex(n,e){return on(this,"findLastIndex",n,e,void 0,arguments)},forEach(n,e){return on(this,"forEach",n,e,void 0,arguments)},includes(...n){return ja(this,"includes",n)},indexOf(...n){return ja(this,"indexOf",n)},join(n){return xr(this).join(n)},lastIndexOf(...n){return ja(this,"lastIndexOf",n)},map(n,e){return on(this,"map",n,e,void 0,arguments)},pop(){return Pi(this,"pop")},push(...n){return Pi(this,"push",n)},reduce(n,...e){return eh(this,"reduce",n,e)},reduceRight(n,...e){return eh(this,"reduceRight",n,e)},shift(){return Pi(this,"shift")},some(n,e){return on(this,"some",n,e,void 0,arguments)},splice(...n){return Pi(this,"splice",n)},toReversed(){return xr(this).toReversed()},toSorted(n){return xr(this).toSorted(n)},toSpliced(...n){return xr(this).toSpliced(...n)},unshift(...n){return Pi(this,"unshift",n)},values(){return za(this,"values",lt)}};function za(n,e,t){const r=ea(n),i=r[e]();return r!==n&&!Vt(n)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.value&&(s.value=t(s.value)),s}),i}const Gy=Array.prototype;function on(n,e,t,r,i,s){const a=ea(n),l=a!==n&&!Vt(n),c=a[e];if(c!==Gy[e]){const p=c.apply(n,s);return l?lt(p):p}let h=t;a!==n&&(l?h=function(p,_){return t.call(this,lt(p),_,n)}:t.length>2&&(h=function(p,_){return t.call(this,p,_,n)}));const f=c.call(a,h,r);return l&&i?i(f):f}function eh(n,e,t,r){const i=ea(n);let s=t;return i!==n&&(Vt(n)?t.length>3&&(s=function(a,l,c){return t.call(this,a,l,c,n)}):s=function(a,l,c){return t.call(this,a,lt(l),c,n)}),i[e](s,...r)}function ja(n,e,t){const r=Te(n);at(r,"iterate",Zi);const i=r[e](...t);return(i===-1||i===!1)&&sc(t[0])?(t[0]=Te(t[0]),r[e](...t)):i}function Pi(n,e,t=[]){tr(),Jl();const r=Te(n)[e].apply(n,t);return Zl(),nr(),r}const Hy=Kl("__proto__,__v_isRef,__isVue"),Rf=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(Zt));function Uy(n){Zt(n)||(n=String(n));const e=Te(this);return at(e,"has",n),e.hasOwnProperty(n)}class Cf{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,r){if(t==="__v_skip")return e.__v_skip;const i=this._isReadonly,s=this._isShallow;if(t==="__v_isReactive")return!i;if(t==="__v_isReadonly")return i;if(t==="__v_isShallow")return s;if(t==="__v_raw")return r===(i?s?Yy:Vf:s?Mf:Pf).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const a=ie(e);if(!i){let c;if(a&&(c=Fy[t]))return c;if(t==="hasOwnProperty")return Uy}const l=Reflect.get(e,t,ht(e)?e:r);return(Zt(t)?Rf.has(t):Hy(t))||(i||at(e,"get",t),s)?l:ht(l)?a&&Yl(t)?l:l.value:Re(l)?i?Nf(l):rc(l):l}}class kf extends Cf{constructor(e=!1){super(!1,e)}set(e,t,r,i){let s=e[t];if(!this._isShallow){const c=Er(s);if(!Vt(r)&&!Er(r)&&(s=Te(s),r=Te(r)),!ie(e)&&ht(s)&&!ht(r))return c?!1:(s.value=r,!0)}const a=ie(e)&&Yl(t)?Number(t)<e.length:be(e,t),l=Reflect.set(e,t,r,ht(e)?e:i);return e===Te(i)&&(a?Gn(r,s)&&un(e,"set",t,r):un(e,"add",t,r)),l}deleteProperty(e,t){const r=be(e,t);e[t];const i=Reflect.deleteProperty(e,t);return i&&r&&un(e,"delete",t,void 0),i}has(e,t){const r=Reflect.has(e,t);return(!Zt(t)||!Rf.has(t))&&at(e,"has",t),r}ownKeys(e){return at(e,"iterate",ie(e)?"length":vr),Reflect.ownKeys(e)}}class By extends Cf{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const $y=new kf,zy=new By,jy=new kf(!0);const fl=n=>n,js=n=>Reflect.getPrototypeOf(n);function qy(n,e,t){return function(...r){const i=this.__v_raw,s=Te(i),a=jr(s),l=n==="entries"||n===Symbol.iterator&&a,c=n==="keys"&&a,h=i[n](...r),f=t?fl:e?pl:lt;return!e&&at(s,"iterate",c?dl:vr),{next(){const{value:p,done:_}=h.next();return _?{value:p,done:_}:{value:l?[f(p[0]),f(p[1])]:f(p),done:_}},[Symbol.iterator](){return this}}}}function qs(n){return function(...e){return n==="delete"?!1:n==="clear"?void 0:this}}function Wy(n,e){const t={get(i){const s=this.__v_raw,a=Te(s),l=Te(i);n||(Gn(i,l)&&at(a,"get",i),at(a,"get",l));const{has:c}=js(a),h=e?fl:n?pl:lt;if(c.call(a,i))return h(s.get(i));if(c.call(a,l))return h(s.get(l));s!==a&&s.get(i)},get size(){const i=this.__v_raw;return!n&&at(Te(i),"iterate",vr),Reflect.get(i,"size",i)},has(i){const s=this.__v_raw,a=Te(s),l=Te(i);return n||(Gn(i,l)&&at(a,"has",i),at(a,"has",l)),i===l?s.has(i):s.has(i)||s.has(l)},forEach(i,s){const a=this,l=a.__v_raw,c=Te(l),h=e?fl:n?pl:lt;return!n&&at(c,"iterate",vr),l.forEach((f,p)=>i.call(s,h(f),h(p),a))}};return Ze(t,n?{add:qs("add"),set:qs("set"),delete:qs("delete"),clear:qs("clear")}:{add(i){!e&&!Vt(i)&&!Er(i)&&(i=Te(i));const s=Te(this);return js(s).has.call(s,i)||(s.add(i),un(s,"add",i,i)),this},set(i,s){!e&&!Vt(s)&&!Er(s)&&(s=Te(s));const a=Te(this),{has:l,get:c}=js(a);let h=l.call(a,i);h||(i=Te(i),h=l.call(a,i));const f=c.call(a,i);return a.set(i,s),h?Gn(s,f)&&un(a,"set",i,s):un(a,"add",i,s),this},delete(i){const s=Te(this),{has:a,get:l}=js(s);let c=a.call(s,i);c||(i=Te(i),c=a.call(s,i)),l&&l.call(s,i);const h=s.delete(i);return c&&un(s,"delete",i,void 0),h},clear(){const i=Te(this),s=i.size!==0,a=i.clear();return s&&un(i,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=qy(i,n,e)}),t}function nc(n,e){const t=Wy(n,e);return(r,i,s)=>i==="__v_isReactive"?!n:i==="__v_isReadonly"?n:i==="__v_raw"?r:Reflect.get(be(t,i)&&i in r?t:r,i,s)}const Ky={get:nc(!1,!1)},Xy={get:nc(!1,!0)},Qy={get:nc(!0,!1)};const Pf=new WeakMap,Mf=new WeakMap,Vf=new WeakMap,Yy=new WeakMap;function Jy(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Zy(n){return n.__v_skip||!Object.isExtensible(n)?0:Jy(Ty(n))}function rc(n){return Er(n)?n:ic(n,!1,$y,Ky,Pf)}function e_(n){return ic(n,!1,jy,Xy,Mf)}function Nf(n){return ic(n,!0,zy,Qy,Vf)}function ic(n,e,t,r,i){if(!Re(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const s=i.get(n);if(s)return s;const a=Zy(n);if(a===0)return n;const l=new Proxy(n,a===2?r:t);return i.set(n,l),l}function qr(n){return Er(n)?qr(n.__v_raw):!!(n&&n.__v_isReactive)}function Er(n){return!!(n&&n.__v_isReadonly)}function Vt(n){return!!(n&&n.__v_isShallow)}function sc(n){return n?!!n.__v_raw:!1}function Te(n){const e=n&&n.__v_raw;return e?Te(e):n}function ln(n){return!be(n,"__v_skip")&&Object.isExtensible(n)&&gf(n,"__v_skip",!0),n}const lt=n=>Re(n)?rc(n):n,pl=n=>Re(n)?Nf(n):n;function ht(n){return n?n.__v_isRef===!0:!1}function oe(n){return t_(n,!1)}function t_(n,e){return ht(n)?n:new n_(n,e)}class n_{constructor(e,t){this.dep=new tc,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:Te(e),this._value=t?e:lt(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,r=this.__v_isShallow||Vt(e)||Er(e);e=r?e:Te(e),Gn(e,t)&&(this._rawValue=e,this._value=r?e:lt(e),this.dep.trigger())}}function r_(n){return ht(n)?n.value:n}const i_={get:(n,e,t)=>e==="__v_raw"?n:r_(Reflect.get(n,e,t)),set:(n,e,t,r)=>{const i=n[e];return ht(i)&&!ht(t)?(i.value=t,!0):Reflect.set(n,e,t,r)}};function Of(n){return qr(n)?n:new Proxy(n,i_)}class s_{constructor(e,t,r){this.fn=e,this.setter=t,this._value=void 0,this.dep=new tc(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ji-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&ke!==this)return Tf(this,!0),!0}get value(){const e=this.dep.track();return If(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function o_(n,e,t=!1){let r,i;return fe(n)?r=n:(r=n.get,i=n.set),new s_(r,i,t)}const Ws={},_o=new WeakMap;let pr;function a_(n,e=!1,t=pr){if(t){let r=_o.get(t);r||_o.set(t,r=[]),r.push(n)}}function l_(n,e,t=Se){const{immediate:r,deep:i,once:s,scheduler:a,augmentJob:l,call:c}=t,h=H=>i?H:Vt(H)||i===!1||i===0?hn(H,1):hn(H);let f,p,_,A,S=!1,k=!1;if(ht(n)?(p=()=>n.value,S=Vt(n)):qr(n)?(p=()=>h(n),S=!0):ie(n)?(k=!0,S=n.some(H=>qr(H)||Vt(H)),p=()=>n.map(H=>{if(ht(H))return H.value;if(qr(H))return h(H);if(fe(H))return c?c(H,2):H()})):fe(n)?e?p=c?()=>c(n,2):n:p=()=>{if(_){tr();try{_()}finally{nr()}}const H=pr;pr=f;try{return c?c(n,3,[A]):n(A)}finally{pr=H}}:p=Wt,e&&i){const H=p,ce=i===!0?1/0:i;p=()=>hn(H(),ce)}const O=Oy(),q=()=>{f.stop(),O&&O.active&&Ql(O.effects,f)};if(s&&e){const H=e;e=(...ce)=>{H(...ce),q()}}let z=k?new Array(n.length).fill(Ws):Ws;const W=H=>{if(!(!(f.flags&1)||!f.dirty&&!H))if(e){const ce=f.run();if(i||S||(k?ce.some((he,b)=>Gn(he,z[b])):Gn(ce,z))){_&&_();const he=pr;pr=f;try{const b=[ce,z===Ws?void 0:k&&z[0]===Ws?[]:z,A];c?c(e,3,b):e(...b),z=ce}finally{pr=he}}}else f.run()};return l&&l(W),f=new wf(p),f.scheduler=a?()=>a(W,!1):W,A=H=>a_(H,!1,f),_=f.onStop=()=>{const H=_o.get(f);if(H){if(c)c(H,4);else for(const ce of H)ce();_o.delete(f)}},e?r?W(!0):z=f.run():a?a(W.bind(null,!0),!0):f.run(),q.pause=f.pause.bind(f),q.resume=f.resume.bind(f),q.stop=q,q}function hn(n,e=1/0,t){if(e<=0||!Re(n)||n.__v_skip||(t=t||new Set,t.has(n)))return n;if(t.add(n),e--,ht(n))hn(n.value,e,t);else if(ie(n))for(let r=0;r<n.length;r++)hn(n[r],e,t);else if(Xo(n)||jr(n))n.forEach(r=>{hn(r,e,t)});else if(mf(n)){for(const r in n)hn(n[r],e,t);for(const r of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,r)&&hn(n[r],e,t)}return n}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ys(n,e,t,r){try{return r?n(...r):n()}catch(i){ta(i,e,t)}}function Ht(n,e,t,r){if(fe(n)){const i=ys(n,e,t,r);return i&&ff(i)&&i.catch(s=>{ta(s,e,t)}),i}if(ie(n)){const i=[];for(let s=0;s<n.length;s++)i.push(Ht(n[s],e,t,r));return i}}function ta(n,e,t,r=!0){const i=e?e.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:a}=e&&e.appContext.config||Se;if(e){let l=e.parent;const c=e.proxy,h=`https://vuejs.org/error-reference/#runtime-${t}`;for(;l;){const f=l.ec;if(f){for(let p=0;p<f.length;p++)if(f[p](n,c,h)===!1)return}l=l.parent}if(s){tr(),ys(s,null,10,[n,c,h]),nr();return}}c_(n,t,i,r,a)}function c_(n,e,t,r=!0,i=!1){if(i)throw n;console.error(n)}const gt=[];let zt=-1;const Wr=[];let Pn=null,Fr=0;const Lf=Promise.resolve();let vo=null;function xf(n){const e=vo||Lf;return n?e.then(this?n.bind(this):n):e}function u_(n){let e=zt+1,t=gt.length;for(;e<t;){const r=e+t>>>1,i=gt[r],s=es(i);s<n||s===n&&i.flags&2?e=r+1:t=r}return e}function oc(n){if(!(n.flags&1)){const e=es(n),t=gt[gt.length-1];!t||!(n.flags&2)&&e>=es(t)?gt.push(n):gt.splice(u_(e),0,n),n.flags|=1,Ff()}}function Ff(){vo||(vo=Lf.then(Hf))}function h_(n){ie(n)?Wr.push(...n):Pn&&n.id===-1?Pn.splice(Fr+1,0,n):n.flags&1||(Wr.push(n),n.flags|=1),Ff()}function th(n,e,t=zt+1){for(;t<gt.length;t++){const r=gt[t];if(r&&r.flags&2){if(n&&r.id!==n.uid)continue;gt.splice(t,1),t--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Gf(n){if(Wr.length){const e=[...new Set(Wr)].sort((t,r)=>es(t)-es(r));if(Wr.length=0,Pn){Pn.push(...e);return}for(Pn=e,Fr=0;Fr<Pn.length;Fr++){const t=Pn[Fr];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}Pn=null,Fr=0}}const es=n=>n.id==null?n.flags&2?-1:1/0:n.id;function Hf(n){try{for(zt=0;zt<gt.length;zt++){const e=gt[zt];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),ys(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;zt<gt.length;zt++){const e=gt[zt];e&&(e.flags&=-2)}zt=-1,gt.length=0,Gf(),vo=null,(gt.length||Wr.length)&&Hf()}}let wt=null,Uf=null;function wo(n){const e=wt;return wt=n,Uf=n&&n.type.__scopeId||null,e}function ac(n,e=wt,t){if(!e||n._n)return n;const r=(...i)=>{r._d&&dh(-1);const s=wo(e);let a;try{a=n(...i)}finally{wo(s),r._d&&dh(1)}return a};return r._n=!0,r._c=!0,r._d=!0,r}function ct(n,e){if(wt===null)return n;const t=oa(wt),r=n.dirs||(n.dirs=[]);for(let i=0;i<e.length;i++){let[s,a,l,c=Se]=e[i];s&&(fe(s)&&(s={mounted:s,updated:s}),s.deep&&hn(a),r.push({dir:s,instance:t,value:a,oldValue:void 0,arg:l,modifiers:c}))}return n}function ur(n,e,t,r){const i=n.dirs,s=e&&e.dirs;for(let a=0;a<i.length;a++){const l=i[a];s&&(l.oldValue=s[a].value);let c=l.dir[r];c&&(tr(),Ht(c,t,8,[n.el,l,n,e]),nr())}}const d_=Symbol("_vte"),Bf=n=>n.__isTeleport,Mn=Symbol("_leaveCb"),Ks=Symbol("_enterCb");function f_(){const n={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return qn(()=>{n.isMounted=!0}),$i(()=>{n.isUnmounting=!0}),n}const Pt=[Function,Array],$f={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Pt,onEnter:Pt,onAfterEnter:Pt,onEnterCancelled:Pt,onBeforeLeave:Pt,onLeave:Pt,onAfterLeave:Pt,onLeaveCancelled:Pt,onBeforeAppear:Pt,onAppear:Pt,onAfterAppear:Pt,onAppearCancelled:Pt},zf=n=>{const e=n.subTree;return e.component?zf(e.component):e},p_={name:"BaseTransition",props:$f,setup(n,{slots:e}){const t=uv(),r=f_();return()=>{const i=e.default&&Wf(e.default(),!0);if(!i||!i.length)return;const s=jf(i),a=Te(n),{mode:l}=a;if(r.isLeaving)return qa(s);const c=nh(s);if(!c)return qa(s);let h=ml(c,a,r,t,p=>h=p);c.type!==vt&&ts(c,h);let f=t.subTree&&nh(t.subTree);if(f&&f.type!==vt&&!gr(c,f)&&zf(t).type!==vt){let p=ml(f,a,r,t);if(ts(f,p),l==="out-in"&&c.type!==vt)return r.isLeaving=!0,p.afterLeave=()=>{r.isLeaving=!1,t.job.flags&8||t.update(),delete p.afterLeave,f=void 0},qa(s);l==="in-out"&&c.type!==vt?p.delayLeave=(_,A,S)=>{const k=qf(r,f);k[String(f.key)]=f,_[Mn]=()=>{A(),_[Mn]=void 0,delete h.delayedLeave,f=void 0},h.delayedLeave=()=>{S(),delete h.delayedLeave,f=void 0}}:f=void 0}else f&&(f=void 0);return s}}};function jf(n){let e=n[0];if(n.length>1){for(const t of n)if(t.type!==vt){e=t;break}}return e}const m_=p_;function qf(n,e){const{leavingVNodes:t}=n;let r=t.get(e.type);return r||(r=Object.create(null),t.set(e.type,r)),r}function ml(n,e,t,r,i){const{appear:s,mode:a,persisted:l=!1,onBeforeEnter:c,onEnter:h,onAfterEnter:f,onEnterCancelled:p,onBeforeLeave:_,onLeave:A,onAfterLeave:S,onLeaveCancelled:k,onBeforeAppear:O,onAppear:q,onAfterAppear:z,onAppearCancelled:W}=e,H=String(n.key),ce=qf(t,n),he=(g,w)=>{g&&Ht(g,r,9,w)},b=(g,w)=>{const I=w[1];he(g,w),ie(g)?g.every(T=>T.length<=1)&&I():g.length<=1&&I()},y={mode:a,persisted:l,beforeEnter(g){let w=c;if(!t.isMounted)if(s)w=O||c;else return;g[Mn]&&g[Mn](!0);const I=ce[H];I&&gr(n,I)&&I.el[Mn]&&I.el[Mn](),he(w,[g])},enter(g){let w=h,I=f,T=p;if(!t.isMounted)if(s)w=q||h,I=z||f,T=W||p;else return;let v=!1;const Ce=g[Ks]=ft=>{v||(v=!0,ft?he(T,[g]):he(I,[g]),y.delayedLeave&&y.delayedLeave(),g[Ks]=void 0)};w?b(w,[g,Ce]):Ce()},leave(g,w){const I=String(n.key);if(g[Ks]&&g[Ks](!0),t.isUnmounting)return w();he(_,[g]);let T=!1;const v=g[Mn]=Ce=>{T||(T=!0,w(),Ce?he(k,[g]):he(S,[g]),g[Mn]=void 0,ce[I]===n&&delete ce[I])};ce[I]=n,A?b(A,[g,v]):v()},clone(g){const w=ml(g,e,t,r,i);return i&&i(w),w}};return y}function qa(n){if(na(n))return n=Wn(n),n.children=null,n}function nh(n){if(!na(n))return Bf(n.type)&&n.children?jf(n.children):n;const{shapeFlag:e,children:t}=n;if(t){if(e&16)return t[0];if(e&32&&fe(t.default))return t.default()}}function ts(n,e){n.shapeFlag&6&&n.component?(n.transition=e,ts(n.component.subTree,e)):n.shapeFlag&128?(n.ssContent.transition=e.clone(n.ssContent),n.ssFallback.transition=e.clone(n.ssFallback)):n.transition=e}function Wf(n,e=!1,t){let r=[],i=0;for(let s=0;s<n.length;s++){let a=n[s];const l=t==null?a.key:String(t)+String(a.key!=null?a.key:s);a.type===Pe?(a.patchFlag&128&&i++,r=r.concat(Wf(a.children,e,l))):(e||a.type!==vt)&&r.push(l!=null?Wn(a,{key:l}):a)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}function Kf(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}function Eo(n,e,t,r,i=!1){if(ie(n)){n.forEach((S,k)=>Eo(S,e&&(ie(e)?e[k]:e),t,r,i));return}if(Bi(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Eo(n,e,t,r.component.subTree);return}const s=r.shapeFlag&4?oa(r.component):r.el,a=i?null:s,{i:l,r:c}=n,h=e&&e.r,f=l.refs===Se?l.refs={}:l.refs,p=l.setupState,_=Te(p),A=p===Se?()=>!1:S=>be(_,S);if(h!=null&&h!==c&&(Le(h)?(f[h]=null,A(h)&&(p[h]=null)):ht(h)&&(h.value=null)),fe(c))ys(c,l,12,[a,f]);else{const S=Le(c),k=ht(c);if(S||k){const O=()=>{if(n.f){const q=S?A(c)?p[c]:f[c]:c.value;i?ie(q)&&Ql(q,s):ie(q)?q.includes(s)||q.push(s):S?(f[c]=[s],A(c)&&(p[c]=f[c])):(c.value=[s],n.k&&(f[n.k]=c.value))}else S?(f[c]=a,A(c)&&(p[c]=a)):k&&(c.value=a,n.k&&(f[n.k]=a))};a?(O.id=-1,bt(O,t)):O()}}}Jo().requestIdleCallback;Jo().cancelIdleCallback;const Bi=n=>!!n.type.__asyncLoader,na=n=>n.type.__isKeepAlive;function g_(n,e){Xf(n,"a",e)}function y_(n,e){Xf(n,"da",e)}function Xf(n,e,t=Ye){const r=n.__wdc||(n.__wdc=()=>{let i=t;for(;i;){if(i.isDeactivated)return;i=i.parent}return n()});if(ra(e,r,t),t){let i=t.parent;for(;i&&i.parent;)na(i.parent.vnode)&&__(r,e,t,i),i=i.parent}}function __(n,e,t,r){const i=ra(e,n,r,!0);Qf(()=>{Ql(r[e],i)},t)}function ra(n,e,t=Ye,r=!1){if(t){const i=t[n]||(t[n]=[]),s=e.__weh||(e.__weh=(...a)=>{tr();const l=_s(t),c=Ht(e,t,n,a);return l(),nr(),c});return r?i.unshift(s):i.push(s),s}}const Tn=n=>(e,t=Ye)=>{(!rs||n==="sp")&&ra(n,(...r)=>e(...r),t)},v_=Tn("bm"),qn=Tn("m"),w_=Tn("bu"),E_=Tn("u"),$i=Tn("bum"),Qf=Tn("um"),T_=Tn("sp"),b_=Tn("rtg"),A_=Tn("rtc");function I_(n,e=Ye){ra("ec",n,e)}const Yf="components";function D_(n,e){return Zf(Yf,n,!0,e)||n}const Jf=Symbol.for("v-ndc");function S_(n){return Le(n)?Zf(Yf,n,!1)||n:n||Jf}function Zf(n,e,t=!0,r=!1){const i=wt||Ye;if(i){const s=i.type;{const l=mv(s,!1);if(l&&(l===e||l===Nt(e)||l===Yo(Nt(e))))return s}const a=rh(i[n]||s[n],e)||rh(i.appContext[n],e);return!a&&r?s:a}}function rh(n,e){return n&&(n[e]||n[Nt(e)]||n[Yo(Nt(e))])}function Et(n,e,t,r){let i;const s=t,a=ie(n);if(a||Le(n)){const l=a&&qr(n);let c=!1;l&&(c=!Vt(n),n=ea(n)),i=new Array(n.length);for(let h=0,f=n.length;h<f;h++)i[h]=e(c?lt(n[h]):n[h],h,void 0,s)}else if(typeof n=="number"){i=new Array(n);for(let l=0;l<n;l++)i[l]=e(l+1,l,void 0,s)}else if(Re(n))if(n[Symbol.iterator])i=Array.from(n,(l,c)=>e(l,c,void 0,s));else{const l=Object.keys(n);i=new Array(l.length);for(let c=0,h=l.length;c<h;c++){const f=l[c];i[c]=e(n[f],f,c,s)}}else i=[];return i}const gl=n=>n?Ep(n)?oa(n):gl(n.parent):null,zi=Ze(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>gl(n.parent),$root:n=>gl(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>tp(n),$forceUpdate:n=>n.f||(n.f=()=>{oc(n.update)}),$nextTick:n=>n.n||(n.n=xf.bind(n.proxy)),$watch:n=>X_.bind(n)}),Wa=(n,e)=>n!==Se&&!n.__isScriptSetup&&be(n,e),R_={get({_:n},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:r,data:i,props:s,accessCache:a,type:l,appContext:c}=n;let h;if(e[0]!=="$"){const A=a[e];if(A!==void 0)switch(A){case 1:return r[e];case 2:return i[e];case 4:return t[e];case 3:return s[e]}else{if(Wa(r,e))return a[e]=1,r[e];if(i!==Se&&be(i,e))return a[e]=2,i[e];if((h=n.propsOptions[0])&&be(h,e))return a[e]=3,s[e];if(t!==Se&&be(t,e))return a[e]=4,t[e];yl&&(a[e]=0)}}const f=zi[e];let p,_;if(f)return e==="$attrs"&&at(n.attrs,"get",""),f(n);if((p=l.__cssModules)&&(p=p[e]))return p;if(t!==Se&&be(t,e))return a[e]=4,t[e];if(_=c.config.globalProperties,be(_,e))return _[e]},set({_:n},e,t){const{data:r,setupState:i,ctx:s}=n;return Wa(i,e)?(i[e]=t,!0):r!==Se&&be(r,e)?(r[e]=t,!0):be(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(s[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:r,appContext:i,propsOptions:s}},a){let l;return!!t[a]||n!==Se&&be(n,a)||Wa(e,a)||(l=s[0])&&be(l,a)||be(r,a)||be(zi,a)||be(i.config.globalProperties,a)},defineProperty(n,e,t){return t.get!=null?n._.accessCache[e]=0:be(t,"value")&&this.set(n,e,t.value,null),Reflect.defineProperty(n,e,t)}};function ih(n){return ie(n)?n.reduce((e,t)=>(e[t]=null,e),{}):n}let yl=!0;function C_(n){const e=tp(n),t=n.proxy,r=n.ctx;yl=!1,e.beforeCreate&&sh(e.beforeCreate,n,"bc");const{data:i,computed:s,methods:a,watch:l,provide:c,inject:h,created:f,beforeMount:p,mounted:_,beforeUpdate:A,updated:S,activated:k,deactivated:O,beforeDestroy:q,beforeUnmount:z,destroyed:W,unmounted:H,render:ce,renderTracked:he,renderTriggered:b,errorCaptured:y,serverPrefetch:g,expose:w,inheritAttrs:I,components:T,directives:v,filters:Ce}=e;if(h&&k_(h,r,null),a)for(const Ie in a){const we=a[Ie];fe(we)&&(r[Ie]=we.bind(t))}if(i){const Ie=i.call(t,t);Re(Ie)&&(n.data=rc(Ie))}if(yl=!0,s)for(const Ie in s){const we=s[Ie],Ot=fe(we)?we.bind(t,t):fe(we.get)?we.get.bind(t,t):Wt,rr=!fe(we)&&fe(we.set)?we.set.bind(t):Wt,tn=ei({get:Ot,set:rr});Object.defineProperty(r,Ie,{enumerable:!0,configurable:!0,get:()=>tn.value,set:Be=>tn.value=Be})}if(l)for(const Ie in l)ep(l[Ie],r,t,Ie);if(c){const Ie=fe(c)?c.call(t):c;Reflect.ownKeys(Ie).forEach(we=>{L_(we,Ie[we])})}f&&sh(f,n,"c");function Fe(Ie,we){ie(we)?we.forEach(Ot=>Ie(Ot.bind(t))):we&&Ie(we.bind(t))}if(Fe(v_,p),Fe(qn,_),Fe(w_,A),Fe(E_,S),Fe(g_,k),Fe(y_,O),Fe(I_,y),Fe(A_,he),Fe(b_,b),Fe($i,z),Fe(Qf,H),Fe(T_,g),ie(w))if(w.length){const Ie=n.exposed||(n.exposed={});w.forEach(we=>{Object.defineProperty(Ie,we,{get:()=>t[we],set:Ot=>t[we]=Ot})})}else n.exposed||(n.exposed={});ce&&n.render===Wt&&(n.render=ce),I!=null&&(n.inheritAttrs=I),T&&(n.components=T),v&&(n.directives=v),g&&Kf(n)}function k_(n,e,t=Wt){ie(n)&&(n=_l(n));for(const r in n){const i=n[r];let s;Re(i)?"default"in i?s=no(i.from||r,i.default,!0):s=no(i.from||r):s=no(i),ht(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:a=>s.value=a}):e[r]=s}}function sh(n,e,t){Ht(ie(n)?n.map(r=>r.bind(e.proxy)):n.bind(e.proxy),e,t)}function ep(n,e,t,r){let i=r.includes(".")?mp(t,r):()=>t[r];if(Le(n)){const s=e[n];fe(s)&&ro(i,s)}else if(fe(n))ro(i,n.bind(t));else if(Re(n))if(ie(n))n.forEach(s=>ep(s,e,t,r));else{const s=fe(n.handler)?n.handler.bind(t):e[n.handler];fe(s)&&ro(i,s,n)}}function tp(n){const e=n.type,{mixins:t,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:a}}=n.appContext,l=s.get(e);let c;return l?c=l:!i.length&&!t&&!r?c=e:(c={},i.length&&i.forEach(h=>To(c,h,a,!0)),To(c,e,a)),Re(e)&&s.set(e,c),c}function To(n,e,t,r=!1){const{mixins:i,extends:s}=e;s&&To(n,s,t,!0),i&&i.forEach(a=>To(n,a,t,!0));for(const a in e)if(!(r&&a==="expose")){const l=P_[a]||t&&t[a];n[a]=l?l(n[a],e[a]):e[a]}return n}const P_={data:oh,props:ah,emits:ah,methods:Ni,computed:Ni,beforeCreate:mt,created:mt,beforeMount:mt,mounted:mt,beforeUpdate:mt,updated:mt,beforeDestroy:mt,beforeUnmount:mt,destroyed:mt,unmounted:mt,activated:mt,deactivated:mt,errorCaptured:mt,serverPrefetch:mt,components:Ni,directives:Ni,watch:V_,provide:oh,inject:M_};function oh(n,e){return e?n?function(){return Ze(fe(n)?n.call(this,this):n,fe(e)?e.call(this,this):e)}:e:n}function M_(n,e){return Ni(_l(n),_l(e))}function _l(n){if(ie(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function mt(n,e){return n?[...new Set([].concat(n,e))]:e}function Ni(n,e){return n?Ze(Object.create(null),n,e):e}function ah(n,e){return n?ie(n)&&ie(e)?[...new Set([...n,...e])]:Ze(Object.create(null),ih(n),ih(e??{})):e}function V_(n,e){if(!n)return e;if(!e)return n;const t=Ze(Object.create(null),n);for(const r in e)t[r]=mt(n[r],e[r]);return t}function np(){return{app:null,config:{isNativeTag:wy,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let N_=0;function O_(n,e){return function(r,i=null){fe(r)||(r=Ze({},r)),i!=null&&!Re(i)&&(i=null);const s=np(),a=new WeakSet,l=[];let c=!1;const h=s.app={_uid:N_++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:_v,get config(){return s.config},set config(f){},use(f,...p){return a.has(f)||(f&&fe(f.install)?(a.add(f),f.install(h,...p)):fe(f)&&(a.add(f),f(h,...p))),h},mixin(f){return s.mixins.includes(f)||s.mixins.push(f),h},component(f,p){return p?(s.components[f]=p,h):s.components[f]},directive(f,p){return p?(s.directives[f]=p,h):s.directives[f]},mount(f,p,_){if(!c){const A=h._ceVNode||yt(r,i);return A.appContext=s,_===!0?_="svg":_===!1&&(_=void 0),n(A,f,_),c=!0,h._container=f,f.__vue_app__=h,oa(A.component)}},onUnmount(f){l.push(f)},unmount(){c&&(Ht(l,h._instance,16),n(null,h._container),delete h._container.__vue_app__)},provide(f,p){return s.provides[f]=p,h},runWithContext(f){const p=Kr;Kr=h;try{return f()}finally{Kr=p}}};return h}}let Kr=null;function L_(n,e){if(Ye){let t=Ye.provides;const r=Ye.parent&&Ye.parent.provides;r===t&&(t=Ye.provides=Object.create(r)),t[n]=e}}function no(n,e,t=!1){const r=Ye||wt;if(r||Kr){const i=Kr?Kr._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&n in i)return i[n];if(arguments.length>1)return t&&fe(e)?e.call(r&&r.proxy):e}}const rp={},ip=()=>Object.create(rp),sp=n=>Object.getPrototypeOf(n)===rp;function x_(n,e,t,r=!1){const i={},s=ip();n.propsDefaults=Object.create(null),op(n,e,i,s);for(const a in n.propsOptions[0])a in i||(i[a]=void 0);t?n.props=r?i:e_(i):n.type.props?n.props=i:n.props=s,n.attrs=s}function F_(n,e,t,r){const{props:i,attrs:s,vnode:{patchFlag:a}}=n,l=Te(i),[c]=n.propsOptions;let h=!1;if((r||a>0)&&!(a&16)){if(a&8){const f=n.vnode.dynamicProps;for(let p=0;p<f.length;p++){let _=f[p];if(ia(n.emitsOptions,_))continue;const A=e[_];if(c)if(be(s,_))A!==s[_]&&(s[_]=A,h=!0);else{const S=Nt(_);i[S]=vl(c,l,S,A,n,!1)}else A!==s[_]&&(s[_]=A,h=!0)}}}else{op(n,e,i,s)&&(h=!0);let f;for(const p in l)(!e||!be(e,p)&&((f=Sr(p))===p||!be(e,f)))&&(c?t&&(t[p]!==void 0||t[f]!==void 0)&&(i[p]=vl(c,l,p,void 0,n,!0)):delete i[p]);if(s!==l)for(const p in s)(!e||!be(e,p))&&(delete s[p],h=!0)}h&&un(n.attrs,"set","")}function op(n,e,t,r){const[i,s]=n.propsOptions;let a=!1,l;if(e)for(let c in e){if(Gi(c))continue;const h=e[c];let f;i&&be(i,f=Nt(c))?!s||!s.includes(f)?t[f]=h:(l||(l={}))[f]=h:ia(n.emitsOptions,c)||(!(c in r)||h!==r[c])&&(r[c]=h,a=!0)}if(s){const c=Te(t),h=l||Se;for(let f=0;f<s.length;f++){const p=s[f];t[p]=vl(i,c,p,h[p],n,!be(h,p))}}return a}function vl(n,e,t,r,i,s){const a=n[t];if(a!=null){const l=be(a,"default");if(l&&r===void 0){const c=a.default;if(a.type!==Function&&!a.skipFactory&&fe(c)){const{propsDefaults:h}=i;if(t in h)r=h[t];else{const f=_s(i);r=h[t]=c.call(null,e),f()}}else r=c;i.ce&&i.ce._setProp(t,r)}a[0]&&(s&&!l?r=!1:a[1]&&(r===""||r===Sr(t))&&(r=!0))}return r}const G_=new WeakMap;function ap(n,e,t=!1){const r=t?G_:e.propsCache,i=r.get(n);if(i)return i;const s=n.props,a={},l=[];let c=!1;if(!fe(n)){const f=p=>{c=!0;const[_,A]=ap(p,e,!0);Ze(a,_),A&&l.push(...A)};!t&&e.mixins.length&&e.mixins.forEach(f),n.extends&&f(n.extends),n.mixins&&n.mixins.forEach(f)}if(!s&&!c)return Re(n)&&r.set(n,zr),zr;if(ie(s))for(let f=0;f<s.length;f++){const p=Nt(s[f]);lh(p)&&(a[p]=Se)}else if(s)for(const f in s){const p=Nt(f);if(lh(p)){const _=s[f],A=a[p]=ie(_)||fe(_)?{type:_}:Ze({},_),S=A.type;let k=!1,O=!0;if(ie(S))for(let q=0;q<S.length;++q){const z=S[q],W=fe(z)&&z.name;if(W==="Boolean"){k=!0;break}else W==="String"&&(O=!1)}else k=fe(S)&&S.name==="Boolean";A[0]=k,A[1]=O,(k||be(A,"default"))&&l.push(p)}}const h=[a,l];return Re(n)&&r.set(n,h),h}function lh(n){return n[0]!=="$"&&!Gi(n)}const lp=n=>n[0]==="_"||n==="$stable",lc=n=>ie(n)?n.map(qt):[qt(n)],H_=(n,e,t)=>{if(e._n)return e;const r=ac((...i)=>lc(e(...i)),t);return r._c=!1,r},cp=(n,e,t)=>{const r=n._ctx;for(const i in n){if(lp(i))continue;const s=n[i];if(fe(s))e[i]=H_(i,s,r);else if(s!=null){const a=lc(s);e[i]=()=>a}}},up=(n,e)=>{const t=lc(e);n.slots.default=()=>t},hp=(n,e,t)=>{for(const r in e)(t||r!=="_")&&(n[r]=e[r])},U_=(n,e,t)=>{const r=n.slots=ip();if(n.vnode.shapeFlag&32){const i=e._;i?(hp(r,e,t),t&&gf(r,"_",i,!0)):cp(e,r)}else e&&up(n,e)},B_=(n,e,t)=>{const{vnode:r,slots:i}=n;let s=!0,a=Se;if(r.shapeFlag&32){const l=e._;l?t&&l===1?s=!1:hp(i,e,t):(s=!e.$stable,cp(e,i)),a=e}else e&&(up(n,e),a={default:1});if(s)for(const l in i)!lp(l)&&a[l]==null&&delete i[l]},bt=nv;function $_(n){return z_(n)}function z_(n,e){const t=Jo();t.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:a,createText:l,createComment:c,setText:h,setElementText:f,parentNode:p,nextSibling:_,setScopeId:A=Wt,insertStaticContent:S}=n,k=(E,D,M,x=null,L=null,F=null,j=void 0,B=null,U=!!D.dynamicChildren)=>{if(E===D)return;E&&!gr(E,D)&&(x=nn(E),Be(E,L,F,!0),E=null),D.patchFlag===-2&&(U=!1,D.dynamicChildren=null);const{type:G,ref:ne,shapeFlag:K}=D;switch(G){case sa:O(E,D,M,x);break;case vt:q(E,D,M,x);break;case Xa:E==null&&z(D,M,x,j);break;case Pe:T(E,D,M,x,L,F,j,B,U);break;default:K&1?ce(E,D,M,x,L,F,j,B,U):K&6?v(E,D,M,x,L,F,j,B,U):(K&64||K&128)&&G.process(E,D,M,x,L,F,j,B,U,Bt)}ne!=null&&L&&Eo(ne,E&&E.ref,F,D||E,!D)},O=(E,D,M,x)=>{if(E==null)r(D.el=l(D.children),M,x);else{const L=D.el=E.el;D.children!==E.children&&h(L,D.children)}},q=(E,D,M,x)=>{E==null?r(D.el=c(D.children||""),M,x):D.el=E.el},z=(E,D,M,x)=>{[E.el,E.anchor]=S(E.children,D,M,x,E.el,E.anchor)},W=({el:E,anchor:D},M,x)=>{let L;for(;E&&E!==D;)L=_(E),r(E,M,x),E=L;r(D,M,x)},H=({el:E,anchor:D})=>{let M;for(;E&&E!==D;)M=_(E),i(E),E=M;i(D)},ce=(E,D,M,x,L,F,j,B,U)=>{D.type==="svg"?j="svg":D.type==="math"&&(j="mathml"),E==null?he(D,M,x,L,F,j,B,U):g(E,D,L,F,j,B,U)},he=(E,D,M,x,L,F,j,B)=>{let U,G;const{props:ne,shapeFlag:K,transition:J,dirs:se}=E;if(U=E.el=a(E.type,F,ne&&ne.is,ne),K&8?f(U,E.children):K&16&&y(E.children,U,null,x,L,Ka(E,F),j,B),se&&ur(E,null,x,"created"),b(U,E,E.scopeId,j,x),ne){for(const pe in ne)pe!=="value"&&!Gi(pe)&&s(U,pe,null,ne[pe],F,x);"value"in ne&&s(U,"value",null,ne.value,F),(G=ne.onVnodeBeforeMount)&&$t(G,x,E)}se&&ur(E,null,x,"beforeMount");const re=j_(L,J);re&&J.beforeEnter(U),r(U,D,M),((G=ne&&ne.onVnodeMounted)||re||se)&&bt(()=>{G&&$t(G,x,E),re&&J.enter(U),se&&ur(E,null,x,"mounted")},L)},b=(E,D,M,x,L)=>{if(M&&A(E,M),x)for(let F=0;F<x.length;F++)A(E,x[F]);if(L){let F=L.subTree;if(D===F||yp(F.type)&&(F.ssContent===D||F.ssFallback===D)){const j=L.vnode;b(E,j,j.scopeId,j.slotScopeIds,L.parent)}}},y=(E,D,M,x,L,F,j,B,U=0)=>{for(let G=U;G<E.length;G++){const ne=E[G]=B?Vn(E[G]):qt(E[G]);k(null,ne,D,M,x,L,F,j,B)}},g=(E,D,M,x,L,F,j)=>{const B=D.el=E.el;let{patchFlag:U,dynamicChildren:G,dirs:ne}=D;U|=E.patchFlag&16;const K=E.props||Se,J=D.props||Se;let se;if(M&&hr(M,!1),(se=J.onVnodeBeforeUpdate)&&$t(se,M,D,E),ne&&ur(D,E,M,"beforeUpdate"),M&&hr(M,!0),(K.innerHTML&&J.innerHTML==null||K.textContent&&J.textContent==null)&&f(B,""),G?w(E.dynamicChildren,G,B,M,x,Ka(D,L),F):j||we(E,D,B,null,M,x,Ka(D,L),F,!1),U>0){if(U&16)I(B,K,J,M,L);else if(U&2&&K.class!==J.class&&s(B,"class",null,J.class,L),U&4&&s(B,"style",K.style,J.style,L),U&8){const re=D.dynamicProps;for(let pe=0;pe<re.length;pe++){const _e=re[pe],tt=K[_e],We=J[_e];(We!==tt||_e==="value")&&s(B,_e,tt,We,L,M)}}U&1&&E.children!==D.children&&f(B,D.children)}else!j&&G==null&&I(B,K,J,M,L);((se=J.onVnodeUpdated)||ne)&&bt(()=>{se&&$t(se,M,D,E),ne&&ur(D,E,M,"updated")},x)},w=(E,D,M,x,L,F,j)=>{for(let B=0;B<D.length;B++){const U=E[B],G=D[B],ne=U.el&&(U.type===Pe||!gr(U,G)||U.shapeFlag&70)?p(U.el):M;k(U,G,ne,null,x,L,F,j,!0)}},I=(E,D,M,x,L)=>{if(D!==M){if(D!==Se)for(const F in D)!Gi(F)&&!(F in M)&&s(E,F,D[F],null,L,x);for(const F in M){if(Gi(F))continue;const j=M[F],B=D[F];j!==B&&F!=="value"&&s(E,F,B,j,L,x)}"value"in M&&s(E,"value",D.value,M.value,L)}},T=(E,D,M,x,L,F,j,B,U)=>{const G=D.el=E?E.el:l(""),ne=D.anchor=E?E.anchor:l("");let{patchFlag:K,dynamicChildren:J,slotScopeIds:se}=D;se&&(B=B?B.concat(se):se),E==null?(r(G,M,x),r(ne,M,x),y(D.children||[],M,ne,L,F,j,B,U)):K>0&&K&64&&J&&E.dynamicChildren?(w(E.dynamicChildren,J,M,L,F,j,B),(D.key!=null||L&&D===L.subTree)&&dp(E,D,!0)):we(E,D,M,ne,L,F,j,B,U)},v=(E,D,M,x,L,F,j,B,U)=>{D.slotScopeIds=B,E==null?D.shapeFlag&512?L.ctx.activate(D,M,x,j,U):Ce(D,M,x,L,F,j,U):ft(E,D,U)},Ce=(E,D,M,x,L,F,j)=>{const B=E.component=cv(E,x,L);if(na(E)&&(B.ctx.renderer=Bt),hv(B,!1,j),B.asyncDep){if(L&&L.registerDep(B,Fe,j),!E.el){const U=B.subTree=yt(vt);q(null,U,D,M)}}else Fe(B,E,D,M,L,F,j)},ft=(E,D,M)=>{const x=D.component=E.component;if(ev(E,D,M))if(x.asyncDep&&!x.asyncResolved){Ie(x,D,M);return}else x.next=D,x.update();else D.el=E.el,x.vnode=D},Fe=(E,D,M,x,L,F,j)=>{const B=()=>{if(E.isMounted){let{next:K,bu:J,u:se,parent:re,vnode:pe}=E;{const nt=fp(E);if(nt){K&&(K.el=pe.el,Ie(E,K,j)),nt.asyncDep.then(()=>{E.isUnmounted||B()});return}}let _e=K,tt;hr(E,!1),K?(K.el=pe.el,Ie(E,K,j)):K=pe,J&&to(J),(tt=K.props&&K.props.onVnodeBeforeUpdate)&&$t(tt,re,K,pe),hr(E,!0);const We=uh(E),Ct=E.subTree;E.subTree=We,k(Ct,We,p(Ct.el),nn(Ct),E,L,F),K.el=We.el,_e===null&&tv(E,We.el),se&&bt(se,L),(tt=K.props&&K.props.onVnodeUpdated)&&bt(()=>$t(tt,re,K,pe),L)}else{let K;const{el:J,props:se}=D,{bm:re,m:pe,parent:_e,root:tt,type:We}=E,Ct=Bi(D);hr(E,!1),re&&to(re),!Ct&&(K=se&&se.onVnodeBeforeMount)&&$t(K,_e,D),hr(E,!0);{tt.ce&&tt.ce._injectChildStyle(We);const nt=E.subTree=uh(E);k(null,nt,M,x,E,L,F),D.el=nt.el}if(pe&&bt(pe,L),!Ct&&(K=se&&se.onVnodeMounted)){const nt=D;bt(()=>$t(K,_e,nt),L)}(D.shapeFlag&256||_e&&Bi(_e.vnode)&&_e.vnode.shapeFlag&256)&&E.a&&bt(E.a,L),E.isMounted=!0,D=M=x=null}};E.scope.on();const U=E.effect=new wf(B);E.scope.off();const G=E.update=U.run.bind(U),ne=E.job=U.runIfDirty.bind(U);ne.i=E,ne.id=E.uid,U.scheduler=()=>oc(ne),hr(E,!0),G()},Ie=(E,D,M)=>{D.component=E;const x=E.vnode.props;E.vnode=D,E.next=null,F_(E,D.props,x,M),B_(E,D.children,M),tr(),th(E),nr()},we=(E,D,M,x,L,F,j,B,U=!1)=>{const G=E&&E.children,ne=E?E.shapeFlag:0,K=D.children,{patchFlag:J,shapeFlag:se}=D;if(J>0){if(J&128){rr(G,K,M,x,L,F,j,B,U);return}else if(J&256){Ot(G,K,M,x,L,F,j,B,U);return}}se&8?(ne&16&&sr(G,L,F),K!==G&&f(M,K)):ne&16?se&16?rr(G,K,M,x,L,F,j,B,U):sr(G,L,F,!0):(ne&8&&f(M,""),se&16&&y(K,M,x,L,F,j,B,U))},Ot=(E,D,M,x,L,F,j,B,U)=>{E=E||zr,D=D||zr;const G=E.length,ne=D.length,K=Math.min(G,ne);let J;for(J=0;J<K;J++){const se=D[J]=U?Vn(D[J]):qt(D[J]);k(E[J],se,M,null,L,F,j,B,U)}G>ne?sr(E,L,F,!0,!1,K):y(D,M,x,L,F,j,B,U,K)},rr=(E,D,M,x,L,F,j,B,U)=>{let G=0;const ne=D.length;let K=E.length-1,J=ne-1;for(;G<=K&&G<=J;){const se=E[G],re=D[G]=U?Vn(D[G]):qt(D[G]);if(gr(se,re))k(se,re,M,null,L,F,j,B,U);else break;G++}for(;G<=K&&G<=J;){const se=E[K],re=D[J]=U?Vn(D[J]):qt(D[J]);if(gr(se,re))k(se,re,M,null,L,F,j,B,U);else break;K--,J--}if(G>K){if(G<=J){const se=J+1,re=se<ne?D[se].el:x;for(;G<=J;)k(null,D[G]=U?Vn(D[G]):qt(D[G]),M,re,L,F,j,B,U),G++}}else if(G>J)for(;G<=K;)Be(E[G],L,F,!0),G++;else{const se=G,re=G,pe=new Map;for(G=re;G<=J;G++){const Ke=D[G]=U?Vn(D[G]):qt(D[G]);Ke.key!=null&&pe.set(Ke.key,G)}let _e,tt=0;const We=J-re+1;let Ct=!1,nt=0;const In=new Array(We);for(G=0;G<We;G++)In[G]=0;for(G=se;G<=K;G++){const Ke=E[G];if(tt>=We){Be(Ke,L,F,!0);continue}let kt;if(Ke.key!=null)kt=pe.get(Ke.key);else for(_e=re;_e<=J;_e++)if(In[_e-re]===0&&gr(Ke,D[_e])){kt=_e;break}kt===void 0?Be(Ke,L,F,!0):(In[kt-re]=G+1,kt>=nt?nt=kt:Ct=!0,k(Ke,D[kt],M,null,L,F,j,B,U),tt++)}const _i=Ct?q_(In):zr;for(_e=_i.length-1,G=We-1;G>=0;G--){const Ke=re+G,kt=D[Ke],Cs=Ke+1<ne?D[Ke+1].el:x;In[G]===0?k(null,kt,M,Cs,L,F,j,B,U):Ct&&(_e<0||G!==_i[_e]?tn(kt,M,Cs,2):_e--)}}},tn=(E,D,M,x,L=null)=>{const{el:F,type:j,transition:B,children:U,shapeFlag:G}=E;if(G&6){tn(E.component.subTree,D,M,x);return}if(G&128){E.suspense.move(D,M,x);return}if(G&64){j.move(E,D,M,Bt);return}if(j===Pe){r(F,D,M);for(let K=0;K<U.length;K++)tn(U[K],D,M,x);r(E.anchor,D,M);return}if(j===Xa){W(E,D,M);return}if(x!==2&&G&1&&B)if(x===0)B.beforeEnter(F),r(F,D,M),bt(()=>B.enter(F),L);else{const{leave:K,delayLeave:J,afterLeave:se}=B,re=()=>r(F,D,M),pe=()=>{K(F,()=>{re(),se&&se()})};J?J(F,re,pe):pe()}else r(F,D,M)},Be=(E,D,M,x=!1,L=!1)=>{const{type:F,props:j,ref:B,children:U,dynamicChildren:G,shapeFlag:ne,patchFlag:K,dirs:J,cacheIndex:se}=E;if(K===-2&&(L=!1),B!=null&&Eo(B,null,M,E,!0),se!=null&&(D.renderCache[se]=void 0),ne&256){D.ctx.deactivate(E);return}const re=ne&1&&J,pe=!Bi(E);let _e;if(pe&&(_e=j&&j.onVnodeBeforeUnmount)&&$t(_e,D,E),ne&6)ir(E.component,M,x);else{if(ne&128){E.suspense.unmount(M,x);return}re&&ur(E,null,D,"beforeUnmount"),ne&64?E.type.remove(E,D,M,Bt,x):G&&!G.hasOnce&&(F!==Pe||K>0&&K&64)?sr(G,D,M,!1,!0):(F===Pe&&K&384||!L&&ne&16)&&sr(U,D,M),x&&$e(E)}(pe&&(_e=j&&j.onVnodeUnmounted)||re)&&bt(()=>{_e&&$t(_e,D,E),re&&ur(E,null,D,"unmounted")},M)},$e=E=>{const{type:D,el:M,anchor:x,transition:L}=E;if(D===Pe){Ia(M,x);return}if(D===Xa){H(E);return}const F=()=>{i(M),L&&!L.persisted&&L.afterLeave&&L.afterLeave()};if(E.shapeFlag&1&&L&&!L.persisted){const{leave:j,delayLeave:B}=L,U=()=>j(M,F);B?B(E.el,F,U):U()}else F()},Ia=(E,D)=>{let M;for(;E!==D;)M=_(E),i(E),E=M;i(D)},ir=(E,D,M)=>{const{bum:x,scope:L,job:F,subTree:j,um:B,m:U,a:G}=E;ch(U),ch(G),x&&to(x),L.stop(),F&&(F.flags|=8,Be(j,E,D,M)),B&&bt(B,D),bt(()=>{E.isUnmounted=!0},D),D&&D.pendingBranch&&!D.isUnmounted&&E.asyncDep&&!E.asyncResolved&&E.suspenseId===D.pendingId&&(D.deps--,D.deps===0&&D.resolve())},sr=(E,D,M,x=!1,L=!1,F=0)=>{for(let j=F;j<E.length;j++)Be(E[j],D,M,x,L)},nn=E=>{if(E.shapeFlag&6)return nn(E.component.subTree);if(E.shapeFlag&128)return E.suspense.next();const D=_(E.anchor||E.el),M=D&&D[d_];return M?_(M):D};let gi=!1;const Rs=(E,D,M)=>{E==null?D._vnode&&Be(D._vnode,null,null,!0):k(D._vnode||null,E,D,null,null,null,M),D._vnode=E,gi||(gi=!0,th(),Gf(),gi=!1)},Bt={p:k,um:Be,m:tn,r:$e,mt:Ce,mc:y,pc:we,pbc:w,n:nn,o:n};return{render:Rs,hydrate:void 0,createApp:O_(Rs)}}function Ka({type:n,props:e},t){return t==="svg"&&n==="foreignObject"||t==="mathml"&&n==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function hr({effect:n,job:e},t){t?(n.flags|=32,e.flags|=4):(n.flags&=-33,e.flags&=-5)}function j_(n,e){return(!n||n&&!n.pendingBranch)&&e&&!e.persisted}function dp(n,e,t=!1){const r=n.children,i=e.children;if(ie(r)&&ie(i))for(let s=0;s<r.length;s++){const a=r[s];let l=i[s];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=i[s]=Vn(i[s]),l.el=a.el),!t&&l.patchFlag!==-2&&dp(a,l)),l.type===sa&&(l.el=a.el)}}function q_(n){const e=n.slice(),t=[0];let r,i,s,a,l;const c=n.length;for(r=0;r<c;r++){const h=n[r];if(h!==0){if(i=t[t.length-1],n[i]<h){e[r]=i,t.push(r);continue}for(s=0,a=t.length-1;s<a;)l=s+a>>1,n[t[l]]<h?s=l+1:a=l;h<n[t[s]]&&(s>0&&(e[r]=t[s-1]),t[s]=r)}}for(s=t.length,a=t[s-1];s-- >0;)t[s]=a,a=e[a];return t}function fp(n){const e=n.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:fp(e)}function ch(n){if(n)for(let e=0;e<n.length;e++)n[e].flags|=8}const W_=Symbol.for("v-scx"),K_=()=>no(W_);function ro(n,e,t){return pp(n,e,t)}function pp(n,e,t=Se){const{immediate:r,deep:i,flush:s,once:a}=t,l=Ze({},t),c=e&&r||!e&&s!=="post";let h;if(rs){if(s==="sync"){const A=K_();h=A.__watcherHandles||(A.__watcherHandles=[])}else if(!c){const A=()=>{};return A.stop=Wt,A.resume=Wt,A.pause=Wt,A}}const f=Ye;l.call=(A,S,k)=>Ht(A,f,S,k);let p=!1;s==="post"?l.scheduler=A=>{bt(A,f&&f.suspense)}:s!=="sync"&&(p=!0,l.scheduler=(A,S)=>{S?A():oc(A)}),l.augmentJob=A=>{e&&(A.flags|=4),p&&(A.flags|=2,f&&(A.id=f.uid,A.i=f))};const _=l_(n,e,l);return rs&&(h?h.push(_):c&&_()),_}function X_(n,e,t){const r=this.proxy,i=Le(n)?n.includes(".")?mp(r,n):()=>r[n]:n.bind(r,r);let s;fe(e)?s=e:(s=e.handler,t=e);const a=_s(this),l=pp(i,s.bind(r),t);return a(),l}function mp(n,e){const t=e.split(".");return()=>{let r=n;for(let i=0;i<t.length&&r;i++)r=r[t[i]];return r}}const Q_=(n,e)=>e==="modelValue"||e==="model-value"?n.modelModifiers:n[`${e}Modifiers`]||n[`${Nt(e)}Modifiers`]||n[`${Sr(e)}Modifiers`];function Y_(n,e,...t){if(n.isUnmounted)return;const r=n.vnode.props||Se;let i=t;const s=e.startsWith("update:"),a=s&&Q_(r,e.slice(7));a&&(a.trim&&(i=t.map(f=>Le(f)?f.trim():f)),a.number&&(i=t.map(yo)));let l,c=r[l=Ua(e)]||r[l=Ua(Nt(e))];!c&&s&&(c=r[l=Ua(Sr(e))]),c&&Ht(c,n,6,i);const h=r[l+"Once"];if(h){if(!n.emitted)n.emitted={};else if(n.emitted[l])return;n.emitted[l]=!0,Ht(h,n,6,i)}}function gp(n,e,t=!1){const r=e.emitsCache,i=r.get(n);if(i!==void 0)return i;const s=n.emits;let a={},l=!1;if(!fe(n)){const c=h=>{const f=gp(h,e,!0);f&&(l=!0,Ze(a,f))};!t&&e.mixins.length&&e.mixins.forEach(c),n.extends&&c(n.extends),n.mixins&&n.mixins.forEach(c)}return!s&&!l?(Re(n)&&r.set(n,null),null):(ie(s)?s.forEach(c=>a[c]=null):Ze(a,s),Re(n)&&r.set(n,a),a)}function ia(n,e){return!n||!Ko(e)?!1:(e=e.slice(2).replace(/Once$/,""),be(n,e[0].toLowerCase()+e.slice(1))||be(n,Sr(e))||be(n,e))}function uh(n){const{type:e,vnode:t,proxy:r,withProxy:i,propsOptions:[s],slots:a,attrs:l,emit:c,render:h,renderCache:f,props:p,data:_,setupState:A,ctx:S,inheritAttrs:k}=n,O=wo(n);let q,z;try{if(t.shapeFlag&4){const H=i||r,ce=H;q=qt(h.call(ce,H,f,p,A,_,S)),z=l}else{const H=e;q=qt(H.length>1?H(p,{attrs:l,slots:a,emit:c}):H(p,null)),z=e.props?l:J_(l)}}catch(H){ji.length=0,ta(H,n,1),q=yt(vt)}let W=q;if(z&&k!==!1){const H=Object.keys(z),{shapeFlag:ce}=W;H.length&&ce&7&&(s&&H.some(Xl)&&(z=Z_(z,s)),W=Wn(W,z,!1,!0))}return t.dirs&&(W=Wn(W,null,!1,!0),W.dirs=W.dirs?W.dirs.concat(t.dirs):t.dirs),t.transition&&ts(W,t.transition),q=W,wo(O),q}const J_=n=>{let e;for(const t in n)(t==="class"||t==="style"||Ko(t))&&((e||(e={}))[t]=n[t]);return e},Z_=(n,e)=>{const t={};for(const r in n)(!Xl(r)||!(r.slice(9)in e))&&(t[r]=n[r]);return t};function ev(n,e,t){const{props:r,children:i,component:s}=n,{props:a,children:l,patchFlag:c}=e,h=s.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&c>=0){if(c&1024)return!0;if(c&16)return r?hh(r,a,h):!!a;if(c&8){const f=e.dynamicProps;for(let p=0;p<f.length;p++){const _=f[p];if(a[_]!==r[_]&&!ia(h,_))return!0}}}else return(i||l)&&(!l||!l.$stable)?!0:r===a?!1:r?a?hh(r,a,h):!0:!!a;return!1}function hh(n,e,t){const r=Object.keys(e);if(r.length!==Object.keys(n).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==n[s]&&!ia(t,s))return!0}return!1}function tv({vnode:n,parent:e},t){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===n&&(r.el=n.el),r===n)(n=e.vnode).el=t,e=e.parent;else break}}const yp=n=>n.__isSuspense;function nv(n,e){e&&e.pendingBranch?ie(n)?e.effects.push(...n):e.effects.push(n):h_(n)}const Pe=Symbol.for("v-fgt"),sa=Symbol.for("v-txt"),vt=Symbol.for("v-cmt"),Xa=Symbol.for("v-stc"),ji=[];let It=null;function Y(n=!1){ji.push(It=n?null:[])}function rv(){ji.pop(),It=ji[ji.length-1]||null}let ns=1;function dh(n,e=!1){ns+=n,n<0&&It&&e&&(It.hasOnce=!0)}function _p(n){return n.dynamicChildren=ns>0?It||zr:null,rv(),ns>0&&It&&It.push(n),n}function ee(n,e,t,r,i,s){return _p(C(n,e,t,r,i,s,!0))}function cc(n,e,t,r,i){return _p(yt(n,e,t,r,i,!0))}function bo(n){return n?n.__v_isVNode===!0:!1}function gr(n,e){return n.type===e.type&&n.key===e.key}const vp=({key:n})=>n??null,io=({ref:n,ref_key:e,ref_for:t})=>(typeof n=="number"&&(n=""+n),n!=null?Le(n)||ht(n)||fe(n)?{i:wt,r:n,k:e,f:!!t}:n:null);function C(n,e=null,t=null,r=0,i=null,s=n===Pe?0:1,a=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&vp(e),ref:e&&io(e),scopeId:Uf,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:wt};return l?(uc(c,t),s&128&&n.normalize(c)):t&&(c.shapeFlag|=Le(t)?8:16),ns>0&&!a&&It&&(c.patchFlag>0||s&6)&&c.patchFlag!==32&&It.push(c),c}const yt=iv;function iv(n,e=null,t=null,r=0,i=null,s=!1){if((!n||n===Jf)&&(n=vt),bo(n)){const l=Wn(n,e,!0);return t&&uc(l,t),ns>0&&!s&&It&&(l.shapeFlag&6?It[It.indexOf(n)]=l:It.push(l)),l.patchFlag=-2,l}if(gv(n)&&(n=n.__vccOpts),e){e=sv(e);let{class:l,style:c}=e;l&&!Le(l)&&(e.class=gn(l)),Re(c)&&(sc(c)&&!ie(c)&&(c=Ze({},c)),e.style=gs(c))}const a=Le(n)?1:yp(n)?128:Bf(n)?64:Re(n)?4:fe(n)?2:0;return C(n,e,t,r,i,a,s,!0)}function sv(n){return n?sc(n)||sp(n)?Ze({},n):n:null}function Wn(n,e,t=!1,r=!1){const{props:i,ref:s,patchFlag:a,children:l,transition:c}=n,h=e?ov(i||{},e):i,f={__v_isVNode:!0,__v_skip:!0,type:n.type,props:h,key:h&&vp(h),ref:e&&e.ref?t&&s?ie(s)?s.concat(io(e)):[s,io(e)]:io(e):s,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:l,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==Pe?a===-1?16:a|16:a,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:c,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&Wn(n.ssContent),ssFallback:n.ssFallback&&Wn(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return c&&r&&ts(f,c.clone(f)),f}function wp(n=" ",e=0){return yt(sa,null,n,e)}function Dt(n="",e=!1){return e?(Y(),cc(vt,null,n)):yt(vt,null,n)}function qt(n){return n==null||typeof n=="boolean"?yt(vt):ie(n)?yt(Pe,null,n.slice()):bo(n)?Vn(n):yt(sa,null,String(n))}function Vn(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:Wn(n)}function uc(n,e){let t=0;const{shapeFlag:r}=n;if(e==null)e=null;else if(ie(e))t=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),uc(n,i()),i._c&&(i._d=!0));return}else{t=32;const i=e._;!i&&!sp(e)?e._ctx=wt:i===3&&wt&&(wt.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else fe(e)?(e={default:e,_ctx:wt},t=32):(e=String(e),r&64?(t=16,e=[wp(e)]):t=8);n.children=e,n.shapeFlag|=t}function ov(...n){const e={};for(let t=0;t<n.length;t++){const r=n[t];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=gn([e.class,r.class]));else if(i==="style")e.style=gs([e.style,r.style]);else if(Ko(i)){const s=e[i],a=r[i];a&&s!==a&&!(ie(s)&&s.includes(a))&&(e[i]=s?[].concat(s,a):a)}else i!==""&&(e[i]=r[i])}return e}function $t(n,e,t,r=null){Ht(n,e,7,[t,r])}const av=np();let lv=0;function cv(n,e,t){const r=n.type,i=(e?e.appContext:n.appContext)||av,s={uid:lv++,vnode:n,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Ny(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ap(r,i),emitsOptions:gp(r,i),emit:null,emitted:null,propsDefaults:Se,inheritAttrs:r.inheritAttrs,ctx:Se,data:Se,props:Se,attrs:Se,slots:Se,refs:Se,setupState:Se,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=Y_.bind(null,s),n.ce&&n.ce(s),s}let Ye=null;const uv=()=>Ye||wt;let Ao,wl;{const n=Jo(),e=(t,r)=>{let i;return(i=n[t])||(i=n[t]=[]),i.push(r),s=>{i.length>1?i.forEach(a=>a(s)):i[0](s)}};Ao=e("__VUE_INSTANCE_SETTERS__",t=>Ye=t),wl=e("__VUE_SSR_SETTERS__",t=>rs=t)}const _s=n=>{const e=Ye;return Ao(n),n.scope.on(),()=>{n.scope.off(),Ao(e)}},fh=()=>{Ye&&Ye.scope.off(),Ao(null)};function Ep(n){return n.vnode.shapeFlag&4}let rs=!1;function hv(n,e=!1,t=!1){e&&wl(e);const{props:r,children:i}=n.vnode,s=Ep(n);x_(n,r,s,e),U_(n,i,t);const a=s?dv(n,e):void 0;return e&&wl(!1),a}function dv(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,R_);const{setup:r}=t;if(r){tr();const i=n.setupContext=r.length>1?pv(n):null,s=_s(n),a=ys(r,n,0,[n.props,i]),l=ff(a);if(nr(),s(),(l||n.sp)&&!Bi(n)&&Kf(n),l){if(a.then(fh,fh),e)return a.then(c=>{ph(n,c)}).catch(c=>{ta(c,n,0)});n.asyncDep=a}else ph(n,a)}else Tp(n)}function ph(n,e,t){fe(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:Re(e)&&(n.setupState=Of(e)),Tp(n)}function Tp(n,e,t){const r=n.type;n.render||(n.render=r.render||Wt);{const i=_s(n);tr();try{C_(n)}finally{nr(),i()}}}const fv={get(n,e){return at(n,"get",""),n[e]}};function pv(n){const e=t=>{n.exposed=t||{}};return{attrs:new Proxy(n.attrs,fv),slots:n.slots,emit:n.emit,expose:e}}function oa(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(Of(ln(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in zi)return zi[t](n)},has(e,t){return t in e||t in zi}})):n.proxy}function mv(n,e=!0){return fe(n)?n.displayName||n.name:n.name||e&&n.__name}function gv(n){return fe(n)&&"__vccOpts"in n}const ei=(n,e)=>o_(n,e,rs);function yv(n,e,t){const r=arguments.length;return r===2?Re(e)&&!ie(e)?bo(e)?yt(n,null,[e]):yt(n,e):yt(n,null,e):(r>3?t=Array.prototype.slice.call(arguments,2):r===3&&bo(t)&&(t=[t]),yt(n,e,t))}const _v="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let El;const mh=typeof window<"u"&&window.trustedTypes;if(mh)try{El=mh.createPolicy("vue",{createHTML:n=>n})}catch{}const bp=El?n=>El.createHTML(n):n=>n,vv="http://www.w3.org/2000/svg",wv="http://www.w3.org/1998/Math/MathML",cn=typeof document<"u"?document:null,gh=cn&&cn.createElement("template"),Ev={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,r)=>{const i=e==="svg"?cn.createElementNS(vv,n):e==="mathml"?cn.createElementNS(wv,n):t?cn.createElement(n,{is:t}):cn.createElement(n);return n==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:n=>cn.createTextNode(n),createComment:n=>cn.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>cn.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,t,r,i,s){const a=t?t.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),t),!(i===s||!(i=i.nextSibling)););else{gh.innerHTML=bp(r==="svg"?`<svg>${n}</svg>`:r==="mathml"?`<math>${n}</math>`:n);const l=gh.content;if(r==="svg"||r==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}e.insertBefore(l,t)}return[a?a.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},Cn="transition",Mi="animation",is=Symbol("_vtc"),Ap={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Tv=Ze({},$f,Ap),bv=n=>(n.displayName="Transition",n.props=Tv,n),Av=bv((n,{slots:e})=>yv(m_,Iv(n),e)),dr=(n,e=[])=>{ie(n)?n.forEach(t=>t(...e)):n&&n(...e)},yh=n=>n?ie(n)?n.some(e=>e.length>1):n.length>1:!1;function Iv(n){const e={};for(const T in n)T in Ap||(e[T]=n[T]);if(n.css===!1)return e;const{name:t="v",type:r,duration:i,enterFromClass:s=`${t}-enter-from`,enterActiveClass:a=`${t}-enter-active`,enterToClass:l=`${t}-enter-to`,appearFromClass:c=s,appearActiveClass:h=a,appearToClass:f=l,leaveFromClass:p=`${t}-leave-from`,leaveActiveClass:_=`${t}-leave-active`,leaveToClass:A=`${t}-leave-to`}=n,S=Dv(i),k=S&&S[0],O=S&&S[1],{onBeforeEnter:q,onEnter:z,onEnterCancelled:W,onLeave:H,onLeaveCancelled:ce,onBeforeAppear:he=q,onAppear:b=z,onAppearCancelled:y=W}=e,g=(T,v,Ce,ft)=>{T._enterCancelled=ft,fr(T,v?f:l),fr(T,v?h:a),Ce&&Ce()},w=(T,v)=>{T._isLeaving=!1,fr(T,p),fr(T,A),fr(T,_),v&&v()},I=T=>(v,Ce)=>{const ft=T?b:z,Fe=()=>g(v,T,Ce);dr(ft,[v,Fe]),_h(()=>{fr(v,T?c:s),an(v,T?f:l),yh(ft)||vh(v,r,k,Fe)})};return Ze(e,{onBeforeEnter(T){dr(q,[T]),an(T,s),an(T,a)},onBeforeAppear(T){dr(he,[T]),an(T,c),an(T,h)},onEnter:I(!1),onAppear:I(!0),onLeave(T,v){T._isLeaving=!0;const Ce=()=>w(T,v);an(T,p),T._enterCancelled?(an(T,_),Th()):(Th(),an(T,_)),_h(()=>{T._isLeaving&&(fr(T,p),an(T,A),yh(H)||vh(T,r,O,Ce))}),dr(H,[T,Ce])},onEnterCancelled(T){g(T,!1,void 0,!0),dr(W,[T])},onAppearCancelled(T){g(T,!0,void 0,!0),dr(y,[T])},onLeaveCancelled(T){w(T),dr(ce,[T])}})}function Dv(n){if(n==null)return null;if(Re(n))return[Qa(n.enter),Qa(n.leave)];{const e=Qa(n);return[e,e]}}function Qa(n){return Iy(n)}function an(n,e){e.split(/\s+/).forEach(t=>t&&n.classList.add(t)),(n[is]||(n[is]=new Set)).add(e)}function fr(n,e){e.split(/\s+/).forEach(r=>r&&n.classList.remove(r));const t=n[is];t&&(t.delete(e),t.size||(n[is]=void 0))}function _h(n){requestAnimationFrame(()=>{requestAnimationFrame(n)})}let Sv=0;function vh(n,e,t,r){const i=n._endId=++Sv,s=()=>{i===n._endId&&r()};if(t!=null)return setTimeout(s,t);const{type:a,timeout:l,propCount:c}=Rv(n,e);if(!a)return r();const h=a+"end";let f=0;const p=()=>{n.removeEventListener(h,_),s()},_=A=>{A.target===n&&++f>=c&&p()};setTimeout(()=>{f<c&&p()},l+1),n.addEventListener(h,_)}function Rv(n,e){const t=window.getComputedStyle(n),r=S=>(t[S]||"").split(", "),i=r(`${Cn}Delay`),s=r(`${Cn}Duration`),a=wh(i,s),l=r(`${Mi}Delay`),c=r(`${Mi}Duration`),h=wh(l,c);let f=null,p=0,_=0;e===Cn?a>0&&(f=Cn,p=a,_=s.length):e===Mi?h>0&&(f=Mi,p=h,_=c.length):(p=Math.max(a,h),f=p>0?a>h?Cn:Mi:null,_=f?f===Cn?s.length:c.length:0);const A=f===Cn&&/\b(transform|all)(,|$)/.test(r(`${Cn}Property`).toString());return{type:f,timeout:p,propCount:_,hasTransform:A}}function wh(n,e){for(;n.length<e.length;)n=n.concat(n);return Math.max(...e.map((t,r)=>Eh(t)+Eh(n[r])))}function Eh(n){return n==="auto"?0:Number(n.slice(0,-1).replace(",","."))*1e3}function Th(){return document.body.offsetHeight}function Cv(n,e,t){const r=n[is];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}const Io=Symbol("_vod"),Ip=Symbol("_vsh"),Tl={beforeMount(n,{value:e},{transition:t}){n[Io]=n.style.display==="none"?"":n.style.display,t&&e?t.beforeEnter(n):Vi(n,e)},mounted(n,{value:e},{transition:t}){t&&e&&t.enter(n)},updated(n,{value:e,oldValue:t},{transition:r}){!e!=!t&&(r?e?(r.beforeEnter(n),Vi(n,!0),r.enter(n)):r.leave(n,()=>{Vi(n,!1)}):Vi(n,e))},beforeUnmount(n,{value:e}){Vi(n,e)}};function Vi(n,e){n.style.display=e?n[Io]:"none",n[Ip]=!e}const kv=Symbol(""),Pv=/(^|;)\s*display\s*:/;function Mv(n,e,t){const r=n.style,i=Le(t);let s=!1;if(t&&!i){if(e)if(Le(e))for(const a of e.split(";")){const l=a.slice(0,a.indexOf(":")).trim();t[l]==null&&so(r,l,"")}else for(const a in e)t[a]==null&&so(r,a,"");for(const a in t)a==="display"&&(s=!0),so(r,a,t[a])}else if(i){if(e!==t){const a=r[kv];a&&(t+=";"+a),r.cssText=t,s=Pv.test(t)}}else e&&n.removeAttribute("style");Io in n&&(n[Io]=s?r.display:"",n[Ip]&&(r.display="none"))}const bh=/\s*!important$/;function so(n,e,t){if(ie(t))t.forEach(r=>so(n,e,r));else if(t==null&&(t=""),e.startsWith("--"))n.setProperty(e,t);else{const r=Vv(n,e);bh.test(t)?n.setProperty(Sr(r),t.replace(bh,""),"important"):n[r]=t}}const Ah=["Webkit","Moz","ms"],Ya={};function Vv(n,e){const t=Ya[e];if(t)return t;let r=Nt(e);if(r!=="filter"&&r in n)return Ya[e]=r;r=Yo(r);for(let i=0;i<Ah.length;i++){const s=Ah[i]+r;if(s in n)return Ya[e]=s}return e}const Ih="http://www.w3.org/1999/xlink";function Dh(n,e,t,r,i,s=Py(e)){r&&e.startsWith("xlink:")?t==null?n.removeAttributeNS(Ih,e.slice(6,e.length)):n.setAttributeNS(Ih,e,t):t==null||s&&!yf(t)?n.removeAttribute(e):n.setAttribute(e,s?"":Zt(t)?String(t):t)}function Sh(n,e,t,r,i){if(e==="innerHTML"||e==="textContent"){t!=null&&(n[e]=e==="innerHTML"?bp(t):t);return}const s=n.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const l=s==="OPTION"?n.getAttribute("value")||"":n.value,c=t==null?n.type==="checkbox"?"on":"":String(t);(l!==c||!("_value"in n))&&(n.value=c),t==null&&n.removeAttribute(e),n._value=t;return}let a=!1;if(t===""||t==null){const l=typeof n[e];l==="boolean"?t=yf(t):t==null&&l==="string"?(t="",a=!0):l==="number"&&(t=0,a=!0)}try{n[e]=t}catch{}a&&n.removeAttribute(i||e)}function yr(n,e,t,r){n.addEventListener(e,t,r)}function Nv(n,e,t,r){n.removeEventListener(e,t,r)}const Rh=Symbol("_vei");function Ov(n,e,t,r,i=null){const s=n[Rh]||(n[Rh]={}),a=s[e];if(r&&a)a.value=r;else{const[l,c]=Lv(e);if(r){const h=s[e]=Gv(r,i);yr(n,l,h,c)}else a&&(Nv(n,l,a,c),s[e]=void 0)}}const Ch=/(?:Once|Passive|Capture)$/;function Lv(n){let e;if(Ch.test(n)){e={};let r;for(;r=n.match(Ch);)n=n.slice(0,n.length-r[0].length),e[r[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):Sr(n.slice(2)),e]}let Ja=0;const xv=Promise.resolve(),Fv=()=>Ja||(xv.then(()=>Ja=0),Ja=Date.now());function Gv(n,e){const t=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=t.attached)return;Ht(Hv(r,t.value),e,5,[r])};return t.value=n,t.attached=Fv(),t}function Hv(n,e){if(ie(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const kh=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,Uv=(n,e,t,r,i,s)=>{const a=i==="svg";e==="class"?Cv(n,r,a):e==="style"?Mv(n,t,r):Ko(e)?Xl(e)||Ov(n,e,t,r,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Bv(n,e,r,a))?(Sh(n,e,r),!n.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Dh(n,e,r,a,s,e!=="value")):n._isVueCE&&(/[A-Z]/.test(e)||!Le(r))?Sh(n,Nt(e),r,s,e):(e==="true-value"?n._trueValue=r:e==="false-value"&&(n._falseValue=r),Dh(n,e,r,a))};function Bv(n,e,t,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in n&&kh(e)&&fe(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=n.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return kh(e)&&Le(t)?!1:e in n}const Do=n=>{const e=n.props["onUpdate:modelValue"]||!1;return ie(e)?t=>to(e,t):e};function $v(n){n.target.composing=!0}function Ph(n){const e=n.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Xr=Symbol("_assign"),Kt={created(n,{modifiers:{lazy:e,trim:t,number:r}},i){n[Xr]=Do(i);const s=r||i.props&&i.props.type==="number";yr(n,e?"change":"input",a=>{if(a.target.composing)return;let l=n.value;t&&(l=l.trim()),s&&(l=yo(l)),n[Xr](l)}),t&&yr(n,"change",()=>{n.value=n.value.trim()}),e||(yr(n,"compositionstart",$v),yr(n,"compositionend",Ph),yr(n,"change",Ph))},mounted(n,{value:e}){n.value=e??""},beforeUpdate(n,{value:e,oldValue:t,modifiers:{lazy:r,trim:i,number:s}},a){if(n[Xr]=Do(a),n.composing)return;const l=(s||n.type==="number")&&!/^0\d/.test(n.value)?yo(n.value):n.value,c=e??"";l!==c&&(document.activeElement===n&&n.type!=="range"&&(r&&e===t||i&&n.value.trim()===c)||(n.value=c))}},bl={deep:!0,created(n,{value:e,modifiers:{number:t}},r){const i=Xo(e);yr(n,"change",()=>{const s=Array.prototype.filter.call(n.options,a=>a.selected).map(a=>t?yo(So(a)):So(a));n[Xr](n.multiple?i?new Set(s):s:s[0]),n._assigning=!0,xf(()=>{n._assigning=!1})}),n[Xr]=Do(r)},mounted(n,{value:e}){Mh(n,e)},beforeUpdate(n,e,t){n[Xr]=Do(t)},updated(n,{value:e}){n._assigning||Mh(n,e)}};function Mh(n,e){const t=n.multiple,r=ie(e);if(!(t&&!r&&!Xo(e))){for(let i=0,s=n.options.length;i<s;i++){const a=n.options[i],l=So(a);if(t)if(r){const c=typeof l;c==="string"||c==="number"?a.selected=e.some(h=>String(h)===String(l)):a.selected=Vy(e,l)>-1}else a.selected=e.has(l);else if(Zo(So(a),e)){n.selectedIndex!==i&&(n.selectedIndex=i);return}}!t&&n.selectedIndex!==-1&&(n.selectedIndex=-1)}}function So(n){return"_value"in n?n._value:n.value}const zv=["ctrl","shift","alt","meta"],jv={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,e)=>zv.some(t=>n[`${t}Key`]&&!e.includes(t))},Vh=(n,e)=>{const t=n._withMods||(n._withMods={}),r=e.join(".");return t[r]||(t[r]=(i,...s)=>{for(let a=0;a<e.length;a++){const l=jv[e[a]];if(l&&l(i,e))return}return n(i,...s)})},qv=Ze({patchProp:Uv},Ev);let Nh;function Wv(){return Nh||(Nh=$_(qv))}const Kv=(...n)=>{const e=Wv().createApp(...n),{mount:t}=e;return e.mount=r=>{const i=Qv(r);if(!i)return;const s=e._component;!fe(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const a=t(i,!1,Xv(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),a},e};function Xv(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function Qv(n){return Le(n)?document.querySelector(n):n}const Yv="/Eredan-Arena-Box/assets/EABox-w-B8FcAl57.svg",bn=(n,e)=>{const t=n.__vccOpts||n;for(const[r,i]of e)t[r]=i;return t},Jv={mounted(){this.loadFacebookSDK()},methods:{redirectToNewPage(){window.location.href="https://discord.gg/uGjZ84wUEU"},loadFacebookSDK(){if(window.FB)window.FB.XFBML.parse();else{let n=document.createElement("script");n.src="https://connect.facebook.net/zh_TW/sdk.js#xfbml=1&version=v18.0",n.async=!0,document.body.appendChild(n)}}}},Zv={class:"intro-container"};function ew(n,e,t,r,i,s){const a=D_("Div");return Y(),ee("div",Zv,[yt(a,null,{default:ac(()=>[C("button",{class:"image-button",onClick:e[0]||(e[0]=(...l)=>s.redirectToNewPage&&s.redirectToNewPage(...l))},e[1]||(e[1]=[C("img",{src:"https://support.discord.com/hc/theming_assets/01HZPN9XBJQZSPXWYYVY76TBEE"},null,-1)]))]),_:1}),e[2]||(e[2]=C("div",null,[C("div",{class:"fb-page","data-href":"https://www.facebook.com/EredanArenaOfficial/","data-tabs":"timeline","data-width":"500","data-height":"600","data-small-header":"false","data-adapt-container-width":"true","data-hide-cover":"false","data-show-facepile":"true"})],-1)),e[3]||(e[3]=C("div",{class:"dashed-line"},null,-1)),e[4]||(e[4]=C("p",{class:"intro-text"}," Due to the scarcity of information available for this game, I created this website to make it easier for players to enjoy their experience. ",-1)),e[5]||(e[5]=C("p",{class:"intro-text"},"Most of the data here is sourced from the official Discord, and my role is simply to organize and share it.",-1))])}const tw=bn(Jv,[["render",ew],["__scopeId","data-v-98d936aa"]]),nw={key:0},rw={class:"character-card-container"},iw=["src","onClick"],sw={key:1,style:{"padding-top":"50px"}},ow={class:gn(["character-container","w-border"])},aw=["src"],lw={class:"character-info"},cw={class:"tags"},uw=["onMouseover"],hw={__name:"CardFilter",setup(n){oe("filter");const e=oe({}),t=oe(!1),r=oe(null),i=oe({show:!1,text:"",x:0,y:0}),s=async()=>{try{const p=await fetch("./src/data/card.json");e.value=await p.json()}catch(p){console.error("讀取 JSON 失敗：",p)}};qn(()=>{s()});const a=p=>{t.value=!0,r.value=p},l=p=>({craft:"tag-craft",allava:"tag-allava",lightroot:"tag-lightroot",opp_spore:"tag-opp-spore"})[p]||"tag-default",c=(p,_)=>{i.value.text=h[p]||"無說明",i.value.x=_.pageX+10,i.value.y=_.pageY+10,i.value.show=!0},h={craft:"與工匠相關的能力",allava:"阿瓦隆相關技能",lightroot:"光根系統強化",opp_spore:"對抗孢子的能力"},f=()=>{i.value.show=!1};return(p,_)=>(Y(),ee(Pe,null,[t.value?Dt("",!0):(Y(),ee("div",nw,[_[1]||(_[1]=C("h1",null,"Card",-1)),_[2]||(_[2]=C("p",null,"Some cards are shown here, but they are not comprehensive",-1)),C("div",rw,[(Y(!0),ee(Pe,null,Et(e.value,(A,S)=>(Y(),ee("div",{key:S,class:"character-card"},[C("img",{src:"src/assets/img/shibi_bg/"+A.id+".png",onClick:k=>a(A)},null,8,iw)]))),128))])])),t.value?(Y(),ee("div",sw,[C("button",{class:"back-button",onClick:_[0]||(_[0]=A=>t.value=!t.value)},_[3]||(_[3]=[C("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[C("path",{d:"M15 18l-6-6 6-6",stroke:"black","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])),C("div",null,[C("div",ow,[C("img",{src:r.value.img_src+".png",class:"character-img"},null,8,aw),C("div",lw,[C("p",null,[C("strong",null,Ue(r.value.name),1)]),C("p",null,[_[4]||(_[4]=C("strong",null,"ID：",-1)),wp(" "+Ue(r.value.id),1)]),C("div",cw,[_[5]||(_[5]=C("strong",null,"標籤：",-1)),(Y(!0),ee(Pe,null,Et(r.value.tag,(A,S)=>(Y(),ee("span",{key:S,class:gn(["tag",l(A)]),onMouseover:k=>c(A,k),onMouseleave:f},Ue(A),43,uw))),128))]),i.value.show?(Y(),ee("div",{key:0,class:"tooltip",style:gs({top:i.value.y+"px",left:i.value.x+"px"})},[_[6]||(_[6]=C("img",{src:"src/assets/img/capacites/113.png",style:{width:"50px"}},null,-1)),C("p",null,Ue(i.value.text),1)],4)):Dt("",!0)])])])])):Dt("",!0)],64))}},dw=bn(hw,[["__scopeId","data-v-65326c50"]]),fw=[{name:"swordDice",id:"000"},{name:"redDice",id:"001"},{name:"blueDice",id:"002"},{name:"yellowDice",id:"003"},{"full-name":"Sap Hearts",name:"sap",id:"1"},{"full-name":"Nehantists",name:"neh",id:"3"},{"full-name":"Zil Warriors",name:"zil",id:"5"},{"full-name":"Avalonians",name:"ava",id:"32"},{"full-name":"Tempus",name:"tem",id:"51"},{"full-name":"The Council",name:"cou",id:"57"},{"full-name":"Stonelinkers",name:"sto",id:"9"},{"full-name":"Kotoba",name:"kot",id:"2"},{"full-name":"Desert Nomads",name:"nom",id:"6"},{"full-name":"Noz'Dingard Envoys",name:"noz",id:"4"},{"full-name":"Pirates",name:"pir",id:"7"},{"full-name":"Winter Tribes",name:"win",id:"41"},{"full-name":"Equinoxians",name:"equinox",id:"58"},{"full-name":"Runic Legion",name:"run",id:"8"},{"full-name":"Mercenaries",name:"mer",id:"10"},{name:"warrior",id:"11"},{name:"marauder",id:"13"},{name:"craftsman",id:"15"},{name:"unknown",id:"17"},{name:"bard",id:"40"},{name:"sidekick",id:"54"},{name:"mage",id:"12"},{name:"priest",id:"14"},{name:"colossus",id:"33"},{name:"captain",id:"53"},{name:"protector",id:"56"},{name:"berserker",id:"16"},{name:"beast",id:"18"},{name:"demon",id:"20"},{name:"elfine",id:"22"},{name:"human",id:"27"},{name:"guem","full-name":"guemelite",id:"25"},{name:"iceelf",id:"21"},{name:"unkrace",id:"28"},{name:"dais",id:"19"},{name:"solarian",id:"30"},{name:"dragon",id:"52"},{name:"undead",id:"29"},{name:"eltarite",id:"23"},{name:"naga",id:"55"},{name:"golem",id:"24"},{name:"homchai",id:"26"}],pw={AVALONIAN:{name:{zh:"阿瓦隆王國"},description:{en:"Led by the mighty king Aez and their beloved queen Aelide, the small Kingdom of Avalonia stands strong against any challenge. Avalonians never back down: the harder the battle gets, the stronger they become.",zh:"由強大的國王艾茲與他們心愛的女王艾莉德領導，阿瓦隆這個小王國在任何挑戰面前都保持堅強。阿瓦隆人從不退縮：戰鬥越艱難，他們便越強大。"},"Common Races":{en:"Human",zh:"人類"},"Common Features":{en:"Runic Skills, Runes, Shock, Bulwark, +Strength",zh:"符文技能, 符文, 震懾, 防禦, +力量"}},KOTOBA:{name:{zh:"言葉"},description:{en:"The Kotoba banner rallies the strongest fighters of the Xzia Empire, an ancient reign built upon a single belief: Strength can conquer anything. Each Kotoba Hero devotes themselves fully to that belief.",zh:"言葉旗幟召集了西亞帝國最強的戰士，這是一個建立在單一信念上的古老政權：力量可以征服一切。每位言葉英雄都全身心投入這一信念。"},"Common Races":{en:"Human",zh:"人類"},"Common Features":{en:"Strength Skills, Fireball, Dodge, Backstab, Shock",zh:"力量技能, 火球, 閃避, 背刺, 震懾"}},"SAP HEART":{name:{zh:"樹心"},description:{en:"The Sap Heart guild includes all heroes with a strong bond with nature and an iron will to protect the World Tree. They fight relentlessly, but are also gifted with incredible healing powers.",zh:"樹心公會包含了所有與大樹有著強大聯繫，並擁有保護世界樹的堅定意志的英雄。他們無畏地戰鬥，並且擁有強大的治癒能力。"},"Common Races":{en:"Elfine, Hom'chai, Dais",zh:"精靈族, 荷姆柴, 戴斯族"},"Common Features":{en:"Heal, Thorn, +/x Strength, Physical Attack, Rage",zh:"治療, 荊棘, +/x 力量, 物理攻擊, 暴怒"}},PIRATE:{name:{zh:"海盜"},description:{en:"Roaming across the seas of Guem, these swashbucklers are very dangerous because they act as though they have nothing to lose. They specialize in striking their opponents with thunder and powder blasts.",zh:"在格姆的海域上游蕩，這些海盜非常危險，因為他們的行為如同什麼都不在乎。他們專精於用雷霆和火藥攻擊敵人。"},"Common Races":{en:"Human, Guemelite, Beast, Golem",zh:"人類, 格姆人, 野獸, 魔像"},"Common Features":{en:"Lightning, Powder, +Strength, Thunderstruck",zh:"閃電, 火藥, +力量, 雷擊"}},"NOZ'DINGARD ENVOY":{name:{zh:"諾茲丁加德使者"},description:{en:"The Noz'Dingard Envoys are great experts in all kinds of magic. With the mighty strength of the Dragon Knights, the lethal dexterity of the Witchblades, and the arcane knowledge of the Compendium, Draconia stands stronger than ever.",zh:"諾茲丁加德使者是各種魔法的偉大專家。憑藉著龍騎士的強大力量、女巫劍刃的致命敏捷，還有《魔典》中的神秘知識，德拉科尼亞比以往更加強大。"},"Common Races":{en:"Human, Guemelite, Golem",zh:"人類, 格姆人, 魔像"},"Common Features":{en:"Skills based on dice colour, +DMG, Fireball, Spellbreaker",zh:"基於骰子顏色的技能, +傷害, 火球, 破魔"}},"ZIL WARRIORS":{name:{zh:"齊爾戰士"},description:{en:"The Zil Warriors are the most wacky and erratic fellows you'll ever meet. Extremely aggressive and unpredictable, they will downright tear you to shreds or scare you to the bone.",zh:"齊爾戰士是你會遇到的最瘋狂、最不可預測的人。他們極具攻擊性且行為無常，會把你撕成碎片，或者把你嚇得魂飛魄散。"},"Common Races":{en:"Human, Beast, Guemelite",zh:"人類, 野獸, 格姆人"},"Common Features":{en:"Critical, Backstab, Terror, Mimic, Berserk",zh:"暴擊, 背刺, 恐懼, 模仿, 狂暴"}},"RUNIC LEGION":{name:{zh:"符文軍團"},description:{en:"The remote region of Tantad is home to the greatest army the lands of Guem has ever known: the Runic Legion. Strong, firm, and proud, the Legion's tactical prowess is unparalleled.",zh:"遙遠的坦塔德地區是格姆大陸上最強大的軍隊——符文軍團的故鄉。這支軍隊強大、堅定、自豪，並且在戰術上無人能敵。"},Races:{en:"Human, Beast, Guemelite",zh:"人類, 野獸, 格姆人"},"Common Features":{en:"Runic Skills, Runes, Shock, Bulwark, +Strength",zh:"符文技能, 符文, 震懾, 防禦, +力量"}},Nomades:{name:{zh:"遊牧民族"},description:{en:"The Nomads inhabit the unforgiving southern lands of Guem, where the Desert dictates its own laws of survival. These harsh life conditions eventually turned the Nomads into magnificent fighters, blessed with their faith in multiple gods.",zh:"遊牧民族生活在格姆大陸的無情南方荒漠，這裡的沙漠擁有自己的生存法則。惡劣的生存條件最終讓遊牧民族成為了強大的戰士，並因信仰多神而獲得祝福。"},"Common Races":{en:"Human, Solarian, Undead",zh:"人類, 索拉利安, 死屍"},"Common Features":{en:"Resilience, Blessing, Scarab, Eclipse, Smite",zh:"韌性, 祝福, 神蠍, 蝕, 斬擊"}},NEHANTISTE:{name:{zh:"尼漢提斯特"},description:{en:"The depths of Guem host a terrible, hellish army, led by none other than the Dark Lord Nehant, sworn enemy of all life. These hellspawn specialize in burning down their opponents and rendering them unable to fight back.",zh:"格姆大陸的深淵中，存在著一支可怕的地獄軍隊，由黑暗領主尼漢領導，他是所有生命的死敵。這些地獄的後裔專門燒盡敵人，讓他們無法反抗。"},"Common Races":{en:"Demon, Undead, Guemelite",zh:"惡魔, 死屍, 格姆人"},"Common Features":{en:"Fireball, Opp -DMG, Life Drain, Berserk",zh:"火球, 反傷, 生命吸取, 狂暴"}},MERCENARY:{name:{zh:"雇傭兵"},description:{en:"Mercenaries have no affiliation whatsoever with any existing guild. They have neither unique characteristics nor themes, but they host very powerful heroes that can be occasionally rallied by other guilds.",zh:"雇傭兵並不隸屬於任何現有的公會。他們沒有獨特的特徵或主題，但他們擁有非常強大的英雄，偶爾會被其他公會招募。"},"Common Races":{en:"N/A",zh:"無"},"Common Features":{en:"N/A",zh:"無"}},TEMPUS:{name:{zh:"時光法師"},description:{en:"The Tempus are a restricted group of enigmatic spellweavers that control the flow of space and time. They are very strategic heroes that specialize in taking the reins of the match and turning the opponents' tactics against them.",zh:"時光法師是一群神秘的法師，他們掌控著空間與時間的流動。這些英雄非常具戰略性，擅長掌握比賽的主導權，並將對手的戰術反轉為己用。"},"Common Races":{en:"Mage, Priest",zh:"法師, 牧師"},"Common Features":{en:"Déjà Vu, Portal",zh:"既視感, 傳送門"}},"WINTER TRIBES":{name:{zh:"冬季部落"},description:{en:"The Winter Tribes thrive in the deep north, an unforgiving place where the rattling cold claims most lives. But some managed to survive and fully embrace the Icy essence of these lands, reaching new heights of power.",zh:"冬季部落生存於格姆大陸的極北地區，那裡的嚴寒環境使大多數生命無法生還。但有些人成功存活並完全融入這片冰冷大地的精髓，達到了新的力量巔峰。"},"Common Races":{en:"Ice Elves",zh:"冰精靈"},"Common Features":{en:"Icy Skills, Frostbite, Ice, Berserk, +Strength",zh:"冰霜技能, 凍傷, 冰霜, 狂暴, +力量"}},"STONES LINKER":{name:{zh:"石之聯結者"},description:{en:"The Stone Linkers are a complex guild composed of powerful Guemelites. It is led by Master Maen and Master-Linker Laelyse, who are also members of the Guild Council. For obscure reasons, they have long remained isolated from other guilds, but since the arrival of the Equinoxians in the lands of Guem, they advocate for alliances between guilds to defeat the enemy.",zh:"石之聯結者是一個由強大的格姆人組成的複雜公會。它由馬恩大師和聯結者萊莉絲大師領導，他們同時也是公會議會的成員。由於某些不明原因，他們長期與其他公會保持隔離，但自從春秋大陸的力量來到格姆大陸後，他們開始倡導公會間的聯盟，以共同對抗敵人。"},"Common Races":{en:"N/A",zh:"無"},"Common Features":{en:"N/A",zh:"無"}},"THE COUNCIL":{name:{zh:""},description:{en:"",zh:""},"Common Races":{en:"",zh:""},"Common Features":{en:"",zh:""}},EQUINOXIANS:{name:{zh:""},description:{en:"",zh:""},"Common Races":{en:"",zh:""},"Common Features":{en:"",zh:""}}},mw=["Warrior","Marauder","Craftsman","Unknown","Bard","Sidekick","Mage","Priest","Colossus","Captain","Protector","Berserker"],gw=["Beast","Demon","Elfine","Human","Guemelite","Ice Elf","unkrace","Dais","Solarian","Dragon","Undead","Eltarite","Naga","Golem","Homchai"],yw=JSON.parse(`[{"name":"Absorb","id":"4394","description":"Each of your opponents lose X of the specified alteration and you gain X of that alteration for each of them. \\nYou gain even if they didn't lose anything.","img_url":"https://www.eredan-arena.com/images/HD/capacites/4394.png"},{"name":"Aftermath","id":"8407","description":"Negative alteration.\\nAt the start of the fight OR at the end of skill activation phase suffer X Flat DMG.\\nThis alteration is consumed when triggered.\\nFlat DMG is a DMG that ignores everything.","img_url":"https://www.eredan-arena.com/images/HD/capacites/8407.png"},{"name":"Ageless Wisdom","id":"9612","description":"At the start of the fight, if you have at least:\\n2 Dice Rerolls lefting: you get 10 Dice Rerolls\\n4 Dice Rerolls lefting: deal 3 times as much Spellbreaker DMG as your opp Strength\\n8 Rerolls lefting: all your heroes receives 5 Stardust.\\nSpellbreaker damage is a normal damage that also removes half of a random positive alteration from your opponent.","img_url":"https://www.eredan-arena.com/images/HD/capacites/9612.png"},{"name":"Allergy Bouquet","id":"5930","description":"Passive.\\nEach time you activate an ability, the current TOTAL DMG you have been dealt is increased by 5%.\\n(The damage caused ignores any alteration)","img_url":"https://www.eredan-arena.com/images/HD/capacites/5930.png"},{"name":"Allure","id":"5868","description":"Negative Alteration.\\nThe next X times you increase or obtain a positive alteration, half (rounded up) of this increase/new alteration is given to your opponent instead. (Only the increased part is considered if the card already has the alteration)\\nThis skill currently has a bug that when the holder gets an alteration with value 1, it is consumed but happens nothing.","img_url":"https://www.eredan-arena.com/images/HD/capacites/5868.png"},{"name":"Alluring Skill","id":"5868","description":"After the skill effect, applies to the opponent 1 Allure.","img_url":"https://www.eredan-arena.com/images/HD/capacites/5868.png"},{"name":"Almighty Frost","id":"9715","description":"Passive.\\nEach time your opponent receives a Frost token, you get 20 Might for each frost token received by them.\\nIf you have more than 200 Might, you get 1 Critical instead.","img_url":"https://www.eredan-arena.com/images/HD/capacites/9715.png"},{"name":"Angry Totem","id":"6652","description":"Passive. Neutral Alteration.\\nEach time you gain Strength, your opponent's increase by 20% of it for each Angry Totem you have.\\nThis effect cannot trigger another totem.","img_url":"https://www.eredan-arena.com/images/HD/capacites/6652.png"},{"name":"Arcane Barrier","id":"4798","description":"Positive Alteration. Shield-like.\\nAbsorb the X next DMG you suffer (Normal and Shock DMG only).\\nDuring the combat, while you possess this alteration, every time you receive a negative alteration, you inflict a Shock 500 to your opponent, and every time you receive a positive alteration that isn't Arcane Barrier, you receive more 500 Arcane Barrier.\\nIncreasing alterations triggers the side effect too.\\nShock DMG is a DMG that cannot be altered by any alteration, but it cannot ignore shield-like skills.","img_url":"https://www.eredan-arena.com/images/HD/capacites/4798.png"},{"name":"Aura","id":"q5vmftf","description":"Neutral Alteration. Passive.\\nIncreases the value of a specified alteration either by a given value or by a given percentage.","img_url":"https://i.imgur.com/q5vmftf.png"},{"name":"Azure Tsunami","id":"3950","description":"At start of the combat:\\nFor each :blueDice: causes 1000 Pure DMG.\\nIncreases all your positive alterations by 25% (rounded up).\\nPure DMG is a DMG that ignores any alteration that could reduce or prevent it.","img_url":"https://www.eredan-arena.com/images/HD/capacites/3950.png"},{"name":"Backstab","id":"110","description":"Deals X Normal DMG to your opponent.\\nYour opponent loses X/2 Strength.\\nNormal DMG is a DMG that can be altered by anything.","img_url":"https://www.eredan-arena.com/images/HD/capacites/110.png"},{"name":"Barrage","id":"4141","description":"Deal X Normal DMG to your opponent.\\nYour opponent receives X/10 DMG-.\\nRepeat this skill effect for each Powder your opponent has. Consumes his powders.\\nNormal DMG is a DMG that can be altered by anything.","img_url":"https://www.eredan-arena.com/images/HD/capacites/4141.png"},{"name":"Berserk","id":"50","description":"Positive alteration.\\nEach time you suffer a DMG that is not Flat DMG, increases your Strength by X.\\nFlat DMG is a DMG that ignores every alteration from you and your opponent.","img_url":"https://www.eredan-arena.com/images/HD/capacites/50.png"},{"name":"Big Bang Requiem","id":"8049","description":"This Alteration's tick starts at 12, each time one of your opponent dice change, the tick goes down by 1 and your opponent receives 300 Echo.\\nWhen the tick goes down to 0: All opp dice are changed to :yellowDice: & deal 99 999 DMG.","img_url":"https://www.eredan-arena.com/images/HD/capacites/8049.png"},{"name":"Bite","id":"8595","description":"Deal X normal damage and your opponent receive 100 Bleeding.","img_url":"https://www.eredan-arena.com/images/HD/capacites/8595.png"},{"name":"Bleeding","id":"4535","description":"When the bleeding hero takes damage, he immediately suffers an additional flat damage equal to his bleeding value.\\nIf the damage is absorbed or is equal 0, Bleeding won't trigger.","img_url":"https://www.eredan-arena.com/images/HD/capacites/4535.png"},{"name":"Blessed Seeds","id":"7088","description":"The next X times you activate an ability, you receive 200 Lightroot.","img_url":"https://www.eredan-arena.com/images/HD/capacites/7088.png"},{"name":"Blessing","id":"419","description":"Each time you deal DMG, you are healed by X.","img_url":"https://www.eredan-arena.com/images/HD/capacites/419.png"},{"name":"Blizzard","id":"258","description":"Positive alteration. Shield-like.\\nAbsorb the X next DMG you suffer (Normal and Shock DMG only).\\nEach time Blizzard absorbs DMG, your opponent gets 1 Frost.","img_url":"https://www.eredan-arena.com/images/HD/capacites/258.png"},{"name":"Bloodthirsty Thorns","id":"9193","description":"Passive.\\nEach time your heroes' Thorns deal damage, their opponent receives 10% of it's value as Bleeding.","img_url":"https://www.eredan-arena.com/images/HD/capacites/9193.png"},{"name":"Blue Gift","id":"3991","description":"Neutral Alteration.\\nAfter your opponent have dealt DMG to you and your DMG suffered is higher or equal to 5000 DMG, receive 800 Shield for each Blue Gift you have and consume all.\\nIf you receive a gift after you already have 5000 suffered DMG, the gift is going to trigger in the next DMG you suffer.","img_url":"https://www.eredan-arena.com/images/HD/capacites/3991.png"},{"name":"Brain Freeze","id":"7089","description":"The 2 heroes in combat lose all their positive alterations and all their :swordDice: become :redDice:.","img_url":"https://www.eredan-arena.com/images/HD/capacites/7089.png"},{"name":"Brave skill","id":"GMSqyhE","description":"The skill is amplified by half if your opponent is more wounded than you.","img_url":"https://i.imgur.com/GMSqyhE.png"},{"name":"Bulwark","id":"723","description":"All the damage received above X is reduced to X.","img_url":"https://www.eredan-arena.com/images/HD/capacites/723.png"},{"name":"Burgundy Gift","id":"9716","description":"Neutral Alteration.\\nAt the start of the fight, your active allies receive 2 Stardust.","img_url":"https://www.eredan-arena.com/images/HD/capacites/9716.png"},{"name":"Burning Light","id":"4593","description":"Every time your heroes are healed, they cause a DMG to their opponents equals 35% of the Heal.","img_url":"https://www.eredan-arena.com/images/HD/capacites/4593.png"},{"name":"Caress of Death","id":"7458","description":"Steal your opponent's positive alterations one by one. For each stolen alteration deal 1000 Life Drain DMG.\\nA Life Drain DMG is a Normal DMG that heals you by the same starting value.\\nThe opposing positive are stolen BEFORE the Life Drains.","img_url":"https://www.eredan-arena.com/images/HD/capacites/7458.png"},{"name":"Chain Lightning","id":"4059","description":"If the card suffers from the thunderstruck effect, it spreads it at 30% to its allies.","img_url":"https://www.eredan-arena.com/images/HD/capacites/4059.png"},{"name":"Chanelled Lightning","id":"8738","description":"Negative Alteration.\\nAt the start of the fight, suffer X Lightning DMG and your allies receives X/2 Chanelled Lightning.\\nLightning DMG is a normal DMG that applies 10% of its value as Thunderstruck to the opponent.","img_url":"https://www.eredan-arena.com/images/HD/capacites/8738.png"},{"name":"Charged Skill","id":"HQAxqc8","description":"Increases the skill value by half consuming 1 Powder or 100 Thunderstruck on you.\\n(Powder has priority if you have both.)","img_url":"https://i.imgur.com/HQAxqc8.png"},{"name":"Charts of Infinity","id":"6344","description":"Neutral Alteration.\\nThe next times you activate a skill deal 2000 pure DMG and your opponent receives half of one of your negative alterations, and his allies receive 25% of it.\\nPure DMG is a DMG that ignores all alterations that could reduce or prevent it.\\nYou do not lose any part of your negative alterations.","img_url":"https://www.eredan-arena.com/images/HD/capacites/6344.png"},{"name":"Chromatic Symphony","id":"5757","description":"At the start of combat, your opponent receives 500 Echo for each of your unique dice pairs (RR or BB or YY or SS).","img_url":"https://www.eredan-arena.com/images/HD/capacites/5757.png"},{"name":"Cleaver of Athorg","id":"5754","description":"Neutral Alteration.\\nEach time you activate a Skill, your opponent receive 2 Frost for each of your :swordDice:.\\nThis alteration isn't consumable.","img_url":"https://www.eredan-arena.com/images/HD/capacites/5754.png"},{"name":"Cohesion","id":"1750","description":"At the start of combat, the value of your skills is increased by 10% for each of the specified allies.","img_url":"https://www.eredan-arena.com/images/HD/capacites/1750.png"},{"name":"Confusion","id":"8778","description":"Negative Alteration. Consumable\\nWhen the holder of this debuff gets hit by a :swordDice:, the holder causes a :swordDice: DMG to himself too.\\nThe Confusion DMG is a normal DMG that the card causes to itself considering all the alterations he has, i.e., consuming own Criticals, increased by DMG+, decreased by DMG-...","img_url":"https://www.eredan-arena.com/images/HD/capacites/8778.png"},{"name":"Constricting Skill","id":"6872","description":"After the skill effect, applies to the opponent as much Constriction as half of the skill value.","img_url":"https://www.eredan-arena.com/images/HD/capacites/6872.png"},{"name":"Constriction","id":"6872","description":"Negative alteration.\\nEach time you activate a skill, suffer X DMG and all your negative alterations are increased by 10%.\\nThis alteration self-increases too.","img_url":"https://www.eredan-arena.com/images/HD/capacites/6872.png"},{"name":"Corrupt","id":"4500","description":"The skill is amplified by half for each negative alteration on your opponent.","img_url":"https://www.eredan-arena.com/images/HD/capacites/4500.png"},{"name":"Crackling Incantation","id":"5049","description":"Each time you are dealt DMG, you receive 3% of the total as DMG+ (flat increase if you already have DMG+).\\nA flat increase is the increase of an alteration that cannot interact with any other effect in the game.","img_url":"https://www.eredan-arena.com/images/HD/capacites/5049.png"},{"name":"Craft","id":"5670","description":"Craft do something depending on the Swords you roll before the skill activation phase.","img_url":"https://www.eredan-arena.com/images/HD/capacites/5670.png"},{"name":"Crimson Death","id":"5238","description":"Each time the opponent in combat receives Bleeding, the Strength of all your heroes will be increased by a quarter of the value. (This effect happens in all combats)","img_url":"https://www.eredan-arena.com/images/HD/capacites/5238.png"},{"name":"Critical","id":"93","description":"The next X times you deal DMG, the DMG is doubled.","img_url":"https://www.eredan-arena.com/images/HD/capacites/93.png"},{"name":"Crush","id":"4213","description":"Deal X DMG to your opponent (orX*1.5 of your Strength is superior to your opponents).","img_url":"https://www.eredan-arena.com/images/HD/capacites/4213.png"},{"name":"Crushing Skill","id":"8595","description":"Increase the skill value by 50% if your Strength is higher than your opponent's Strength.","img_url":"https://www.eredan-arena.com/images/HD/capacites/8595.png"},{"name":"Curse","id":"4543","description":"Negative Alteration.\\nAt the end of the skill phase, you suffer X flat DMG, repeated for every other negative alteration.\\nFlat DMG is a DMG that ignores everything.","img_url":"https://www.eredan-arena.com/images/HD/capacites/4543.png"},{"name":"Cursed Skill","id":"4543","description":"After the skill, applies to the opponent 10% of the skill's value as Curse, +10% for each Eclipse on the opponent.","img_url":"https://www.eredan-arena.com/images/HD/capacites/4543.png"},{"name":"DMG Drain","id":"109","description":"Your opponents' DMG are decreased by X and all your DMG are increased by X.","img_url":"https://www.eredan-arena.com/images/HD/capacites/109.png"},{"name":"DMG+","id":"113","description":"All your DMG is increased by X.","img_url":"https://www.eredan-arena.com/images/HD/capacites/113.png"},{"name":"DMG-","id":"155","description":"DMG dealt by your character is reduced by X.","img_url":"https://www.eredan-arena.com/images/HD/capacites/155.png"},{"name":"Dark Heritage","id":"4823","description":"Every time your cards get an alteration that they didn’t have, their opponents receive 35 Terror.","img_url":"https://www.eredan-arena.com/images/HD/capacites/4823.png"},{"name":"Deadly Rain","id":"7602","description":"If Deathcaller Ludmilla is in play, at the start of the fight, deal as much Pure DMG as the Strength of Deathcaller Ludmilla to your opponent and your opponent receives 10% of the total as Bleeding, 3 times.\\n\\nDeathcaller Ludmilla is always drawn at the beginning of the fight.\\n\\nPure DMG is a DMG that ignores all alterations that could reduce or prevent it.","img_url":"https://www.eredan-arena.com/images/HD/capacites/7602.png"},{"name":"Death Stare","id":"311","description":"Deal X DMG minus the Strength of your opponent that ignores all alterations that could reduce or prevent it.","img_url":"https://www.eredan-arena.com/images/HD/capacites/311.png"},{"name":"Decisive Strikes","id":"8041","description":"Deal X Pure DMG.\\n\\nPure DMG is a DMG that ignores all alterations that could reduce or prevent it.","img_url":"https://www.eredan-arena.com/images/HD/capacites/8041.png"},{"name":"Decoy","id":"8008","description":"Positive Alteration\\n\\nIf one of your positive alterations should be targeted by one of your opponent's skills, it targets Decoy instead.\\n\\nThis alteration is triggered by Mimic, Mad Hat, Spellbreaker & Dispel.\\n\\nThis skill is not triggered by Tidal Wave, Swarm of Decay, Shieldbreaker, Brain Freeze or Caress of Death.\\n\\nWhen triggered, only 1 Decoy is consumed, no matter the effect redirected.","img_url":"https://www.eredan-arena.com/images/HD/capacites/8008.png"},{"name":"Defend The Borders","id":"5595","description":"Once your opponent has been dealt 8000 DMG, all your active :ava: gain 2000 Shield and their Strength is increased by 200.\\n\\nThis quest can be triggered only 1 time per card.","img_url":"https://www.eredan-arena.com/images/HD/capacites/5595.png"},{"name":"Deja vu","id":"1250","description":"Activate the last ability used by the opponent.","img_url":"https://www.eredan-arena.com/images/HD/capacites/1250.png"},{"name":"Devour","id":"5889","description":"Deal X normal DMG to the opponent.\\n\\nIf you have any negative alteration, consume one of them and receive X/2 STR.\\n\\nElse, if you have a positive alteration, remove half of a random one and receive X STR.","img_url":"https://www.eredan-arena.com/images/HD/capacites/5889.png"},{"name":"Dexterity","id":"4794","description":"The next X times you consume a Dodge, Riposte or Critical, gain one of the other 2 at random.","img_url":"https://www.eredan-arena.com/images/HD/capacites/4794.png"},{"name":"Dispel","id":"dsLVynU","description":"Delete X positive alteration(s) on your opponent.","img_url":"https://i.imgur.com/dsLVynU.png"},{"name":"Dodge","id":"176","description":"The next X times you suffer DMG, it will be halved.","img_url":"https://www.eredan-arena.com/images/HD/capacites/176.png"},{"name":"Draconic Legacy","id":"6866","description":"Each time you obtain a DMG+, your allies gain 750 Blizzard.Each time you obtain a Shield type alteration (Shield / Blizzard / Arcane Barrier / Bulwark), your allies obtain 75 DMG+.This effect considers increasing Shield and DMG+ too","img_url":"https://www.eredan-arena.com/images/HD/capacites/6866.png"},{"name":"Dragon Bite","id":"4177","description":"Deal X DMG and your opponent bleeds, it receives X/10 Bleeding.","img_url":"https://www.eredan-arena.com/images/HD/capacites/4177.png"},{"name":"Dragon Hide","id":"4162","description":"The X next times you are dealt DMG, they will be halved and your opponent will be dealt half.","img_url":"https://www.eredan-arena.com/images/HD/capacites/4162.png"},{"name":"Dragon Noodles","id":"7427","description":"Craftsman Passive.\\nThe next X times your strength is reduced revert it and gain an additional 200 Strength.\\nAt the end of the fight Heal 900 for each remaining Dragon Noodle.","img_url":"https://www.eredan-arena.com/images/HD/capacites/7427.png"},{"name":"Earthen Coating","id":"9218","description":"Positive alteration. Shield-like Skill.\\nAbsorbs the next X damage suffered.\\nAs long as this is active, each time you activate a skill your opponent suffers X Earthquake damage.\\nEarthquake DMG is a DMG that ignores all alterations that could reduce or prevent it and applies half of its value as Aftermath to all active opponents.","img_url":"https://www.eredan-arena.com/images/HD/capacites/9218.png"},{"name":"Earthquake","id":"8401","description":"Deal X Pure DMG to your opponent, and give to all the opposing heroes X/2 Aftermath.\\nPure DMG is a DMG that ignores all alterations that could reduce or prevent it.","img_url":"https://www.eredan-arena.com/images/HD/capacites/8401.png"},{"name":"Eau de Corruption","id":"5675","description":"After the skill activation phase, you receive a Strength value equal the sum of all malus your card have applied to the opponent during the combat.\\nPurify, Mist, Rain and Devour do not affect the STR gain.\\nDebuffs applied prior to the combat aren't counted on the STR gain.","img_url":"https://www.eredan-arena.com/images/HD/capacites/5675.png"},{"name":"Echoing Skill","id":"4744","description":"Skill mddifier.\\nAfter the skill effect, applies Echo to your opponent equal to 10% of the skill's value.","img_url":"https://www.eredan-arena.com/images/HD/capacites/4744.png"},{"name":"Eclipse","id":"434","description":"Cancels the X next Heals of your opponent.","img_url":"https://www.eredan-arena.com/images/HD/capacites/434.png"},{"name":"Electric Dragnet","id":"7294","description":"Craftsman Passive.\\nThe next X times you activate a skill, increase your opponent's negative alterations by 25% (rounded up).\\nIf they do not have any, they receive Constriction 500.\\nAfter this deal 1500 flat damage and apply 150 Thunderstruck to them.","img_url":"https://www.eredan-arena.com/images/HD/capacites/7294.png"},{"name":"Empowered Skill","id":"8595","description":"Increase the skill value by 10% for each level that your active equipment has.\\nThis modifier rounds the value to the nearest integer.","img_url":"https://www.eredan-arena.com/images/HD/capacites/8595.png"},{"name":"Encore","id":"8396","description":"Negative Alteration.\\nAfter the :swordDice: phase, reroll one of your dice to the same color.\\nThis alteration triggers Echo, Dice Change based Equips & Song of the Abysses.","img_url":"https://www.eredan-arena.com/images/HD/capacites/8396.png"},{"name":"Endurance","id":"5614","description":"The next X times you receive damage, the damage is reduced by the value of your Strength.","img_url":"https://www.eredan-arena.com/images/HD/capacites/5614.png"},{"name":"Eternal Fog","id":"8401","description":"Each time one of your Mist is consumed, Heal 500.\\nAt the end of skill activation phase, if you have at least:  3 Mist: You receive 4000 Shield and your allies receive 2 Mist.\\n7 Mist: Deal 2500 Shock DMG & your allies receive 2 Dodges.\\n18 Mist: Heals half of your current suffered DMG.","img_url":"https://www.eredan-arena.com/images/HD/capacites/8401.png"},{"name":"Eternal Winter","id":"5628","description":"Every time your opponents trigger their Frostbite, the Frostbite is increased by 10%, and every time they deal a DMG from a Sword, their Frostbite is triggered again.","img_url":"https://www.eredan-arena.com/images/HD/capacites/5628.png"},{"name":"Fire Rune","id":"1591","description":"Create X Rune and the DMG that your opponent deals is decreased byX*20. At the end of the opponent's skill activation phase, each Rune deals 200 DMG.","img_url":"https://www.eredan-arena.com/images/HD/capacites/1591.png"},{"name":"Fireball","id":"114","description":"Deals X DMG to your opponent and he has DMG -X/10.","img_url":"https://www.eredan-arena.com/images/HD/capacites/114.png"},{"name":"Flare","id":"8065","description":"Deal X Normal DMG and you receive one Solar Light.\\nNormal DMG is a DMG that can be affected by everything.","img_url":"https://www.eredan-arena.com/images/HD/capacites/8065.png"},{"name":"Flow","id":"5339","description":"Every time you cast a skill, you Heal X.","img_url":"https://www.eredan-arena.com/images/HD/capacites/5339.png"},{"name":"Flowering","id":"4172","description":"Deal X DMG and apply a Spore to you and your opponent.","img_url":"https://www.eredan-arena.com/images/HD/capacites/4172.png"},{"name":"Focus X -> Y","id":"6843","description":"Gain as much Y as your X.\\nYour X is divided by 2.\\nExample: Focus Strength -> DMG+","img_url":"https://www.eredan-arena.com/images/HD/capacites/6843.png"},{"name":"Forked Lightning","id":"8738","description":"Deal X Lightning DMG and your opponent's allies receives X/2 Chanelled Lightning.\\nLightning DMG is a normal DMG that applies 10% of its value as Thunderstruck to the opponent.","img_url":"https://www.eredan-arena.com/images/HD/capacites/8738.png"},{"name":"Forsaken Destiny","id":"9440","description":"Each time you activate a skill, you receive Curse equal to the sum of Curse on the opposing heroes.\\nAt the end of skill activation phase, consume your Curse. If you have consumed at least:  2500 Curse: Deal 5000 flat damage. (not interacting with anything)  7500 Curse: Suffer 5000 flat damage to give ALL of your allies 2 Stardust. (even for non-active allies)  15000 Curse: All your opponent's receive 1500 Curse and 1500 more if you lose the round.","img_url":"https://www.eredan-arena.com/images/HD/capacites/9440.png"},{"name":"Freezing Criticals","id":"9189","description":"Each time one of your heroes consumes a Critical, their opponent gets Frostbite 250. If they have already 750, trigger the Frostbite instead of giving more.","img_url":"https://www.eredan-arena.com/images/HD/capacites/9189.png"},{"name":"Frenzy","id":"4532","description":"At the end of the skill activation phase, X random dice that aren't S become S.","img_url":"https://www.eredan-arena.com/images/HD/capacites/4532.png"},{"name":"Frost","id":"600","description":"⋆ You are frosted, the Icy ability of your opponent will be increased by X tenth.","img_url":"https://www.eredan-arena.com/images/HD/capacites/600.png"},{"name":"Frostbite","id":"916","description":"Your opponent will get 1 Frost and will be hurt by X each time he activates an ability.","img_url":"https://www.eredan-arena.com/images/HD/capacites/916.png"},{"name":"Frostbolt","id":"A78zxgd","description":"Deals X DMG to your opponent and he receives X/10 Frostbite.","img_url":"https://i.imgur.com/A78zxgd.png"},{"name":"Happy Totem","id":"6649","description":"Passive. Neutral Alteration.\\nEach time you gain Strength, its value is increased by 20% for each Happy Totem you have.","img_url":"https://www.eredan-arena.com/images/HD/capacites/6649.png"},{"name":"Harsh Sickness","id":"8884","description":"Neutral Alteration.\\nEach time your Strength should be lowered but is already at 0, you suffer as much flat DMG instead.\\nFlat DMG is a DMG that ignores everything.","img_url":"https://www.eredan-arena.com/images/HD/capacites/8884.png"},{"name":"Heal","id":"5","description":"Heals X DMG.","img_url":"https://www.eredan-arena.com/images/HD/capacites/5.png"},{"name":"Heal The Villagers!","id":"8060","description":"Quest Passive.\\nWhen you healed yourself at least 10 times, double your Strength and all your positive alterations.\\nThis Quest is applied only to :ava: characters.","img_url":"https://www.eredan-arena.com/images/HD/capacites/8060.png"},{"name":"Hit","id":"177","description":"Deals X DMG.","img_url":"https://www.eredan-arena.com/images/HD/capacites/177.png"},{"name":"Icy","id":"567","description":"The skill is amplified by a tenth for each Frost on your opponent. Your opponent gets 1 Frost.","img_url":"https://www.eredan-arena.com/images/HD/capacites/567.png"},{"name":"Illusion","id":"4606","description":"Activate an offensive ability at random with X as its value. (Except Smite and Physical Attack)","img_url":"https://www.eredan-arena.com/images/HD/capacites/4606.png"},{"name":"Impeding End","id":"7300","description":"⋆ Passive Skill. Neutral Alteration.\\nEveryone suffer at the start of the fight 8000 Pure DMG.\\nWhen the cards affected by Impeding End gets fully healed, deals 4000 Pure DMG to the opponent and deletes all opponent's positive alterations.\\nPure DMG is a DMG that ignores all alterations that could reduce or prevent it.","img_url":"https://www.eredan-arena.com/images/HD/capacites/7300.png"},{"name":"Improvement","id":"8595","description":"Passive.\\nGives a new effect to already existing alterations.","img_url":"https://www.eredan-arena.com/images/HD/capacites/8595.png"},{"name":"Inspire","id":"300","description":"Your selected allies have 1 additional dice throw.","img_url":"https://www.eredan-arena.com/images/HD/capacites/300.png"},{"name":"Invoke","id":"1750","description":"If the specified Dragon is in your team, transform into a more powerful form.","img_url":"https://www.eredan-arena.com/images/HD/capacites/1750.png"},{"name":"Kiss of Oblivion","id":"4845","description":"Both cards in combat heal any damage taken till the activation of this skill.","img_url":"https://www.eredan-arena.com/images/HD/capacites/4845.png"},{"name":"Leech","id":"9186","description":"Negative Alteration  Each time you activate a skill, your opponent is healed by X, increased by the value of your Bleeding.","img_url":"https://www.eredan-arena.com/images/HD/capacites/9186.png"},{"name":"Lethal Dose","id":"7918","description":"At the end of the skill activation phase, if your opponent has at least:  -10 Poison: Delete all his Positive alterations;  -15 Poison: his Strength becomes 0;  -25 Poison: He suffers 999 999 flat DMG.\\nFlat DMG is a DMG that ignores everything.","img_url":"https://www.eredan-arena.com/images/HD/capacites/7918.png"},{"name":"Life Drain","id":"46","description":"Deals X DMG to your opponent and you gain X health points.","img_url":"https://www.eredan-arena.com/images/HD/capacites/46.png"},{"name":"Lightning","id":"236","description":"Strikes your opponent by dealing him X DMG and increasing by X/10 the next DMG he suffers.","img_url":"https://www.eredan-arena.com/images/HD/capacites/236.png"},{"name":"Lightning Rune","id":"1632","description":"Create X Rune and increase the next DMG that your opponent suffers byX*20. At the end of the skills activation phase, each Rune deals 200 DMG.","img_url":"https://www.eredan-arena.com/images/HD/capacites/1632.png"},{"name":"Lightroots","id":"6936","description":"Each time your opponent deals DMG to you, your opponent will be hurt by X Shock DMG and you will be healed by X.\\nThis alteration cannot be targeted by other skills or alterations.\\nShock DMG is a DMG that cannot be increased and decreased, but still consumes skills as Scarab and Shield.","img_url":"https://www.eredan-arena.com/images/HD/capacites/6936.png"},{"name":"Mad Hat","id":"5893","description":"⋆ The next X times you activate a skill, copy an opposing positive alteration, then deal 1500 Shock damage to your opponent.","img_url":"https://www.eredan-arena.com/images/HD/capacites/5893.png"},{"name":"Madly-go-round","id":"7412","description":"Each time you trigger a skill, your opponent's DMG+ are increased by your Terror malus value.\\nThis effect is applied on the opponent at start of the fight.","img_url":"https://www.eredan-arena.com/images/HD/capacites/7412.png"},{"name":"Magma Wall","id":"4466","description":"Each time your opponents deal DMG to you, they receive 6% of the total as DMG- (flat increase if your opponent already have DMG- ).\\nA flat increase is the increase of an alteration that cannot interact with any other effect in the game.","img_url":"https://www.eredan-arena.com/images/HD/capacites/4466.png"},{"name":"March of Conquest","id":"6449","description":"At start of the combat, increase all the DMG your opponent will be dealt by an amount equal to your Strength (Maximum 500).","img_url":"https://www.eredan-arena.com/images/HD/capacites/6449.png"},{"name":"Mediate","id":"7127","description":"⋆ With 3 guilds being mediated, :cou: plus 2 other guilds, when any of the 3 guilds triggers the 1st effect, the current allies of the 2 other guilds receive the 2nd effect.\\n*Example: if it is Mediate :noz: & :win: opp Ice > DMG+ 25 , if a :win: card applies opp Ice the :noz: and :cou: receive DMG+ 25.","img_url":"https://www.eredan-arena.com/images/HD/capacites/7127.png"},{"name":"Meditation","id":"4903","description":"⋆ You heal X and half of a negative alteration on yourself is converted into Riposte or Dodge (if the value converted is 10 or lower) or +STR or +DMG (if higher than 10).","img_url":"https://www.eredan-arena.com/images/HD/capacites/4903.png"},{"name":"Menacing Sky","id":"8748","description":"*Whenever your opponent receives Thunderstruck, you receive 50% of it as Berserk. Immediately when your opponent have been dealt:*  6000 Damage: Double your Strength.\\n12000 Damage: Receive 2 Critical, Dodge and Riposte.\\n24000 Damage: Deal 5000 Forked Lightning DMG to your opponent.\\nForked Lightning DMG is a normal DMG that applies 10% of its value as Thunderstruck to the opponent and 50% of its value as Chanelled Lightning to your opponent's allies.","img_url":"https://www.eredan-arena.com/images/HD/capacites/8748.png"},{"name":"Mend","id":"5192","description":"At the end of skills activation phase, you Heal X.","img_url":"https://www.eredan-arena.com/images/HD/capacites/5192.png"},{"name":"Might","id":"9549","description":"Positive Alteration.\\nEach time you activate a skill, gain X Strength.","img_url":"https://www.eredan-arena.com/images/HD/capacites/9549.png"},{"name":"Mighty Skill","id":"9549","description":"Skill Modifier.\\nAfter the skill effect, gain 10% of the skill's value as Might.","img_url":"https://www.eredan-arena.com/images/HD/capacites/9549.png"},{"name":"Mimic","id":"1010","description":"Deal X DMG and copy a positive effect from the opponent (stackable).","img_url":"https://www.eredan-arena.com/images/HD/capacites/1010.png"},{"name":"Mirror","id":"9187","description":"Position Alteration  The next X times your opponent receives a positive alteration, copy it (affected by decoy)  The next X times you receive a debuff your opponent copies it.","img_url":"https://www.eredan-arena.com/images/HD/capacites/9187.png"},{"name":"Mist","id":"5126","description":"After you receive a negative alteration (increase counts too) during the combat, this negative alteration is halved.","img_url":"https://www.eredan-arena.com/images/HD/capacites/5126.png"},{"name":"Multiguild Skill","id":"UvcQBjY","description":"Increases the skill value by 25% per each different guild on your current cards in game.\\nThe guild of your hero in combat is counted  The skill value is increased by at least 25% and at max by 75%","img_url":"https://i.imgur.com/UvcQBjY.png"},{"name":"Necrotic","id":"AmOKZTX","description":"⋆ The skill is amplified by half for each negative alteration on your current hero.","img_url":"https://i.imgur.com/AmOKZTX.png"},{"name":"Nefertoth","id":"6072","description":"Neutral Alteration.\\nAt the end of the skill activation phase, for each of your Nefertoth, deal as much pure DMG as your Strength.\\nPure DMG ignores every alteration from both in combat.","img_url":"https://www.eredan-arena.com/images/HD/capacites/6072.png"},{"name":"Noble","id":"u5aJ0LX","description":"The skill is amplified by half if you are more wounded than your opponent.","img_url":"https://i.imgur.com/u5aJ0LX.png"},{"name":"Paper Scales","id":"5836","description":"Each time you deal as much or less than 1000 DMG, you receive 15 Berserk.","img_url":"https://www.eredan-arena.com/images/HD/capacites/5836.png"},{"name":"Parry","id":"4325","description":"The X next time you are dealt DMG, block them and deal as much DMG as your Strength.","img_url":"https://www.eredan-arena.com/images/HD/capacites/4325.png"},{"name":"Phalanx","id":"9334","description":"⋆ Positive alteration. Shield-like skill.\\nAbsorbs the next X damage you suffer.\\nThe damage dealt to Phalanx is decreased by the Strength of your allies.\\nConsumed before all the other Shield-type alterations (Shield, Blizzard, Arcane Barrier, Coating).\\nShield Bash consume Shield first, then Phalanx on additional activation.","img_url":"https://www.eredan-arena.com/images/HD/capacites/9334.png"},{"name":"Physical Attack","id":"206","description":"Deal X times in a row as much DMG as your Strength.","img_url":"https://www.eredan-arena.com/images/HD/capacites/206.png"},{"name":"Pillage","id":"8401","description":"⋆ Deal X Normal DMG and steal half of an opposing positive alteration.","img_url":"https://www.eredan-arena.com/images/HD/capacites/8401.png"},{"name":"Plague","id":"7915","description":"Deal X Normal DMG and your opponent receive 1 Poison.","img_url":"https://www.eredan-arena.com/images/HD/capacites/7915.png"},{"name":"Poison","id":"7533","description":"Negative Alteration.\\nThe next time you would be healed, you suffer flat DMG instead.\\nAt end of fight you suffer 500 flat DMG.\\nFlat DMG is a DMG that ignores everything.\\nThis alteration trigger and causes the heal value as DMG even if your opponent is not damaged.","img_url":"https://www.eredan-arena.com/images/HD/capacites/7533.png"},{"name":"Portal","id":"1242","description":"⋆ Deal X DMG and apply one of the negative effects on your hero to your opponent (stackable).","img_url":"https://www.eredan-arena.com/images/HD/capacites/1242.png"},{"name":"Powder","id":"234","description":"⋆ The X next time your suffer DMG from a S, a keg will explode and triple (before modification) these DMG.","img_url":"https://www.eredan-arena.com/images/HD/capacites/234.png"},{"name":"Powerup Gaz","id":"8883","description":"Each Time you activate a skill, if you have at least:  35 Stench: your opponent receive Harsh Sickness.\\n400 Stench: Gain as much Strength as your Stench Bonus.\\n1200 Stench: All your opponents (even the ones that still are in the deck) receive Harsh Sickness.","img_url":"https://www.eredan-arena.com/images/HD/capacites/8883.png"},{"name":"Purify","id":"318","description":"Delete X times half of a negative effect on your hero.","img_url":"https://www.eredan-arena.com/images/HD/capacites/318.png"},{"name":"Quest","id":"aggregats-56","description":"Each of your Avalonians have to complete a goal to share a buff between them.","img_url":"https://www.eredan-arena.com/images/HD/aggregats/56.png"},{"name":"Rage","id":"140","description":"Your Strength increases by X each time you deal DMG.","img_url":"https://www.eredan-arena.com/images/HD/capacites/140.png"},{"name":"Rain","id":"3835","description":"Heal X DMG and delete one of your negative alterations.","img_url":"https://www.eredan-arena.com/images/HD/capacites/3835.png"},{"name":"Rain of Arrows","id":"8389","description":"The opposing heroes receive 20 Thunderstruck and you lose 10 Rage each time you consume a Critical.\\nWhen you will have consumed:  7 Criticals: Deal 2500 Shock damage and halve the Strength of the opposing hero.\\n11 Criticals: You and your allies receive 30 Vigor.\\n17 Criticals: At the end of skill activation phase activate your 1st and 2nd skills once.","img_url":"https://www.eredan-arena.com/images/HD/capacites/8389.png"},{"name":"Rain of Gifts","id":"5667","description":"After the dice rolling phase, your cards obtain 1 Red Gift for each Red Dice rolled, 1 Blue Gift for each Blue Dice rolled, and 1 Yellow Gift for each Yellow Dice rolled.","img_url":"https://www.eredan-arena.com/images/HD/capacites/5667.png"},{"name":"Rampage","id":"4533","description":"Deal X and you gain one Frenzy.","img_url":"https://www.eredan-arena.com/images/HD/capacites/4533.png"},{"name":"Red Gift","id":"3990","description":"Neutral Alteration.\\nAfter you have dealt DMG to your opponent and his DMG suffered is higher or equal to 5000 DMG, deal 800 flat DMG for each Red Gift you have and consume all.\\nIf you receive a gift after your opponent already have 5000 suffered DMG, the gift is going to trigger in the next DMG you cause.\\nFlat DMG is a DMG that ignores everything.","img_url":"https://www.eredan-arena.com/images/HD/capacites/3990.png"},{"name":"Redeeming Skill","id":"8311","description":"After the skill effect, receive 1 Redemption.","img_url":"https://www.eredan-arena.com/images/HD/capacites/8311.png"},{"name":"Redemption","id":"8311","description":"The next X times your Heal exceeds the DMG you have, increase your Strength and your positive alterations (except Redemption) by 25% (rounded up).\\nAfter the skill activation phase, you Heal 1000 per each Redemption lefting.\\nThe end phase's Heal effect can trigger another Redemption too.","img_url":"https://www.eredan-arena.com/images/HD/capacites/8311.png"},{"name":"Reflected Skill","id":"8595","description":"If the reflected skill is a positive alteration, your allies also receive 25% of it for each Reflection in the game.\\nIf the reflected skill is a negative alteration, your opponent's allies also receive 25% of it for each Reflection in the game.\\n(The opponent's Reflections are considered too, so can have at max 6 Reflection in game, ranging from 25% to 150% of reflected alteration.)","img_url":"https://www.eredan-arena.com/images/HD/capacites/8595.png"},{"name":"Resilience","id":"426","description":"All the DMG you suffer decreases by X.","img_url":"https://www.eredan-arena.com/images/HD/capacites/426.png"},{"name":"Resonant Echo","id":"53yaoYt","description":"Whenever your opponent's Echo is triggered, you receives 20% of it as DMG+ and your opponent receives 20% of it as DMG-.\\nIf you have at least 400 DMG+, trigger Purify 1 Instead.","img_url":"https://i.imgur.com/53yaoYt.png"},{"name":"Restore","id":"5","description":"At end of the skill activation phase you Heal X. This effect is repeated for each other positive alteration you have.\\nRestore doesn't count itself in the repetition.","img_url":"https://www.eredan-arena.com/images/HD/capacites/5.png"},{"name":"Riposte","id":"324","description":"The X next times you suffer DMG from a S you'll deal as much DMG as your Strength.","img_url":"https://www.eredan-arena.com/images/HD/capacites/324.png"},{"name":"Round of Drinks","id":"6942","description":"The next X times you receive a positive alteration, your allies receive 50% as well and you deal 2000 Shock DMG to your opponent.\\nShock DMG is an unmodifiable DMG.","img_url":"https://www.eredan-arena.com/images/HD/capacites/6942.png"},{"name":"Rune","id":"721","description":"Create X Runes. At the end of the Skills activation phase, each Rune deals 200 DMG.","img_url":"https://www.eredan-arena.com/images/HD/capacites/721.png"},{"name":"Runic","id":"722","description":"The skill is amplified by half for each of your Rune. Your Runes are destroyed.","img_url":"https://www.eredan-arena.com/images/HD/capacites/722.png"},{"name":"Sacred","id":"hlGhHOU","description":"Increases the skill value by half for each positive alteration on you.","img_url":"https://i.imgur.com/hlGhHOU.png"},{"name":"Scarab","id":"829","description":"The next X times you receive DMG, this DMG will be converted into Heal.","img_url":"https://www.eredan-arena.com/images/HD/capacites/829.png"},{"name":"Seek the Thunder's Spear!","id":"5981","description":"Passive. Each time you change a dice into :swordDice:, strike your opponent with a Lightning 1000.\\n(Change 2 or more dices of same color at same time counts as 1 trigger only)","img_url":"https://www.eredan-arena.com/images/HD/capacites/5981.png"},{"name":"Seismic Tremor","id":"4738","description":"Passive.\\nEach time you activate a skill, deal flat damage to your opponent equal to your Strength.\\nFlat damage is a damage that ignores everything.","img_url":"https://www.eredan-arena.com/images/HD/capacites/4738.png"},{"name":"Shield","id":"4","description":"⋆ Absorb the X next DMG you suffer.","img_url":"https://www.eredan-arena.com/images/HD/capacites/4.png"},{"name":"Shield Bash","id":"710","description":"You lose your Shield and deal one and a half its value plus X DMG.","img_url":"https://www.eredan-arena.com/images/HD/capacites/710.png"},{"name":"Shieldbreaker","id":"lBUld7s","description":"Breaks one of the opposing shield alterations (Shield, Blizzard or Arcane Barrier) removing it. Then you cause X DMG, plus the value of shield removed more half.","img_url":"https://i.imgur.com/lBUld7s.png"},{"name":"Shock","id":"264","description":"Deals X unmodifiable DMG.","img_url":"https://www.eredan-arena.com/images/HD/capacites/264.png"},{"name":"Silver Gift","id":"7805","description":"Neutral Alteration. Consumable.\\nThe next times you activate a skill your Strength and your positive alterations are increased by 20% (rounded down).","img_url":"https://www.eredan-arena.com/images/HD/capacites/7805.png"},{"name":"Sinister","id":"RDTsnVj","description":"The skill value is increased by 50% for each opposing positive alteration.","img_url":"https://i.imgur.com/RDTsnVj.png"},{"name":"Smite","id":"334","description":"Deal as much DMG as your opponent!s Strength multiplied by X.","img_url":"https://www.eredan-arena.com/images/HD/capacites/334.png"},{"name":"Smuggled","id":"TM1Ckc1","description":"The skill value is doubled if your opponent has the same skill (don't need to be the same value).","img_url":"https://i.imgur.com/TM1Ckc1.png"},{"name":"Smuggler's Treaty","id":"5992","description":"Passive.\\nEach time your :pir: receive any positive alteration, your :zil: on the field receive 25% of it (rounded up).\\nEach time your :zil: receive any positive alteration, your :pir: on the field receive 25% of it (rounded up).\\n(This effect can be triggered only during the combat, so alterations obtained out of combat won't be shared)","img_url":"https://www.eredan-arena.com/images/HD/capacites/5992.png"},{"name":"Solar Light","id":"8061","description":"Positive Alteration.\\nIf you are :solarian: : The next time you Heal DMG, heal the same amount another time.\\nIf you are not :solarian: : the next time you suffer DMG, you suffer the same amount another time as a flat DMG.\\nFlat DMG is a DMG that ignores everything.","img_url":"https://www.eredan-arena.com/images/HD/capacites/8061.png"},{"name":"Song of the Abysses","id":"7087","description":"Each time one of your dice changes, you are hurt by 750 Shock DMG, and one of your current opponent's positive alteration is increased by 25% (rounded up)  Shock DMG is a DMG that cannot be reduced or increased, but still is affected by Scarab and Shield-like skills.\\nThis effect is applied on the opponent's team.","img_url":"https://www.eredan-arena.com/images/HD/capacites/7087.png"},{"name":"Spellbreaker","id":"379","description":"⋆ Deal [VALUE] DMG, delete half of a positive alteration on your opponent.","img_url":"https://www.eredan-arena.com/images/HD/capacites/379.png"},{"name":"Spoils of War","id":"6932","description":"Each time one of your cards wins a battle, its current allies receive as much Strength as the defeated's base Strength, plus 1 Frenzy and 1 Endurance.","img_url":"https://www.eredan-arena.com/images/HD/capacites/6932.png"},{"name":"Spore","id":"3789","description":"Apply a Spore, at each skill activation it grows. At the end of the skill activation phase deal 400 DMG for each of your Spores or Heal 400 DMG for each of your Spores if you are Dais.","img_url":"https://www.eredan-arena.com/images/HD/capacites/3789.png"},{"name":"Stardust","id":"6681","description":"Positive Alteration  The next X times you receive a positive alteration, its value is increased by half (only the received value). (Rounded up)","img_url":"https://www.eredan-arena.com/images/HD/capacites/6681.png"},{"name":"Static Charge","id":"4882","description":"⋆ Every time the Shield of your cards absorbs DMG, who damaged it suffers a pure DMG equal half of the absortion and receives 10% of the absortion as Thunderstruck.","img_url":"https://www.eredan-arena.com/images/HD/capacites/4882.png"},{"name":"Stench","id":"310","description":"You stink, your opponent loses X Strength each time you activate an ability.","img_url":"https://www.eredan-arena.com/images/HD/capacites/310.png"},{"name":"Stone","id":"7848","description":"⋆ Posivite Alteration  At the end of the skill activation phase, you receive 500 Shield.\\nThis alteration is used by the Ultimate Armor Skill to trigger some effects.","img_url":"https://www.eredan-arena.com/images/HD/capacites/7848.png"},{"name":"Storm","id":"3367","description":"The elements are unleashed, deal X DMG to your opponent and increase all the next DMG they take by X/10 each time you activate an ability.","img_url":"https://www.eredan-arena.com/images/HD/capacites/3367.png"},{"name":"Strength Drain","id":"109","description":"Your opponent's Strength is reduced by X and your Strength increases by X.","img_url":"https://www.eredan-arena.com/images/HD/capacites/109.png"},{"name":"Strength+","id":"17","description":"Your Strength increases by X.","img_url":"https://www.eredan-arena.com/images/HD/capacites/17.png"},{"name":"Strength-","id":"109","description":"Your opponent loses X Strength.","img_url":"https://www.eredan-arena.com/images/HD/capacites/109.png"},{"name":"Support","id":"lRD9kU2","description":"Give to all heros of the specified attribute the specified alteration.","img_url":"https://i.imgur.com/lRD9kU2.png"},{"name":"Swarm of Decay","id":"6188","description":"Halves all positive alterations received during the combat.","img_url":"https://www.eredan-arena.com/images/HD/capacites/6188.png"},{"name":"Symbiosis","id":"1750","description":"Cards with Symbiosis share 50% of all buffs received between them.","img_url":"https://www.eredan-arena.com/images/HD/capacites/1750.png"},{"name":"Talonstrike","id":"4734","description":"The next X times you deal DMG via a Sword Dice you deal a pure DMG equal this DMG dealt.","img_url":"https://www.eredan-arena.com/images/HD/capacites/4734.png"},{"name":"Terror","id":"389","description":"The DMG that your opponent's hero deals is reduced by X each time he activates an ability.(stackable)","img_url":"https://www.eredan-arena.com/images/HD/capacites/389.png"},{"name":"The Axiom of Strength","id":"9336","description":"Triples your Strength, then deals a Shock Damage equal to the Strength Bonus accumulated by your heroes during the game.","img_url":"https://www.eredan-arena.com/images/HD/capacites/9336.png"},{"name":"Thorn","id":"340","description":"Your opponent will be hurt by X each time he deals DMG to you.","img_url":"https://www.eredan-arena.com/images/HD/capacites/340.png"},{"name":"Thorny Spore","id":"CpqBtmG","description":"Each time you activate a skill, consume a Spore to gain 150 Thorns.","img_url":"https://i.imgur.com/CpqBtmG.png"},{"name":"Thunder of Guem","id":"5678","description":"Each time you receive DMG+, your opponent will receive a Thunderstruck equal half of its value multiplied by the Swords you rolled before the Skill Activation Phase.","img_url":"https://www.eredan-arena.com/images/HD/capacites/5678.png"},{"name":"Thunderclap","id":"7777","description":"Deal X Lightning DMG.\\nEach time you attack with a :swordDice:, the opposing heroes receive Thunderstruck equal to 10% of your Strength.","img_url":"https://www.eredan-arena.com/images/HD/capacites/7777.png"},{"name":"Thunderstruck","id":"235","description":"⋆ All the DMG you suffer increase by X.","img_url":"https://www.eredan-arena.com/images/HD/capacites/235.png"},{"name":"Tidal Wave","id":"3950","description":"Increase the value of one of your positive alterations by 25% (rounded up) and deal X DMG.","img_url":"https://www.eredan-arena.com/images/HD/capacites/3950.png"},{"name":"Time Loop","id":"4621","description":"Activates again the skill that activated as number X in the skill sequence. This sequence counts skills from both in combat, and it counts any skill cast, so if the 2 first skills casts were your 1st ability, Time Loop 2 will replay it..","img_url":"https://www.eredan-arena.com/images/HD/capacites/4621.png"},{"name":"Transcendence","id":"2766","description":"⋆ Give to all your heros of the specified attribute: while throwing the dices, you can't get S.","img_url":"https://www.eredan-arena.com/images/HD/capacites/2766.png"},{"name":"Twinkle Little Star","id":"7754","description":"At the start of the fight, you receive 1 Stardust for each of your unique Dice Pair.\\nDice Pair is a combo of 2 equal dices, like:redDice: :redDice: .","img_url":"https://www.eredan-arena.com/images/HD/capacites/7754.png"},{"name":"Ultimate Armor","id":"7847","description":"Everytime your shield absorbs DMG without getting destroyed, you receive one Stone. At the end of the skill activation phase, If you have at least:  -5 Stones: Your Strength become 1500 and delete all your negative alterations;  -10 Stones: you receive 3 Frenzy;  -19 Stones: you become Unbreakable.\\nUnbreakable means that you cannot receive any DMG anymore.","img_url":"https://www.eredan-arena.com/images/HD/capacites/7847.png"},{"name":"Unified Skill","id":"VPjENEK","description":"Increases the skill value by 25% per each different race on your current cards in game.\\nThe race of your hero in combat is counted  The skill value is increased by at least 25% and at max by 75%","img_url":"https://i.imgur.com/VPjENEK.png"},{"name":"Verdant Growth","id":"4952","description":"Each time you heal yourself or receive thorns, your Strength increases by 20% of the value.","img_url":"https://www.eredan-arena.com/images/HD/capacites/4952.png"},{"name":"Vigor","id":"7372","description":"Positive Alteration.\\nEvery time you damage the opponent, you get X DMG+.\\nIf you already have the DMG+ alteration, Vigor does a 'flat' increase, not interacting with others effects.","img_url":"https://www.eredan-arena.com/images/HD/capacites/7372.png"},{"name":"War Runes","id":"7141","description":"Neutral Alteration. Consumable.\\nThe next times you activate a skill, you receive 2 Runes, or 300 DMG+ if you already have Runes.","img_url":"https://www.eredan-arena.com/images/HD/capacites/7141.png"},{"name":"Wildfire","id":"5397","description":"Each time you cast a skill, you inflict X Fireball to the opponent.","img_url":"https://www.eredan-arena.com/images/HD/capacites/5397.png"},{"name":"Yellow Gift","id":"3992","description":"Neutral Alteration.\\nAt the end of skill activation phase, Heal 800 per each Yellow Gift.","img_url":"https://www.eredan-arena.com/images/HD/capacites/3992.png"}]`),_w=JSON.parse(`[{"name":"Agonda Shell","rarity":"Rare","position":"2nd / Defender","level":"1 - 10","effect":"At the start of the fight you receive 48-247 Thorns.\\n:sap:: you receive 48-247 Lightroot instead.","last_patch":"24 Aug 2023","url":"https://www.eredan-arena.com/images/HD/items/35.png","tag":["sap"]},{"name":"Akra's Bowl","rarity":"Legendary","position":"2nd / Defender","level":"1 - 10","effect":":mer:: Each time you activate a skill, deal 200-1031 Tidal Wave DMG.\\nIf you have \\"Akra\\" in your name, you also get 10-51 Stench.\\nTidal Wave DMG is a Normal DMG that increases a random positive alteration on you by 25%.","last_patch":"06 Apr 2024","url":"https://www.eredan-arena.com/images/HD/items/147.png","tag":["mer"]},{"name":"Amplifying Tome CS","rarity":"Epic","position":"1st / Attacker","level":"1 - 10","effect":"Each time you activate a skill, your Strength is increased by 10-51.","last_patch":"29 Nov 2023","url":"https://www.eredan-arena.com/images/HD/items/68.png","tag":[]},{"name":"Amulet of Midnight","rarity":"Legendary","position":"2nd / Defender","level":"1 - 10","effect":":zil:: At the start of the fight, you receive 1000-5159 Shield and your opponent receives 10-51 Terror, increased by 25% for each of your :zil: allies with a different class from yours.","last_patch":"24 Feb 2024","url":"https://www.eredan-arena.com/images/HD/items/143.png","tag":["zil"]},{"name":"Apple of Chaos","rarity":"Epic","position":"1st / Attacker","level":"1 - 10","effect":":priest:: At the start of the fight and at the end of skill activation phase, deal 388-2001 Lightning DMG to your opponent and receive 1 Rune for each :run::priest: ally.\\n:run::priest:: All the opposing heroes receive 38-200 Thunderstruck.\\nLightning DMG is a normal DMG that applies 10% of its value as Thunderstruck to the opponent.","last_patch":"28 Aug 2024","url":"https://www.eredan-arena.com/images/thumb/items/107.png","tag":["priest","run"]},{"name":"Armor of Naptys","rarity":"Common","position":"2nd / Defender","level":"1 - 10","effect":"At the start of the fight, get 50 Resilience.\\nEach time you receive Blessing, receive 10-51 more.","last_patch":"24 Mar 2022","url":"https://www.eredan-arena.com/images/thumb/items/27.png","tag":[]},{"name":"Artrezil's Ring","rarity":"Legendary","position":"2nd / Defender","level":"1 - 10","effect":":mage: or :priest:: each time you sufffer less than 388-2001 DMG your opponent receives 35 Terror and you get 35 Blessing.\\n\\"Archmage Artrezil\\" or \\"Archmage Minerva\\": at the start of the fight copy 1 random opposing positive alteration.","last_patch":"31 Dec 2023","url":"https://www.eredan-arena.com/images/thumb/items/40.png","tag":["mage","priest"]},{"name":"Awakening","rarity":"Epic","position":"2nd / Defender","level":"1 - 10","effect":"Each time you receive Thorns, heal 195-1006 and receive 19-100 Strength+.\\nDaïs: 39-201 instead of 19-100 Strength+.","last_patch":"02 Mar 2023","url":"http://static.eredan.com/images/print/2dc4fd25330f0b4290a869a6b06e8fbd.png","tag":[]},{"name":"Axe of the Border CS","rarity":"Legendary","position":"1st / Attacker","level":"1 - 10","effect":"At the end of the activation phase, Deal 250-1289 Normal DMG + 25-128 for each of your :swordDice:.","last_patch":"29 Nov 2023","url":"https://www.eredan-arena.com/images/HD/items/69.png","tag":[]},{"name":"Ben's Hook","rarity":"Epic","position":"1st / Attacker","level":"1 - 10","effect":"At the end of the skill activation phase, deal 465-2399 Shock DMG, +155-799 for every :zil: or :pir: ally.\\nBen, the Buccaneer: Two of your :redDice: become :swordDice:.\\nShock DMG is an unmodifiable DMG that still consumes Shield-like skills and Scarabs.","last_patch":"25 Mar 2023","url":"https://www.eredan-arena.com/images/HD/items/65.png","tag":["zil","pir"]},{"name":"Black Fang Skin","rarity":"Epic","position":"2nd / Defender","level":"1 - 10","effect":":beast:: At the start of the fight, you and your :beast: allies get 291-1501 Shield.\\n:zil::beast: or :mer::beast: : Your Strength Bonuses are increased in 10%.","last_patch":"22 Aug 2023","url":"https://www.eredan-arena.com/images/HD/items/56.png","tag":["beast","zil","mer"]},{"name":"Blade of the Witch","rarity":"Rare","position":"1st / Attacker","level":"1 - 10","effect":":noz::marauder: : at the end of the fight deal 500-2579 Pure DMG to your opponent, + 125-644 for each of your :swordDice: or :noz::marauder: ally.\\nThis equipment DMG is caused AFTER the :swordDice: phase.\\nPure DMG is a DMG that ignores all alterations that could reduce or prevent it.","last_patch":"19 Sep 2023","url":"https://www.eredan-arena.com/images/HD/items/104.png","tag":["noz","marauder"]},{"name":"Blessed Wing CS","rarity":"Epic","position":"2nd / Defender","level":"1 - 10","effect":"Each time you activate a skill, Heal 40-206 DMG.","last_patch":"29 Nov 2023","url":"https://www.eredan-arena.com/images/HD/items/72.png","tag":[]},{"name":"Book of Incantations","rarity":"Rare","position":"2nd / Defender","level":"1 - 10","effect":":noz::mage:: each time you receive DMG+, deal 200-1031 Lightning, Fireball, Tidal Wave or Icy Hit DMG to your opponent.\\nLightning DMG is a Normal DMG that causes a tenth of its value as Thunderstruck to the opponent.\\nFireball DMG is a Normal DMG that causes a tenth of its value as DMG- to the opponent.\\nTidal Wave DMG is a Normal DMG that increases a random positive alteration on you by 25%.\\nIcy Hit DMG is a Normal DMG increased by 10% for every Ice token on your opponent, and it gives an Ice token to the opponent after the DMG.","last_patch":"30 Sep 2023","url":"https://www.eredan-arena.com/images/thumb/items/110.png","tag":["noz","mage"]},{"name":"Book of Shadows","rarity":"Epic","position":"1st / Attacker","level":"1 - 10","effect":":guem:: Each time your opponent receives DMG-, Deal 150-773 Shock DMG.\\n:guem::mage:: Each time your opponent receives Terror, Deal 150-773 Flat DMG.\\nShock DMG is a DMG that cannot be reduced or increased, but still is affected by Scarab and Shield-like skills.\\nFlat DMG is a DMG that ignores everything.","last_patch":"27 Apr 2024","url":"https://www.eredan-arena.com/images/thumb/items/126.png","tag":["guem","mage"]},{"name":"Bubblez","rarity":"Rare","position":"1st / Attacker","level":"1 - 10","effect":":zil:: Each time your opponent receives Terror he suffers 242-1248 flat DMG and you receive 24-124 DMG+.\\nFlat DMG is a DMG that ignores everything.","last_patch":"02 Sep 2023","url":"https://www.eredan-arena.com/images/HD/items/92.png","tag":["zil"]},{"name":"Caliburn","rarity":"Epic","position":"1st / Attacker","level":"1 - 10","effect":":warrior:: At start of the fight, deal 776-4003 normal DMG and your Strength increase by 97-500.\\n:warrior::undead:: You also receive 1-10 DMG-.","last_patch":"28 Jun 2024","url":"https://www.eredan-arena.com/images/HD/items/155.png","tag":["warrior","undead"]},{"name":"Carnival Mask","rarity":"Common","position":"2nd / Defender","level":"1 - 10","effect":"Receive 291-1501 Shield.\\nEach time your opponent receives a new type of positive alteration, receive 145-750 more Shield.","last_patch":"18 Jan 2023","url":"https://www.eredan-arena.com/images/HD/items/31.png","tag":[]},{"name":"Chains of Dread","rarity":"Rare","position":"1st / Attacker","level":"1 - 10","effect":":neh: or :demon:: Each time you receive a new type of negative alteration, your opponent receives 20 Terror and suffers 388-2001 Shock DMG.\\nShock DMG is an unmodifiable DMG.","last_patch":"18 Aug 2023","url":"https://www.eredan-arena.com/images/HD/items/81.png","tag":["neh","demon"]},{"name":"Chew Bone","rarity":"Common","position":"2nd / Defender","level":"1 - 10","effect":":beast:: at the end of the skill activation phase you heal 581-2997 points and receive 116-599 DMG+.","last_patch":"09 Sep 2023","url":"https://www.eredan-arena.com/images/HD/items/97.png","tag":["beast"]},{"name":"Chimera","rarity":"Legendary","position":"1st / Attacker","level":"1 - 10","effect":"At the end of the fight, deals 485-2502 unmodifiable DMG.\\nYour :swordDice: attacks remove half of an opposing positive alteration.","last_patch":"24 Mar 2022","url":"https://www.eredan-arena.com/images/HD/items/54.png","tag":[]},{"name":"Claws of Hrimnir","rarity":"Legendary","position":"2nd / Defender","level":"1 - 10","effect":":win:: Each time you receive DMG+, deal 200-1031 Icy Normal DMG to your opponent.\\nKing Hrimnir: Your opponent also receive 50-257 Frostbite.\\nIcy DMG is a DMG that is increased by 10% for every Frost on your opponent.","last_patch":"23 Dec 2023","url":"https://www.eredan-arena.com/images/thumb/items/135.png","tag":["win"]},{"name":"Cobra Bow","rarity":"Legendary","position":"1st / Attacker","level":"1 - 10","effect":":nom:: each time you activate a skill you deal 150-773 Life Drain DMG to your opponent.\\nKamenwati or Hamadryad: you gain 30-154 DMG+ before that.\\nLife Drain DMG is a Normal DMG that simultaneously heals the same value.","last_patch":"21 Oct 2023","url":"https://www.eredan-arena.com/images/thumb/items/119.png","tag":["nom"]},{"name":"Coconut Bomb","rarity":"Rare","position":"1st / Attacker","level":"1 - 10","effect":":pir: or :dais:: At the end of skill activation phase, deal 150-773 Fireball DMG to the opposing hero for each Powder or Spore on them.\\nFireball DMG is a normal DMG that applies 10% of its value as DMG- to the opponent.","last_patch":"30 Aug 2024","url":"https://www.eredan-arena.com/images/thumb/items/164.png","tag":["pir","dais"]},{"name":"Communicator","rarity":"Epic","position":"2nd / Defender","level":"1 - 10","effect":":marauder:: Each time one of your Dexterity is consumed, you and your :maraudeur: allies that you share a race with receive 20-103 DMG+ & 0-2 Dodge.\\n:noz::marauder:: your :marauder: allies receive the bonuses without race restrictions.","last_patch":"18 May 2024","url":"https://www.eredan-arena.com/images/HD/items/152.png","tag":["noz","marauder"]},{"name":"Conch of the Tides","rarity":"Legendary","position":"2nd / Defender","level":"1 - 10","effect":"Naga: At the start of combat, your Naga heroes receive 388-2001 Shield and increase the value of all your positive alterations by 25%.\\nAbysscaller Tamira: 50% instead of 25%.","last_patch":"09 Aug 2023","url":"https://www.eredan-arena.com/images/HD/items/76.png","tag":[]},{"name":"Councillor's Outfit","rarity":"Common","position":"2nd / Defender","level":"1 - 10","effect":"At the start of the fight, receive 24-123 DMG+ for each ally from a different guild.","last_patch":"24 Mar 2022","url":"https://www.eredan-arena.com/images/HD/items/32.png","tag":[]},{"name":"Councillor's Stiletto","rarity":"Epic","position":"1st / Attacker","level":"1 - 10","effect":"At the start of the fight, deal 485-2502 DMG and decrease the opponent's strength by 25%.\\nUnknown Race or Edrianne: Your opponent receives 50 bleeding.","last_patch":"18 Jan 2023","url":"https://www.eredan-arena.com/images/HD/items/64.png","tag":[]},{"name":"Councillor's Treaty","rarity":"Epic","position":"1st / Attacker","level":"1 - 10","effect":":cou:: at the start of the fight, you get the following effects depending on the number of Guilds represented by your visible heroes:  1 guild: Strength+ 120-619;  2 guilds: the previous more opp Thunderstruck 120-619;  3 guilds: the previous more DMG Drain 120-619.","last_patch":"28 Oct 2023","url":"https://images-ext-2.discordapp.net/external/lbVY7VAMB9v-eLX3yVZ5KAwsneETchYwt7GeZOu8Nfw/http/static.eredan.com/images/web_big/037727064d89b993dd6e70a473fcebaf.png","tag":["cou"]},{"name":"Crown of the Border CS","rarity":"Legendary","position":"2nd / Defender","level":"1 - 10","effect":"At the end of the activation phase, get 300-1547 Shield + 30-154 for each of your non-:swordDice:.","last_patch":"29 Nov 2023","url":"https://www.eredan-arena.com/images/HD/items/73.png","tag":[]},{"name":"Crystal Armor","rarity":"Epic","position":"2nd / Defender","level":"1 - 10","effect":":noz: or :win:: Each time your opponent receives a Frost token, you receive 50-257 Shield for each of them.\\nWhen you lose your Shield, your opponent suffers 250-1285 Frostbolt damage.\\nFrostbolt damage is a normal damage that applies 10% of its value as Frostbite to the opponent.","last_patch":"16 Dec 2024","url":"https://www.eredan-arena.com/images/thumb/items/190.png","tag":["noz","win"]},{"name":"Crystal Mirror","rarity":"Epic","position":"2nd / Defender","level":"1 - 10","effect":":noz:: At the start of the fight, you receive 1-5 Decoy and 1000-5159 Shield.","last_patch":"27 Jan 2024","url":"https://www.eredan-arena.com/images/HD/items/139.png","tag":["noz"]},{"name":"Cursed Armor","rarity":"Epic","position":"2nd / Defender","level":"1 - 10","effect":"At the start of the fight, receive 100 DMG-.\\nEach time you suffer DMG from :swordDice:, the opponent receives 155-799 Bleeding.","last_patch":"24 Mar 2022","url":"https://www.eredan-arena.com/images/HD/items/38.png","tag":[]},{"name":"Deadly Arrow","rarity":"Legendary","position":"2nd / Defender","level":"1 - 10","effect":":elfine:: at the start of the fight, Deal 500-2579 Pure DMG and your opponent get 50-257 Bleeding.\\nDeathcaller Ludmilla: at the end of the fight, Deal as much DMG as your Strength.\\nPure DMG is a DMG that ignores all alterations that could reduce or prevent it.","last_patch":"04 Nov 2023","url":"https://www.eredan-arena.com/images/thumb/items/124.png","tag":["elfine"]},{"name":"Demonic Mask","rarity":"Common","position":"2nd / Defender","level":"1 - 10","effect":":demon:: Each time your opponent receives a new type of negative alteration, you receive 485-2502 Shield.","last_patch":"18 Aug 2023","url":"https://www.eredan-arena.com/images/thumb/items/79.png","tag":["demon"]},{"name":"Desert Scimitar","rarity":"Common","position":"1st / Attacker","level":"1 - 10","effect":"At the start of the fight, deal 310-1599 DMG to your opponent, then 77-399 for each of your :swordDice:.","last_patch":"24 Mar 2022","url":"https://www.eredan-arena.com/images/HD/items/44.png","tag":[]},{"name":"Desert Sword","rarity":"Epic","position":"1st / Attacker","level":"1 - 10","effect":":nom:: Each time you receive a positive alteration (except Decoy), deal 200-1031 Normal DMG and receive 1-5 Decoy.","last_patch":"17 Feb 2024","url":"https://www.eredan-arena.com/images/HD/items/142.png","tag":["nom"]},{"name":"Divine Hammer","rarity":"Epic","position":"1st / Attacker","level":"1 - 10","effect":":priest:: at the start of the fight deal 600-3095 Shock DMG and receive 60-309 Blessing.\\n:ava::priest:: you receive 1 Riposte also.\\nShock DMG is a DMG that cannot be modified by alterations, but can consume shield skills and can be prevented.","last_patch":"07 Dec 2023","url":"https://www.eredan-arena.com/images/HD/items/15.png","tag":["priest","ava"]},{"name":"Eredan's Wisdom","rarity":"Legendary","position":"1st / Attacker","level":"1 - 10","effect":":mage:: At the start of the fight, deal 1400-7223 Pure DMG and receive 0-3 Critical. Repeat the damage once if the opponent is :equinox:.\\nCiramor(both): At the end of the skill activation phase, deal 1400-7223 Pure DMG.**  Pure DMG is a DMG that ignores all alterations that could reduce or prevent it.","last_patch":"17 Sep 2024","url":"https://www.eredan-arena.com/images/thumb/items/167.png","tag":["mage"]},{"name":"Executionner's Key","rarity":"Rare","position":"2nd / Defender","level":"1 - 10","effect":":marauder::guem: : Each time you use a Critical bonus, deal 116-598 flat DMG and your opponente receives 11-59 Bleeding.\\nFlat DMG is a DMG that ignores everything.","last_patch":"31 Aug 2023","url":"https://www.eredan-arena.com/images/thumb/items/90.png","tag":["marauder","guem"]},{"name":"Ferocious Bite","rarity":"Legendary","position":"1st / Attacker","level":"1 - 10","effect":"Black Fang: Each time you activate a skill, increase the Bleeding on your opponent by 9-46, 13-69 VS Humans.","last_patch":"04 Jul 2022","url":"https://www.eredan-arena.com/images/thumb/items/57.png","tag":[]},{"name":"Festering Horns","rarity":"Epic","position":"2nd / Defender","level":"1 - 10","effect":":neh:: At the start of the fight, deal 800-4127 Plague DMG.\\n:neh::dais:: Give your :neh: allies 80-412 Thorn and 80-412 Strength.\\nPlague DMG is a Normal DMG that applies 1 Poison to your opponent.","last_patch":"17 Sep 2024","url":"https://www.eredan-arena.com/images/thumb/items/168.png","tag":["neh","dais"]},{"name":"Firestorm","rarity":"Legendary","position":"1st / Attacker","level":"1 - 10","effect":"At the start of the fight, deal 194-1000 Lightning and 194-1000 Fireball DMG.\\nThundering Bragan, Mylad or Bragan: Each time the opponent receives DMG- or Thunderstruck, he gets 25% of the other as well.","last_patch":"30 Jul 2022","url":"http://static.eredan.com/images/print/5d09cf7da1d1356342da54478f260825.jpg","tag":[]},{"name":"Flame of the Phoenix","rarity":"Legendary","position":"2nd / Defender","level":"1 - 10","effect":"Each time you receive Blessing, you deal 400-2063 flat DMG to your opponent and he receives 40-206 DMG- .\\nThe Phoenix or a \\"Killicrew\\", you also receive 40-206 DMG+ and 40-206 Strength.\\nFlat DMG is a DMG that ignores everything.","last_patch":"13 Sep 2023","url":"https://www.eredan-arena.com/images/thumb/items/102.png","tag":[]},{"name":"Frimacier","rarity":"Legendary","position":"1st / Attacker","level":"1 - 10","effect":":undead: : you and your opponent get 4-20 Frostbite.\\nEach time you receive a new positive or negative alteration deal 400-2063 DMG.\\nDeath-Knight Oscar or :ava: : Deal 600-3094 DMG instead if your opponent is more wounded than you.","last_patch":"12 Sep 2024","url":"https://www.eredan-arena.com/images/thumb/items/166.png","tag":["undead","ava"]},{"name":"Frozen Stone Heart","rarity":"Rare","position":"2nd / Defender","level":"1 - 10","effect":"Each time your opponent receive 1 or more Frost, you Heal 100-515 DMG.","last_patch":"16 Dec 2023","url":"https://www.eredan-arena.com/images/thumb/items/134.png","tag":[]},{"name":"Frozen-death Potion","rarity":"Common","position":"1st / Attacker","level":"1 - 10","effect":"At the beggining of the fight, deal 400-2063 DMG and your opponent receive 1 Frost.","last_patch":"16 Dec 2023","url":"https://www.eredan-arena.com/images/thumb/items/133.png","tag":[]},{"name":"Gae Bolga","rarity":"Legendary","position":"1st / Attacker","level":"1 - 10","effect":":run:, :mer: or :ava:: Each time you activate a skill, deal 200-1031 flat DMG to your opponent. All your opponents receive 25 Bleeding.\\nBoadicea: At the start of the fight you and your :human: allies receive 1 Critical.\\nFlat DMG is a DMG that ignores everything.","last_patch":"02 Dec 2023","url":"https://www.eredan-arena.com/images/thumb/items/129.png","tag":["run","mer","ava"]},{"name":"Gladiator's Gaive","rarity":"Epic","position":"1st / Attacker","level":"1 - 10","effect":":run:: Each time you receive a new positive alteration (except Decoy), deal 250-1289 Normal DMG and receive 1-5 Decoy.","last_patch":"07 Feb 2024","url":"https://www.eredan-arena.com/images/HD/items/141.png","tag":["run"]},{"name":"Golem's Heart","rarity":"Epic","position":"1st / Attacker","level":"1 - 10","effect":":noz::golem:: at the start of the fight you receive 20-103 DMG+ and 200-1031 Shield.\\nIf Delko is one of your allies: he and your :golem: allies receive 10-51 DMG+ and 100-515 Shield.","last_patch":"30 Sep 2023","url":"https://www.eredan-arena.com/images/thumb/items/111.png","tag":["noz","golem"]},{"name":"Heart of Oural","rarity":"Legendary","position":"2nd / Defender","level":"1 - 10","effect":":sto:: At the start of the fight, receive 155-799 DMG+ and 775-3995 Shield.\\nTemujin: two of your :sto: allies receive 50% of these bonuses.","last_patch":"10 Oct 2024","url":"https://www.eredan-arena.com/images/HD/items/159.png","tag":["sto"]},{"name":"Heart of the Giant","rarity":"Rare","position":"2nd / Defender","level":"1 - 10","effect":":colossus:: Each time you activate a skill you get 155-799 Shield and your allies get 51-266 Shield.\\n:colossus::mer:: you also get 1 Mist or 1 Endurance.","last_patch":"06 Sep 2023","url":"https://www.eredan-arena.com/images/HD/items/95.png","tag":["colossus"]},{"name":"Heroic Strike","rarity":"Legendary","position":"1st / Attacker","level":"1 - 10","effect":"Lucyan, the vagabond: For each Dodge, Critical or Riposte received during the fight, you and your Human allies get 48-247 Strength+, 72-370 VS Beast.","last_patch":"04 Jul 2022","url":"https://www.eredan-arena.com/images/HD/items/58.png","tag":[]},{"name":"Horns of Ourenos","rarity":"Legendary","position":"2nd / Defender","level":"1 - 10","effect":":homchai: or :eltarite:: each time you suffer DMG, you gain Rage 6-30 and each time you deal DMG, you get Berserk 6-30.\\n:eltarite:: receives 12-60 instead.","last_patch":"28 Oct 2023","url":"https://www.eredan-arena.com/images/thumb/items/123.png","tag":["homchai","eltarite"]},{"name":"Icy Axe","rarity":"Rare","position":"1st / Attacker","level":"1 - 10","effect":":iceelf:: At the beginning of the fight, Deal 600-3095 DMG and your opponent receives 0-3 Frost.","last_patch":"02 Dec 2023","url":"https://www.eredan-arena.com/images/thumb/items/131.png","tag":["iceelf"]},{"name":"Icy Crown","rarity":"Epic","position":"2nd / Defender","level":"1 - 10","effect":":win:: At the end of the skill activation phase, your Strength is increased by 120-619 +12-61 for each of your Frost Malus.\\n:win::beast:: Your Strength is increased by 180-928 + 24-123 for each of your Frost Malus instead.","last_patch":"02 Dec 2023","url":"https://www.eredan-arena.com/images/thumb/items/130.png","tag":["win","beast"]},{"name":"Imperial Armor","rarity":"Common","position":"2nd / Defender","level":"1 - 10","effect":":kot:: At the start of the fight, receive 581-2997 Shield and your :kot: :warrior: allies receive 193-999 Shield.","last_patch":"26 Aug 2023","url":"https://www.eredan-arena.com/images/HD/items/85.png","tag":["kot","warrior"]},{"name":"Iron Bull","rarity":"Legendary","position":"1st / Attacker","level":"1 - 10","effect":":warrior:: Everytime you receive a Riposte bonus, deal 250-1289 flat DMG for each Riposte bonus received, or 375-1933 if your Strength is superior to your opponent's Strength.\\nMankato: you receive also DMG+ 25-128.\\nFlat DMG is a DMG that ignores everything.","last_patch":"24 Nov 2023","url":"https://www.eredan-arena.com/images/HD/items/88.png","tag":["warrior"]},{"name":"Ishaïa's Soulstone","rarity":"Legendary","position":"2nd / Defender","level":"1 - 10","effect":":mer:: Each time you activate a skill you heal 194-1000 and receive 19-100 Thorn.\\nPrimula, The Council's Rose or Councillor Ishaïa: Your allies receive 19-100 Blessing or 19-100 DMG+.","last_patch":"24 Nov 2023","url":"https://www.eredan-arena.com/images/HD/items/83.png","tag":["mer"]},{"name":"Jolly Roger","rarity":"Common","position":"2nd / Defender","level":"1 - 10","effect":":pir:: each time you receive a new positive alteration you gain 20-103 Strength, 40-206 if your opponent also has the same alteration.","last_patch":"18 Jul 2024","url":"https://www.eredan-arena.com/images/thumb/items/114.png","tag":["pir"]},{"name":"Knight's Shield","rarity":"Epic","position":"2nd / Defender","level":"1 - 10","effect":"At the start of combat you receive 581-2997 Shield.\\nAt the end of skill activation phase receive 116-599 Shield for each opponent Sword.","last_patch":"18 Jan 2023","url":"https://www.eredan-arena.com/images/HD/items/23.png","tag":[]},{"name":"Kotoba's Banner","rarity":"Epic","position":"2nd / Defender","level":"1 - 10","effect":":kot:: each time your Strength increase, deal 100-515 flat DMG.\\n:kot::human:: at the beggining of the fight, you receive also 10-51 Rage.\\nFlat DMG is a DMG that ignores everything.","last_patch":"14 Oct 2023","url":"https://www.eredan-arena.com/images/thumb/items/117.png","tag":["kot","human"]},{"name":"Kunai","rarity":"Common","position":"1st / Attacker","level":"1 - 10","effect":":kot::marauder:: At the start of the fight, Deal 400-2063 Normal DMG and receive 0-2 Dexterity.","last_patch":"23 Mar 2024","url":"https://www.eredan-arena.com/images/HD/items/146.png","tag":["kot","marauder"]},{"name":"Last Meal","rarity":"Rare","position":"2nd / Defender","level":"1 - 10","effect":":undead:: at start of the fight, you receive 100 Curse.\\nEach time you activate a skill, if you have a Stench Bonus, you Heal 200-1031, +50-257 for each of your negative alterations.","last_patch":"24 May 2024","url":"https://www.eredan-arena.com/images/HD/items/118.png","tag":["undead"]},{"name":"Laurel of the Muse","rarity":"Rare","position":"2nd / Defender","level":"1 - 10","effect":":bard:: At the start of the fight, receive 10-51 DMG+ and Flow for each non-:redDice: dice rolled.","last_patch":"19 Nov 2024","url":"https://www.eredan-arena.com/images/thumb/items/186.png","tag":["bard"]},{"name":"Lazurd","rarity":"Legendary","position":"1st / Attacker","level":"1 - 10","effect":":noz:: Each time one of your dice becomes :swordDice:, receive 10-51 DMG+ and Deal 500-2579 Spellbreaker DMG.\\nKelltaron: receive an additional 10-51 DMG+ for each of your :noz: allies.\\nSpellbreaker DMG is a DMG that halves a random opposing positive alteration.","last_patch":"18 May 2024","url":"https://www.eredan-arena.com/images/HD/items/151.png","tag":["noz"]},{"name":"Lightning Rod","rarity":"Common","position":"2nd / Defender","level":"1 - 10","effect":":pir: or :tem:: At the Start of the fight, you and your opponent each receive 50-257 Thunderstruck.","last_patch":"18 Nov 2024","url":"https://www.eredan-arena.com/images/thumb/items/187.png","tag":["pir","tem"]},{"name":"Lightning-thrower","rarity":"Epic","position":"1st / Attacker","level":"1 - 10","effect":"At the end of skill activation phase, if you are :pir:, increase the Thunderstruck on your opponent by 25%, then deal 2x 194-1000 Lightning DMG.\\nLightning DMG is a DMG that causes a tenth of its value as Thunderstruck.","last_patch":"30 Jul 2022","url":"http://static.eredan.com/images/print/0e700fca41e768b1092a61370e58b823.png","tag":["pir"]},{"name":"Lion Sword","rarity":"Rare","position":"1st / Attacker","level":"1 - 10","effect":"At the end of the skill activation phase (after Runes and Spores), receive 100 Strength+ for each time you have activated a skill, then deal 388-2001 Shock DMG.\\nShock DMG is an unmodifiable DMG.","last_patch":"24 Mar 2022","url":"https://www.eredan-arena.com/images/thumb/items/46.png","tag":[]},{"name":"Maestro's Baton","rarity":"Legendary","position":"2nd / Defender","level":"1 - 10","effect":":bard:: Each time your opponent receives Echo, your :bard: receive 58-299 Flow.\\nThe Maestro: They also receive 1 Critical and 150 DMG+.","last_patch":"10 Aug 2023","url":"https://www.eredan-arena.com/images/thumb/items/78.png","tag":["bard"]},{"name":"Mask of Confusion","rarity":"Epic","position":"2nd / Defender","level":"1 - 10","effect":":neh: or :zil:: At the end of skill activation phase deal 600-3095 Pure DMG to your opponent and give 0-3 Confusion to them.\\n:neh::berserker: or :zil::berserker:: you deal Life Drain DMG instead of Pure DMG.\\nPure DMG is a DMG that ignores all alterations that could reduce or prevent it.\\nLife Drain DMG is a normal DMG that also heals by the same value.","last_patch":"12 Jul 2024","url":"https://www.eredan-arena.com/images/HD/items/156.png","tag":["neh","zil","berserker"]},{"name":"Mask of Ptol'A","rarity":"Epic","position":"2nd / Defender","level":"1 - 10","effect":":nom:: each time you receive a new alteration your opponent receives 100-515 Curse.\\n:nom::undead: or :nom::priest:: at the start of the fight your opponent receives 50-257 Bleeding.\\nThis effect considers the positive and negative alterations you get.","last_patch":"21 Oct 2023","url":"https://www.eredan-arena.com/images/HD/items/120.png","tag":["nom","undead","priest"]},{"name":"Master-Linker Cane","rarity":"Epic","position":"1st / Attacker","level":"1 - 10","effect":":iceelf:: At start of the fight, deal 400-2063 Tidal Wave damage and 400-2063 Frostbolt damage.\\n:iceelf::mage: or :iceelf::priest:: Deal 600-3094 instead.\\n:sto::iceelf::mage: or :sto::iceelf::priest:: Deal 800-4126 instead.\\nTidal Wave damage is a normal damage that before being dealt increases one of your positive alterations at random by 25% (rounded up).\\nFrostbolt damage is a normal damage that applies 10% of its value as Frostbite to the opponent.","last_patch":"13 Dec 2024","url":"https://www.eredan-arena.com/images/thumb/items/191.png","tag":["iceelf","mage","priest","sto"]},{"name":"Morning Star Mace","rarity":"Epic","position":"1st / Attacker","level":"1 - 10","effect":":sap:: At the start of the fight, deal 581-2997 Pure DMG to your opponent, then receive Thorn equal to 20% of their Strength.\\n:sap::warrior: or :sap: :berserker:: you also receive 1 Dexterity.\\nPure DMG is a DMG that ignores all alterations that could reduce or prevent it.","last_patch":"09 Sep 2023","url":"https://www.eredan-arena.com/images/HD/items/100.png","tag":["sap","warrior","berserker"]},{"name":"Murasama's Sheath","rarity":"Epic","position":"2nd / Defender","level":"1 - 10","effect":":kot:: each time one of your dice is changed during the fight, your Strength and DMG+ are increased by 4-20%.\\n:kot::warrior: or :kot::marauder:: you also receive 1 Dodge, Riposte or Critical at random.","last_patch":"07 Jun 2024","url":"https://www.eredan-arena.com/images/HD/items/87.png","tag":["kot","warrior","marauder"]},{"name":"Naya's Crown","rarity":"Legendary","position":"2nd / Defender","level":"1 - 10","effect":"At the start of the fight your :noz::marauder: heroes receive 600-3095 Shield and all the opposing heroes receive 60-309 Frostbite.\\nNaya: your :noz::marauder: heroes also receive 60-309 DMG+ and 1 Dodge.","last_patch":"16 Sep 2023","url":"https://www.eredan-arena.com/images/HD/items/105.png","tag":["noz","marauder"]},{"name":"Nobleman's Helmet","rarity":"Epic","position":"2nd / Defender","level":"1 - 10","effect":":ava: : Each time you active an ability, if you are more wounded than your opponent, Heal 250-1289 and you receive 1-5 Decoy.","last_patch":"31 Jan 2024","url":"https://www.eredan-arena.com/images/HD/items/140.png","tag":["ava"]},{"name":"Not that Spooky Mask","rarity":"Rare","position":"1st / Attacker","level":"1 - 10","effect":":undead:, :demon: or :unkrace:: at the start of the fight, you get 1 Mist for each of your :undead:, :demon: or :unkrace: ally.\\nEach time you consume a Mist, you heal 350-1805.","last_patch":"28 Oct 2023","url":"https://www.eredan-arena.com/images/HD/items/121.png","tag":["undead","demon","unkrace"]},{"name":"Obscure","rarity":"Epic","position":"1st / Attacker","level":"1 - 10","effect":":zil:: each time you receive a new positive alteration, deal 405-2089 Shock DMG, +101-522 for each opposing positive alteration.\\n:zil::mage: or :zil::marauder:: Receive 0-2 Decoy at the start of the fight.\\nShock DMG is a DMG that cannot be reduced or increased, but still is affected by Scarab and Shield-like skills.","last_patch":"18 Jul 2024","url":"https://www.eredan-arena.com/images/HD/items/149.png","tag":["zil","mage","marauder"]},{"name":"Oracle's Scepter","rarity":"Legendary","position":"1st / Attacker","level":"1 - 10","effect":":priest: or :unkclass:: Each time you receive Runes, you deal 100-515 flat DMG to the opposing hero for each Rune received, then gain 20-103 Blessing.\\nSapient or The Curator: Triggering your Blessing also deals as much flat DMG as your Blessing to the opposing hero.\\nFlat DMG is a DMG that ignores everything.","last_patch":"28 Aug 2024","url":"https://www.eredan-arena.com/images/thumb/items/162.png","tag":["priest"]},{"name":"Orb of Fire","rarity":"Common","position":"1st / Attacker","level":"1 - 10","effect":"At the start of the fight, deals 155-799 DMG to the opponent, and it receives 15-79 DMG-.","last_patch":"24 Mar 2022","url":"https://www.eredan-arena.com/images/HD/items/1.png","tag":[]},{"name":"Orb of Life","rarity":"Rare","position":"2nd / Defender","level":"1 - 10","effect":"At the end of skill activation phase, heal 388-2001 health points.","last_patch":"24 Mar 2022","url":"https://www.eredan-arena.com/images/HD/items/19.png","tag":[]},{"name":"Paladin's Amulet","rarity":"Rare","position":"2nd / Defender","level":"1 - 10","effect":":ava:: at the end of the fight Heal 400-2063 and deal 400-2063 Shock DMG, 600-3094 if you have Blessing or Lightroot.\\nShock DMG is a DMG that cannot be modified by alterations, but can consume shield skills and can be prevented.","last_patch":"24 Nov 2023","url":"https://www.eredan-arena.com/images/HD/items/112.png","tag":["ava"]},{"name":"Pocket-shooter","rarity":"Rare","position":"1st / Attacker","level":"1 - 10","effect":"At the end of the fight, deals 291-1501 Fireball DMG. Repeat it once if you are a :pir:.\\nFireball DMG is a DMG that causes a tenth of its value as DMG-.","last_patch":"24 Mar 2022","url":"https://www.eredan-arena.com/images/HD/items/48.png","tag":["pir"]},{"name":"Potion of Power CS","rarity":"Rare","position":"1st / Attacker","level":"1 - 10","effect":"At the start of the fight, you receive 15-77 DMG+.","last_patch":"29 Nov 2023","url":"https://www.eredan-arena.com/images/HD/items/67.png","tag":[]},{"name":"Power of Guem","rarity":"Epic","position":"1st / Attacker","level":"1 - 10","effect":":colossus:: Each time you activate a skill, deal 252-1300 flat DMG to your opponent, and if you have exactly 1 Roll left, your opponent gets 50 Thunderstruck or 50 DMG-.\\nFlat DMG is a DMG that ignores any alteration.","last_patch":"01 Jun 2023","url":"https://www.eredan-arena.com/images/HD/items/74.png","tag":["colossus"]},{"name":"Reindeer Bell","rarity":"Rare","position":"2nd / Defender","level":"1 - 10","effect":":win::beast:: At the start of the fight, you receive 50-257 DMG+ more 5-25 for each of your opponent Frost tokens and your opponent receive 1 Frost + 1 for each of your :human: allies.","last_patch":"23 Dec 2024","url":"https://www.eredan-arena.com/images/thumb/items/193.png","tag":["win","beast"]},{"name":"Repulsion Belt","rarity":"Epic","position":"2nd / Defender","level":"1 - 10","effect":":mage:: At the start of the fight, get 39-201 DMG+.\\nEach time you receive Thunderstruck, receive half of it as DMG+.","last_patch":"30 Jul 2022","url":"https://www.eredan-arena.com/images/thumb/items/59.png","tag":["mage"]},{"name":"Rhum of the Pirate","rarity":"Epic","position":"2nd / Defender","level":"1 - 10","effect":":pir: : At the start of the fight you receive 58-299 DMG+ and all your other :pir: receive 29-149 DMG+.\\n:captain: : you also receive 29-149 Rage.","last_patch":"13 Sep 2023","url":"https://www.eredan-arena.com/images/thumb/items/101.png","tag":["pir","captain"]},{"name":"Ring of the Winter","rarity":"Legendary","position":"2nd / Defender","level":"1 - 10","effect":":iceelf:: At the start of the fight and at the end of skill activation phase, receive 500-2579 Blizzard, +50-257 for every Frost on the opposing heroes.\\nNibelle or The Cailleach: your opponents also receive 0-2 Frost.\\nThis items considers the Frosts on opponents outside of the combat too.","last_patch":"09 Dec 2023","url":"https://www.eredan-arena.com/images/thumb/items/132.png","tag":["iceelf"]},{"name":"Rondache","rarity":"Epic","position":"2nd / Defender","level":"1 - 10","effect":":human:: At the start of the fight, give yourself and your :human: allies Shield = 500-2579 + your base Strength.","last_patch":"20 Jan 2024","url":"https://www.eredan-arena.com/images/thumb/items/55.png","tag":["human"]},{"name":"Rosary of Corruption","rarity":"Epic","position":"2nd / Defender","level":"1 - 10","effect":":neh:: Each time you suffer more than 3000 DMG, your opponent receives 58-299 DMG- and 58-299 Bleeding.\\n:neh::demon:: Your opponent also loses a positive alteration.","last_patch":"18 Aug 2023","url":"https://www.eredan-arena.com/images/HD/items/80.png","tag":["neh","demon"]},{"name":"Royal Sword","rarity":"Rare","position":"1st / Attacker","level":"1 - 10","effect":":ava::warrior:: At start of the fight, deal 600-3095 normal DMG and receive 0-3 Riposte.","last_patch":"28 Jun 2024","url":"https://www.eredan-arena.com/images/HD/items/144.png","tag":["ava","warrior"]},{"name":"Runic Diadem","rarity":"Common","position":"2nd / Defender","level":"1 - 10","effect":":run::priest:: each time you activate a skill receive 20-103 Blessing.","last_patch":"29 Sep 2023","url":"https://www.eredan-arena.com/images/thumb/items/109.png","tag":["run","priest"]},{"name":"Ruuna's Trident","rarity":"Legendary","position":"1st / Attacker","level":"1 - 10","effect":":priest:: Each time you activate an ability, deal 175-902 Tidal Wave damage.\\n:win::priest:: Deal 175-902 Icy Tidal Wave damage instead.\\n:run::priest:: Deal 262-1353 Tidal Wave damage instead.\\nTidal Wave damage is a normal damage that before being dealt increases one of your positive alterations at random by 25% (rounded up).\\nIcy damage is a damage increased by 10% for each Frost token on your opponent that also applies 1 Frost token to your opponent after that damage.","last_patch":"18 Dec 2024","url":"https://www.eredan-arena.com/images/thumb/items/194.png","tag":["priest","win","run"]},{"name":"Scroll of Entropy","rarity":"Rare","position":"2nd / Defender","level":"1 - 10","effect":":priest:: At the end of skill activation phase, remove two negative alterations from both heroes in fight.\\nRandomly deal 200-1031 Pure DMG to the opposing hero or heal 200-1031 DMG for each alteration removed.\\nPure DMG is a DMG that ignores all alterations that could reduce or prevent it.","last_patch":"28 Aug 2024","url":"https://www.eredan-arena.com/images/thumb/items/163.png","tag":["priest"]},{"name":"Secret Plan","rarity":"Legendary","position":"2nd / Defender","level":"1 - 10","effect":":craftsman:: At the beggining of the fight, for each of your :swordDice: get a random effect between:  +80-412 Strength  opp 80-412 thunderStruck  80-412 DMG+  80-412 opp DMG-","last_patch":"14 Oct 2023","url":"https://www.eredan-arena.com/images/thumb/items/116.png","tag":["craftsman"]},{"name":"Serpentine Scepter","rarity":"Rare","position":"1st / Attacker","level":"1 - 10","effect":":naga:: Each time your opponent's Constriction is triggered, Heal 97-500 and increase one of your positive alterations by 4-25% (rounded up or down randomly)","last_patch":"03 Sep 2024","url":"https://www.eredan-arena.com/images/thumb/items/165.png","tag":["naga"]},{"name":"Shield CS","rarity":"Common","position":"2nd / Defender","level":"1 - 10","effect":"At the start of the fight, get 120-619 Shield.","last_patch":"29 Nov 2023","url":"https://www.eredan-arena.com/images/HD/items/70.png","tag":[]},{"name":"Shield Generator","rarity":"Rare","position":"2nd / Defender","level":"1 - 10","effect":":golem:: at the start of the fight, you get 600-3095 Shield + 150-773 for each of your :golem: ally.","last_patch":"11 Nov 2023","url":"https://www.eredan-arena.com/images/HD/items/127.png","tag":["golem"]},{"name":"Sinister Shroud","rarity":"Legendary","position":"2nd / Defender","level":"1 - 10","effect":":guem:: Each time you receive DMG+, you also receive 155-799 Shield, + 77-399 for each opposing positive alteration.\\nIf Oykun, the Kagemusha or Graviton, Warden of the Void or Councillor Kuraying is one of your allies, he receives 15-79 DMG+.","last_patch":"31 Aug 2023","url":"https://www.eredan-arena.com/images/HD/items/89.png","tag":["guem"]},{"name":"Smash-rock Mass","rarity":"Epic","position":"1st / Attacker","level":"1 - 10","effect":"Each time you deal DMG higher than 4000, receive 39-201 Rage and 39-201 Berserk.","last_patch":"24 Mar 2022","url":"https://www.eredan-arena.com/images/thumb/items/50.png","tag":[]},{"name":"Snowsplitter","rarity":"Legendary","position":"1st / Attacker","level":"1 - 10","effect":":berserker:: At the start of the fight, deal 350-1805 Shieldbreaker and receive 0-2 Endurance.\\nAt the end of the skill activation phase, deal also 175-902 Icy Hit damage and receive 0-1 Riposte.\\nShieldbreaker damage is a normal damage that removes one of your opponent's shield-skills (Blizzard, Shield or Arcane Barrier) at random and increases the damage by the value of the removed shield more half of it.\\nIcy Hit damage is a normal damage increased by 10% for each Frost token on your opponent that also applies 1 Frost token to your opponent after that damage.","last_patch":"02 Dec 2024","url":"https://www.eredan-arena.com/images/thumb/items/189.png","tag":["berserker"]},{"name":"Solra's Bumblebee","rarity":"Epic","position":"2nd / Defender","level":"1 - 10","effect":":nom:: Each time you are Healed, you receive 8-41 Resilience.\\n:nom::priest:: If you are Healed by at least 1000 DMG, you receive Purify 1.","last_patch":"17 Feb 2024","url":"https://www.eredan-arena.com/images/HD/items/137.png","tag":["nom","priest"]},{"name":"Solstice Stone","rarity":"Epic","position":"2nd / Defender","level":"1 - 10","effect":":mage: or :priest:: Each time you are Healed, Deal 98-505 flat damage and you get 9-50 DMG+.\\n:sto::mage: or :sto::priest:: Trigger this effect at the beginning and at the end of the fight as well.","last_patch":"10 Oct 2024","url":"https://www.eredan-arena.com/images/HD/items/125.png","tag":["mage","priest","sto"]},{"name":"Sorcerer's Staff","rarity":"Epic","position":"1st / Attacker","level":"1 - 10","effect":":mage::guem:: At the start of the fight you deal 349-1800 Lightning and 349-1800 Tidal Wave DMG to your opponent.\\n:sto::mage::guem:: You also deal 349-1800 Spellbreaker DMG.","last_patch":"31 Aug 2023","url":"https://www.eredan-arena.com/images/HD/items/91.png","tag":["mage","guem","sto"]},{"name":"Spiked Scourge","rarity":"Rare","position":"1st / Attacker","level":"1 - 10","effect":":marauder: ou :warrior: : at the start of the fight you receive 48-247 Thorns.\\nEach time you activate a skill you deal flat DMG to your opponent equal to your Thorn's value.\\nFlat DMG is a DMG that ignores everything.","last_patch":"24 Aug 2023","url":"https://www.eredan-arena.com/images/HD/items/84.png","tag":["warrior","marauder"]},{"name":"Spiritual Branch","rarity":"Rare","position":"1st / Attacker","level":"1 - 10","effect":":dais:: At the end of skill activation phase, receive 40-206, +4-20 for each of your Spores, then deal 400-2060 Pure DMG to your opponent twice.\\nPure DMG is a DMG that ignores all alterations that could reduce or prevent it.","last_patch":"19 Jul 2024","url":"https://www.eredan-arena.com/images/HD/items/157.png","tag":["dais"]},{"name":"Staff of Kei'zan","rarity":"Legendary","position":"1st / Attacker","level":"1 - 10","effect":"At the start of the fight, Deal 1000-5159 Flowering DMG, +333-1719 for each of your :dais: allies, then receive 50-257 Thorns.\\nKei'zan or Kei'zan the World-Tree: you also receive 10-51 Restore & 1 Critical.\\nFlowering DMG is a normal DMG that applies 1 Spore to you and to your opponent.","last_patch":"19 Jul 2024","url":"http://static.eredan.com/images/print/517ae72f6f1dedfad3ad7f83eecb5e9c.png","tag":["dais"]},{"name":"Stink Bomb","rarity":"Epic","position":"1st / Attacker","level":"1 - 10","effect":"At the start of the fight, you and your opponent are dealt 400-2063 Shock damage and receive 40-206 Stench.\\nShock damage is a damage that cannot be reduced or increased, but still can be prevented by skills like Shield or Scarab.","last_patch":"06 Aug 2024","url":"https://www.eredan-arena.com/images/HD/items/145.png","tag":[]},{"name":"Sun Emblem","rarity":"Rare","position":"2nd / Defender","level":"1 - 10","effect":":solarian:: At the start of the fight and after the skill activation phase, you receive 40-206 Resilience & 0-2 Solar Light.","last_patch":"31 May 2024","url":"https://www.eredan-arena.com/images/HD/items/148.png","tag":["solarian"]},{"name":"Sword CS","rarity":"Common","position":"1st / Attacker","level":"1 - 10","effect":"At the start of the Fight, deal 100-515 Normal DMG.","last_patch":"29 Nov 2023","url":"https://www.eredan-arena.com/images/HD/items/66.png","tag":[]},{"name":"Sword of Artaban","rarity":"Legendary","position":"1st / Attacker","level":"1 - 10","effect":":colossus:: At the start of the fight deal 969-4999 Pure DMG to your opponent, +242-1249 for each of your :swordDice: and receive 96-499 DMG+.\\nArtaban: you also receive 1 Riposte and 1 Critical.\\nPure DMG is a DMG that ignores all alterations that could reduce or prevent it.","last_patch":"06 Sep 2023","url":"https://www.eredan-arena.com/images/HD/items/96.png","tag":[]},{"name":"Sword of Sins","rarity":"Legendary","position":"1st / Attacker","level":"1 - 10","effect":":demon:: Each time your opponent receives DMG-, it suffers 145-748 flat DMG.\\nDark Messiah Samael: you also gain 29-149 Strength+.\\nFlat DMG is a DMG that ignores everything.","last_patch":"18 Aug 2023","url":"https://www.eredan-arena.com/images/HD/items/82.png","tag":["demon"]},{"name":"Sword of the 5 Elders","rarity":"Legendary","position":"1st / Attacker","level":"1 - 10","effect":"Every fifth damage you deal is increased by 15-77%, and every fifth damage you suffer is decreased by 15-77%.","last_patch":"24 Mar 2022","url":"https://www.eredan-arena.com/images/HD/items/52.png","tag":[]},{"name":"Tear of Guem","rarity":"Epic","position":"2nd / Defender","level":"1 - 10","effect":"Colossus: Each time you activate a skill, heal 291-1501, plus 400 Shield if you have 1 Roll left.","last_patch":"01 Jun 2023","url":"https://www.eredan-arena.com/images/HD/items/75.png","tag":[]},{"name":"Telendar's Blade","rarity":"Legendary","position":"1st / Attacker","level":"1 - 10","effect":":zil::marauder:: Each time you change one of your dice to :swordDice: you deal 194-1000 Backstab DMG to your opponent.\\nTelendar: you also receive DMG+ 38-200.","last_patch":"06 Jan 2024","url":"https://www.eredan-arena.com/images/HD/items/94.png","tag":["zil","marauder"]},{"name":"Temporal Backpack","rarity":"Epic","position":"2nd / Defender","level":"1 - 10","effect":":tem:: Each time you receive a new negative alteration trigger a Portal 600-3095 and receive Dodge 0-3.","last_patch":"19 Apr 2024","url":"https://www.eredan-arena.com/images/HD/items/150.png","tag":["tem"]},{"name":"The Bestial","rarity":"Legendary","position":"1st / Attacker","level":"1 - 10","effect":"At the start of the fight deal 1400-7223 flat DMG to your opponent and receive 140-722 Curse.\\nFenrath or Kolodan: at the end of the skill activation phase convert your highest negative alteration into Strength.\\nFlat DMG is a DMG that ignores everything.","last_patch":"21 Jun 2024","url":"https://www.eredan-arena.com/images/HD/items/154.png","tag":[]},{"name":"The Bushido Code","rarity":"Epic","position":"2nd / Defender","level":"1 - 10","effect":"Each time your opponent receives Strength, get 10-51% of it.\\n:kot::At the start of the fight receive 1 Riposte.","last_patch":"26 Aug 2023","url":"https://www.eredan-arena.com/images/HD/items/39.png","tag":["kot"]},{"name":"The Council's Banner","rarity":"Legendary","position":"2nd / Defender","level":"1 - 10","effect":":cou:: Each time you receive a new positive alteration you Heal 400-2063 DMG and your allies receive 20-103 DMG+ and 20-103 Strength+, 40-206 if they belong to :cou:.","last_patch":"24 Nov 2023","url":"https://www.eredan-arena.com/images/thumb/items/106.png","tag":["cou"]},{"name":"The Hullbreaker","rarity":"Epic","position":"1st / Attacker","level":"1 - 10","effect":":pir:: each time you activate a skill deal 100-515 flat DMG to your opponent and they receive 10-51 DMG- for each of their Powder.\\n:pir::warrior: or :pir::berserker:: at the start of the fight, give your opponent 1 Powder.\\nFlat DMG is a DMG that ignores everything.","last_patch":"07 Oct 2023","url":"https://www.eredan-arena.com/images/thumb/items/115.png","tag":["pir","warrior","berserker"]},{"name":"The Imperatrice's Crown","rarity":"Legendary","position":"2nd / Defender","level":"1 - 10","effect":":equinox:: Your opponent get 80-412 Leech and Bleeding.\\nThe Imperatrice: Set your opponent's Strength to 1 and you get 0-2 Critical.","last_patch":"29 Oct 2024","url":"https://www.eredan-arena.com/images/HD/items/170.png","tag":["equinox"]},{"name":"The Kingslayers","rarity":"Legendary","position":"1st / Attacker","level":"1 - 10","effect":":marauder:: At the start of the fight, deal 200-1031 Backstab damage and you receive 0-2 Dodge.\\nAt the end of the fight, deal 400-2063 Decisive Strike and you receive 0-2 Dodge.\\nBackstab damage is a damage that also decreases your opponent Strength by 50% of the damage value.\\nDecisive Strike is a DMG that ignores all alterations that could reduce or prevent it.","last_patch":"25 Nov 2024","url":"https://www.eredan-arena.com/images/thumb/items/188.png","tag":["marauder"]},{"name":"The Last Barrier","rarity":"Legendary","position":"2nd / Defender","level":"1 - 10","effect":":tem:: At the start of the fight, receive 800-4127 Shield and trigger a Deja Vu.","last_patch":"18 Nov 2023","url":"https://www.eredan-arena.com/images/HD/items/42.png","tag":["tem"]},{"name":"The Perforator","rarity":"Epic","position":"1st / Attacker","level":"1 - 10","effect":"At the start of the fight, delete half of one of your opponent's positive alteration 0-4 times then deal 850-4385 Shock DMG.\\nShock DMG is an unmodifiable DMG.","last_patch":"03 Feb 2024","url":"https://www.eredan-arena.com/images/HD/items/51.png","tag":[]},{"name":"The Pilgrim","rarity":"Legendary","position":"1st / Attacker","level":"1 - 10","effect":":mage:: each time your opponent receives a new negative alteration, receive 2 Critical then you deal 300-1547 Pure DMG to them.\\nMalyss, Alishk or Lord Alishk: Also trigger this effect at the start of the fight.\\nPure DMG is a DMG that ignores all alterations that could reduce or prevent it.","last_patch":"30 Sep 2023","url":"https://www.eredan-arena.com/images/HD/items/53.png","tag":["mage"]},{"name":"Thunder Spear","rarity":"Legendary","position":"1st / Attacker","level":"1 - 10","effect":":ava:: each time one of your alterations is decreased or consumed you deal 200-1031 flat DMG to your opponent and they receive 20-103 Thunderstruck.\\nThunder King: at the end of the fight repeatedly deal 200-1031 Lightning DMG for each of your :swordDice:.\\nFlat DMG is a DMG that ignores everything.\\nLightning DMG is a Normal DMG that causes a tenth of its value as Thunderstruck to the opponent.\\nThis equipment considers negative and positive alterations to trigger.","last_patch":"07 Oct 2023","url":"https://www.eredan-arena.com/images/thumb/items/113.png","tag":["ava"]},{"name":"Time Portal Hourglass","rarity":"Rare","position":"1st / Attacker","level":"1 - 10","effect":":tem:: At the end of the skill activation phase, deal 600-3095 Portal DMG.\\nPortal DMG is a Normal DMG that after being caused applies one of your negative alterations to the opponent.","last_patch":"18 Nov 2023","url":"https://www.eredan-arena.com/images/thumb/items/128.png","tag":["tem"]},{"name":"Tonbokiri","rarity":"Legendary","position":"1st / Attacker","level":"1 - 10","effect":":kot::warrior:: at the start of the fight deal 600-3095 Earthquake DMG, +150-773 for each of your :swordDice:.\\nMaster Tadakatsu: each time you attack with your :swordDice:, give the opposing heroes 120-619 Aftermath.\\nEarthquake DMG is a DMG that ignores all alterations that could reduce or prevent it and applies half of its value as Aftermath to all active opponents.","last_patch":"07 Jun 2024","url":"https://www.eredan-arena.com/images/HD/items/153.png","tag":["kot","warrior"]},{"name":"Totem of Spirits","rarity":"Common","position":"2nd / Defender","level":"1 - 10","effect":":dais:: Each time you activate a skill, heal 97-500 and receive 9-50 DMG+.","last_patch":"19 Jul 2024","url":"https://www.eredan-arena.com/images/HD/items/158.png","tag":["dais"]},{"name":"Utga","rarity":"Common","position":"1st / Attacker","level":"1 - 10","effect":"At the end of skill activation phase, deal 291-1501 Shock DMG and receive 291-1501 Shield, +145-750 for each :sto: ally.\\n:sto:: Each time one of your dice becomes a :swordDice:, receive 97-500 Shield.\\nShock DMG is a DMG that cannot be reduced or increased, but still is affected by Scarab and Shield-like skills.","last_patch":"06 Aug 2024","url":"https://www.eredan-arena.com/images/HD/items/45.png","tag":["sto"]},{"name":"Vampire Dagger","rarity":"Legendary","position":"1st / Attacker","level":"1 - 10","effect":":undead:: At the end of skill activation phase, deal 500-2579 Backstab damage and 500-2579 Life Drain damage to your opponent.\\nLazlo, the Bloody Count or Wayna or Wayna's Reflection: Deal 250-1289 Bite damage and 250-1289 Backstab damage at the start of the fight.\\nBite damage is a damage that also applies 100 Bleeding to the opponent.\\nBackstab damage is a damage that also decreases your opponent Strength by 50% of the damage value.\\nLifedrain damage is a damage that also heals by the same value.","last_patch":"29 Oct 2024","url":"https://www.eredan-arena.com/images/HD/items/169.png","tag":["undead"]},{"name":"Variustradi","rarity":"Rare","position":"1st / Attacker","level":"1 - 10","effect":":bard:: Each time you activate a skill, your opponent receives 48-247 Echo.","last_patch":"10 Aug 2023","url":"https://www.eredan-arena.com/images/HD/items/77.png","tag":["bard"]},{"name":"Wakizashi","rarity":"Rare","position":"1st / Attacker","level":"1 - 10","effect":":kot:: At the end of the fight, deal 485-2502 pure DMG to your opponent, +97-500 for each of your :swordDice: .\\nPure DMG is a DMG that ignores all alterations that could reduce or prevent it.","last_patch":"26 Aug 2023","url":"https://www.eredan-arena.com/images/HD/items/86.png","tag":["kot"]},{"name":"War Cuirass","rarity":"Rare","position":"2nd / Defender","level":"1 - 10","effect":"At the rune consumption phase, gain 155-799 Shield for each Rune consumed.","last_patch":"04 Aug 2022","url":"https://www.eredan-arena.com/images/HD/items/34.png","tag":[]},{"name":"Weakening Potion CS","rarity":"Rare","position":"2nd / Defender","level":"1 - 10","effect":"At the start of the fight, your opponent's Strength is reduced by 30-154.","last_patch":"29 Nov 2023","url":"https://www.eredan-arena.com/images/HD/items/71.png","tag":[]},{"name":"Wings of Amalgon","rarity":"Legendary","position":"2nd / Defender","level":"1 - 10","effect":"At the start of combat, receive 1 Dragon Hide, or 2 if you are :dragon:.\\nEach time one of your Dragon Hides are consumed, deal 500-2579 Flat DMG to your opponent and he receives 50-257 Bleeding.\\nFlat DMG is a DMG that ignores everything.","last_patch":"10 Feb 2024","url":"https://www.eredan-arena.com/images/HD/items/41.png","tag":["dragon"]},{"name":"Witchblade Armor","rarity":"Common","position":"2nd / Defender","level":"1 - 10","effect":":noz::marauder::The first two times you suffer more than 2500 DMG at once, cast a Spellbreaker 300-1547 and receive 30-154 DMG+.\\nSpellbreaker DMG is a DMG that halves a random opposing positive alteration.","last_patch":"19 Sep 2024","url":"https://www.eredan-arena.com/images/HD/items/103.png","tag":["noz","marauder"]},{"name":"Wolf Muzzle","rarity":"Rare","position":"1st / Attacker","level":"1 - 10","effect":":beast: : At the start of the fight, deal 485-2502 Shock DMG to your opponent and receive 20 Berserk for each of your :beast:. \\"  Shock DMG is a DMG that cannot be modified by alteration, but can consume shield skills and can be prevented.","last_patch":"22 Aug 2023","url":"https://www.eredan-arena.com/images/HD/items/47.png","tag":["beast"]},{"name":"Wyrmguard","rarity":"Legendary","position":"2nd / Defender","level":"1 - 10","effect":":noz::warrior:: If you did not roll any :swordDice: at the start of the game, all the positive alterations received by you are increased by 8-41%, +10% if Blue-Mark is one of your current allies in game (rounded up).","last_patch":"20 Aug 2024","url":"https://www.eredan-arena.com/images/HD/items/161.png","tag":["noz","warrior"]},{"name":"Yafujima's Scroll","rarity":"Rare","position":"1st / Attacker","level":"1 - 10","effect":":kot::mage:: each time your Strength increases, you receive as much DMG+ as 10-51% of this Strength increase.","last_patch":"13 Jan 2024","url":"https://www.eredan-arena.com/images/HD/items/136.png","tag":["kot","mage"]},{"name":"Zil Bell","rarity":"Epic","position":"2nd / Defender","level":"1 - 10","effect":":zil:: at the start and at the end of the fight, deal 388-2001 Illusion DMG.\\n:zil::human: or :zil::guem:: you also gain 1 Critical.\\nIllusion DMG is a DMG that acts randomly as one of the others standard damaging active skills, except Smite or Physical Attack.","last_patch":"06 Jan 2024","url":"https://www.eredan-arena.com/images/HD/items/93.png","tag":["zil","human","guem"]}]`),Dp={Emoji:fw,Guilds:pw,Class:mw,Race:gw,Skill:yw,Equip:_w},vw={class:"container"},ww={class:"search-bar"},Ew={class:"search-input-container"},Tw={class:"skills-container"},bw={key:0,class:"skills-list"},Aw=["src","alt"],Iw={class:"skill-details"},Dw={class:"skill-name"},Sw={class:"skill-description",style:{"white-space":"pre-line","text-align":"left"}},Rw={key:1,class:"no-results"},Cw={__name:"SkillShow",setup(n){const e=oe(Dp),t=oe(new Map);qn(()=>{e.value.Skill.forEach(l=>{t.value.set(l.id,l)})});const r=oe(""),i=ei(()=>{const l=Array.from(t.value.values());return r.value?l.filter(c=>(c.name||"").toLowerCase().includes(r.value.toLowerCase())):l}),s=()=>{},a=()=>{r.value=""};return(l,c)=>(Y(),ee("div",vw,[c[2]||(c[2]=C("h1",null,"Skill",-1)),c[3]||(c[3]=C("p",null,"This section displays the various capabilities, including buffs, passives, skill modifiers, and more.",-1)),C("div",ww,[C("div",Ew,[ct(C("input",{type:"text","onUpdate:modelValue":c[0]||(c[0]=h=>r.value=h),placeholder:"search",onInput:s,class:"search-input-text"},null,544),[[Kt,r.value]]),r.value?(Y(),ee("button",{key:0,class:"clear-button",onClick:a}," × ")):Dt("",!0)])]),C("div",Tw,[i.value.length>0?(Y(),ee("div",bw,[(Y(!0),ee(Pe,null,Et(i.value,h=>(Y(),ee("div",{key:h.id,class:"skill-item"},[C("img",{src:h.img_url,alt:h.name,class:"skill-image"},null,8,Aw),C("div",Iw,[C("h2",Dw,Ue(h.name),1),C("p",Sw,Ue(h.description),1)])]))),128))])):(Y(),ee("div",Rw,c[1]||(c[1]=[C("p",null,"沒有找到相關技能。",-1)])))])]))}},kw=bn(Cw,[["__scopeId","data-v-2542eaa8"]]),Pw="modulepreload",Mw=function(n){return"/Eredan-Arena-Box/"+n},Oh={},Z=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(t.map(c=>{if(c=Mw(c),c in Oh)return;Oh[c]=!0;const h=c.endsWith(".css"),f=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const p=document.createElement("link");if(p.rel=h?"stylesheet":Pw,h||(p.as="script"),p.crossOrigin="",p.href=c,l&&p.setAttribute("nonce",l),document.head.appendChild(p),h)return new Promise((_,A)=>{p.addEventListener("load",_),p.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return i.then(a=>{for(const l of a||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})},Vw={class:"container"},Nw={class:"search-bar"},Ow={class:"search-input-container"},Lw={key:0,class:"adv-search-container"},xw=["value"],Fw=["value"],Gw={class:"tag-container"},Hw=["onClick","innerHTML"],Uw={class:"equip-container"},Bw={key:0,class:"equip-list"},$w=["src","alt"],zw={class:"equip-details"},jw={class:"equip-name"},qw=["innerHTML"],Ww={key:1,class:"no-results"},Kw={__name:"EquipShow",setup(n){const e=oe(Dp),t=oe(new Map),r=oe({}),i=oe(new Set),s=oe([]),a=oe(["Common","Rare","Epic","Legendary"]),l=oe(["1st / Attacker","2nd / Defender"]),c=oe(""),h=oe(""),f=oe(""),p=oe(""),_=oe(!1),A=ei(()=>Array.from(i.value)),S=async()=>{const b=Object.assign({"../assets/img/aggregats/000.png":()=>Z(()=>import("./000-DVuzC-mM.js"),[]),"../assets/img/aggregats/001.png":()=>Z(()=>import("./001-DPfH-OSF.js"),[]),"../assets/img/aggregats/002.png":()=>Z(()=>import("./002-CLCORmEz.js"),[]),"../assets/img/aggregats/003.png":()=>Z(()=>import("./003-DbpKvsdV.js"),[]),"../assets/img/aggregats/004.png":()=>Z(()=>import("./004-CHN1Iyut.js"),[]),"../assets/img/aggregats/005.png":()=>Z(()=>import("./005-DHx5Y1EI.js"),[]),"../assets/img/aggregats/006.png":()=>Z(()=>import("./006-CGt9yrP3.js"),[]),"../assets/img/aggregats/007.png":()=>Z(()=>import("./007-BdTG3Cww.js"),[]),"../assets/img/aggregats/008.png":()=>Z(()=>import("./008-BOLKBicd.js"),[]),"../assets/img/aggregats/009.png":()=>Z(()=>import("./009-BueidsYN.js"),[]),"../assets/img/aggregats/010.png":()=>Z(()=>import("./010-aZ-_t5S8.js"),[]),"../assets/img/aggregats/011.png":()=>Z(()=>import("./011-FeGdlMYA.js"),[]),"../assets/img/aggregats/012.png":()=>Z(()=>import("./012-C4-NGtLv.js"),[]),"../assets/img/aggregats/1.png":()=>Z(()=>import("./1-7oEiOuDh.js"),[]),"../assets/img/aggregats/10.png":()=>Z(()=>import("./10-BnkwPLeO.js"),[]),"../assets/img/aggregats/11.png":()=>Z(()=>import("./11-DCA0tbmS.js"),[]),"../assets/img/aggregats/12.png":()=>Z(()=>import("./12-Brs-egRG.js"),[]),"../assets/img/aggregats/13.png":()=>Z(()=>import("./13--yluX27d.js"),[]),"../assets/img/aggregats/14.png":()=>Z(()=>import("./14-CvSEW-BE.js"),[]),"../assets/img/aggregats/15.png":()=>Z(()=>import("./15-D-ksqq-R.js"),[]),"../assets/img/aggregats/16.png":()=>Z(()=>import("./16-B1v2LC1W.js"),[]),"../assets/img/aggregats/17.png":()=>Z(()=>import("./17-DqeLt2d-.js"),[]),"../assets/img/aggregats/18.png":()=>Z(()=>import("./18-CJqdn-0y.js"),[]),"../assets/img/aggregats/19.png":()=>Z(()=>import("./19-AB7SYxpB.js"),[]),"../assets/img/aggregats/2.png":()=>Z(()=>import("./2-6EQ_QYAW.js"),[]),"../assets/img/aggregats/20.png":()=>Z(()=>import("./20-B-KMNHzC.js"),[]),"../assets/img/aggregats/21.png":()=>Z(()=>import("./21-B9_0Bwys.js"),[]),"../assets/img/aggregats/22.png":()=>Z(()=>import("./22-Bu0rUebx.js"),[]),"../assets/img/aggregats/23.png":()=>Z(()=>import("./23-C-SwAp87.js"),[]),"../assets/img/aggregats/24.png":()=>Z(()=>import("./24-DWGDbqts.js"),[]),"../assets/img/aggregats/25.png":()=>Z(()=>import("./25-DTHoG9vd.js"),[]),"../assets/img/aggregats/26.png":()=>Z(()=>import("./26-aasfUV4W.js"),[]),"../assets/img/aggregats/27.png":()=>Z(()=>import("./27-BiPfp-dh.js"),[]),"../assets/img/aggregats/28.png":()=>Z(()=>import("./28-D4SmQLnm.js"),[]),"../assets/img/aggregats/29.png":()=>Z(()=>import("./29-C_29xPIy.js"),[]),"../assets/img/aggregats/3.png":()=>Z(()=>import("./3-DmZ4K1LB.js"),[]),"../assets/img/aggregats/30.png":()=>Z(()=>import("./30-6UfzpkOv.js"),[]),"../assets/img/aggregats/32.png":()=>Z(()=>import("./32-Dk9Ff6ER.js"),[]),"../assets/img/aggregats/33.png":()=>Z(()=>import("./33-CTOoqfjH.js"),[]),"../assets/img/aggregats/4.png":()=>Z(()=>import("./4-BmzLVkSn.js"),[]),"../assets/img/aggregats/40.png":()=>Z(()=>import("./40-BE7Fqd9i.js"),[]),"../assets/img/aggregats/41.png":()=>Z(()=>import("./41-Dnf35hDM.js"),[]),"../assets/img/aggregats/5.png":()=>Z(()=>import("./5-BFbJ8D8j.js"),[]),"../assets/img/aggregats/51.png":()=>Z(()=>import("./51-DUbCj1cy.js"),[]),"../assets/img/aggregats/52.png":()=>Z(()=>import("./52-CxiMEkr9.js"),[]),"../assets/img/aggregats/53.png":()=>Z(()=>import("./53-I_Af9088.js"),[]),"../assets/img/aggregats/54.png":()=>Z(()=>import("./54-BUKh0UPg.js"),[]),"../assets/img/aggregats/55.png":()=>Z(()=>import("./55-CdG4vssh.js"),[]),"../assets/img/aggregats/56.png":()=>Z(()=>import("./56-Cde8MEgH.js"),[]),"../assets/img/aggregats/57.png":()=>Z(()=>import("./57-D3anVe8D.js"),[]),"../assets/img/aggregats/58.png":()=>Z(()=>import("./58-Bdg-c7Dd.js"),[]),"../assets/img/aggregats/6.png":()=>Z(()=>import("./6-CREhEWIi.js"),[]),"../assets/img/aggregats/7.png":()=>Z(()=>import("./7-C61OOjXS.js"),[]),"../assets/img/aggregats/8.png":()=>Z(()=>import("./8-Cp33KXkJ.js"),[]),"../assets/img/aggregats/9.png":()=>Z(()=>import("./9-DyqClp-q.js"),[])}),y=Object.keys(b),g=await Promise.all(y.map(async w=>{const I=await b[w]();return{id:w.split("/").pop().split(".")[0],path:I.default}}));s.value=g},k=ei(()=>Array.from(t.value.values()).filter(y=>{const g=y.name.toLowerCase().includes(p.value.toLowerCase()),w=!c.value||y.rarity===c.value,I=!h.value||y.position===h.value,T=!f.value||y.tag&&y.tag.includes(f.value);return g&&w&&I&&T})),O=()=>{console.log("Search query:",p.value)},q=()=>{p.value="",c.value="",h.value="",f.value=""},z=()=>{_.value=!_.value},W=b=>{f.value=f.value===b?"":b},H=b=>({Common:"rarity-Common",Rare:"rarity-Rare",Epic:"rarity-Epic",Legendary:"rarity-Legendary"})[b]||"rarity-default",ce=b=>b&&b.replace(/:([a-zA-Z0-9_~]+):/g,(y,g)=>he(g)?he(g):y),he=b=>{const y=b,g=r.value.find(w=>w.name===y);if(g){const w=s.value.find(I=>I.id===g.id);if(w)return`<img src="${w.path}" alt="${b}" style="  width: 30px; height: 30px; ; vertical-align: middle; ">`}};return qn(()=>{e.value.Equip.forEach(b=>{t.value.set(b.name,b),b.tag&&Array.isArray(b.tag)&&b.tag.forEach(y=>{i.value.add(y)})}),r.value=e.value.Emoji,S()}),(b,y)=>(Y(),ee("div",Vw,[y[9]||(y[9]=C("h1",null,"Equip",-1)),y[10]||(y[10]=C("p",null,"Just...equip information.",-1)),C("div",Nw,[C("div",Ow,[ct(C("input",{type:"text","onUpdate:modelValue":y[0]||(y[0]=g=>p.value=g),placeholder:"search",onInput:O,class:"search-input-text"},null,544),[[Kt,p.value]]),p.value||c.value||h.value||f.value?(Y(),ee("button",{key:0,class:"clear-button",onClick:q}," × ")):Dt("",!0),C("button",{class:"adv-button",onClick:z}," Adv ")]),_.value?(Y(),ee("div",Lw,[C("div",null,[y[4]||(y[4]=C("label",{for:"rarity"},"Rarity:",-1)),ct(C("select",{id:"rarity","onUpdate:modelValue":y[1]||(y[1]=g=>c.value=g)},[y[3]||(y[3]=C("option",{value:""},"All",-1)),(Y(!0),ee(Pe,null,Et(a.value,g=>(Y(),ee("option",{key:g,value:g},Ue(g),9,xw))),128))],512),[[bl,c.value]])]),C("div",null,[y[6]||(y[6]=C("label",{for:"position"},"Position:",-1)),ct(C("select",{id:"position","onUpdate:modelValue":y[2]||(y[2]=g=>h.value=g)},[y[5]||(y[5]=C("option",{value:""},"All",-1)),(Y(!0),ee(Pe,null,Et(l.value,g=>(Y(),ee("option",{key:g,value:g},Ue(g),9,Fw))),128))],512),[[bl,h.value]])]),C("div",null,[y[7]||(y[7]=C("label",null,"Tags:",-1)),C("div",Gw,[(Y(!0),ee(Pe,null,Et(A.value,g=>(Y(),ee("button",{key:g,class:gn(["tag-button",{active:f.value===g}]),onClick:w=>W(g),innerHTML:he(g)},null,10,Hw))),128))])])])):Dt("",!0)]),C("div",Uw,[k.value.length>0?(Y(),ee("div",Bw,[(Y(!0),ee(Pe,null,Et(k.value,g=>(Y(),ee("div",{key:g.name,class:"equip-item"},[C("img",{src:g.url,alt:g.name,class:gn(["equip-image",H(g.rarity)])},null,10,$w),C("div",zw,[C("h2",jw,Ue(g.name),1),C("pre",{class:"equip-description",innerHTML:ce(g.effect)},null,8,qw)])]))),128))])):(Y(),ee("div",Ww,y[8]||(y[8]=[C("p",null,"No results found.",-1)])))])]))}},Xw=bn(Kw,[["__scopeId","data-v-c34ed530"]]),Qw=["value"],Yw={class:"horizontal-table"},Jw=["onUpdate:modelValue","placeholder"],Zw={class:"horizontal-table"},e0={class:"table-cell"},t0={class:"table-cell"},n0={key:0},r0={key:0,class:"success-message"},i0={key:1,class:"error-message"},s0={class:"output"},o0={__name:"AddData",setup(n){const e=oe({name:"",id:"",description:"",url:""}),t=oe(""),r=oe(null),i=oe(null),s=oe([{value:"option1",label:"Skill"},{value:"option2",label:"Equip"}]),a=oe("option2"),l=oe([{key:"name",label:"Name"},{key:"id",label:"ID"},{key:"description",label:"Description"},{key:"url",label:"URL"}]),c=()=>{e.value={name:"",id:"",description:"",url:""},t.value="",p.value={}},h=ei(()=>{let A={};return a.value==="option1"?A={...e.value}:a.value==="option2"&&(A={...p.value}),JSON.stringify(A,null,2)}),f=async()=>{if(!r.value)return;const A=r.value.textContent;if(!A.trim()){i.value="error",setTimeout(()=>i.value=null,2e3);return}try{await navigator.clipboard.writeText(A),i.value="success",setTimeout(()=>i.value=null,2e3)}catch(S){console.error("複製失敗: ",S),i.value="error",setTimeout(()=>i.value=null,2e3)}},p=oe({}),_=()=>{if(!t.value.trim())return;const S=t.value.trim().split(`
`)[0],k={},O=S.match(/^(.*?) Rarity /);O&&(k.name=O[1].trim());const q=S.match(/Rarity (\w+)/);q&&(k.rarity=q[1].trim());const z=S.match(/Position (.*?) Level/);z&&(k.position=z[1].trim());const W=S.match(/Level (.*?) Effect/);W&&(k.level=W[1].trim());const H=S.match(/Effect ⋆ (.*?) 圖片/);H&&(k.effect=H[1].trim());const ce=S.match(/Last Patch: (.*?)$/);ce&&(k.last_patch=ce[1].trim()),O&&(k.url=""),p.value=k};return(A,S)=>(Y(),ee("div",null,[S[6]||(S[6]=C("h1",null,"Add Data",-1)),S[7]||(S[7]=C("p",null,"The generated format is here",-1)),ct(C("select",{"onUpdate:modelValue":S[0]||(S[0]=k=>a.value=k)},[S[3]||(S[3]=C("option",{disabled:"",value:""},"請選擇一個選項",-1)),(Y(!0),ee(Pe,null,Et(s.value,k=>(Y(),ee("option",{key:k.value,value:k.value},Ue(k.label),9,Qw))),128))],512),[[bl,a.value]]),S[8]||(S[8]=C("div",{class:"dashed-line"},null,-1)),ct(C("div",null,[C("div",Yw,[C("div",null,[(Y(!0),ee(Pe,null,Et(l.value,k=>(Y(),ee("div",{key:k.key,class:"table-cell"},[C("label",null,Ue(k.label)+"：",1),ct(C("input",{type:"text","onUpdate:modelValue":O=>e.value[k.key]=O,placeholder:`Enter ${k.label.toLowerCase()}`},null,8,Jw),[[Kt,e.value[k.key]]])]))),128))])])],512),[[Tl,a.value==="option1"]]),ct(C("div",null,[C("div",Zw,[C("div",null,[C("div",e0,[S[4]||(S[4]=C("label",null,"Wiki Input：",-1)),ct(C("input",{type:"text","onUpdate:modelValue":S[1]||(S[1]=k=>t.value=k),placeholder:"Enter wiki data"},null,512),[[Kt,t.value]]),C("button",{onClick:_},"+")]),C("div",t0,[S[5]||(S[5]=C("label",null,"url Input：",-1)),ct(C("input",{type:"text","onUpdate:modelValue":S[2]||(S[2]=k=>p.value.url=k),placeholder:"Enter img url"},null,512),[[Kt,p.value.url]])])])])],512),[[Tl,a.value==="option2"]]),a.value?(Y(),ee("div",n0,[C("button",{onClick:c},"Clear"),C("button",{onClick:f},"Copy"),i.value==="success"?(Y(),ee("p",r0,"內容已複製到剪貼簿！")):Dt("",!0),i.value==="error"?(Y(),ee("p",i0,"複製失敗，請手動複製內容。")):Dt("",!0),C("div",s0,[C("pre",{ref_key:"preElement",ref:r},Ue(h.value),513)])])):Dt("",!0),S[9]||(S[9]=C("div",{class:"dashed-line"},null,-1))]))}},a0=bn(o0,[["__scopeId","data-v-24e267a2"]]),l0={class:"horizontal-table"},c0={class:"table-cell"},u0={class:"table-cell"},h0={key:0,class:"success-message"},d0={key:1,class:"error-message"},f0={class:"output"},p0={__name:"AddCard",setup(n){const e=oe(""),t=oe(""),r=oe({}),i=oe(null),s=oe(null),a=p=>{const _=p.split(" "),A={};let S=0,k=[];for(;S<_.length&&!_[S].startsWith("#");)k.push(_[S]),S++;return A.name=k.join(" ").trim(),S<_.length&&_[S].startsWith("#")&&(A.id=_[S].replace("#","").trim(),S++),S<_.length&&_[S].toLowerCase()==="guild"&&(A.Guild=_[S+1]+" "+_[S+2],S+=3),S<_.length&&_[S].toLowerCase()==="class"&&(A.Class=_[S+1],S+=2),S<_.length&&_[S].toLowerCase()==="race"&&(A.Race=_[S+1],S+=2),S<_.length&&_[S].toLowerCase()==="rarity"&&(A.Rarity=_[S+1],S+=2),A},l=()=>{if(!e.value.trim())return;const p=a(e.value);t.value.trim()&&(p.name=t.value.trim()),r.value=p},c=()=>{e.value="",t.value="",r.value={}},h=async()=>{if(!i.value)return;const p=i.value.textContent;if(!p.trim()){s.value="error",setTimeout(()=>s.value=null,2e3);return}try{await navigator.clipboard.writeText(p),s.value="success",setTimeout(()=>s.value=null,2e3)}catch(_){console.error("複製失敗: ",_),s.value="error",setTimeout(()=>s.value=null,2e3)}},f=ei(()=>{const p={name:r.value.name||"",id:r.value.id||"",Rarity:r.value.Rarity||"",classe:r.value.Class||"",guild:r.value.Guild||"",race:r.value.Race||"",basic_ability:{strength:"",3:{skilltag:[]},2:{skilltag:[]},1:{skilltag:[]}},img_src:"",tag:[],Strategy:[]};return JSON.stringify(p,null,2)});return(p,_)=>(Y(),ee("div",null,[_[5]||(_[5]=C("h1",null,"Add Skill Data",-1)),_[6]||(_[6]=C("p",null,"The skill generated format is here",-1)),_[7]||(_[7]=C("div",{class:"dashed-line"},null,-1)),C("div",null,[C("div",l0,[C("div",null,[C("p",null,[C("button",{onClick:_[0]||(_[0]=(...A)=>p.openData&&p.openData(...A))},"Open"),C("button",{onClick:c},"Clear"),C("button",{onClick:h},"Copy")]),C("div",c0,[_[3]||(_[3]=C("label",null,"Wiki Data Input：",-1)),ct(C("input",{type:"text","onUpdate:modelValue":_[1]||(_[1]=A=>e.value=A),placeholder:"Enter data"},null,512),[[Kt,e.value]]),C("button",{onClick:l},"+")]),C("div",u0,[_[4]||(_[4]=C("label",null,"Name：",-1)),ct(C("input",{type:"text","onUpdate:modelValue":_[2]||(_[2]=A=>t.value=A),placeholder:"Enter name"},null,512),[[Kt,t.value]])])])]),s.value==="success"?(Y(),ee("p",h0,"內容已複製到剪貼簿！")):Dt("",!0),s.value==="error"?(Y(),ee("p",d0,"複製失敗，請手動複製內容。")):Dt("",!0),C("div",f0,[C("pre",{ref_key:"preElement",ref:i},Ue(f.value),513)])]),_[8]||(_[8]=C("div",{class:"dashed-line"},null,-1))]))}},m0=bn(p0,[["__scopeId","data-v-57566918"]]),g0=()=>{};var Lh={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sp=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},y0=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],a=n[t++],l=n[t++],c=((i&7)<<18|(s&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const s=n[t++],a=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},Rp={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],a=i+1<n.length,l=a?n[i+1]:0,c=i+2<n.length,h=c?n[i+2]:0,f=s>>2,p=(s&3)<<4|l>>4;let _=(l&15)<<2|h>>6,A=h&63;c||(A=64,a||(_=64)),r.push(t[f],t[p],t[_],t[A])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Sp(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):y0(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],l=i<n.length?t[n.charAt(i)]:0;++i;const h=i<n.length?t[n.charAt(i)]:64;++i;const p=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||l==null||h==null||p==null)throw new _0;const _=s<<2|l>>4;if(r.push(_),h!==64){const A=l<<4&240|h>>2;if(r.push(A),p!==64){const S=h<<6&192|p;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class _0 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const v0=function(n){const e=Sp(n);return Rp.encodeByteArray(e,!0)},Ro=function(n){return v0(n).replace(/\./g,"")},Cp=function(n){try{return Rp.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E0=()=>w0().__FIREBASE_DEFAULTS__,T0=()=>{if(typeof process>"u"||typeof Lh>"u")return;const n=Lh.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},b0=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Cp(n[1]);return e&&JSON.parse(e)},aa=()=>{try{return g0()||E0()||T0()||b0()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},kp=n=>{var e,t;return(t=(e=aa())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},A0=n=>{const e=kp(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Pp=()=>{var n;return(n=aa())===null||n===void 0?void 0:n.config},Mp=n=>{var e;return(e=aa())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D0(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Ro(JSON.stringify(t)),Ro(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function S0(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(dt())}function R0(){var n;const e=(n=aa())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function C0(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function k0(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function P0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function M0(){const n=dt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function V0(){return!R0()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function N0(){try{return typeof indexedDB=="object"}catch{return!1}}function O0(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L0="FirebaseError";class An extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=L0,Object.setPrototypeOf(this,An.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vs.prototype.create)}}class vs{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?x0(s,r):"Error",l=`${this.serviceName}: ${a} (${i}).`;return new An(i,l,r)}}function x0(n,e){return n.replace(F0,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const F0=/\{\$([^}]+)}/g;function G0(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Tr(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],a=e[i];if(xh(s)&&xh(a)){if(!Tr(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function xh(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ws(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function H0(n,e){const t=new U0(n,e);return t.subscribe.bind(t)}class U0{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");B0(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Za),i.error===void 0&&(i.error=Za),i.complete===void 0&&(i.complete=Za);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function B0(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Za(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rt(n){return n&&n._delegate?n._delegate:n}class br{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new I0;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(j0(e))try{this.getOrInitializeService({instanceIdentifier:mr})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=mr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=mr){return this.instances.has(e)}getOptions(e=mr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&a.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:z0(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=mr){return this.component?this.component.multipleInstances?e:mr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function z0(n){return n===mr?void 0:n}function j0(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new $0(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var me;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(me||(me={}));const W0={debug:me.DEBUG,verbose:me.VERBOSE,info:me.INFO,warn:me.WARN,error:me.ERROR,silent:me.SILENT},K0=me.INFO,X0={[me.DEBUG]:"log",[me.VERBOSE]:"log",[me.INFO]:"info",[me.WARN]:"warn",[me.ERROR]:"error"},Q0=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=X0[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class hc{constructor(e){this.name=e,this._logLevel=K0,this._logHandler=Q0,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?W0[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,me.DEBUG,...e),this._logHandler(this,me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,me.VERBOSE,...e),this._logHandler(this,me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,me.INFO,...e),this._logHandler(this,me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,me.WARN,...e),this._logHandler(this,me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,me.ERROR,...e),this._logHandler(this,me.ERROR,...e)}}const Y0=(n,e)=>e.some(t=>n instanceof t);let Fh,Gh;function J0(){return Fh||(Fh=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Z0(){return Gh||(Gh=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Vp=new WeakMap,Al=new WeakMap,Np=new WeakMap,el=new WeakMap,dc=new WeakMap;function eE(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{t(Hn(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&Vp.set(t,n)}).catch(()=>{}),dc.set(e,n),e}function tE(n){if(Al.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});Al.set(n,e)}let Il={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Al.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Np.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Hn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function nE(n){Il=n(Il)}function rE(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(tl(this),e,...t);return Np.set(r,e.sort?e.sort():[e]),Hn(r)}:Z0().includes(n)?function(...e){return n.apply(tl(this),e),Hn(Vp.get(this))}:function(...e){return Hn(n.apply(tl(this),e))}}function iE(n){return typeof n=="function"?rE(n):(n instanceof IDBTransaction&&tE(n),Y0(n,J0())?new Proxy(n,Il):n)}function Hn(n){if(n instanceof IDBRequest)return eE(n);if(el.has(n))return el.get(n);const e=iE(n);return e!==n&&(el.set(n,e),dc.set(e,n)),e}const tl=n=>dc.get(n);function sE(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(n,e),l=Hn(a);return r&&a.addEventListener("upgradeneeded",c=>{r(Hn(a.result),c.oldVersion,c.newVersion,Hn(a.transaction),c)}),t&&a.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),l.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const oE=["get","getKey","getAll","getAllKeys","count"],aE=["put","add","delete","clear"],nl=new Map;function Hh(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(nl.get(e))return nl.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=aE.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||oE.includes(t)))return;const s=async function(a,...l){const c=this.transaction(a,i?"readwrite":"readonly");let h=c.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[t](...l),i&&c.done]))[0]};return nl.set(e,s),s}nE(n=>({...n,get:(e,t,r)=>Hh(e,t)||n.get(e,t,r),has:(e,t)=>!!Hh(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(cE(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function cE(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Dl="@firebase/app",Uh="0.11.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yn=new hc("@firebase/app"),uE="@firebase/app-compat",hE="@firebase/analytics-compat",dE="@firebase/analytics",fE="@firebase/app-check-compat",pE="@firebase/app-check",mE="@firebase/auth",gE="@firebase/auth-compat",yE="@firebase/database",_E="@firebase/data-connect",vE="@firebase/database-compat",wE="@firebase/functions",EE="@firebase/functions-compat",TE="@firebase/installations",bE="@firebase/installations-compat",AE="@firebase/messaging",IE="@firebase/messaging-compat",DE="@firebase/performance",SE="@firebase/performance-compat",RE="@firebase/remote-config",CE="@firebase/remote-config-compat",kE="@firebase/storage",PE="@firebase/storage-compat",ME="@firebase/firestore",VE="@firebase/vertexai",NE="@firebase/firestore-compat",OE="firebase",LE="11.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sl="[DEFAULT]",xE={[Dl]:"fire-core",[uE]:"fire-core-compat",[dE]:"fire-analytics",[hE]:"fire-analytics-compat",[pE]:"fire-app-check",[fE]:"fire-app-check-compat",[mE]:"fire-auth",[gE]:"fire-auth-compat",[yE]:"fire-rtdb",[_E]:"fire-data-connect",[vE]:"fire-rtdb-compat",[wE]:"fire-fn",[EE]:"fire-fn-compat",[TE]:"fire-iid",[bE]:"fire-iid-compat",[AE]:"fire-fcm",[IE]:"fire-fcm-compat",[DE]:"fire-perf",[SE]:"fire-perf-compat",[RE]:"fire-rc",[CE]:"fire-rc-compat",[kE]:"fire-gcs",[PE]:"fire-gcs-compat",[ME]:"fire-fst",[NE]:"fire-fst-compat",[VE]:"fire-vertex","fire-js":"fire-js",[OE]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Co=new Map,FE=new Map,Rl=new Map;function Bh(n,e){try{n.container.addComponent(e)}catch(t){yn.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ti(n){const e=n.name;if(Rl.has(e))return yn.debug(`There were multiple attempts to register component ${e}.`),!1;Rl.set(e,n);for(const t of Co.values())Bh(t,n);for(const t of FE.values())Bh(t,n);return!0}function fc(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function xt(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Un=new vs("app","Firebase",GE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new br("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Un.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ci=LE;function Op(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Sl,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Un.create("bad-app-name",{appName:String(i)});if(t||(t=Pp()),!t)throw Un.create("no-options");const s=Co.get(i);if(s){if(Tr(t,s.options)&&Tr(r,s.config))return s;throw Un.create("duplicate-app",{appName:i})}const a=new q0(i);for(const c of Rl.values())a.addComponent(c);const l=new HE(t,r,a);return Co.set(i,l),l}function Lp(n=Sl){const e=Co.get(n);if(!e&&n===Sl&&Pp())return Op();if(!e)throw Un.create("no-app",{appName:n});return e}function Bn(n,e,t){var r;let i=(r=xE[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),yn.warn(l.join(" "));return}ti(new br(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UE="firebase-heartbeat-database",BE=1,ss="firebase-heartbeat-store";let rl=null;function xp(){return rl||(rl=sE(UE,BE,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ss)}catch(t){console.warn(t)}}}}).catch(n=>{throw Un.create("idb-open",{originalErrorMessage:n.message})})),rl}async function $E(n){try{const t=(await xp()).transaction(ss),r=await t.objectStore(ss).get(Fp(n));return await t.done,r}catch(e){if(e instanceof An)yn.warn(e.message);else{const t=Un.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});yn.warn(t.message)}}}async function $h(n,e){try{const r=(await xp()).transaction(ss,"readwrite");await r.objectStore(ss).put(e,Fp(n)),await r.done}catch(t){if(t instanceof An)yn.warn(t.message);else{const r=Un.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});yn.warn(r.message)}}}function Fp(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zE=1024,jE=30;class qE{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new KE(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=zh();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>jE){const a=XE(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){yn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=zh(),{heartbeatsToSend:r,unsentEntries:i}=WE(this._heartbeatsCache.heartbeats),s=Ro(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return yn.warn(t),""}}}function zh(){return new Date().toISOString().substring(0,10)}function WE(n,e=zE){const t=[];let r=n.slice();for(const i of n){const s=t.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),jh(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),jh(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class KE{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return N0()?O0().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await $E(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return $h(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return $h(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function jh(n){return Ro(JSON.stringify({version:2,heartbeats:n})).length}function XE(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QE(n){ti(new br("platform-logger",e=>new lE(e),"PRIVATE")),ti(new br("heartbeat",e=>new qE(e),"PRIVATE")),Bn(Dl,Uh,n),Bn(Dl,Uh,"esm2017"),Bn("fire-js","")}QE("");var YE="firebase",JE="11.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bn(YE,JE,"app");function pc(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function Gp(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ZE=Gp,Hp=new vs("auth","Firebase",Gp());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ko=new hc("@firebase/auth");function eT(n,...e){ko.logLevel<=me.WARN&&ko.warn(`Auth (${ci}): ${n}`,...e)}function oo(n,...e){ko.logLevel<=me.ERROR&&ko.error(`Auth (${ci}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _n(n,...e){throw mc(n,...e)}function Xt(n,...e){return mc(n,...e)}function Up(n,e,t){const r=Object.assign(Object.assign({},ZE()),{[e]:t});return new vs("auth","Firebase",r).create(e,{appName:n.name})}function $n(n){return Up(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function mc(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Hp.create(n,...e)}function le(n,e,...t){if(!n)throw mc(e,...t)}function dn(n){const e="INTERNAL ASSERTION FAILED: "+n;throw oo(e),new Error(e)}function vn(n,e){n||dn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cl(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function tT(){return qh()==="http:"||qh()==="https:"}function qh(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nT(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(tT()||k0()||"connection"in navigator)?navigator.onLine:!0}function rT(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e,t){this.shortDelay=e,this.longDelay=t,vn(t>e,"Short delay should be less than long delay!"),this.isMobile=S0()||P0()}get(){return nT()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gc(n,e){vn(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;dn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;dn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;dn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iT={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sT=new Es(3e4,6e4);function la(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function ui(n,e,t,r,i={}){return $p(n,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const l=ws(Object.assign({key:n.config.apiKey},a)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);const h=Object.assign({method:e,headers:c},s);return C0()||(h.referrerPolicy="no-referrer"),Bp.fetch()(jp(n,n.config.apiHost,t,l),h)})}async function $p(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},iT),e);try{const i=new oT(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw Xs(n,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const l=s.ok?a.errorMessage:a.error.message,[c,h]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Xs(n,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw Xs(n,"email-already-in-use",a);if(c==="USER_DISABLED")throw Xs(n,"user-disabled",a);const f=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw Up(n,f,h);_n(n,f)}}catch(i){if(i instanceof An)throw i;_n(n,"network-request-failed",{message:String(i)})}}async function zp(n,e,t,r,i={}){const s=await ui(n,e,t,r,i);return"mfaPendingCredential"in s&&_n(n,"multi-factor-auth-required",{_serverResponse:s}),s}function jp(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?gc(n.config,i):`${n.config.apiScheme}://${i}`}class oT{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Xt(this.auth,"network-request-failed")),sT.get())})}}function Xs(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Xt(n,e,r);return i.customData._tokenResponse=t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aT(n,e){return ui(n,"POST","/v1/accounts:delete",e)}async function qp(n,e){return ui(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qi(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function lT(n,e=!1){const t=Rt(n),r=await t.getIdToken(e),i=yc(r);le(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:qi(il(i.auth_time)),issuedAtTime:qi(il(i.iat)),expirationTime:qi(il(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function il(n){return Number(n)*1e3}function yc(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return oo("JWT malformed, contained fewer than 3 sections"),null;try{const i=Cp(t);return i?JSON.parse(i):(oo("Failed to decode base64 JWT payload"),null)}catch(i){return oo("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Wh(n){const e=yc(n);return le(e,"internal-error"),le(typeof e.exp<"u","internal-error"),le(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function os(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof An&&cT(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function cT({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=qi(this.lastLoginAt),this.creationTime=qi(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Po(n){var e;const t=n.auth,r=await n.getIdToken(),i=await os(n,qp(t,{idToken:r}));le(i==null?void 0:i.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Wp(s.providerUserInfo):[],l=dT(n.providerData,a),c=n.isAnonymous,h=!(n.email&&s.passwordHash)&&!(l!=null&&l.length),f=c?h:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new kl(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(n,p)}async function hT(n){const e=Rt(n);await Po(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function dT(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Wp(n){return n.map(e=>{var{providerId:t}=e,r=pc(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fT(n,e){const t=await $p(n,{},async()=>{const r=ws({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,a=jp(n,i,"/v1/token",`key=${s}`),l=await n._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",Bp.fetch()(a,{method:"POST",headers:l,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function pT(n,e){return ui(n,"POST","/v2/accounts:revokeToken",la(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){le(e.idToken,"internal-error"),le(typeof e.idToken<"u","internal-error"),le(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Wh(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){le(e.length!==0,"internal-error");const t=Wh(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(le(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await fT(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,a=new Qr;return r&&(le(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(le(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(le(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Qr,this.toJSON())}_performRefresh(){return dn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kn(n,e){le(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class fn{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=pc(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new uT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new kl(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await os(this,this.stsTokenManager.getToken(this.auth,e));return le(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return lT(this,e)}reload(){return hT(this)}_assign(e){this!==e&&(le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new fn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Po(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(xt(this.auth.app))return Promise.reject($n(this.auth));const e=await this.getIdToken();return await os(this,aT(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,a,l,c,h,f;const p=(r=t.displayName)!==null&&r!==void 0?r:void 0,_=(i=t.email)!==null&&i!==void 0?i:void 0,A=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,S=(a=t.photoURL)!==null&&a!==void 0?a:void 0,k=(l=t.tenantId)!==null&&l!==void 0?l:void 0,O=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,q=(h=t.createdAt)!==null&&h!==void 0?h:void 0,z=(f=t.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:W,emailVerified:H,isAnonymous:ce,providerData:he,stsTokenManager:b}=t;le(W&&b,e,"internal-error");const y=Qr.fromJSON(this.name,b);le(typeof W=="string",e,"internal-error"),kn(p,e.name),kn(_,e.name),le(typeof H=="boolean",e,"internal-error"),le(typeof ce=="boolean",e,"internal-error"),kn(A,e.name),kn(S,e.name),kn(k,e.name),kn(O,e.name),kn(q,e.name),kn(z,e.name);const g=new fn({uid:W,auth:e,email:_,emailVerified:H,displayName:p,isAnonymous:ce,photoURL:S,phoneNumber:A,tenantId:k,stsTokenManager:y,createdAt:q,lastLoginAt:z});return he&&Array.isArray(he)&&(g.providerData=he.map(w=>Object.assign({},w))),O&&(g._redirectEventId=O),g}static async _fromIdTokenResponse(e,t,r=!1){const i=new Qr;i.updateFromServerResponse(t);const s=new fn({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Po(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];le(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?Wp(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),l=new Qr;l.updateFromIdToken(r);const c=new fn({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:a}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new kl(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,h),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kh=new Map;function pn(n){vn(n instanceof Function,"Expected a class definition");let e=Kh.get(n);return e?(vn(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Kh.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Kp.type="NONE";const Xh=Kp;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ao(n,e,t){return`firebase:${n}:${e}:${t}`}class Yr{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=ao(this.userKey,i.apiKey,s),this.fullPersistenceKey=ao("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?fn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Yr(pn(Xh),e,r);const i=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=i[0]||pn(Xh);const a=ao(r,e.config.apiKey,e.name);let l=null;for(const h of t)try{const f=await h._get(a);if(f){const p=fn._fromJSON(e,f);h!==s&&(l=p),s=h;break}}catch{}const c=i.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new Yr(s,e,r):(s=c[0],l&&await s._set(a,l.toJSON()),await Promise.all(t.map(async h=>{if(h!==s)try{await h._remove(a)}catch{}})),new Yr(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qh(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Jp(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Xp(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(em(e))return"Blackberry";if(tm(e))return"Webos";if(Qp(e))return"Safari";if((e.includes("chrome/")||Yp(e))&&!e.includes("edge/"))return"Chrome";if(Zp(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Xp(n=dt()){return/firefox\//i.test(n)}function Qp(n=dt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Yp(n=dt()){return/crios\//i.test(n)}function Jp(n=dt()){return/iemobile/i.test(n)}function Zp(n=dt()){return/android/i.test(n)}function em(n=dt()){return/blackberry/i.test(n)}function tm(n=dt()){return/webos/i.test(n)}function _c(n=dt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function mT(n=dt()){var e;return _c(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function gT(){return M0()&&document.documentMode===10}function nm(n=dt()){return _c(n)||Zp(n)||tm(n)||em(n)||/windows phone/i.test(n)||Jp(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rm(n,e=[]){let t;switch(n){case"Browser":t=Qh(dt());break;case"Worker":t=`${Qh(dt())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ci}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((a,l)=>{try{const c=e(s);a(c)}catch(c){l(c)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _T(n,e={}){return ui(n,"GET","/v2/passwordPolicy",la(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vT=6;class wT{constructor(e){var t,r,i,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:vT,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,a,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNumericCharacter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Yh(this),this.idTokenSubscription=new Yh(this),this.beforeStateQueue=new yT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Hp,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=pn(t)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Yr.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await qp(this,{idToken:e}),r=await fn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(xt(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,l=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===l)&&(c!=null&&c.user)&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Po(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=rT()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(xt(this.app))return Promise.reject($n(this));const t=e?Rt(e):null;return t&&le(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return xt(this.app)?Promise.reject($n(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return xt(this.app)?Promise.reject($n(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(pn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await _T(this),t=new wT(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new vs("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await pT(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&pn(e)||this._popupRedirectResolver;le(t,this,"argument-error"),this.redirectPersistenceManager=await Yr.create(this,[pn(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(le(l,this,"internal-error"),l.then(()=>{a||s(this.currentUser)}),typeof t=="function"){const c=e.addObserver(t,r,i);return()=>{a=!0,c()}}else{const c=e.addObserver(t);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=rm(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(xt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&eT(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function ca(n){return Rt(n)}class Yh{constructor(e){this.auth=e,this.observer=null,this.addObserver=H0(t=>this.observer=t)}get next(){return le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function TT(n){vc=n}function bT(n){return vc.loadJS(n)}function AT(){return vc.gapiScript}function IT(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DT(n,e){const t=fc(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(Tr(s,e??{}))return i;_n(i,"already-initialized")}return t.initialize({options:e})}function ST(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(pn);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function RT(n,e,t){const r=ca(n);le(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=im(e),{host:a,port:l}=CT(e),c=l===null?"":`:${l}`,h={url:`${s}//${a}${c}/`},f=Object.freeze({host:a,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){le(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),le(Tr(h,r.config.emulator)&&Tr(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,kT()}function im(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function CT(n){const e=im(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Jh(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:Jh(a)}}}function Jh(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function kT(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return dn("not implemented")}_getIdTokenResponse(e){return dn("not implemented")}_linkToIdToken(e,t){return dn("not implemented")}_getReauthenticationResolver(e){return dn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jr(n,e){return zp(n,"POST","/v1/accounts:signInWithIdp",la(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PT="http://localhost";class Ar extends sm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ar(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):_n("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=pc(t,["providerId","signInMethod"]);if(!r||!i)return null;const a=new Ar(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return Jr(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Jr(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Jr(e,t)}buildRequest(){const e={requestUri:PT,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ws(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts extends om{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn extends Ts{constructor(){super("facebook.com")}static credential(e){return Ar._fromParams({providerId:Nn.PROVIDER_ID,signInMethod:Nn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Nn.credentialFromTaggedObject(e)}static credentialFromError(e){return Nn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Nn.credential(e.oauthAccessToken)}catch{return null}}}Nn.FACEBOOK_SIGN_IN_METHOD="facebook.com";Nn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On extends Ts{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ar._fromParams({providerId:On.PROVIDER_ID,signInMethod:On.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return On.credentialFromTaggedObject(e)}static credentialFromError(e){return On.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return On.credential(t,r)}catch{return null}}}On.GOOGLE_SIGN_IN_METHOD="google.com";On.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln extends Ts{constructor(){super("github.com")}static credential(e){return Ar._fromParams({providerId:Ln.PROVIDER_ID,signInMethod:Ln.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ln.credentialFromTaggedObject(e)}static credentialFromError(e){return Ln.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ln.credential(e.oauthAccessToken)}catch{return null}}}Ln.GITHUB_SIGN_IN_METHOD="github.com";Ln.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn extends Ts{constructor(){super("twitter.com")}static credential(e,t){return Ar._fromParams({providerId:xn.PROVIDER_ID,signInMethod:xn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return xn.credentialFromTaggedObject(e)}static credentialFromError(e){return xn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return xn.credential(t,r)}catch{return null}}}xn.TWITTER_SIGN_IN_METHOD="twitter.com";xn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MT(n,e){return zp(n,"POST","/v1/accounts:signUp",la(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await fn._fromIdTokenResponse(e,r,i),a=Zh(r);return new Kn({user:s,providerId:a,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=Zh(r);return new Kn({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function Zh(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VT(n){var e;if(xt(n.app))return Promise.reject($n(n));const t=ca(n);if(await t._initializationPromise,!((e=t.currentUser)===null||e===void 0)&&e.isAnonymous)return new Kn({user:t.currentUser,providerId:null,operationType:"signIn"});const r=await MT(t,{returnSecureToken:!0}),i=await Kn._fromIdTokenResponse(t,"signIn",r,!0);return await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo extends An{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Mo.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Mo(e,t,r,i)}}function am(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Mo._fromErrorAndOperation(n,s,e,r):s})}async function NT(n,e,t=!1){const r=await os(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Kn._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OT(n,e,t=!1){const{auth:r}=n;if(xt(r.app))return Promise.reject($n(r));const i="reauthenticate";try{const s=await os(n,am(r,i,e,n),t);le(s.idToken,r,"internal-error");const a=yc(s.idToken);le(a,r,"internal-error");const{sub:l}=a;return le(n.uid===l,r,"user-mismatch"),Kn._forOperation(n,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&_n(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LT(n,e,t=!1){if(xt(n.app))return Promise.reject($n(n));const r="signIn",i=await am(n,r,e),s=await Kn._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}function xT(n,e,t,r){return Rt(n).onIdTokenChanged(e,t,r)}function FT(n,e,t){return Rt(n).beforeAuthStateChanged(e,t)}const Vo="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Vo,"1"),this.storage.removeItem(Vo),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GT=1e3,HT=10;class cm extends lm{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=nm(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,l,c)=>{this.notifyListeners(a,c)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!t&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);gT()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,HT):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},GT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}cm.type="LOCAL";const UT=cm;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um extends lm{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}um.type="SESSION";const hm=um;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BT(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new ua(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(a).map(async h=>h(t.origin,s)),c=await BT(l);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ua.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wc(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((l,c)=>{const h=wc("",20);i.port1.start();const f=setTimeout(()=>{c(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(p){const _=p;if(_.data.eventId===h)switch(_.data.status){case"ack":clearTimeout(f),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(_.data.response);break;default:clearTimeout(f),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qt(){return window}function zT(n){Qt().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dm(){return typeof Qt().WorkerGlobalScope<"u"&&typeof Qt().importScripts=="function"}async function jT(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function qT(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function WT(){return dm()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fm="firebaseLocalStorageDb",KT=1,No="firebaseLocalStorage",pm="fbase_key";class bs{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function ha(n,e){return n.transaction([No],e?"readwrite":"readonly").objectStore(No)}function XT(){const n=indexedDB.deleteDatabase(fm);return new bs(n).toPromise()}function Pl(){const n=indexedDB.open(fm,KT);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(No,{keyPath:pm})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(No)?e(r):(r.close(),await XT(),e(await Pl()))})})}async function ed(n,e,t){const r=ha(n,!0).put({[pm]:e,value:t});return new bs(r).toPromise()}async function QT(n,e){const t=ha(n,!1).get(e),r=await new bs(t).toPromise();return r===void 0?null:r.value}function td(n,e){const t=ha(n,!0).delete(e);return new bs(t).toPromise()}const YT=800,JT=3;class mm{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Pl(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>JT)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return dm()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ua._getInstance(WT()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await jT(),!this.activeServiceWorker)return;this.sender=new $T(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||qT()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Pl();return await ed(e,Vo,"1"),await td(e,Vo),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>ed(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>QT(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>td(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=ha(i,!1).getAll();return new bs(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),YT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}mm.type="LOCAL";const ZT=mm;new Es(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eb(n,e){return e?pn(e):(le(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec extends sm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Jr(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Jr(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Jr(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function tb(n){return LT(n.auth,new Ec(n),n.bypassAuthState)}function nb(n){const{auth:e,user:t}=n;return le(t,e,"internal-error"),OT(t,new Ec(n),n.bypassAuthState)}async function rb(n){const{auth:e,user:t}=n;return le(t,e,"internal-error"),NT(t,new Ec(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:a,type:l}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return tb;case"linkViaPopup":case"linkViaRedirect":return rb;case"reauthViaPopup":case"reauthViaRedirect":return nb;default:_n(this.auth,"internal-error")}}resolve(e){vn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){vn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ib=new Es(2e3,1e4);class $r extends gm{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,$r.currentPopupAction&&$r.currentPopupAction.cancel(),$r.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return le(e,this.auth,"internal-error"),e}async onExecution(){vn(this.filter.length===1,"Popup operations only handle one event");const e=wc();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Xt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Xt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,$r.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Xt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ib.get())};e()}}$r.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sb="pendingRedirect",lo=new Map;class ob extends gm{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=lo.get(this.auth._key());if(!e){try{const r=await ab(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}lo.set(this.auth._key(),e)}return this.bypassAuthState||lo.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ab(n,e){const t=ub(e),r=cb(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function lb(n,e){lo.set(n._key(),e)}function cb(n){return pn(n._redirectPersistence)}function ub(n){return ao(sb,n.config.apiKey,n.name)}async function hb(n,e,t=!1){if(xt(n.app))return Promise.reject($n(n));const r=ca(n),i=eb(r,e),a=await new ob(r,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const db=10*60*1e3;class fb{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!pb(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!ym(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Xt(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=db&&this.cachedEventUids.clear(),this.cachedEventUids.has(nd(e))}saveEventToCache(e){this.cachedEventUids.add(nd(e)),this.lastProcessedEventTime=Date.now()}}function nd(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function ym({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function pb(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ym(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mb(n,e={}){return ui(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gb=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,yb=/^https?/;async function _b(n){if(n.config.emulator)return;const{authorizedDomains:e}=await mb(n);for(const t of e)try{if(vb(t))return}catch{}_n(n,"unauthorized-domain")}function vb(n){const e=Cl(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const a=new URL(n);return a.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!yb.test(t))return!1;if(gb.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wb=new Es(3e4,6e4);function rd(){const n=Qt().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Eb(n){return new Promise((e,t)=>{var r,i,s;function a(){rd(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{rd(),t(Xt(n,"network-request-failed"))},timeout:wb.get()})}if(!((i=(r=Qt().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Qt().gapi)===null||s===void 0)&&s.load)a();else{const l=IT("iframefcb");return Qt()[l]=()=>{gapi.load?a():t(Xt(n,"network-request-failed"))},bT(`${AT()}?onload=${l}`).catch(c=>t(c))}}).catch(e=>{throw co=null,e})}let co=null;function Tb(n){return co=co||Eb(n),co}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bb=new Es(5e3,15e3),Ab="__/auth/iframe",Ib="emulator/auth/iframe",Db={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Sb=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Rb(n){const e=n.config;le(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?gc(e,Ib):`https://${n.config.authDomain}/${Ab}`,r={apiKey:e.apiKey,appName:n.name,v:ci},i=Sb.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${ws(r).slice(1)}`}async function Cb(n){const e=await Tb(n),t=Qt().gapi;return le(t,n,"internal-error"),e.open({where:document.body,url:Rb(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Db,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const a=Xt(n,"network-request-failed"),l=Qt().setTimeout(()=>{s(a)},bb.get());function c(){Qt().clearTimeout(l),i(r)}r.ping(c).then(c,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kb={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Pb=500,Mb=600,Vb="_blank",Nb="http://localhost";class id{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Ob(n,e,t,r=Pb,i=Mb){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c=Object.assign(Object.assign({},kb),{width:r.toString(),height:i.toString(),top:s,left:a}),h=dt().toLowerCase();t&&(l=Yp(h)?Vb:t),Xp(h)&&(e=e||Nb,c.scrollbars="yes");const f=Object.entries(c).reduce((_,[A,S])=>`${_}${A}=${S},`,"");if(mT(h)&&l!=="_self")return Lb(e||"",l),new id(null);const p=window.open(e||"",l,f);le(p,n,"popup-blocked");try{p.focus()}catch{}return new id(p)}function Lb(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb="__/auth/handler",Fb="emulator/auth/handler",Gb=encodeURIComponent("fac");async function sd(n,e,t,r,i,s){le(n.config.authDomain,n,"auth-domain-config-required"),le(n.config.apiKey,n,"invalid-api-key");const a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:ci,eventId:i};if(e instanceof om){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",G0(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))a[f]=p}if(e instanceof Ts){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(a.scopes=f.join(","))}n.tenantId&&(a.tid=n.tenantId);const l=a;for(const f of Object.keys(l))l[f]===void 0&&delete l[f];const c=await n._getAppCheckToken(),h=c?`#${Gb}=${encodeURIComponent(c)}`:"";return`${Hb(n)}?${ws(l).slice(1)}${h}`}function Hb({config:n}){return n.emulator?gc(n,Fb):`https://${n.authDomain}/${xb}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sl="webStorageSupport";class Ub{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hm,this._completeRedirectFn=hb,this._overrideRedirectResult=lb}async _openPopup(e,t,r,i){var s;vn((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await sd(e,t,r,Cl(),i);return Ob(e,a,wc())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await sd(e,t,r,Cl(),i);return zT(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(vn(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await Cb(e),r=new fb(e);return t.register("authEvent",i=>(le(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(sl,{type:sl},i=>{var s;const a=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[sl];a!==void 0&&t(!!a),_n(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=_b(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return nm()||Qp()||_c()}}const Bb=Ub;var od="@firebase/auth",ad="1.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zb(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function jb(n){ti(new br("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=r.options;le(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:a,authDomain:l,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:rm(n)},h=new ET(r,i,s,c);return ST(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),ti(new br("auth-internal",e=>{const t=ca(e.getProvider("auth").getImmediate());return(r=>new $b(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Bn(od,ad,zb(n)),Bn(od,ad,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qb=5*60,Wb=Mp("authIdTokenMaxAge")||qb;let ld=null;const Kb=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Wb)return;const i=t==null?void 0:t.token;ld!==i&&(ld=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Xb(n=Lp()){const e=fc(n,"auth");if(e.isInitialized())return e.getImmediate();const t=DT(n,{popupRedirectResolver:Bb,persistence:[ZT,UT,hm]}),r=Mp("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const a=Kb(s.toString());FT(t,a,()=>a(t.currentUser)),xT(t,l=>a(l))}}const i=kp("auth");return i&&RT(t,`http://${i}`),t}function Qb(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}TT({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=Xt("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",Qb().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});jb("Browser");var cd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zn,_m;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,y){function g(){}g.prototype=y.prototype,b.D=y.prototype,b.prototype=new g,b.prototype.constructor=b,b.C=function(w,I,T){for(var v=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)v[Ce-2]=arguments[Ce];return y.prototype[I].apply(w,v)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(b,y,g){g||(g=0);var w=Array(16);if(typeof y=="string")for(var I=0;16>I;++I)w[I]=y.charCodeAt(g++)|y.charCodeAt(g++)<<8|y.charCodeAt(g++)<<16|y.charCodeAt(g++)<<24;else for(I=0;16>I;++I)w[I]=y[g++]|y[g++]<<8|y[g++]<<16|y[g++]<<24;y=b.g[0],g=b.g[1],I=b.g[2];var T=b.g[3],v=y+(T^g&(I^T))+w[0]+3614090360&4294967295;y=g+(v<<7&4294967295|v>>>25),v=T+(I^y&(g^I))+w[1]+3905402710&4294967295,T=y+(v<<12&4294967295|v>>>20),v=I+(g^T&(y^g))+w[2]+606105819&4294967295,I=T+(v<<17&4294967295|v>>>15),v=g+(y^I&(T^y))+w[3]+3250441966&4294967295,g=I+(v<<22&4294967295|v>>>10),v=y+(T^g&(I^T))+w[4]+4118548399&4294967295,y=g+(v<<7&4294967295|v>>>25),v=T+(I^y&(g^I))+w[5]+1200080426&4294967295,T=y+(v<<12&4294967295|v>>>20),v=I+(g^T&(y^g))+w[6]+2821735955&4294967295,I=T+(v<<17&4294967295|v>>>15),v=g+(y^I&(T^y))+w[7]+4249261313&4294967295,g=I+(v<<22&4294967295|v>>>10),v=y+(T^g&(I^T))+w[8]+1770035416&4294967295,y=g+(v<<7&4294967295|v>>>25),v=T+(I^y&(g^I))+w[9]+2336552879&4294967295,T=y+(v<<12&4294967295|v>>>20),v=I+(g^T&(y^g))+w[10]+4294925233&4294967295,I=T+(v<<17&4294967295|v>>>15),v=g+(y^I&(T^y))+w[11]+2304563134&4294967295,g=I+(v<<22&4294967295|v>>>10),v=y+(T^g&(I^T))+w[12]+1804603682&4294967295,y=g+(v<<7&4294967295|v>>>25),v=T+(I^y&(g^I))+w[13]+4254626195&4294967295,T=y+(v<<12&4294967295|v>>>20),v=I+(g^T&(y^g))+w[14]+2792965006&4294967295,I=T+(v<<17&4294967295|v>>>15),v=g+(y^I&(T^y))+w[15]+1236535329&4294967295,g=I+(v<<22&4294967295|v>>>10),v=y+(I^T&(g^I))+w[1]+4129170786&4294967295,y=g+(v<<5&4294967295|v>>>27),v=T+(g^I&(y^g))+w[6]+3225465664&4294967295,T=y+(v<<9&4294967295|v>>>23),v=I+(y^g&(T^y))+w[11]+643717713&4294967295,I=T+(v<<14&4294967295|v>>>18),v=g+(T^y&(I^T))+w[0]+3921069994&4294967295,g=I+(v<<20&4294967295|v>>>12),v=y+(I^T&(g^I))+w[5]+3593408605&4294967295,y=g+(v<<5&4294967295|v>>>27),v=T+(g^I&(y^g))+w[10]+38016083&4294967295,T=y+(v<<9&4294967295|v>>>23),v=I+(y^g&(T^y))+w[15]+3634488961&4294967295,I=T+(v<<14&4294967295|v>>>18),v=g+(T^y&(I^T))+w[4]+3889429448&4294967295,g=I+(v<<20&4294967295|v>>>12),v=y+(I^T&(g^I))+w[9]+568446438&4294967295,y=g+(v<<5&4294967295|v>>>27),v=T+(g^I&(y^g))+w[14]+3275163606&4294967295,T=y+(v<<9&4294967295|v>>>23),v=I+(y^g&(T^y))+w[3]+4107603335&4294967295,I=T+(v<<14&4294967295|v>>>18),v=g+(T^y&(I^T))+w[8]+1163531501&4294967295,g=I+(v<<20&4294967295|v>>>12),v=y+(I^T&(g^I))+w[13]+2850285829&4294967295,y=g+(v<<5&4294967295|v>>>27),v=T+(g^I&(y^g))+w[2]+4243563512&4294967295,T=y+(v<<9&4294967295|v>>>23),v=I+(y^g&(T^y))+w[7]+1735328473&4294967295,I=T+(v<<14&4294967295|v>>>18),v=g+(T^y&(I^T))+w[12]+2368359562&4294967295,g=I+(v<<20&4294967295|v>>>12),v=y+(g^I^T)+w[5]+4294588738&4294967295,y=g+(v<<4&4294967295|v>>>28),v=T+(y^g^I)+w[8]+2272392833&4294967295,T=y+(v<<11&4294967295|v>>>21),v=I+(T^y^g)+w[11]+1839030562&4294967295,I=T+(v<<16&4294967295|v>>>16),v=g+(I^T^y)+w[14]+4259657740&4294967295,g=I+(v<<23&4294967295|v>>>9),v=y+(g^I^T)+w[1]+2763975236&4294967295,y=g+(v<<4&4294967295|v>>>28),v=T+(y^g^I)+w[4]+1272893353&4294967295,T=y+(v<<11&4294967295|v>>>21),v=I+(T^y^g)+w[7]+4139469664&4294967295,I=T+(v<<16&4294967295|v>>>16),v=g+(I^T^y)+w[10]+3200236656&4294967295,g=I+(v<<23&4294967295|v>>>9),v=y+(g^I^T)+w[13]+681279174&4294967295,y=g+(v<<4&4294967295|v>>>28),v=T+(y^g^I)+w[0]+3936430074&4294967295,T=y+(v<<11&4294967295|v>>>21),v=I+(T^y^g)+w[3]+3572445317&4294967295,I=T+(v<<16&4294967295|v>>>16),v=g+(I^T^y)+w[6]+76029189&4294967295,g=I+(v<<23&4294967295|v>>>9),v=y+(g^I^T)+w[9]+3654602809&4294967295,y=g+(v<<4&4294967295|v>>>28),v=T+(y^g^I)+w[12]+3873151461&4294967295,T=y+(v<<11&4294967295|v>>>21),v=I+(T^y^g)+w[15]+530742520&4294967295,I=T+(v<<16&4294967295|v>>>16),v=g+(I^T^y)+w[2]+3299628645&4294967295,g=I+(v<<23&4294967295|v>>>9),v=y+(I^(g|~T))+w[0]+4096336452&4294967295,y=g+(v<<6&4294967295|v>>>26),v=T+(g^(y|~I))+w[7]+1126891415&4294967295,T=y+(v<<10&4294967295|v>>>22),v=I+(y^(T|~g))+w[14]+2878612391&4294967295,I=T+(v<<15&4294967295|v>>>17),v=g+(T^(I|~y))+w[5]+4237533241&4294967295,g=I+(v<<21&4294967295|v>>>11),v=y+(I^(g|~T))+w[12]+1700485571&4294967295,y=g+(v<<6&4294967295|v>>>26),v=T+(g^(y|~I))+w[3]+2399980690&4294967295,T=y+(v<<10&4294967295|v>>>22),v=I+(y^(T|~g))+w[10]+4293915773&4294967295,I=T+(v<<15&4294967295|v>>>17),v=g+(T^(I|~y))+w[1]+2240044497&4294967295,g=I+(v<<21&4294967295|v>>>11),v=y+(I^(g|~T))+w[8]+1873313359&4294967295,y=g+(v<<6&4294967295|v>>>26),v=T+(g^(y|~I))+w[15]+4264355552&4294967295,T=y+(v<<10&4294967295|v>>>22),v=I+(y^(T|~g))+w[6]+2734768916&4294967295,I=T+(v<<15&4294967295|v>>>17),v=g+(T^(I|~y))+w[13]+1309151649&4294967295,g=I+(v<<21&4294967295|v>>>11),v=y+(I^(g|~T))+w[4]+4149444226&4294967295,y=g+(v<<6&4294967295|v>>>26),v=T+(g^(y|~I))+w[11]+3174756917&4294967295,T=y+(v<<10&4294967295|v>>>22),v=I+(y^(T|~g))+w[2]+718787259&4294967295,I=T+(v<<15&4294967295|v>>>17),v=g+(T^(I|~y))+w[9]+3951481745&4294967295,b.g[0]=b.g[0]+y&4294967295,b.g[1]=b.g[1]+(I+(v<<21&4294967295|v>>>11))&4294967295,b.g[2]=b.g[2]+I&4294967295,b.g[3]=b.g[3]+T&4294967295}r.prototype.u=function(b,y){y===void 0&&(y=b.length);for(var g=y-this.blockSize,w=this.B,I=this.h,T=0;T<y;){if(I==0)for(;T<=g;)i(this,b,T),T+=this.blockSize;if(typeof b=="string"){for(;T<y;)if(w[I++]=b.charCodeAt(T++),I==this.blockSize){i(this,w),I=0;break}}else for(;T<y;)if(w[I++]=b[T++],I==this.blockSize){i(this,w),I=0;break}}this.h=I,this.o+=y},r.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var y=1;y<b.length-8;++y)b[y]=0;var g=8*this.o;for(y=b.length-8;y<b.length;++y)b[y]=g&255,g/=256;for(this.u(b),b=Array(16),y=g=0;4>y;++y)for(var w=0;32>w;w+=8)b[g++]=this.g[y]>>>w&255;return b};function s(b,y){var g=l;return Object.prototype.hasOwnProperty.call(g,b)?g[b]:g[b]=y(b)}function a(b,y){this.h=y;for(var g=[],w=!0,I=b.length-1;0<=I;I--){var T=b[I]|0;w&&T==y||(g[I]=T,w=!1)}this.g=g}var l={};function c(b){return-128<=b&&128>b?s(b,function(y){return new a([y|0],0>y?-1:0)}):new a([b|0],0>b?-1:0)}function h(b){if(isNaN(b)||!isFinite(b))return p;if(0>b)return O(h(-b));for(var y=[],g=1,w=0;b>=g;w++)y[w]=b/g|0,g*=4294967296;return new a(y,0)}function f(b,y){if(b.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(b.charAt(0)=="-")return O(f(b.substring(1),y));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var g=h(Math.pow(y,8)),w=p,I=0;I<b.length;I+=8){var T=Math.min(8,b.length-I),v=parseInt(b.substring(I,I+T),y);8>T?(T=h(Math.pow(y,T)),w=w.j(T).add(h(v))):(w=w.j(g),w=w.add(h(v)))}return w}var p=c(0),_=c(1),A=c(16777216);n=a.prototype,n.m=function(){if(k(this))return-O(this).m();for(var b=0,y=1,g=0;g<this.g.length;g++){var w=this.i(g);b+=(0<=w?w:4294967296+w)*y,y*=4294967296}return b},n.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(S(this))return"0";if(k(this))return"-"+O(this).toString(b);for(var y=h(Math.pow(b,6)),g=this,w="";;){var I=H(g,y).g;g=q(g,I.j(y));var T=((0<g.g.length?g.g[0]:g.h)>>>0).toString(b);if(g=I,S(g))return T+w;for(;6>T.length;)T="0"+T;w=T+w}},n.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function S(b){if(b.h!=0)return!1;for(var y=0;y<b.g.length;y++)if(b.g[y]!=0)return!1;return!0}function k(b){return b.h==-1}n.l=function(b){return b=q(this,b),k(b)?-1:S(b)?0:1};function O(b){for(var y=b.g.length,g=[],w=0;w<y;w++)g[w]=~b.g[w];return new a(g,~b.h).add(_)}n.abs=function(){return k(this)?O(this):this},n.add=function(b){for(var y=Math.max(this.g.length,b.g.length),g=[],w=0,I=0;I<=y;I++){var T=w+(this.i(I)&65535)+(b.i(I)&65535),v=(T>>>16)+(this.i(I)>>>16)+(b.i(I)>>>16);w=v>>>16,T&=65535,v&=65535,g[I]=v<<16|T}return new a(g,g[g.length-1]&-2147483648?-1:0)};function q(b,y){return b.add(O(y))}n.j=function(b){if(S(this)||S(b))return p;if(k(this))return k(b)?O(this).j(O(b)):O(O(this).j(b));if(k(b))return O(this.j(O(b)));if(0>this.l(A)&&0>b.l(A))return h(this.m()*b.m());for(var y=this.g.length+b.g.length,g=[],w=0;w<2*y;w++)g[w]=0;for(w=0;w<this.g.length;w++)for(var I=0;I<b.g.length;I++){var T=this.i(w)>>>16,v=this.i(w)&65535,Ce=b.i(I)>>>16,ft=b.i(I)&65535;g[2*w+2*I]+=v*ft,z(g,2*w+2*I),g[2*w+2*I+1]+=T*ft,z(g,2*w+2*I+1),g[2*w+2*I+1]+=v*Ce,z(g,2*w+2*I+1),g[2*w+2*I+2]+=T*Ce,z(g,2*w+2*I+2)}for(w=0;w<y;w++)g[w]=g[2*w+1]<<16|g[2*w];for(w=y;w<2*y;w++)g[w]=0;return new a(g,0)};function z(b,y){for(;(b[y]&65535)!=b[y];)b[y+1]+=b[y]>>>16,b[y]&=65535,y++}function W(b,y){this.g=b,this.h=y}function H(b,y){if(S(y))throw Error("division by zero");if(S(b))return new W(p,p);if(k(b))return y=H(O(b),y),new W(O(y.g),O(y.h));if(k(y))return y=H(b,O(y)),new W(O(y.g),y.h);if(30<b.g.length){if(k(b)||k(y))throw Error("slowDivide_ only works with positive integers.");for(var g=_,w=y;0>=w.l(b);)g=ce(g),w=ce(w);var I=he(g,1),T=he(w,1);for(w=he(w,2),g=he(g,2);!S(w);){var v=T.add(w);0>=v.l(b)&&(I=I.add(g),T=v),w=he(w,1),g=he(g,1)}return y=q(b,I.j(y)),new W(I,y)}for(I=p;0<=b.l(y);){for(g=Math.max(1,Math.floor(b.m()/y.m())),w=Math.ceil(Math.log(g)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),T=h(g),v=T.j(y);k(v)||0<v.l(b);)g-=w,T=h(g),v=T.j(y);S(T)&&(T=_),I=I.add(T),b=q(b,v)}return new W(I,b)}n.A=function(b){return H(this,b).h},n.and=function(b){for(var y=Math.max(this.g.length,b.g.length),g=[],w=0;w<y;w++)g[w]=this.i(w)&b.i(w);return new a(g,this.h&b.h)},n.or=function(b){for(var y=Math.max(this.g.length,b.g.length),g=[],w=0;w<y;w++)g[w]=this.i(w)|b.i(w);return new a(g,this.h|b.h)},n.xor=function(b){for(var y=Math.max(this.g.length,b.g.length),g=[],w=0;w<y;w++)g[w]=this.i(w)^b.i(w);return new a(g,this.h^b.h)};function ce(b){for(var y=b.g.length+1,g=[],w=0;w<y;w++)g[w]=b.i(w)<<1|b.i(w-1)>>>31;return new a(g,b.h)}function he(b,y){var g=y>>5;y%=32;for(var w=b.g.length-g,I=[],T=0;T<w;T++)I[T]=0<y?b.i(T+g)>>>y|b.i(T+g+1)<<32-y:b.i(T+g);return new a(I,b.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,_m=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=f,zn=a}).apply(typeof cd<"u"?cd:typeof self<"u"?self:typeof window<"u"?window:{});var Qs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vm,Oi,wm,uo,Ml,Em,Tm,bm;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,u,d){return o==Array.prototype||o==Object.prototype||(o[u]=d.value),o};function t(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof Qs=="object"&&Qs];for(var u=0;u<o.length;++u){var d=o[u];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var r=t(this);function i(o,u){if(u)e:{var d=r;o=o.split(".");for(var m=0;m<o.length-1;m++){var R=o[m];if(!(R in d))break e;d=d[R]}o=o[o.length-1],m=d[o],u=u(m),u!=m&&u!=null&&e(d,o,{configurable:!0,writable:!0,value:u})}}function s(o,u){o instanceof String&&(o+="");var d=0,m=!1,R={next:function(){if(!m&&d<o.length){var P=d++;return{value:u(P,o[P]),done:!1}}return m=!0,{done:!0,value:void 0}}};return R[Symbol.iterator]=function(){return R},R}i("Array.prototype.values",function(o){return o||function(){return s(this,function(u,d){return d})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function c(o){var u=typeof o;return u=u!="object"?u:o?Array.isArray(o)?"array":u:"null",u=="array"||u=="object"&&typeof o.length=="number"}function h(o){var u=typeof o;return u=="object"&&o!=null||u=="function"}function f(o,u,d){return o.call.apply(o.bind,arguments)}function p(o,u,d){if(!o)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var R=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(R,m),o.apply(u,R)}}return function(){return o.apply(u,arguments)}}function _(o,u,d){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,_.apply(null,arguments)}function A(o,u){var d=Array.prototype.slice.call(arguments,1);return function(){var m=d.slice();return m.push.apply(m,arguments),o.apply(this,m)}}function S(o,u){function d(){}d.prototype=u.prototype,o.aa=u.prototype,o.prototype=new d,o.prototype.constructor=o,o.Qb=function(m,R,P){for(var $=Array(arguments.length-2),De=2;De<arguments.length;De++)$[De-2]=arguments[De];return u.prototype[R].apply(m,$)}}function k(o){const u=o.length;if(0<u){const d=Array(u);for(let m=0;m<u;m++)d[m]=o[m];return d}return[]}function O(o,u){for(let d=1;d<arguments.length;d++){const m=arguments[d];if(c(m)){const R=o.length||0,P=m.length||0;o.length=R+P;for(let $=0;$<P;$++)o[R+$]=m[$]}else o.push(m)}}class q{constructor(u,d){this.i=u,this.j=d,this.h=0,this.g=null}get(){let u;return 0<this.h?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function z(o){return/^[\s\xa0]*$/.test(o)}function W(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function H(o){return H[" "](o),o}H[" "]=function(){};var ce=W().indexOf("Gecko")!=-1&&!(W().toLowerCase().indexOf("webkit")!=-1&&W().indexOf("Edge")==-1)&&!(W().indexOf("Trident")!=-1||W().indexOf("MSIE")!=-1)&&W().indexOf("Edge")==-1;function he(o,u,d){for(const m in o)u.call(d,o[m],m,o)}function b(o,u){for(const d in o)u.call(void 0,o[d],d,o)}function y(o){const u={};for(const d in o)u[d]=o[d];return u}const g="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(o,u){let d,m;for(let R=1;R<arguments.length;R++){m=arguments[R];for(d in m)o[d]=m[d];for(let P=0;P<g.length;P++)d=g[P],Object.prototype.hasOwnProperty.call(m,d)&&(o[d]=m[d])}}function I(o){var u=1;o=o.split(":");const d=[];for(;0<u&&o.length;)d.push(o.shift()),u--;return o.length&&d.push(o.join(":")),d}function T(o){l.setTimeout(()=>{throw o},0)}function v(){var o=Ot;let u=null;return o.g&&(u=o.g,o.g=o.g.next,o.g||(o.h=null),u.next=null),u}class Ce{constructor(){this.h=this.g=null}add(u,d){const m=ft.get();m.set(u,d),this.h?this.h.next=m:this.g=m,this.h=m}}var ft=new q(()=>new Fe,o=>o.reset());class Fe{constructor(){this.next=this.g=this.h=null}set(u,d){this.h=u,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let Ie,we=!1,Ot=new Ce,rr=()=>{const o=l.Promise.resolve(void 0);Ie=()=>{o.then(tn)}};var tn=()=>{for(var o;o=v();){try{o.h.call(o.g)}catch(d){T(d)}var u=ft;u.j(o),100>u.h&&(u.h++,o.next=u.g,u.g=o)}we=!1};function Be(){this.s=this.s,this.C=this.C}Be.prototype.s=!1,Be.prototype.ma=function(){this.s||(this.s=!0,this.N())},Be.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function $e(o,u){this.type=o,this.g=this.target=u,this.defaultPrevented=!1}$e.prototype.h=function(){this.defaultPrevented=!0};var Ia=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,u=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const d=()=>{};l.addEventListener("test",d,u),l.removeEventListener("test",d,u)}catch{}return o}();function ir(o,u){if($e.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var d=this.type=o.type,m=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=u,u=o.relatedTarget){if(ce){e:{try{H(u.nodeName);var R=!0;break e}catch{}R=!1}R||(u=null)}}else d=="mouseover"?u=o.fromElement:d=="mouseout"&&(u=o.toElement);this.relatedTarget=u,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:sr[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&ir.aa.h.call(this)}}S(ir,$e);var sr={2:"touch",3:"pen",4:"mouse"};ir.prototype.h=function(){ir.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var nn="closure_listenable_"+(1e6*Math.random()|0),gi=0;function Rs(o,u,d,m,R){this.listener=o,this.proxy=null,this.src=u,this.type=d,this.capture=!!m,this.ha=R,this.key=++gi,this.da=this.fa=!1}function Bt(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function yi(o){this.src=o,this.g={},this.h=0}yi.prototype.add=function(o,u,d,m,R){var P=o.toString();o=this.g[P],o||(o=this.g[P]=[],this.h++);var $=D(o,u,m,R);return-1<$?(u=o[$],d||(u.fa=!1)):(u=new Rs(u,this.src,P,!!m,R),u.fa=d,o.push(u)),u};function E(o,u){var d=u.type;if(d in o.g){var m=o.g[d],R=Array.prototype.indexOf.call(m,u,void 0),P;(P=0<=R)&&Array.prototype.splice.call(m,R,1),P&&(Bt(u),o.g[d].length==0&&(delete o.g[d],o.h--))}}function D(o,u,d,m){for(var R=0;R<o.length;++R){var P=o[R];if(!P.da&&P.listener==u&&P.capture==!!d&&P.ha==m)return R}return-1}var M="closure_lm_"+(1e6*Math.random()|0),x={};function L(o,u,d,m,R){if(Array.isArray(u)){for(var P=0;P<u.length;P++)L(o,u[P],d,m,R);return null}return d=se(d),o&&o[nn]?o.K(u,d,h(m)?!!m.capture:!1,R):F(o,u,d,!1,m,R)}function F(o,u,d,m,R,P){if(!u)throw Error("Invalid event type");var $=h(R)?!!R.capture:!!R,De=K(o);if(De||(o[M]=De=new yi(o)),d=De.add(u,d,m,$,P),d.proxy)return d;if(m=j(),d.proxy=m,m.src=o,m.listener=d,o.addEventListener)Ia||(R=$),R===void 0&&(R=!1),o.addEventListener(u.toString(),m,R);else if(o.attachEvent)o.attachEvent(G(u.toString()),m);else if(o.addListener&&o.removeListener)o.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return d}function j(){function o(d){return u.call(o.src,o.listener,d)}const u=ne;return o}function B(o,u,d,m,R){if(Array.isArray(u))for(var P=0;P<u.length;P++)B(o,u[P],d,m,R);else m=h(m)?!!m.capture:!!m,d=se(d),o&&o[nn]?(o=o.i,u=String(u).toString(),u in o.g&&(P=o.g[u],d=D(P,d,m,R),-1<d&&(Bt(P[d]),Array.prototype.splice.call(P,d,1),P.length==0&&(delete o.g[u],o.h--)))):o&&(o=K(o))&&(u=o.g[u.toString()],o=-1,u&&(o=D(u,d,m,R)),(d=-1<o?u[o]:null)&&U(d))}function U(o){if(typeof o!="number"&&o&&!o.da){var u=o.src;if(u&&u[nn])E(u.i,o);else{var d=o.type,m=o.proxy;u.removeEventListener?u.removeEventListener(d,m,o.capture):u.detachEvent?u.detachEvent(G(d),m):u.addListener&&u.removeListener&&u.removeListener(m),(d=K(u))?(E(d,o),d.h==0&&(d.src=null,u[M]=null)):Bt(o)}}}function G(o){return o in x?x[o]:x[o]="on"+o}function ne(o,u){if(o.da)o=!0;else{u=new ir(u,this);var d=o.listener,m=o.ha||o.src;o.fa&&U(o),o=d.call(m,u)}return o}function K(o){return o=o[M],o instanceof yi?o:null}var J="__closure_events_fn_"+(1e9*Math.random()>>>0);function se(o){return typeof o=="function"?o:(o[J]||(o[J]=function(u){return o.handleEvent(u)}),o[J])}function re(){Be.call(this),this.i=new yi(this),this.M=this,this.F=null}S(re,Be),re.prototype[nn]=!0,re.prototype.removeEventListener=function(o,u,d,m){B(this,o,u,d,m)};function pe(o,u){var d,m=o.F;if(m)for(d=[];m;m=m.F)d.push(m);if(o=o.M,m=u.type||u,typeof u=="string")u=new $e(u,o);else if(u instanceof $e)u.target=u.target||o;else{var R=u;u=new $e(m,o),w(u,R)}if(R=!0,d)for(var P=d.length-1;0<=P;P--){var $=u.g=d[P];R=_e($,m,!0,u)&&R}if($=u.g=o,R=_e($,m,!0,u)&&R,R=_e($,m,!1,u)&&R,d)for(P=0;P<d.length;P++)$=u.g=d[P],R=_e($,m,!1,u)&&R}re.prototype.N=function(){if(re.aa.N.call(this),this.i){var o=this.i,u;for(u in o.g){for(var d=o.g[u],m=0;m<d.length;m++)Bt(d[m]);delete o.g[u],o.h--}}this.F=null},re.prototype.K=function(o,u,d,m){return this.i.add(String(o),u,!1,d,m)},re.prototype.L=function(o,u,d,m){return this.i.add(String(o),u,!0,d,m)};function _e(o,u,d,m){if(u=o.i.g[String(u)],!u)return!0;u=u.concat();for(var R=!0,P=0;P<u.length;++P){var $=u[P];if($&&!$.da&&$.capture==d){var De=$.listener,Xe=$.ha||$.src;$.fa&&E(o.i,$),R=De.call(Xe,m)!==!1&&R}}return R&&!m.defaultPrevented}function tt(o,u,d){if(typeof o=="function")d&&(o=_(o,d));else if(o&&typeof o.handleEvent=="function")o=_(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(u)?-1:l.setTimeout(o,u||0)}function We(o){o.g=tt(()=>{o.g=null,o.i&&(o.i=!1,We(o))},o.l);const u=o.h;o.h=null,o.m.apply(null,u)}class Ct extends Be{constructor(u,d){super(),this.m=u,this.l=d,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:We(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function nt(o){Be.call(this),this.h=o,this.g={}}S(nt,Be);var In=[];function _i(o){he(o.g,function(u,d){this.g.hasOwnProperty(d)&&U(u)},o),o.g={}}nt.prototype.N=function(){nt.aa.N.call(this),_i(this)},nt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ke=l.JSON.stringify,kt=l.JSON.parse,Cs=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function Da(){}Da.prototype.h=null;function ou(o){return o.h||(o.h=o.i())}function au(){}var vi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Sa(){$e.call(this,"d")}S(Sa,$e);function Ra(){$e.call(this,"c")}S(Ra,$e);var or={},lu=null;function ks(){return lu=lu||new re}or.La="serverreachability";function cu(o){$e.call(this,or.La,o)}S(cu,$e);function wi(o){const u=ks();pe(u,new cu(u))}or.STAT_EVENT="statevent";function uu(o,u){$e.call(this,or.STAT_EVENT,o),this.stat=u}S(uu,$e);function pt(o){const u=ks();pe(u,new uu(u,o))}or.Ma="timingevent";function hu(o,u){$e.call(this,or.Ma,o),this.size=u}S(hu,$e);function Ei(o,u){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},u)}function Ti(){this.g=!0}Ti.prototype.xa=function(){this.g=!1};function Yg(o,u,d,m,R,P){o.info(function(){if(o.g)if(P)for(var $="",De=P.split("&"),Xe=0;Xe<De.length;Xe++){var Ee=De[Xe].split("=");if(1<Ee.length){var rt=Ee[0];Ee=Ee[1];var it=rt.split("_");$=2<=it.length&&it[1]=="type"?$+(rt+"="+Ee+"&"):$+(rt+"=redacted&")}}else $=null;else $=P;return"XMLHTTP REQ ("+m+") [attempt "+R+"]: "+u+`
`+d+`
`+$})}function Jg(o,u,d,m,R,P,$){o.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+R+"]: "+u+`
`+d+`
`+P+" "+$})}function Vr(o,u,d,m){o.info(function(){return"XMLHTTP TEXT ("+u+"): "+ey(o,d)+(m?" "+m:"")})}function Zg(o,u){o.info(function(){return"TIMEOUT: "+u})}Ti.prototype.info=function(){};function ey(o,u){if(!o.g)return u;if(!u)return null;try{var d=JSON.parse(u);if(d){for(o=0;o<d.length;o++)if(Array.isArray(d[o])){var m=d[o];if(!(2>m.length)){var R=m[1];if(Array.isArray(R)&&!(1>R.length)){var P=R[0];if(P!="noop"&&P!="stop"&&P!="close")for(var $=1;$<R.length;$++)R[$]=""}}}}return Ke(d)}catch{return u}}var Ps={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},du={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ca;function Ms(){}S(Ms,Da),Ms.prototype.g=function(){return new XMLHttpRequest},Ms.prototype.i=function(){return{}},Ca=new Ms;function Dn(o,u,d,m){this.j=o,this.i=u,this.l=d,this.R=m||1,this.U=new nt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new fu}function fu(){this.i=null,this.g="",this.h=!1}var pu={},ka={};function Pa(o,u,d){o.L=1,o.v=Ls(rn(u)),o.m=d,o.P=!0,mu(o,null)}function mu(o,u){o.F=Date.now(),Vs(o),o.A=rn(o.v);var d=o.A,m=o.R;Array.isArray(m)||(m=[String(m)]),Cu(d.i,"t",m),o.C=0,d=o.j.J,o.h=new fu,o.g=Wu(o.j,d?u:null,!o.m),0<o.O&&(o.M=new Ct(_(o.Y,o,o.g),o.O)),u=o.U,d=o.g,m=o.ca;var R="readystatechange";Array.isArray(R)||(R&&(In[0]=R.toString()),R=In);for(var P=0;P<R.length;P++){var $=L(d,R[P],m||u.handleEvent,!1,u.h||u);if(!$)break;u.g[$.key]=$}u=o.H?y(o.H):{},o.m?(o.u||(o.u="POST"),u["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,u)):(o.u="GET",o.g.ea(o.A,o.u,null,u)),wi(),Yg(o.i,o.u,o.A,o.l,o.R,o.m)}Dn.prototype.ca=function(o){o=o.target;const u=this.M;u&&sn(o)==3?u.j():this.Y(o)},Dn.prototype.Y=function(o){try{if(o==this.g)e:{const it=sn(this.g);var u=this.g.Ba();const Lr=this.g.Z();if(!(3>it)&&(it!=3||this.g&&(this.h.h||this.g.oa()||Lu(this.g)))){this.J||it!=4||u==7||(u==8||0>=Lr?wi(3):wi(2)),Ma(this);var d=this.g.Z();this.X=d;t:if(gu(this)){var m=Lu(this.g);o="";var R=m.length,P=sn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ar(this),bi(this);var $="";break t}this.h.i=new l.TextDecoder}for(u=0;u<R;u++)this.h.h=!0,o+=this.h.i.decode(m[u],{stream:!(P&&u==R-1)});m.length=0,this.h.g+=o,this.C=0,$=this.h.g}else $=this.g.oa();if(this.o=d==200,Jg(this.i,this.u,this.A,this.l,this.R,it,d),this.o){if(this.T&&!this.K){t:{if(this.g){var De,Xe=this.g;if((De=Xe.g?Xe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z(De)){var Ee=De;break t}}Ee=null}if(d=Ee)Vr(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Va(this,d);else{this.o=!1,this.s=3,pt(12),ar(this),bi(this);break e}}if(this.P){d=!0;let Lt;for(;!this.J&&this.C<$.length;)if(Lt=ty(this,$),Lt==ka){it==4&&(this.s=4,pt(14),d=!1),Vr(this.i,this.l,null,"[Incomplete Response]");break}else if(Lt==pu){this.s=4,pt(15),Vr(this.i,this.l,$,"[Invalid Chunk]"),d=!1;break}else Vr(this.i,this.l,Lt,null),Va(this,Lt);if(gu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),it!=4||$.length!=0||this.h.h||(this.s=1,pt(16),d=!1),this.o=this.o&&d,!d)Vr(this.i,this.l,$,"[Invalid Chunked Response]"),ar(this),bi(this);else if(0<$.length&&!this.W){this.W=!0;var rt=this.j;rt.g==this&&rt.ba&&!rt.M&&(rt.j.info("Great, no buffering proxy detected. Bytes received: "+$.length),Ga(rt),rt.M=!0,pt(11))}}else Vr(this.i,this.l,$,null),Va(this,$);it==4&&ar(this),this.o&&!this.J&&(it==4?$u(this.j,this):(this.o=!1,Vs(this)))}else _y(this.g),d==400&&0<$.indexOf("Unknown SID")?(this.s=3,pt(12)):(this.s=0,pt(13)),ar(this),bi(this)}}}catch{}finally{}};function gu(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function ty(o,u){var d=o.C,m=u.indexOf(`
`,d);return m==-1?ka:(d=Number(u.substring(d,m)),isNaN(d)?pu:(m+=1,m+d>u.length?ka:(u=u.slice(m,m+d),o.C=m+d,u)))}Dn.prototype.cancel=function(){this.J=!0,ar(this)};function Vs(o){o.S=Date.now()+o.I,yu(o,o.I)}function yu(o,u){if(o.B!=null)throw Error("WatchDog timer not null");o.B=Ei(_(o.ba,o),u)}function Ma(o){o.B&&(l.clearTimeout(o.B),o.B=null)}Dn.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(Zg(this.i,this.A),this.L!=2&&(wi(),pt(17)),ar(this),this.s=2,bi(this)):yu(this,this.S-o)};function bi(o){o.j.G==0||o.J||$u(o.j,o)}function ar(o){Ma(o);var u=o.M;u&&typeof u.ma=="function"&&u.ma(),o.M=null,_i(o.U),o.g&&(u=o.g,o.g=null,u.abort(),u.ma())}function Va(o,u){try{var d=o.j;if(d.G!=0&&(d.g==o||Na(d.h,o))){if(!o.K&&Na(d.h,o)&&d.G==3){try{var m=d.Da.g.parse(u)}catch{m=null}if(Array.isArray(m)&&m.length==3){var R=m;if(R[0]==0){e:if(!d.u){if(d.g)if(d.g.F+3e3<o.F)Bs(d),Hs(d);else break e;Fa(d),pt(18)}}else d.za=R[1],0<d.za-d.T&&37500>R[2]&&d.F&&d.v==0&&!d.C&&(d.C=Ei(_(d.Za,d),6e3));if(1>=wu(d.h)&&d.ca){try{d.ca()}catch{}d.ca=void 0}}else cr(d,11)}else if((o.K||d.g==o)&&Bs(d),!z(u))for(R=d.Da.g.parse(u),u=0;u<R.length;u++){let Ee=R[u];if(d.T=Ee[0],Ee=Ee[1],d.G==2)if(Ee[0]=="c"){d.K=Ee[1],d.ia=Ee[2];const rt=Ee[3];rt!=null&&(d.la=rt,d.j.info("VER="+d.la));const it=Ee[4];it!=null&&(d.Aa=it,d.j.info("SVER="+d.Aa));const Lr=Ee[5];Lr!=null&&typeof Lr=="number"&&0<Lr&&(m=1.5*Lr,d.L=m,d.j.info("backChannelRequestTimeoutMs_="+m)),m=d;const Lt=o.g;if(Lt){const zs=Lt.g?Lt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zs){var P=m.h;P.g||zs.indexOf("spdy")==-1&&zs.indexOf("quic")==-1&&zs.indexOf("h2")==-1||(P.j=P.l,P.g=new Set,P.h&&(Oa(P,P.h),P.h=null))}if(m.D){const Ha=Lt.g?Lt.g.getResponseHeader("X-HTTP-Session-Id"):null;Ha&&(m.ya=Ha,Me(m.I,m.D,Ha))}}d.G=3,d.l&&d.l.ua(),d.ba&&(d.R=Date.now()-o.F,d.j.info("Handshake RTT: "+d.R+"ms")),m=d;var $=o;if(m.qa=qu(m,m.J?m.ia:null,m.W),$.K){Eu(m.h,$);var De=$,Xe=m.L;Xe&&(De.I=Xe),De.B&&(Ma(De),Vs(De)),m.g=$}else Uu(m);0<d.i.length&&Us(d)}else Ee[0]!="stop"&&Ee[0]!="close"||cr(d,7);else d.G==3&&(Ee[0]=="stop"||Ee[0]=="close"?Ee[0]=="stop"?cr(d,7):xa(d):Ee[0]!="noop"&&d.l&&d.l.ta(Ee),d.v=0)}}wi(4)}catch{}}var ny=class{constructor(o,u){this.g=o,this.map=u}};function _u(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function vu(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function wu(o){return o.h?1:o.g?o.g.size:0}function Na(o,u){return o.h?o.h==u:o.g?o.g.has(u):!1}function Oa(o,u){o.g?o.g.add(u):o.h=u}function Eu(o,u){o.h&&o.h==u?o.h=null:o.g&&o.g.has(u)&&o.g.delete(u)}_u.prototype.cancel=function(){if(this.i=Tu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function Tu(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let u=o.i;for(const d of o.g.values())u=u.concat(d.D);return u}return k(o.i)}function ry(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(c(o)){for(var u=[],d=o.length,m=0;m<d;m++)u.push(o[m]);return u}u=[],d=0;for(m in o)u[d++]=o[m];return u}function iy(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(c(o)||typeof o=="string"){var u=[];o=o.length;for(var d=0;d<o;d++)u.push(d);return u}u=[],d=0;for(const m in o)u[d++]=m;return u}}}function bu(o,u){if(o.forEach&&typeof o.forEach=="function")o.forEach(u,void 0);else if(c(o)||typeof o=="string")Array.prototype.forEach.call(o,u,void 0);else for(var d=iy(o),m=ry(o),R=m.length,P=0;P<R;P++)u.call(void 0,m[P],d&&d[P],o)}var Au=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function sy(o,u){if(o){o=o.split("&");for(var d=0;d<o.length;d++){var m=o[d].indexOf("="),R=null;if(0<=m){var P=o[d].substring(0,m);R=o[d].substring(m+1)}else P=o[d];u(P,R?decodeURIComponent(R.replace(/\+/g," ")):"")}}}function lr(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof lr){this.h=o.h,Ns(this,o.j),this.o=o.o,this.g=o.g,Os(this,o.s),this.l=o.l;var u=o.i,d=new Di;d.i=u.i,u.g&&(d.g=new Map(u.g),d.h=u.h),Iu(this,d),this.m=o.m}else o&&(u=String(o).match(Au))?(this.h=!1,Ns(this,u[1]||"",!0),this.o=Ai(u[2]||""),this.g=Ai(u[3]||"",!0),Os(this,u[4]),this.l=Ai(u[5]||"",!0),Iu(this,u[6]||"",!0),this.m=Ai(u[7]||"")):(this.h=!1,this.i=new Di(null,this.h))}lr.prototype.toString=function(){var o=[],u=this.j;u&&o.push(Ii(u,Du,!0),":");var d=this.g;return(d||u=="file")&&(o.push("//"),(u=this.o)&&o.push(Ii(u,Du,!0),"@"),o.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.s,d!=null&&o.push(":",String(d))),(d=this.l)&&(this.g&&d.charAt(0)!="/"&&o.push("/"),o.push(Ii(d,d.charAt(0)=="/"?ly:ay,!0))),(d=this.i.toString())&&o.push("?",d),(d=this.m)&&o.push("#",Ii(d,uy)),o.join("")};function rn(o){return new lr(o)}function Ns(o,u,d){o.j=d?Ai(u,!0):u,o.j&&(o.j=o.j.replace(/:$/,""))}function Os(o,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);o.s=u}else o.s=null}function Iu(o,u,d){u instanceof Di?(o.i=u,hy(o.i,o.h)):(d||(u=Ii(u,cy)),o.i=new Di(u,o.h))}function Me(o,u,d){o.i.set(u,d)}function Ls(o){return Me(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Ai(o,u){return o?u?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Ii(o,u,d){return typeof o=="string"?(o=encodeURI(o).replace(u,oy),d&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function oy(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Du=/[#\/\?@]/g,ay=/[#\?:]/g,ly=/[#\?]/g,cy=/[#\?@]/g,uy=/#/g;function Di(o,u){this.h=this.g=null,this.i=o||null,this.j=!!u}function Sn(o){o.g||(o.g=new Map,o.h=0,o.i&&sy(o.i,function(u,d){o.add(decodeURIComponent(u.replace(/\+/g," ")),d)}))}n=Di.prototype,n.add=function(o,u){Sn(this),this.i=null,o=Nr(this,o);var d=this.g.get(o);return d||this.g.set(o,d=[]),d.push(u),this.h+=1,this};function Su(o,u){Sn(o),u=Nr(o,u),o.g.has(u)&&(o.i=null,o.h-=o.g.get(u).length,o.g.delete(u))}function Ru(o,u){return Sn(o),u=Nr(o,u),o.g.has(u)}n.forEach=function(o,u){Sn(this),this.g.forEach(function(d,m){d.forEach(function(R){o.call(u,R,m,this)},this)},this)},n.na=function(){Sn(this);const o=Array.from(this.g.values()),u=Array.from(this.g.keys()),d=[];for(let m=0;m<u.length;m++){const R=o[m];for(let P=0;P<R.length;P++)d.push(u[m])}return d},n.V=function(o){Sn(this);let u=[];if(typeof o=="string")Ru(this,o)&&(u=u.concat(this.g.get(Nr(this,o))));else{o=Array.from(this.g.values());for(let d=0;d<o.length;d++)u=u.concat(o[d])}return u},n.set=function(o,u){return Sn(this),this.i=null,o=Nr(this,o),Ru(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[u]),this.h+=1,this},n.get=function(o,u){return o?(o=this.V(o),0<o.length?String(o[0]):u):u};function Cu(o,u,d){Su(o,u),0<d.length&&(o.i=null,o.g.set(Nr(o,u),k(d)),o.h+=d.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],u=Array.from(this.g.keys());for(var d=0;d<u.length;d++){var m=u[d];const P=encodeURIComponent(String(m)),$=this.V(m);for(m=0;m<$.length;m++){var R=P;$[m]!==""&&(R+="="+encodeURIComponent(String($[m]))),o.push(R)}}return this.i=o.join("&")};function Nr(o,u){return u=String(u),o.j&&(u=u.toLowerCase()),u}function hy(o,u){u&&!o.j&&(Sn(o),o.i=null,o.g.forEach(function(d,m){var R=m.toLowerCase();m!=R&&(Su(this,m),Cu(this,R,d))},o)),o.j=u}function dy(o,u){const d=new Ti;if(l.Image){const m=new Image;m.onload=A(Rn,d,"TestLoadImage: loaded",!0,u,m),m.onerror=A(Rn,d,"TestLoadImage: error",!1,u,m),m.onabort=A(Rn,d,"TestLoadImage: abort",!1,u,m),m.ontimeout=A(Rn,d,"TestLoadImage: timeout",!1,u,m),l.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=o}else u(!1)}function fy(o,u){const d=new Ti,m=new AbortController,R=setTimeout(()=>{m.abort(),Rn(d,"TestPingServer: timeout",!1,u)},1e4);fetch(o,{signal:m.signal}).then(P=>{clearTimeout(R),P.ok?Rn(d,"TestPingServer: ok",!0,u):Rn(d,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(R),Rn(d,"TestPingServer: error",!1,u)})}function Rn(o,u,d,m,R){try{R&&(R.onload=null,R.onerror=null,R.onabort=null,R.ontimeout=null),m(d)}catch{}}function py(){this.g=new Cs}function my(o,u,d){const m=d||"";try{bu(o,function(R,P){let $=R;h(R)&&($=Ke(R)),u.push(m+P+"="+encodeURIComponent($))})}catch(R){throw u.push(m+"type="+encodeURIComponent("_badmap")),R}}function xs(o){this.l=o.Ub||null,this.j=o.eb||!1}S(xs,Da),xs.prototype.g=function(){return new Fs(this.l,this.j)},xs.prototype.i=function(o){return function(){return o}}({});function Fs(o,u){re.call(this),this.D=o,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(Fs,re),n=Fs.prototype,n.open=function(o,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=u,this.readyState=1,Ri(this)},n.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const u={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(u.body=o),(this.D||l).fetch(new Request(this.A,u)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Si(this)),this.readyState=0},n.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Ri(this)),this.g&&(this.readyState=3,Ri(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ku(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function ku(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}n.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var u=o.value?o.value:new Uint8Array(0);(u=this.v.decode(u,{stream:!o.done}))&&(this.response=this.responseText+=u)}o.done?Si(this):Ri(this),this.readyState==3&&ku(this)}},n.Ra=function(o){this.g&&(this.response=this.responseText=o,Si(this))},n.Qa=function(o){this.g&&(this.response=o,Si(this))},n.ga=function(){this.g&&Si(this)};function Si(o){o.readyState=4,o.l=null,o.j=null,o.v=null,Ri(o)}n.setRequestHeader=function(o,u){this.u.append(o,u)},n.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],u=this.h.entries();for(var d=u.next();!d.done;)d=d.value,o.push(d[0]+": "+d[1]),d=u.next();return o.join(`\r
`)};function Ri(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Fs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function Pu(o){let u="";return he(o,function(d,m){u+=m,u+=":",u+=d,u+=`\r
`}),u}function La(o,u,d){e:{for(m in d){var m=!1;break e}m=!0}m||(d=Pu(d),typeof o=="string"?d!=null&&encodeURIComponent(String(d)):Me(o,u,d))}function Oe(o){re.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(Oe,re);var gy=/^https?$/i,yy=["POST","PUT"];n=Oe.prototype,n.Ha=function(o){this.J=o},n.ea=function(o,u,d,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);u=u?u.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ca.g(),this.v=this.o?ou(this.o):ou(Ca),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(u,String(o),!0),this.B=!1}catch(P){Mu(this,P);return}if(o=d||"",d=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var R in m)d.set(R,m[R]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(const P of m.keys())d.set(P,m.get(P));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(d.keys()).find(P=>P.toLowerCase()=="content-type"),R=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(yy,u,void 0))||m||R||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[P,$]of d)this.g.setRequestHeader(P,$);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ou(this),this.u=!0,this.g.send(o),this.u=!1}catch(P){Mu(this,P)}};function Mu(o,u){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=u,o.m=5,Vu(o),Gs(o)}function Vu(o){o.A||(o.A=!0,pe(o,"complete"),pe(o,"error"))}n.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,pe(this,"complete"),pe(this,"abort"),Gs(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Gs(this,!0)),Oe.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Nu(this):this.bb())},n.bb=function(){Nu(this)};function Nu(o){if(o.h&&typeof a<"u"&&(!o.v[1]||sn(o)!=4||o.Z()!=2)){if(o.u&&sn(o)==4)tt(o.Ea,0,o);else if(pe(o,"readystatechange"),sn(o)==4){o.h=!1;try{const $=o.Z();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break e;default:u=!1}var d;if(!(d=u)){var m;if(m=$===0){var R=String(o.D).match(Au)[1]||null;!R&&l.self&&l.self.location&&(R=l.self.location.protocol.slice(0,-1)),m=!gy.test(R?R.toLowerCase():"")}d=m}if(d)pe(o,"complete"),pe(o,"success");else{o.m=6;try{var P=2<sn(o)?o.g.statusText:""}catch{P=""}o.l=P+" ["+o.Z()+"]",Vu(o)}}finally{Gs(o)}}}}function Gs(o,u){if(o.g){Ou(o);const d=o.g,m=o.v[0]?()=>{}:null;o.g=null,o.v=null,u||pe(o,"ready");try{d.onreadystatechange=m}catch{}}}function Ou(o){o.I&&(l.clearTimeout(o.I),o.I=null)}n.isActive=function(){return!!this.g};function sn(o){return o.g?o.g.readyState:0}n.Z=function(){try{return 2<sn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(o){if(this.g){var u=this.g.responseText;return o&&u.indexOf(o)==0&&(u=u.substring(o.length)),kt(u)}};function Lu(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function _y(o){const u={};o=(o.g&&2<=sn(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<o.length;m++){if(z(o[m]))continue;var d=I(o[m]);const R=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const P=u[R]||[];u[R]=P,P.push(d)}b(u,function(m){return m.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ci(o,u,d){return d&&d.internalChannelParams&&d.internalChannelParams[o]||u}function xu(o){this.Aa=0,this.i=[],this.j=new Ti,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ci("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ci("baseRetryDelayMs",5e3,o),this.cb=Ci("retryDelaySeedMs",1e4,o),this.Wa=Ci("forwardChannelMaxRetries",2,o),this.wa=Ci("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new _u(o&&o.concurrentRequestLimit),this.Da=new py,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=xu.prototype,n.la=8,n.G=1,n.connect=function(o,u,d,m){pt(0),this.W=o,this.H=u||{},d&&m!==void 0&&(this.H.OSID=d,this.H.OAID=m),this.F=this.X,this.I=qu(this,null,this.W),Us(this)};function xa(o){if(Fu(o),o.G==3){var u=o.U++,d=rn(o.I);if(Me(d,"SID",o.K),Me(d,"RID",u),Me(d,"TYPE","terminate"),ki(o,d),u=new Dn(o,o.j,u),u.L=2,u.v=Ls(rn(d)),d=!1,l.navigator&&l.navigator.sendBeacon)try{d=l.navigator.sendBeacon(u.v.toString(),"")}catch{}!d&&l.Image&&(new Image().src=u.v,d=!0),d||(u.g=Wu(u.j,null),u.g.ea(u.v)),u.F=Date.now(),Vs(u)}ju(o)}function Hs(o){o.g&&(Ga(o),o.g.cancel(),o.g=null)}function Fu(o){Hs(o),o.u&&(l.clearTimeout(o.u),o.u=null),Bs(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function Us(o){if(!vu(o.h)&&!o.s){o.s=!0;var u=o.Ga;Ie||rr(),we||(Ie(),we=!0),Ot.add(u,o),o.B=0}}function vy(o,u){return wu(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=u.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=Ei(_(o.Ga,o,u),zu(o,o.B)),o.B++,!0)}n.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const R=new Dn(this,this.j,o);let P=this.o;if(this.S&&(P?(P=y(P),w(P,this.S)):P=this.S),this.m!==null||this.O||(R.H=P,P=null),this.P)e:{for(var u=0,d=0;d<this.i.length;d++){t:{var m=this.i[d];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(u+=m,4096<u){u=d;break e}if(u===4096||d===this.i.length-1){u=d+1;break e}}u=1e3}else u=1e3;u=Hu(this,R,u),d=rn(this.I),Me(d,"RID",o),Me(d,"CVER",22),this.D&&Me(d,"X-HTTP-Session-Id",this.D),ki(this,d),P&&(this.O?u="headers="+encodeURIComponent(String(Pu(P)))+"&"+u:this.m&&La(d,this.m,P)),Oa(this.h,R),this.Ua&&Me(d,"TYPE","init"),this.P?(Me(d,"$req",u),Me(d,"SID","null"),R.T=!0,Pa(R,d,null)):Pa(R,d,u),this.G=2}}else this.G==3&&(o?Gu(this,o):this.i.length==0||vu(this.h)||Gu(this))};function Gu(o,u){var d;u?d=u.l:d=o.U++;const m=rn(o.I);Me(m,"SID",o.K),Me(m,"RID",d),Me(m,"AID",o.T),ki(o,m),o.m&&o.o&&La(m,o.m,o.o),d=new Dn(o,o.j,d,o.B+1),o.m===null&&(d.H=o.o),u&&(o.i=u.D.concat(o.i)),u=Hu(o,d,1e3),d.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),Oa(o.h,d),Pa(d,m,u)}function ki(o,u){o.H&&he(o.H,function(d,m){Me(u,m,d)}),o.l&&bu({},function(d,m){Me(u,m,d)})}function Hu(o,u,d){d=Math.min(o.i.length,d);var m=o.l?_(o.l.Na,o.l,o):null;e:{var R=o.i;let P=-1;for(;;){const $=["count="+d];P==-1?0<d?(P=R[0].g,$.push("ofs="+P)):P=0:$.push("ofs="+P);let De=!0;for(let Xe=0;Xe<d;Xe++){let Ee=R[Xe].g;const rt=R[Xe].map;if(Ee-=P,0>Ee)P=Math.max(0,R[Xe].g-100),De=!1;else try{my(rt,$,"req"+Ee+"_")}catch{m&&m(rt)}}if(De){m=$.join("&");break e}}}return o=o.i.splice(0,d),u.D=o,m}function Uu(o){if(!o.g&&!o.u){o.Y=1;var u=o.Fa;Ie||rr(),we||(Ie(),we=!0),Ot.add(u,o),o.v=0}}function Fa(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=Ei(_(o.Fa,o),zu(o,o.v)),o.v++,!0)}n.Fa=function(){if(this.u=null,Bu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=Ei(_(this.ab,this),o)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,pt(10),Hs(this),Bu(this))};function Ga(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function Bu(o){o.g=new Dn(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var u=rn(o.qa);Me(u,"RID","rpc"),Me(u,"SID",o.K),Me(u,"AID",o.T),Me(u,"CI",o.F?"0":"1"),!o.F&&o.ja&&Me(u,"TO",o.ja),Me(u,"TYPE","xmlhttp"),ki(o,u),o.m&&o.o&&La(u,o.m,o.o),o.L&&(o.g.I=o.L);var d=o.g;o=o.ia,d.L=1,d.v=Ls(rn(u)),d.m=null,d.P=!0,mu(d,o)}n.Za=function(){this.C!=null&&(this.C=null,Hs(this),Fa(this),pt(19))};function Bs(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function $u(o,u){var d=null;if(o.g==u){Bs(o),Ga(o),o.g=null;var m=2}else if(Na(o.h,u))d=u.D,Eu(o.h,u),m=1;else return;if(o.G!=0){if(u.o)if(m==1){d=u.m?u.m.length:0,u=Date.now()-u.F;var R=o.B;m=ks(),pe(m,new hu(m,d)),Us(o)}else Uu(o);else if(R=u.s,R==3||R==0&&0<u.X||!(m==1&&vy(o,u)||m==2&&Fa(o)))switch(d&&0<d.length&&(u=o.h,u.i=u.i.concat(d)),R){case 1:cr(o,5);break;case 4:cr(o,10);break;case 3:cr(o,6);break;default:cr(o,2)}}}function zu(o,u){let d=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(d*=2),d*u}function cr(o,u){if(o.j.info("Error code "+u),u==2){var d=_(o.fb,o),m=o.Xa;const R=!m;m=new lr(m||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Ns(m,"https"),Ls(m),R?dy(m.toString(),d):fy(m.toString(),d)}else pt(2);o.G=0,o.l&&o.l.sa(u),ju(o),Fu(o)}n.fb=function(o){o?(this.j.info("Successfully pinged google.com"),pt(2)):(this.j.info("Failed to ping google.com"),pt(1))};function ju(o){if(o.G=0,o.ka=[],o.l){const u=Tu(o.h);(u.length!=0||o.i.length!=0)&&(O(o.ka,u),O(o.ka,o.i),o.h.i.length=0,k(o.i),o.i.length=0),o.l.ra()}}function qu(o,u,d){var m=d instanceof lr?rn(d):new lr(d);if(m.g!="")u&&(m.g=u+"."+m.g),Os(m,m.s);else{var R=l.location;m=R.protocol,u=u?u+"."+R.hostname:R.hostname,R=+R.port;var P=new lr(null);m&&Ns(P,m),u&&(P.g=u),R&&Os(P,R),d&&(P.l=d),m=P}return d=o.D,u=o.ya,d&&u&&Me(m,d,u),Me(m,"VER",o.la),ki(o,m),m}function Wu(o,u,d){if(u&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return u=o.Ca&&!o.pa?new Oe(new xs({eb:d})):new Oe(o.pa),u.Ha(o.J),u}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ku(){}n=Ku.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function $s(){}$s.prototype.g=function(o,u){return new Tt(o,u)};function Tt(o,u){re.call(this),this.g=new xu(u),this.l=o,this.h=u&&u.messageUrlParams||null,o=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(o?o["X-WebChannel-Content-Type"]=u.messageContentType:o={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.va&&(o?o["X-WebChannel-Client-Profile"]=u.va:o={"X-WebChannel-Client-Profile":u.va}),this.g.S=o,(o=u&&u.Sb)&&!z(o)&&(this.g.m=o),this.v=u&&u.supportsCrossDomainXhr||!1,this.u=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!z(u)&&(this.g.D=u,o=this.h,o!==null&&u in o&&(o=this.h,u in o&&delete o[u])),this.j=new Or(this)}S(Tt,re),Tt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Tt.prototype.close=function(){xa(this.g)},Tt.prototype.o=function(o){var u=this.g;if(typeof o=="string"){var d={};d.__data__=o,o=d}else this.u&&(d={},d.__data__=Ke(o),o=d);u.i.push(new ny(u.Ya++,o)),u.G==3&&Us(u)},Tt.prototype.N=function(){this.g.l=null,delete this.j,xa(this.g),delete this.g,Tt.aa.N.call(this)};function Xu(o){Sa.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var u=o.__sm__;if(u){e:{for(const d in u){o=d;break e}o=void 0}(this.i=o)&&(o=this.i,u=u!==null&&o in u?u[o]:void 0),this.data=u}else this.data=o}S(Xu,Sa);function Qu(){Ra.call(this),this.status=1}S(Qu,Ra);function Or(o){this.g=o}S(Or,Ku),Or.prototype.ua=function(){pe(this.g,"a")},Or.prototype.ta=function(o){pe(this.g,new Xu(o))},Or.prototype.sa=function(o){pe(this.g,new Qu)},Or.prototype.ra=function(){pe(this.g,"b")},$s.prototype.createWebChannel=$s.prototype.g,Tt.prototype.send=Tt.prototype.o,Tt.prototype.open=Tt.prototype.m,Tt.prototype.close=Tt.prototype.close,bm=function(){return new $s},Tm=function(){return ks()},Em=or,Ml={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ps.NO_ERROR=0,Ps.TIMEOUT=8,Ps.HTTP_ERROR=6,uo=Ps,du.COMPLETE="complete",wm=du,au.EventType=vi,vi.OPEN="a",vi.CLOSE="b",vi.ERROR="c",vi.MESSAGE="d",re.prototype.listen=re.prototype.K,Oi=au,Oe.prototype.listenOnce=Oe.prototype.L,Oe.prototype.getLastError=Oe.prototype.Ka,Oe.prototype.getLastErrorCode=Oe.prototype.Ba,Oe.prototype.getStatus=Oe.prototype.Z,Oe.prototype.getResponseJson=Oe.prototype.Oa,Oe.prototype.getResponseText=Oe.prototype.oa,Oe.prototype.send=Oe.prototype.ea,Oe.prototype.setWithCredentials=Oe.prototype.Ha,vm=Oe}).apply(typeof Qs<"u"?Qs:typeof self<"u"?self:typeof window<"u"?window:{});const ud="@firebase/firestore",hd="4.7.9";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ot.UNAUTHENTICATED=new ot(null),ot.GOOGLE_CREDENTIALS=new ot("google-credentials-uid"),ot.FIRST_PARTY=new ot("first-party-uid"),ot.MOCK_USER=new ot("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hi="11.4.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ir=new hc("@firebase/firestore");function Gr(){return Ir.logLevel}function X(n,...e){if(Ir.logLevel<=me.DEBUG){const t=e.map(Tc);Ir.debug(`Firestore (${hi}): ${n}`,...t)}}function wn(n,...e){if(Ir.logLevel<=me.ERROR){const t=e.map(Tc);Ir.error(`Firestore (${hi}): ${n}`,...t)}}function ni(n,...e){if(Ir.logLevel<=me.WARN){const t=e.map(Tc);Ir.warn(`Firestore (${hi}): ${n}`,...t)}}function Tc(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ae(n="Unexpected state"){const e=`FIRESTORE (${hi}) INTERNAL ASSERTION FAILED: `+n;throw wn(e),new Error(e)}function Ae(n,e){n||ae()}function de(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Q extends An{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Yb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ot.UNAUTHENTICATED))}shutdown(){}}class Jb{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Zb{constructor(e){this.t=e,this.currentUser=ot.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ae(this.o===void 0);let r=this.i;const i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve();let s=new wr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new wr,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},l=c=>{X("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(X("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new wr)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(X("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ae(typeof r.accessToken=="string"),new Am(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ae(e===null||typeof e=="string"),new ot(e)}}class eA{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=ot.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class tA{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new eA(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(ot.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class dd{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class nA{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,xt(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){Ae(this.o===void 0);const r=s=>{s.error!=null&&X("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.R;return this.R=s.token,X("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{X("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):X("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new dd(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ae(typeof t.token=="string"),this.R=t.token,new dd(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rA(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=rA(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}}function ye(n,e){return n<e?-1:n>e?1:0}function ri(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fd=-62135596800,pd=1e6;class ze{static now(){return ze.fromMillis(Date.now())}static fromDate(e){return ze.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*pd);return new ze(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Q(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Q(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<fd)throw new Q(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Q(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/pd}_compareTo(e){return this.seconds===e.seconds?ye(this.nanoseconds,e.nanoseconds):ye(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-fd;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{static fromTimestamp(e){return new ue(e)}static min(){return new ue(new ze(0,0))}static max(){return new ue(new ze(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const md="__name__";class jt{constructor(e,t,r){t===void 0?t=0:t>e.length&&ae(),r===void 0?r=e.length-t:r>e.length-t&&ae(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return jt.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof jt?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=jt.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return Math.sign(e.length-t.length)}static compareSegments(e,t){const r=jt.isNumericId(e),i=jt.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?jt.extractNumericId(e).compare(jt.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return zn.fromString(e.substring(4,e.length-2))}}class Ve extends jt{construct(e,t,r){return new Ve(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Q(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Ve(t)}static emptyPath(){return new Ve([])}}const iA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Je extends jt{construct(e,t,r){return new Je(e,t,r)}static isValidIdentifier(e){return iA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Je.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===md}static keyField(){return new Je([md])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Q(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let a=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new Q(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Q(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else l==="`"?(a=!a,i++):l!=="."||a?(r+=l,i++):(s(),i++)}if(s(),a)throw new Q(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Je(t)}static emptyPath(){return new Je([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.path=e}static fromPath(e){return new te(Ve.fromString(e))}static fromName(e){return new te(Ve.fromString(e).popFirst(5))}static empty(){return new te(Ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ve.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new te(new Ve(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const as=-1;function sA(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ue.fromTimestamp(r===1e9?new ze(t+1,0):new ze(t,r));return new Xn(i,te.empty(),e)}function oA(n){return new Xn(n.readTime,n.key,as)}class Xn{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Xn(ue.min(),te.empty(),as)}static max(){return new Xn(ue.max(),te.empty(),as)}}function aA(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=te.comparator(n.documentKey,e.documentKey),t!==0?t:ye(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class cA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function di(n){if(n.code!==N.FAILED_PRECONDITION||n.message!==lA)throw n;X("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ae(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new V((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof V?t:V.resolve(t)}catch(t){return V.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):V.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):V.reject(t)}static resolve(e){return new V((t,r)=>{t(e)})}static reject(e){return new V((t,r)=>{r(e)})}static waitFor(e){return new V((t,r)=>{let i=0,s=0,a=!1;e.forEach(l=>{++i,l.next(()=>{++s,a&&s===i&&t()},c=>r(c))}),a=!0,s===i&&t()})}static or(e){let t=V.resolve(!1);for(const r of e)t=t.next(i=>i?V.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new V((r,i)=>{const s=e.length,a=new Array(s);let l=0;for(let c=0;c<s;c++){const h=c;t(e[h]).next(f=>{a[h]=f,++l,l===s&&r(a)},f=>i(f))}})}static doWhile(e,t){return new V((r,i)=>{const s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}}function uA(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function fi(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.oe(r),this._e=r=>t.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}da.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bc=-1;function fa(n){return n==null}function Oo(n){return n===0&&1/n==-1/0}function hA(n){return typeof n=="number"&&Number.isInteger(n)&&!Oo(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dm="";function dA(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=gd(e)),e=fA(n.get(t),e);return gd(e)}function fA(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="";break;case Dm:t+="";break;default:t+=s}}return t}function gd(n){return n+Dm+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yd(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Rr(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Sm(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e,t){this.comparator=e,this.root=t||Qe.EMPTY}insert(e,t){return new Ne(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Qe.BLACK,null,null))}remove(e){return new Ne(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qe.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ys(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ys(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ys(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ys(this.root,e,this.comparator,!0)}}class Ys{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qe{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Qe.RED,this.left=i??Qe.EMPTY,this.right=s??Qe.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Qe(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Qe.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Qe.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qe.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ae();const e=this.left.check();if(e!==this.right.check())throw ae();return e+(this.isRed()?0:1)}}Qe.EMPTY=null,Qe.RED=!0,Qe.BLACK=!1;Qe.EMPTY=new class{constructor(){this.size=0}get key(){throw ae()}get value(){throw ae()}get color(){throw ae()}get left(){throw ae()}get right(){throw ae()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Qe(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e){this.comparator=e,this.data=new Ne(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new _d(this.data.getIterator())}getIteratorFrom(e){return new _d(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof je)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new je(this.comparator);return t.data=e,t}}class _d{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.fields=e,e.sort(Je.comparator)}static empty(){return new Ft([])}unionWith(e){let t=new je(Je.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ft(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ri(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Rm("Invalid base64 string: "+s):s}}(e);return new et(t)}static fromUint8Array(e){const t=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new et(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ye(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}et.EMPTY_BYTE_STRING=new et("");const pA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qn(n){if(Ae(!!n),typeof n=="string"){let e=0;const t=pA.exec(n);if(Ae(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:xe(n.seconds),nanos:xe(n.nanos)}}function xe(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Yn(n){return typeof n=="string"?et.fromBase64String(n):et.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cm="server_timestamp",km="__type__",Pm="__previous_value__",Mm="__local_write_time__";function Ac(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[km])===null||t===void 0?void 0:t.stringValue)===Cm}function pa(n){const e=n.mapValue.fields[Pm];return Ac(e)?pa(e):e}function ls(n){const e=Qn(n.mapValue.fields[Mm].timestampValue);return new ze(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(e,t,r,i,s,a,l,c,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=h}}const Lo="(default)";class cs{constructor(e,t){this.projectId=e,this.database=t||Lo}static empty(){return new cs("","")}get isDefaultDatabase(){return this.database===Lo}isEqual(e){return e instanceof cs&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vm="__type__",gA="__max__",Js={mapValue:{}},Nm="__vector__",xo="value";function Jn(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ac(n)?4:_A(n)?9007199254740991:yA(n)?10:11:ae()}function en(n,e){if(n===e)return!0;const t=Jn(n);if(t!==Jn(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ls(n).isEqual(ls(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=Qn(i.timestampValue),l=Qn(s.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return Yn(i.bytesValue).isEqual(Yn(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return xe(i.geoPointValue.latitude)===xe(s.geoPointValue.latitude)&&xe(i.geoPointValue.longitude)===xe(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return xe(i.integerValue)===xe(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=xe(i.doubleValue),l=xe(s.doubleValue);return a===l?Oo(a)===Oo(l):isNaN(a)&&isNaN(l)}return!1}(n,e);case 9:return ri(n.arrayValue.values||[],e.arrayValue.values||[],en);case 10:case 11:return function(i,s){const a=i.mapValue.fields||{},l=s.mapValue.fields||{};if(yd(a)!==yd(l))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(l[c]===void 0||!en(a[c],l[c])))return!1;return!0}(n,e);default:return ae()}}function us(n,e){return(n.values||[]).find(t=>en(t,e))!==void 0}function ii(n,e){if(n===e)return 0;const t=Jn(n),r=Jn(e);if(t!==r)return ye(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ye(n.booleanValue,e.booleanValue);case 2:return function(s,a){const l=xe(s.integerValue||s.doubleValue),c=xe(a.integerValue||a.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(n,e);case 3:return vd(n.timestampValue,e.timestampValue);case 4:return vd(ls(n),ls(e));case 5:return ye(n.stringValue,e.stringValue);case 6:return function(s,a){const l=Yn(s),c=Yn(a);return l.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(s,a){const l=s.split("/"),c=a.split("/");for(let h=0;h<l.length&&h<c.length;h++){const f=ye(l[h],c[h]);if(f!==0)return f}return ye(l.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,a){const l=ye(xe(s.latitude),xe(a.latitude));return l!==0?l:ye(xe(s.longitude),xe(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return wd(n.arrayValue,e.arrayValue);case 10:return function(s,a){var l,c,h,f;const p=s.fields||{},_=a.fields||{},A=(l=p[xo])===null||l===void 0?void 0:l.arrayValue,S=(c=_[xo])===null||c===void 0?void 0:c.arrayValue,k=ye(((h=A==null?void 0:A.values)===null||h===void 0?void 0:h.length)||0,((f=S==null?void 0:S.values)===null||f===void 0?void 0:f.length)||0);return k!==0?k:wd(A,S)}(n.mapValue,e.mapValue);case 11:return function(s,a){if(s===Js.mapValue&&a===Js.mapValue)return 0;if(s===Js.mapValue)return 1;if(a===Js.mapValue)return-1;const l=s.fields||{},c=Object.keys(l),h=a.fields||{},f=Object.keys(h);c.sort(),f.sort();for(let p=0;p<c.length&&p<f.length;++p){const _=ye(c[p],f[p]);if(_!==0)return _;const A=ii(l[c[p]],h[f[p]]);if(A!==0)return A}return ye(c.length,f.length)}(n.mapValue,e.mapValue);default:throw ae()}}function vd(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ye(n,e);const t=Qn(n),r=Qn(e),i=ye(t.seconds,r.seconds);return i!==0?i:ye(t.nanos,r.nanos)}function wd(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=ii(t[i],r[i]);if(s)return s}return ye(t.length,r.length)}function si(n){return Vl(n)}function Vl(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Qn(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Yn(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return te.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=Vl(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${Vl(t.fields[a])}`;return i+"}"}(n.mapValue):ae()}function ho(n){switch(Jn(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=pa(n);return e?16+ho(e):16;case 5:return 2*n.stringValue.length;case 6:return Yn(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+ho(s),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Rr(r.fields,(s,a)=>{i+=s.length+ho(a)}),i}(n.mapValue);default:throw ae()}}function Ed(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Nl(n){return!!n&&"integerValue"in n}function Ic(n){return!!n&&"arrayValue"in n}function Td(n){return!!n&&"nullValue"in n}function bd(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function fo(n){return!!n&&"mapValue"in n}function yA(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[Vm])===null||t===void 0?void 0:t.stringValue)===Nm}function Wi(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Rr(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Wi(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Wi(n.arrayValue.values[t]);return e}return Object.assign({},n)}function _A(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===gA}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.value=e}static empty(){return new Mt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!fo(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Wi(t)}setAll(e){let t=Je.emptyPath(),r={},i=[];e.forEach((a,l)=>{if(!t.isImmediateParentOf(l)){const c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=l.popLast()}a?r[l.lastSegment()]=Wi(a):i.push(l.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());fo(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return en(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];fo(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Rr(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Mt(Wi(this.value))}}function Om(n){const e=[];return Rr(n.fields,(t,r)=>{const i=new Je([t]);if(fo(r)){const s=Om(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)}),new Ft(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,t,r,i,s,a,l){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=l}static newInvalidDocument(e){return new ut(e,0,ue.min(),ue.min(),ue.min(),Mt.empty(),0)}static newFoundDocument(e,t,r,i){return new ut(e,1,t,ue.min(),r,i,0)}static newNoDocument(e,t){return new ut(e,2,t,ue.min(),ue.min(),Mt.empty(),0)}static newUnknownDocument(e,t){return new ut(e,3,t,ue.min(),ue.min(),Mt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Mt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Mt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ut&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ut(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e,t){this.position=e,this.inclusive=t}}function Ad(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],a=n.position[i];if(s.field.isKeyField()?r=te.comparator(te.fromName(a.referenceValue),t.key):r=ii(a,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Id(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!en(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e,t="asc"){this.field=e,this.dir=t}}function vA(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{}class He extends Lm{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new EA(e,t,r):t==="array-contains"?new AA(e,r):t==="in"?new IA(e,r):t==="not-in"?new DA(e,r):t==="array-contains-any"?new SA(e,r):new He(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new TA(e,r):new bA(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(ii(t,this.value)):t!==null&&Jn(this.value)===Jn(t)&&this.matchesComparison(ii(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ae()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ut extends Lm{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new Ut(e,t)}matches(e){return xm(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function xm(n){return n.op==="and"}function Fm(n){return wA(n)&&xm(n)}function wA(n){for(const e of n.filters)if(e instanceof Ut)return!1;return!0}function Ol(n){if(n instanceof He)return n.field.canonicalString()+n.op.toString()+si(n.value);if(Fm(n))return n.filters.map(e=>Ol(e)).join(",");{const e=n.filters.map(t=>Ol(t)).join(",");return`${n.op}(${e})`}}function Gm(n,e){return n instanceof He?function(r,i){return i instanceof He&&r.op===i.op&&r.field.isEqual(i.field)&&en(r.value,i.value)}(n,e):n instanceof Ut?function(r,i){return i instanceof Ut&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,l)=>s&&Gm(a,i.filters[l]),!0):!1}(n,e):void ae()}function Hm(n){return n instanceof He?function(t){return`${t.field.canonicalString()} ${t.op} ${si(t.value)}`}(n):n instanceof Ut?function(t){return t.op.toString()+" {"+t.getFilters().map(Hm).join(" ,")+"}"}(n):"Filter"}class EA extends He{constructor(e,t,r){super(e,t,r),this.key=te.fromName(r.referenceValue)}matches(e){const t=te.comparator(e.key,this.key);return this.matchesComparison(t)}}class TA extends He{constructor(e,t){super(e,"in",t),this.keys=Um("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class bA extends He{constructor(e,t){super(e,"not-in",t),this.keys=Um("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Um(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>te.fromName(r.referenceValue))}class AA extends He{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ic(t)&&us(t.arrayValue,this.value)}}class IA extends He{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&us(this.value.arrayValue,t)}}class DA extends He{constructor(e,t){super(e,"not-in",t)}matches(e){if(us(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!us(this.value.arrayValue,t)}}class SA extends He{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ic(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>us(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(e,t=null,r=[],i=[],s=null,a=null,l=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=l,this.le=null}}function Dd(n,e=null,t=[],r=[],i=null,s=null,a=null){return new RA(n,e,t,r,i,s,a)}function Dc(n){const e=de(n);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Ol(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),fa(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>si(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>si(r)).join(",")),e.le=t}return e.le}function Sc(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!vA(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Gm(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Id(n.startAt,e.startAt)&&Id(n.endAt,e.endAt)}function Ll(n){return te.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e,t=null,r=[],i=[],s=null,a="F",l=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=l,this.endAt=c,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function CA(n,e,t,r,i,s,a,l){return new pi(n,e,t,r,i,s,a,l)}function Rc(n){return new pi(n)}function Sd(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Bm(n){return n.collectionGroup!==null}function Ki(n){const e=de(n);if(e.he===null){e.he=[];const t=new Set;for(const s of e.explicitOrderBy)e.he.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new je(Je.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.he.push(new hs(s,r))}),t.has(Je.keyField().canonicalString())||e.he.push(new hs(Je.keyField(),r))}return e.he}function Yt(n){const e=de(n);return e.Pe||(e.Pe=kA(e,Ki(n))),e.Pe}function kA(n,e){if(n.limitType==="F")return Dd(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new hs(i.field,s)});const t=n.endAt?new Fo(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Fo(n.startAt.position,n.startAt.inclusive):null;return Dd(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function xl(n,e){const t=n.filters.concat([e]);return new pi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Fl(n,e,t){return new pi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ma(n,e){return Sc(Yt(n),Yt(e))&&n.limitType===e.limitType}function $m(n){return`${Dc(Yt(n))}|lt:${n.limitType}`}function Hr(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>Hm(i)).join(", ")}]`),fa(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>si(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>si(i)).join(",")),`Target(${r})`}(Yt(n))}; limitType=${n.limitType})`}function ga(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):te.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of Ki(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(a,l,c){const h=Ad(a,l,c);return a.inclusive?h<=0:h<0}(r.startAt,Ki(r),i)||r.endAt&&!function(a,l,c){const h=Ad(a,l,c);return a.inclusive?h>=0:h>0}(r.endAt,Ki(r),i))}(n,e)}function PA(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function zm(n){return(e,t)=>{let r=!1;for(const i of Ki(n)){const s=MA(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function MA(n,e,t){const r=n.field.isKeyField()?te.comparator(e.key,t.key):function(s,a,l){const c=a.data.field(s),h=l.data.field(s);return c!==null&&h!==null?ii(c,h):ae()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ae()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Rr(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Sm(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA=new Ne(te.comparator);function En(){return VA}const jm=new Ne(te.comparator);function Li(...n){let e=jm;for(const t of n)e=e.insert(t.key,t);return e}function qm(n){let e=jm;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function _r(){return Xi()}function Wm(){return Xi()}function Xi(){return new Cr(n=>n.toString(),(n,e)=>n.isEqual(e))}const NA=new Ne(te.comparator),OA=new je(te.comparator);function ge(...n){let e=OA;for(const t of n)e=e.add(t);return e}const LA=new je(ye);function xA(){return LA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cc(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Oo(e)?"-0":e}}function Km(n){return{integerValue:""+n}}function FA(n,e){return hA(e)?Km(e):Cc(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(){this._=void 0}}function GA(n,e,t){return n instanceof ds?function(i,s){const a={fields:{[km]:{stringValue:Cm},[Mm]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Ac(s)&&(s=pa(s)),s&&(a.fields[Pm]=s),{mapValue:a}}(t,e):n instanceof fs?Qm(n,e):n instanceof ps?Ym(n,e):function(i,s){const a=Xm(i,s),l=Rd(a)+Rd(i.Ie);return Nl(a)&&Nl(i.Ie)?Km(l):Cc(i.serializer,l)}(n,e)}function HA(n,e,t){return n instanceof fs?Qm(n,e):n instanceof ps?Ym(n,e):t}function Xm(n,e){return n instanceof Go?function(r){return Nl(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class ds extends ya{}class fs extends ya{constructor(e){super(),this.elements=e}}function Qm(n,e){const t=Jm(e);for(const r of n.elements)t.some(i=>en(i,r))||t.push(r);return{arrayValue:{values:t}}}class ps extends ya{constructor(e){super(),this.elements=e}}function Ym(n,e){let t=Jm(e);for(const r of n.elements)t=t.filter(i=>!en(i,r));return{arrayValue:{values:t}}}class Go extends ya{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function Rd(n){return xe(n.integerValue||n.doubleValue)}function Jm(n){return Ic(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(e,t){this.field=e,this.transform=t}}function BA(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof fs&&i instanceof fs||r instanceof ps&&i instanceof ps?ri(r.elements,i.elements,en):r instanceof Go&&i instanceof Go?en(r.Ie,i.Ie):r instanceof ds&&i instanceof ds}(n.transform,e.transform)}class $A{constructor(e,t){this.version=e,this.transformResults=t}}class mn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new mn}static exists(e){return new mn(void 0,e)}static updateTime(e){return new mn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function po(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class _a{}function Zm(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new tg(n.key,mn.none()):new As(n.key,n.data,mn.none());{const t=n.data,r=Mt.empty();let i=new je(Je.comparator);for(let s of e.fields)if(!i.has(s)){let a=t.field(s);a===null&&s.length>1&&(s=s.popLast(),a=t.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new kr(n.key,r,new Ft(i.toArray()),mn.none())}}function zA(n,e,t){n instanceof As?function(i,s,a){const l=i.value.clone(),c=kd(i.fieldTransforms,s,a.transformResults);l.setAll(c),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):n instanceof kr?function(i,s,a){if(!po(i.precondition,s))return void s.convertToUnknownDocument(a.version);const l=kd(i.fieldTransforms,s,a.transformResults),c=s.data;c.setAll(eg(i)),c.setAll(l),s.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(n,e,t):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,t)}function Qi(n,e,t,r){return n instanceof As?function(s,a,l,c){if(!po(s.precondition,a))return l;const h=s.value.clone(),f=Pd(s.fieldTransforms,c,a);return h.setAll(f),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(n,e,t,r):n instanceof kr?function(s,a,l,c){if(!po(s.precondition,a))return l;const h=Pd(s.fieldTransforms,c,a),f=a.data;return f.setAll(eg(s)),f.setAll(h),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(s,a,l){return po(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(n,e,t)}function jA(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=Xm(r.transform,i||null);s!=null&&(t===null&&(t=Mt.empty()),t.set(r.field,s))}return t||null}function Cd(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ri(r,i,(s,a)=>BA(s,a))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class As extends _a{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class kr extends _a{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function eg(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function kd(n,e,t){const r=new Map;Ae(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],a=s.transform,l=e.data.field(s.field);r.set(s.field,HA(a,l,t[i]))}return r}function Pd(n,e,t){const r=new Map;for(const i of n){const s=i.transform,a=t.data.field(i.field);r.set(i.field,GA(s,a,e))}return r}class tg extends _a{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class qA extends _a{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&zA(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Qi(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Qi(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Wm();return this.mutations.forEach(i=>{const s=e.get(i.key),a=s.overlayedDocument;let l=this.applyToLocalView(a,s.mutatedFields);l=t.has(i.key)?null:l;const c=Zm(a,l);c!==null&&r.set(i.key,c),a.isValidDocument()||a.convertToNoDocument(ue.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ge())}isEqual(e){return this.batchId===e.batchId&&ri(this.mutations,e.mutations,(t,r)=>Cd(t,r))&&ri(this.baseMutations,e.baseMutations,(t,r)=>Cd(t,r))}}class kc{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ae(e.mutations.length===r.length);let i=function(){return NA}();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new kc(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ge,ve;function QA(n){switch(n){case N.OK:return ae();case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0;default:return ae()}}function ng(n){if(n===void 0)return wn("GRPC error has no .code"),N.UNKNOWN;switch(n){case Ge.OK:return N.OK;case Ge.CANCELLED:return N.CANCELLED;case Ge.UNKNOWN:return N.UNKNOWN;case Ge.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case Ge.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case Ge.INTERNAL:return N.INTERNAL;case Ge.UNAVAILABLE:return N.UNAVAILABLE;case Ge.UNAUTHENTICATED:return N.UNAUTHENTICATED;case Ge.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case Ge.NOT_FOUND:return N.NOT_FOUND;case Ge.ALREADY_EXISTS:return N.ALREADY_EXISTS;case Ge.PERMISSION_DENIED:return N.PERMISSION_DENIED;case Ge.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case Ge.ABORTED:return N.ABORTED;case Ge.OUT_OF_RANGE:return N.OUT_OF_RANGE;case Ge.UNIMPLEMENTED:return N.UNIMPLEMENTED;case Ge.DATA_LOSS:return N.DATA_LOSS;default:return ae()}}(ve=Ge||(Ge={}))[ve.OK=0]="OK",ve[ve.CANCELLED=1]="CANCELLED",ve[ve.UNKNOWN=2]="UNKNOWN",ve[ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ve[ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ve[ve.NOT_FOUND=5]="NOT_FOUND",ve[ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",ve[ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",ve[ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",ve[ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ve[ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ve[ve.ABORTED=10]="ABORTED",ve[ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",ve[ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",ve[ve.INTERNAL=13]="INTERNAL",ve[ve.UNAVAILABLE=14]="UNAVAILABLE",ve[ve.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YA(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA=new zn([4294967295,4294967295],0);function Md(n){const e=YA().encode(n),t=new _m;return t.update(e),new Uint8Array(t.digest())}function Vd(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new zn([t,r],0),new zn([i,s],0)]}class Pc{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new xi(`Invalid padding: ${t}`);if(r<0)throw new xi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new xi(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new xi(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=zn.fromNumber(this.Ee)}Ae(e,t,r){let i=e.add(t.multiply(zn.fromNumber(r)));return i.compare(JA)===1&&(i=new zn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=Md(e),[r,i]=Vd(t);for(let s=0;s<this.hashCount;s++){const a=this.Ae(r,i,s);if(!this.Re(a))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new Pc(s,i,t);return r.forEach(l=>a.insert(l)),a}insert(e){if(this.Ee===0)return;const t=Md(e),[r,i]=Vd(t);for(let s=0;s<this.hashCount;s++){const a=this.Ae(r,i,s);this.Ve(a)}}Ve(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class xi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Is.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new va(ue.min(),i,new Ne(ye),En(),ge())}}class Is{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Is(r,t,ge(),ge(),ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e,t,r,i){this.me=e,this.removedTargetIds=t,this.key=r,this.fe=i}}class rg{constructor(e,t){this.targetId=e,this.ge=t}}class ig{constructor(e,t,r=et.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Nd{constructor(){this.pe=0,this.ye=Od(),this.we=et.EMPTY_BYTE_STRING,this.be=!1,this.Se=!0}get current(){return this.be}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.we=e)}Fe(){let e=ge(),t=ge(),r=ge();return this.ye.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ae()}}),new Is(this.we,this.be,e,t,r)}Me(){this.Se=!1,this.ye=Od()}xe(e,t){this.Se=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.Se=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,Ae(this.pe>=0)}Le(){this.Se=!0,this.be=!0}}class ZA{constructor(e){this.ke=e,this.qe=new Map,this.Qe=En(),this.$e=Zs(),this.Ke=Zs(),this.Ue=new Ne(ye)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const r=this.He(t);switch(e.state){case 0:this.Je(t)&&r.Ce(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(e.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(t);break;case 3:this.Je(t)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),r.Ce(e.resumeToken));break;default:ae()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((r,i)=>{this.Je(i)&&t(i)})}Ze(e){const t=e.targetId,r=e.ge.count,i=this.Xe(t);if(i){const s=i.target;if(Ll(s))if(r===0){const a=new te(s.path);this.ze(t,a,ut.newNoDocument(a,ue.min()))}else Ae(r===1);else{const a=this.et(t);if(a!==r){const l=this.tt(e),c=l?this.nt(l,e,a):1;if(c!==0){this.Ye(t);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(t,h)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let a,l;try{a=Yn(r).toUint8Array()}catch(c){if(c instanceof Rm)return ni("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Pc(a,i,s)}catch(c){return ni(c instanceof xi?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.Ee===0?null:l}nt(e,t,r){return t.ge.count===r-this.st(e,t.targetId)?0:2}st(e,t){const r=this.ke.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const a=this.ke.it(),l=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.ze(t,s,null),i++)}),i}ot(e){const t=new Map;this.qe.forEach((s,a)=>{const l=this.Xe(a);if(l){if(s.current&&Ll(l.target)){const c=new te(l.target.path);this._t(c).has(a)||this.ut(a,c)||this.ze(a,c,ut.newNoDocument(c,e))}s.ve&&(t.set(a,s.Fe()),s.Me())}});let r=ge();this.Ke.forEach((s,a)=>{let l=!0;a.forEachWhile(c=>{const h=this.Xe(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.Qe.forEach((s,a)=>a.setReadTime(e));const i=new va(e,t,this.Ue,this.Qe,r);return this.Qe=En(),this.$e=Zs(),this.Ke=Zs(),this.Ue=new Ne(ye),i}Ge(e,t){if(!this.Je(e))return;const r=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,r),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ke=this.Ke.insert(t.key,this.ct(t.key).add(e))}ze(e,t,r){if(!this.Je(e))return;const i=this.He(e);this.ut(e,t)?i.xe(t,1):i.Oe(t),this.Ke=this.Ke.insert(t,this.ct(t).delete(e)),this.Ke=this.Ke.insert(t,this.ct(t).add(e)),r&&(this.Qe=this.Qe.insert(t,r))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new Nd,this.qe.set(e,t)),t}ct(e){let t=this.Ke.get(e);return t||(t=new je(ye),this.Ke=this.Ke.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new je(ye),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||X("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new Nd),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function Zs(){return new Ne(te.comparator)}function Od(){return new Ne(te.comparator)}const eI={asc:"ASCENDING",desc:"DESCENDING"},tI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},nI={and:"AND",or:"OR"};class rI{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Gl(n,e){return n.useProto3Json||fa(e)?e:{value:e}}function Ho(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sg(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function iI(n,e){return Ho(n,e.toTimestamp())}function Jt(n){return Ae(!!n),ue.fromTimestamp(function(t){const r=Qn(t);return new ze(r.seconds,r.nanos)}(n))}function Mc(n,e){return Hl(n,e).canonicalString()}function Hl(n,e){const t=function(i){return new Ve(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function og(n){const e=Ve.fromString(n);return Ae(hg(e)),e}function Ul(n,e){return Mc(n.databaseId,e.path)}function ol(n,e){const t=og(e);if(t.get(1)!==n.databaseId.projectId)throw new Q(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Q(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new te(lg(t))}function ag(n,e){return Mc(n.databaseId,e)}function sI(n){const e=og(n);return e.length===4?Ve.emptyPath():lg(e)}function Bl(n){return new Ve(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function lg(n){return Ae(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function Ld(n,e,t){return{name:Ul(n,e),fields:t.value.mapValue.fields}}function oI(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:ae()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(h,f){return h.useProto3Json?(Ae(f===void 0||typeof f=="string"),et.fromBase64String(f||"")):(Ae(f===void 0||f instanceof Buffer||f instanceof Uint8Array),et.fromUint8Array(f||new Uint8Array))}(n,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(h){const f=h.code===void 0?N.UNKNOWN:ng(h.code);return new Q(f,h.message||"")}(a);t=new ig(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=ol(n,r.document.name),s=Jt(r.document.updateTime),a=r.document.createTime?Jt(r.document.createTime):ue.min(),l=new Mt({mapValue:{fields:r.document.fields}}),c=ut.newFoundDocument(i,s,a,l),h=r.targetIds||[],f=r.removedTargetIds||[];t=new mo(h,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=ol(n,r.document),s=r.readTime?Jt(r.readTime):ue.min(),a=ut.newNoDocument(i,s),l=r.removedTargetIds||[];t=new mo([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=ol(n,r.document),s=r.removedTargetIds||[];t=new mo([],s,i,null)}else{if(!("filter"in e))return ae();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new XA(i,s),l=r.targetId;t=new rg(l,a)}}return t}function aI(n,e){let t;if(e instanceof As)t={update:Ld(n,e.key,e.value)};else if(e instanceof tg)t={delete:Ul(n,e.key)};else if(e instanceof kr)t={update:Ld(n,e.key,e.data),updateMask:gI(e.fieldMask)};else{if(!(e instanceof qA))return ae();t={verify:Ul(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,a){const l=a.transform;if(l instanceof ds)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof fs)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof ps)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Go)return{fieldPath:a.field.canonicalString(),increment:l.Ie};throw ae()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:iI(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ae()}(n,e.precondition)),t}function lI(n,e){return n&&n.length>0?(Ae(e!==void 0),n.map(t=>function(i,s){let a=i.updateTime?Jt(i.updateTime):Jt(s);return a.isEqual(ue.min())&&(a=Jt(s)),new $A(a,i.transformResults||[])}(t,e))):[]}function cI(n,e){return{documents:[ag(n,e.path)]}}function uI(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=ag(n,i);const s=function(h){if(h.length!==0)return ug(Ut.create(h,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const a=function(h){if(h.length!==0)return h.map(f=>function(_){return{field:Ur(_.field),direction:fI(_.dir)}}(f))}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const l=Gl(n,e.limit);return l!==null&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{ht:t,parent:i}}function hI(n){let e=sI(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ae(r===1);const f=t.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];t.where&&(s=function(p){const _=cg(p);return _ instanceof Ut&&Fm(_)?_.getFilters():[_]}(t.where));let a=[];t.orderBy&&(a=function(p){return p.map(_=>function(S){return new hs(Br(S.field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(_))}(t.orderBy));let l=null;t.limit&&(l=function(p){let _;return _=typeof p=="object"?p.value:p,fa(_)?null:_}(t.limit));let c=null;t.startAt&&(c=function(p){const _=!!p.before,A=p.values||[];return new Fo(A,_)}(t.startAt));let h=null;return t.endAt&&(h=function(p){const _=!p.before,A=p.values||[];return new Fo(A,_)}(t.endAt)),CA(e,i,a,s,l,"F",c,h)}function dI(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ae()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function cg(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Br(t.unaryFilter.field);return He.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Br(t.unaryFilter.field);return He.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Br(t.unaryFilter.field);return He.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Br(t.unaryFilter.field);return He.create(a,"!=",{nullValue:"NULL_VALUE"});default:return ae()}}(n):n.fieldFilter!==void 0?function(t){return He.create(Br(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ae()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Ut.create(t.compositeFilter.filters.map(r=>cg(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ae()}}(t.compositeFilter.op))}(n):ae()}function fI(n){return eI[n]}function pI(n){return tI[n]}function mI(n){return nI[n]}function Ur(n){return{fieldPath:n.canonicalString()}}function Br(n){return Je.fromServerFormat(n.fieldPath)}function ug(n){return n instanceof He?function(t){if(t.op==="=="){if(bd(t.value))return{unaryFilter:{field:Ur(t.field),op:"IS_NAN"}};if(Td(t.value))return{unaryFilter:{field:Ur(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(bd(t.value))return{unaryFilter:{field:Ur(t.field),op:"IS_NOT_NAN"}};if(Td(t.value))return{unaryFilter:{field:Ur(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ur(t.field),op:pI(t.op),value:t.value}}}(n):n instanceof Ut?function(t){const r=t.getFilters().map(i=>ug(i));return r.length===1?r[0]:{compositeFilter:{op:mI(t.op),filters:r}}}(n):ae()}function gI(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function hg(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e,t,r,i,s=ue.min(),a=ue.min(),l=et.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Fn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Fn(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Fn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Fn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(e){this.Tt=e}}function _I(n){const e=hI({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Fl(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(){this.Tn=new wI}addToCollectionParentIndex(e,t){return this.Tn.add(t),V.resolve()}getCollectionParents(e,t){return V.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return V.resolve()}deleteFieldIndex(e,t){return V.resolve()}deleteAllFieldIndexes(e){return V.resolve()}createTargetIndexes(e,t){return V.resolve()}getDocumentsMatchingTarget(e,t){return V.resolve(null)}getIndexType(e,t){return V.resolve(0)}getFieldIndexes(e,t){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,t){return V.resolve(Xn.min())}getMinOffsetFromCollectionGroup(e,t){return V.resolve(Xn.min())}updateCollectionGroup(e,t,r){return V.resolve()}updateIndexEntries(e,t){return V.resolve()}}class wI{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new je(Ve.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new je(Ve.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xd={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},dg=41943040;class _t{static withCacheSize(e){return new _t(e,_t.DEFAULT_COLLECTION_PERCENTILE,_t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_t.DEFAULT_COLLECTION_PERCENTILE=10,_t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_t.DEFAULT=new _t(dg,_t.DEFAULT_COLLECTION_PERCENTILE,_t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_t.DISABLED=new _t(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Kn(){return new oi(0)}static Un(){return new oi(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fd="LruGarbageCollector",EI=1048576;function Gd([n,e],[t,r]){const i=ye(n,t);return i===0?ye(e,r):i}class TI{constructor(e){this.Hn=e,this.buffer=new je(Gd),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Gd(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class bI{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){X(Fd,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){fi(t)?X(Fd,"Ignoring IndexedDB error during garbage collection: ",t):await di(t)}await this.er(3e5)})}}class AI{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return V.resolve(da.ae);const r=new TI(t);return this.tr.forEachTarget(e,i=>r.Zn(i.sequenceNumber)).next(()=>this.tr.rr(e,i=>r.Zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.tr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(X("LruGarbageCollector","Garbage collection skipped; disabled"),V.resolve(xd)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(X("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),xd):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let r,i,s,a,l,c,h;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(X("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,a=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,l=Date.now(),this.removeTargets(e,r,t))).next(p=>(s=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(h=Date.now(),Gr()<=me.DEBUG&&X("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-f}ms
	Determined least recently used ${i} in `+(l-a)+`ms
	Removed ${s} targets in `+(c-l)+`ms
	Removed ${p} documents in `+(h-c)+`ms
Total Duration: ${h-f}ms`),V.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:p})))}}function II(n,e){return new AI(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(){this.changes=new Cr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ut.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?V.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Qi(r.mutation,i,Ft.empty(),ze.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ge()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ge()){const i=_r();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let a=Li();return s.forEach((l,c)=>{a=a.insert(l,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){const r=_r();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ge()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,l)=>{t.set(a,l)})})}computeViews(e,t,r,i){let s=En();const a=Xi(),l=function(){return Xi()}();return t.forEach((c,h)=>{const f=r.get(h.key);i.has(h.key)&&(f===void 0||f.mutation instanceof kr)?s=s.insert(h.key,h):f!==void 0?(a.set(h.key,f.mutation.getFieldMask()),Qi(f.mutation,h,f.mutation.getFieldMask(),ze.now())):a.set(h.key,Ft.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((h,f)=>a.set(h,f)),t.forEach((h,f)=>{var p;return l.set(h,new SI(f,(p=a.get(h))!==null&&p!==void 0?p:null))}),l))}recalculateAndSaveOverlays(e,t){const r=Xi();let i=new Ne((a,l)=>a-l),s=ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(const l of a)l.keys().forEach(c=>{const h=t.get(c);if(h===null)return;let f=r.get(c)||Ft.empty();f=l.applyToLocalView(h,f),r.set(c,f);const p=(i.get(l.batchId)||ge()).add(c);i=i.insert(l.batchId,p)})}).next(()=>{const a=[],l=i.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),h=c.key,f=c.value,p=Wm();f.forEach(_=>{if(!s.has(_)){const A=Zm(t.get(_),r.get(_));A!==null&&p.set(_,A),s=s.add(_)}}),a.push(this.documentOverlayCache.saveOverlays(e,h,p))}return V.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(a){return te.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Bm(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):V.resolve(_r());let l=as,c=s;return a.next(h=>V.forEach(h,(f,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),s.get(f)?V.resolve():this.remoteDocumentCache.getEntry(e,f).next(_=>{c=c.insert(f,_)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,c,h,ge())).next(f=>({batchId:l,changes:qm(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new te(t)).next(r=>{let i=Li();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let a=Li();return this.indexManager.getCollectionParents(e,s).next(l=>V.forEach(l,c=>{const h=function(p,_){return new pi(_,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(f=>{f.forEach((p,_)=>{a=a.insert(p,_)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(a=>{s.forEach((c,h)=>{const f=h.getKey();a.get(f)===null&&(a=a.insert(f,ut.newInvalidDocument(f)))});let l=Li();return a.forEach((c,h)=>{const f=s.get(c);f!==void 0&&Qi(f.mutation,h,Ft.empty(),ze.now()),ga(t,h)&&(l=l.insert(c,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return V.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Jt(i.createTime)}}(t)),V.resolve()}getNamedQuery(e,t){return V.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(i){return{name:i.name,query:_I(i.bundledQuery),readTime:Jt(i.readTime)}}(t)),V.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(){this.overlays=new Ne(te.comparator),this.Rr=new Map}getOverlay(e,t){return V.resolve(this.overlays.get(t))}getOverlays(e,t){const r=_r();return V.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.Et(e,t,s)}),V.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Rr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Rr.delete(r)),V.resolve()}getOverlaysForCollection(e,t,r){const i=_r(),s=t.length+1,a=new te(t.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const c=l.getNext().value,h=c.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return V.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Ne((h,f)=>h-f);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>r){let f=s.get(h.largestBatchId);f===null&&(f=_r(),s=s.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}const l=_r(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((h,f)=>l.set(h,f)),!(l.size()>=i)););return V.resolve(l)}Et(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.Rr.get(i.largestBatchId).delete(r.key);this.Rr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new KA(t,r));let s=this.Rr.get(t);s===void 0&&(s=ge(),this.Rr.set(t,s)),this.Rr.set(t,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(){this.sessionToken=et.EMPTY_BYTE_STRING}getSessionToken(e){return V.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,V.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(){this.Vr=new je(qe.mr),this.gr=new je(qe.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const r=new qe(e,t);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.wr(new qe(e,t))}br(e,t){e.forEach(r=>this.removeReference(r,t))}Sr(e){const t=new te(new Ve([])),r=new qe(t,e),i=new qe(t,e+1),s=[];return this.gr.forEachInRange([r,i],a=>{this.wr(a),s.push(a.key)}),s}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new te(new Ve([])),r=new qe(t,e),i=new qe(t,e+1);let s=ge();return this.gr.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(e){const t=new qe(e,0),r=this.Vr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class qe{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return te.comparator(e.key,t.key)||ye(e.Cr,t.Cr)}static pr(e,t){return ye(e.Cr,t.Cr)||te.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new je(qe.mr)}checkEmpty(e){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const s=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new WA(s,t,r,i);this.mutationQueue.push(a);for(const l of i)this.Mr=this.Mr.add(new qe(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return V.resolve(a)}lookupMutationBatch(e,t){return V.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.Nr(r),s=i<0?0:i;return V.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?bc:this.Fr-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new qe(t,0),i=new qe(t,Number.POSITIVE_INFINITY),s=[];return this.Mr.forEachInRange([r,i],a=>{const l=this.Or(a.Cr);s.push(l)}),V.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new je(ye);return t.forEach(i=>{const s=new qe(i,0),a=new qe(i,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([s,a],l=>{r=r.add(l.Cr)})}),V.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;te.isDocumentKey(s)||(s=s.child(""));const a=new qe(new te(s),0);let l=new je(ye);return this.Mr.forEachWhile(c=>{const h=c.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(l=l.add(c.Cr)),!0)},a),V.resolve(this.Br(l))}Br(e){const t=[];return e.forEach(r=>{const i=this.Or(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Ae(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return V.forEach(t.mutations,i=>{const s=new qe(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Mr=r})}qn(e){}containsKey(e,t){const r=new qe(t,0),i=this.Mr.firstAfterOrEqual(r);return V.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,V.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(e){this.kr=e,this.docs=function(){return new Ne(te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,a=this.kr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return V.resolve(r?r.document.mutableCopy():ut.newInvalidDocument(t))}getEntries(e,t){let r=En();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ut.newInvalidDocument(i))}),V.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=En();const a=t.path,l=new te(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:h,value:{document:f}}=c.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||aA(oA(f),r)<=0||(i.has(f.key)||ga(t,f))&&(s=s.insert(f.key,f.mutableCopy()))}return V.resolve(s)}getAllFromCollectionGroup(e,t,r,i){ae()}qr(e,t){return V.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new NI(this)}getSize(e){return V.resolve(this.size)}}class NI extends DI{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Ir.addEntry(e,i)):this.Ir.removeEntry(r)}),V.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(e){this.persistence=e,this.Qr=new Cr(t=>Dc(t),Sc),this.lastRemoteSnapshotVersion=ue.min(),this.highestTargetId=0,this.$r=0,this.Kr=new Vc,this.targetCount=0,this.Ur=oi.Kn()}forEachTarget(e,t){return this.Qr.forEach((r,i)=>t(i)),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Ur.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$r&&(this.$r=t),V.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ur=new oi(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,V.resolve()}updateTargetData(e,t){return this.zn(t),V.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Kr.Sr(t.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Qr.forEach((a,l)=>{l.sequenceNumber<=t&&r.get(l.targetId)===null&&(this.Qr.delete(a),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),V.waitFor(s).next(()=>i)}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,t){const r=this.Qr.get(t)||null;return V.resolve(r)}addMatchingKeys(e,t,r){return this.Kr.yr(t,r),V.resolve()}removeMatchingKeys(e,t,r){this.Kr.br(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),V.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Kr.Sr(t),V.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Kr.vr(t);return V.resolve(r)}containsKey(e,t){return V.resolve(this.Kr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new da(0),this.zr=!1,this.zr=!0,this.jr=new PI,this.referenceDelegate=e(this),this.Hr=new OI(this),this.indexManager=new vI,this.remoteDocumentCache=function(i){return new VI(i)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new yI(t),this.Yr=new CI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new kI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Wr[e.toKey()];return r||(r=new MI(t,this.referenceDelegate),this.Wr[e.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,r){X("MemoryPersistence","Starting transaction:",e);const i=new LI(this.Gr.next());return this.referenceDelegate.Zr(),r(i).next(s=>this.referenceDelegate.Xr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}ei(e,t){return V.or(Object.values(this.Wr).map(r=>()=>r.containsKey(e,t)))}}class LI extends cA{constructor(e){super(),this.currentSequenceNumber=e}}class Nc{constructor(e){this.persistence=e,this.ti=new Vc,this.ni=null}static ri(e){return new Nc(e)}get ii(){if(this.ni)return this.ni;throw ae()}addReference(e,t,r){return this.ti.addReference(r,t),this.ii.delete(r.toString()),V.resolve()}removeReference(e,t,r){return this.ti.removeReference(r,t),this.ii.add(r.toString()),V.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),V.resolve()}removeTarget(e,t){this.ti.Sr(t.targetId).forEach(i=>this.ii.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.ii.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.ii,r=>{const i=te.fromPath(r);return this.si(e,i).next(s=>{s||t.removeEntry(i,ue.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(r=>{r?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return V.or([()=>V.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class Uo{constructor(e,t){this.persistence=e,this.oi=new Cr(r=>dA(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=II(this,t)}static ri(e,t){return new Uo(e,t)}Zr(){}Xr(e){return V.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}sr(e){let t=0;return this.rr(e,r=>{t++}).next(()=>t)}rr(e,t){return V.forEach(this.oi,(r,i)=>this.ar(e,r,i).next(s=>s?V.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.qr(e,a=>this.ar(e,a,t).next(l=>{l||(r++,s.removeEntry(a,ue.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),V.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),V.resolve()}removeReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),V.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),V.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ho(e.data.value)),t}ar(e,t,r){return V.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.oi.get(t);return V.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Hi=r,this.Ji=i}static Yi(e,t){let r=ge(),i=ge();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Oc(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return V0()?8:uA(dt())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.rs(e,t).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.ss(e,t,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new xI;return this._s(e,t,a).next(l=>{if(s.result=l,this.Xi)return this.us(e,t,a,l.size)})}).next(()=>s.result)}us(e,t,r,i){return r.documentReadCount<this.es?(Gr()<=me.DEBUG&&X("QueryEngine","SDK will not create cache indexes for query:",Hr(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),V.resolve()):(Gr()<=me.DEBUG&&X("QueryEngine","Query:",Hr(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ts*i?(Gr()<=me.DEBUG&&X("QueryEngine","The SDK decides to create cache indexes for query:",Hr(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Yt(t))):V.resolve())}rs(e,t){if(Sd(t))return V.resolve(null);let r=Yt(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Fl(t,null,"F"),r=Yt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const a=ge(...s);return this.ns.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const h=this.cs(t,l);return this.ls(t,h,a,c.readTime)?this.rs(e,Fl(t,null,"F")):this.hs(e,h,t,c)}))})))}ss(e,t,r,i){return Sd(t)||i.isEqual(ue.min())?V.resolve(null):this.ns.getDocuments(e,r).next(s=>{const a=this.cs(t,s);return this.ls(t,a,r,i)?V.resolve(null):(Gr()<=me.DEBUG&&X("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Hr(t)),this.hs(e,a,t,sA(i,as)).next(l=>l))})}cs(e,t){let r=new je(zm(e));return t.forEach((i,s)=>{ga(e,s)&&(r=r.add(s))}),r}ls(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}_s(e,t,r){return Gr()<=me.DEBUG&&X("QueryEngine","Using full collection scan to execute query:",Hr(t)),this.ns.getDocumentsMatchingQuery(e,t,Xn.min(),r)}hs(e,t,r,i){return this.ns.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lc="LocalStore",GI=3e8;class HI{constructor(e,t,r,i){this.persistence=e,this.Ps=t,this.serializer=i,this.Ts=new Ne(ye),this.Is=new Cr(s=>Dc(s),Sc),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(r)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new RI(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function UI(n,e,t,r){return new HI(n,e,t,r)}async function pg(n,e){const t=de(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.As(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const a=[],l=[];let c=ge();for(const h of i){a.push(h.batchId);for(const f of h.mutations)c=c.add(f.key)}for(const h of s){l.push(h.batchId);for(const f of h.mutations)c=c.add(f.key)}return t.localDocuments.getDocuments(r,c).next(h=>({Rs:h,removedBatchIds:a,addedBatchIds:l}))})})}function BI(n,e){const t=de(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.ds.newChangeBuffer({trackRemovals:!0});return function(l,c,h,f){const p=h.batch,_=p.keys();let A=V.resolve();return _.forEach(S=>{A=A.next(()=>f.getEntry(c,S)).next(k=>{const O=h.docVersions.get(S);Ae(O!==null),k.version.compareTo(O)<0&&(p.applyToRemoteDocument(k,h),k.isValidDocument()&&(k.setReadTime(h.commitVersion),f.addEntry(k)))})}),A.next(()=>l.mutationQueue.removeMutationBatch(c,p))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=ge();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(c=c.add(l.batch.mutations[h].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function mg(n){const e=de(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function $I(n,e){const t=de(n),r=e.snapshotVersion;let i=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=t.ds.newChangeBuffer({trackRemovals:!0});i=t.Ts;const l=[];e.targetChanges.forEach((f,p)=>{const _=i.get(p);if(!_)return;l.push(t.Hr.removeMatchingKeys(s,f.removedDocuments,p).next(()=>t.Hr.addMatchingKeys(s,f.addedDocuments,p)));let A=_.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?A=A.withResumeToken(et.EMPTY_BYTE_STRING,ue.min()).withLastLimboFreeSnapshotVersion(ue.min()):f.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(f.resumeToken,r)),i=i.insert(p,A),function(k,O,q){return k.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=GI?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0}(_,A,f)&&l.push(t.Hr.updateTargetData(s,A))});let c=En(),h=ge();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(t.persistence.referenceDelegate.updateLimboDocument(s,f))}),l.push(zI(s,a,e.documentUpdates).next(f=>{c=f.Vs,h=f.fs})),!r.isEqual(ue.min())){const f=t.Hr.getLastRemoteSnapshotVersion(s).next(p=>t.Hr.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(f)}return V.waitFor(l).next(()=>a.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,h)).next(()=>c)}).then(s=>(t.Ts=i,s))}function zI(n,e,t){let r=ge(),i=ge();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let a=En();return t.forEach((l,c)=>{const h=s.get(l);c.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(l)),c.isNoDocument()&&c.version.isEqual(ue.min())?(e.removeEntry(l,c.readTime),a=a.insert(l,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(c),a=a.insert(l,c)):X(Lc,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",c.version)}),{Vs:a,fs:i}})}function jI(n,e){const t=de(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=bc),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function qI(n,e){const t=de(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Hr.getTargetData(r,e).next(s=>s?(i=s,V.resolve(i)):t.Hr.allocateTargetId(r).next(a=>(i=new Fn(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.Hr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ts.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(r.targetId,r),t.Is.set(e,r.targetId)),r})}async function $l(n,e,t){const r=de(n),i=r.Ts.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!fi(a))throw a;X(Lc,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ts=r.Ts.remove(e),r.Is.delete(i.target)}function Hd(n,e,t){const r=de(n);let i=ue.min(),s=ge();return r.persistence.runTransaction("Execute query","readwrite",a=>function(c,h,f){const p=de(c),_=p.Is.get(f);return _!==void 0?V.resolve(p.Ts.get(_)):p.Hr.getTargetData(h,f)}(r,a,Yt(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(a,l.targetId).next(c=>{s=c})}).next(()=>r.Ps.getDocumentsMatchingQuery(a,e,t?i:ue.min(),t?s:ge())).next(l=>(WI(r,PA(e),l),{documents:l,gs:s})))}function WI(n,e,t){let r=n.Es.get(e)||ue.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Es.set(e,r)}class Ud{constructor(){this.activeTargetIds=xA()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ss(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class KI{constructor(){this.ho=new Ud,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,r){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new Ud,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bd="ConnectivityMonitor";class $d{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){X(Bd,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){X(Bd,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eo=null;function zl(){return eo===null?eo=function(){return 268435456+Math.round(2147483648*Math.random())}():eo++,"0x"+eo.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const al="RestConnection",QI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class YI{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${r}/databases/${i}`,this.wo=this.databaseId.database===Lo?`project_id=${r}`:`project_id=${r}&database_id=${i}`}bo(e,t,r,i,s){const a=zl(),l=this.So(e,t.toUriEncodedString());X(al,`Sending RPC '${e}' ${a}:`,l,r);const c={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(c,i,s),this.vo(e,l,c,r).then(h=>(X(al,`Received RPC '${e}' ${a}: `,h),h),h=>{throw ni(al,`RPC '${e}' ${a} failed with error: `,h,"url: ",l,"request:",r),h})}Co(e,t,r,i,s,a){return this.bo(e,t,r,i,s)}Do(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+hi}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}So(e,t){const r=QI[e];return`${this.po}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Ko(e){this.ko(e)}Uo(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const st="WebChannelConnection";class ZI extends YI{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,r,i){const s=zl();return new Promise((a,l)=>{const c=new vm;c.setWithCredentials(!0),c.listenOnce(wm.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case uo.NO_ERROR:const f=c.getResponseJson();X(st,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),a(f);break;case uo.TIMEOUT:X(st,`RPC '${e}' ${s} timed out`),l(new Q(N.DEADLINE_EXCEEDED,"Request time out"));break;case uo.HTTP_ERROR:const p=c.getStatus();if(X(st,`RPC '${e}' ${s} failed with status:`,p,"response text:",c.getResponseText()),p>0){let _=c.getResponseJson();Array.isArray(_)&&(_=_[0]);const A=_==null?void 0:_.error;if(A&&A.status&&A.message){const S=function(O){const q=O.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(q)>=0?q:N.UNKNOWN}(A.status);l(new Q(S,A.message))}else l(new Q(N.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new Q(N.UNAVAILABLE,"Connection failed."));break;default:ae()}}finally{X(st,`RPC '${e}' ${s} completed.`)}});const h=JSON.stringify(i);X(st,`RPC '${e}' ${s} sending request:`,i),c.send(t,"POST",h,r,15)})}Wo(e,t,r){const i=zl(),s=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=bm(),l=Tm(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Do(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const f=s.join("");X(st,`Creating RPC '${e}' stream ${i}: ${f}`,c);const p=a.createWebChannel(f,c);let _=!1,A=!1;const S=new JI({Fo:O=>{A?X(st,`Not sending because RPC '${e}' stream ${i} is closed:`,O):(_||(X(st,`Opening RPC '${e}' stream ${i} transport.`),p.open(),_=!0),X(st,`RPC '${e}' stream ${i} sending:`,O),p.send(O))},Mo:()=>p.close()}),k=(O,q,z)=>{O.listen(q,W=>{try{z(W)}catch(H){setTimeout(()=>{throw H},0)}})};return k(p,Oi.EventType.OPEN,()=>{A||(X(st,`RPC '${e}' stream ${i} transport opened.`),S.Qo())}),k(p,Oi.EventType.CLOSE,()=>{A||(A=!0,X(st,`RPC '${e}' stream ${i} transport closed`),S.Ko())}),k(p,Oi.EventType.ERROR,O=>{A||(A=!0,ni(st,`RPC '${e}' stream ${i} transport errored:`,O),S.Ko(new Q(N.UNAVAILABLE,"The operation could not be completed")))}),k(p,Oi.EventType.MESSAGE,O=>{var q;if(!A){const z=O.data[0];Ae(!!z);const W=z,H=(W==null?void 0:W.error)||((q=W[0])===null||q===void 0?void 0:q.error);if(H){X(st,`RPC '${e}' stream ${i} received error:`,H);const ce=H.status;let he=function(g){const w=Ge[g];if(w!==void 0)return ng(w)}(ce),b=H.message;he===void 0&&(he=N.INTERNAL,b="Unknown error status: "+ce+" with message "+H.message),A=!0,S.Ko(new Q(he,b)),p.close()}else X(st,`RPC '${e}' stream ${i} received:`,z),S.Uo(z)}}),k(l,Em.STAT_EVENT,O=>{O.stat===Ml.PROXY?X(st,`RPC '${e}' stream ${i} detected buffering proxy`):O.stat===Ml.NOPROXY&&X(st,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.$o()},0),S}}function ll(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wa(n){return new rI(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Ti=e,this.timerId=t,this.Go=r,this.zo=i,this.jo=s,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),i=Math.max(0,t-r);i>0&&X("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,i,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zd="PersistentStream";class yg{constructor(e,t,r,i,s,a,l,c){this.Ti=e,this.n_=r,this.r_=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new gg(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===N.RESOURCE_EXHAUSTED?(wn(t.toString()),wn("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.i_===t&&this.V_(r,i)},r=>{e(()=>{const i=new Q(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(i)})})}V_(e,t){const r=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(i=>{r(()=>this.m_(i))}),this.stream.onMessage(i=>{r(()=>++this.__==1?this.g_(i):this.onNext(i))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return X(zd,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(X(zd,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class eD extends yg{constructor(e,t,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=oI(this.serializer,e),r=function(s){if(!("targetChange"in s))return ue.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?ue.min():a.readTime?Jt(a.readTime):ue.min()}(e);return this.listener.p_(t,r)}y_(e){const t={};t.database=Bl(this.serializer),t.addTarget=function(s,a){let l;const c=a.target;if(l=Ll(c)?{documents:cI(s,c)}:{query:uI(s,c).ht},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=sg(s,a.resumeToken);const h=Gl(s,a.expectedCount);h!==null&&(l.expectedCount=h)}else if(a.snapshotVersion.compareTo(ue.min())>0){l.readTime=Ho(s,a.snapshotVersion.toTimestamp());const h=Gl(s,a.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=dI(this.serializer,e);r&&(t.labels=r),this.I_(t)}w_(e){const t={};t.database=Bl(this.serializer),t.removeTarget=e,this.I_(t)}}class tD extends yg{constructor(e,t,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}get b_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.b_&&this.S_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return Ae(!!e.streamToken),this.lastStreamToken=e.streamToken,Ae(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){Ae(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=lI(e.writeResults,e.commitTime),r=Jt(e.commitTime);return this.listener.v_(r,t)}C_(){const e={};e.database=Bl(this.serializer),this.I_(e)}S_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>aI(this.serializer,r))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{}class rD extends nD{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.F_=!1}M_(){if(this.F_)throw new Q(N.FAILED_PRECONDITION,"The client has already been terminated.")}bo(e,t,r,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.bo(e,Hl(t,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Q(N.UNKNOWN,s.toString())})}Co(e,t,r,i,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Co(e,Hl(t,r),i,a,l,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Q(N.UNKNOWN,a.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class iD{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(wn(t),this.N_=!1):X("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dr="RemoteStore";class sD{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=s,this.z_.To(a=>{r.enqueueAndForget(async()=>{Pr(this)&&(X(Dr,"Restarting streams for network reachability change."),await async function(c){const h=de(c);h.W_.add(4),await Ds(h),h.j_.set("Unknown"),h.W_.delete(4),await Ea(h)}(this))})}),this.j_=new iD(r,i)}}async function Ea(n){if(Pr(n))for(const e of n.G_)await e(!0)}async function Ds(n){for(const e of n.G_)await e(!1)}function _g(n,e){const t=de(n);t.U_.has(e.targetId)||(t.U_.set(e.targetId,e),Hc(t)?Gc(t):mi(t).c_()&&Fc(t,e))}function xc(n,e){const t=de(n),r=mi(t);t.U_.delete(e),r.c_()&&vg(t,e),t.U_.size===0&&(r.c_()?r.P_():Pr(t)&&t.j_.set("Unknown"))}function Fc(n,e){if(n.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ue.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}mi(n).y_(e)}function vg(n,e){n.H_.Ne(e),mi(n).w_(e)}function Gc(n){n.H_=new ZA({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>n.U_.get(e)||null,it:()=>n.datastore.serializer.databaseId}),mi(n).start(),n.j_.B_()}function Hc(n){return Pr(n)&&!mi(n).u_()&&n.U_.size>0}function Pr(n){return de(n).W_.size===0}function wg(n){n.H_=void 0}async function oD(n){n.j_.set("Online")}async function aD(n){n.U_.forEach((e,t)=>{Fc(n,e)})}async function lD(n,e){wg(n),Hc(n)?(n.j_.q_(e),Gc(n)):n.j_.set("Unknown")}async function cD(n,e,t){if(n.j_.set("Online"),e instanceof ig&&e.state===2&&e.cause)try{await async function(i,s){const a=s.cause;for(const l of s.targetIds)i.U_.has(l)&&(await i.remoteSyncer.rejectListen(l,a),i.U_.delete(l),i.H_.removeTarget(l))}(n,e)}catch(r){X(Dr,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Bo(n,r)}else if(e instanceof mo?n.H_.We(e):e instanceof rg?n.H_.Ze(e):n.H_.je(e),!t.isEqual(ue.min()))try{const r=await mg(n.localStore);t.compareTo(r)>=0&&await function(s,a){const l=s.H_.ot(a);return l.targetChanges.forEach((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const f=s.U_.get(h);f&&s.U_.set(h,f.withResumeToken(c.resumeToken,a))}}),l.targetMismatches.forEach((c,h)=>{const f=s.U_.get(c);if(!f)return;s.U_.set(c,f.withResumeToken(et.EMPTY_BYTE_STRING,f.snapshotVersion)),vg(s,c);const p=new Fn(f.target,c,h,f.sequenceNumber);Fc(s,p)}),s.remoteSyncer.applyRemoteEvent(l)}(n,t)}catch(r){X(Dr,"Failed to raise snapshot:",r),await Bo(n,r)}}async function Bo(n,e,t){if(!fi(e))throw e;n.W_.add(1),await Ds(n),n.j_.set("Offline"),t||(t=()=>mg(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{X(Dr,"Retrying IndexedDB access"),await t(),n.W_.delete(1),await Ea(n)})}function Eg(n,e){return e().catch(t=>Bo(n,t,e))}async function Ta(n){const e=de(n),t=Zn(e);let r=e.K_.length>0?e.K_[e.K_.length-1].batchId:bc;for(;uD(e);)try{const i=await jI(e.localStore,r);if(i===null){e.K_.length===0&&t.P_();break}r=i.batchId,hD(e,i)}catch(i){await Bo(e,i)}Tg(e)&&bg(e)}function uD(n){return Pr(n)&&n.K_.length<10}function hD(n,e){n.K_.push(e);const t=Zn(n);t.c_()&&t.b_&&t.S_(e.mutations)}function Tg(n){return Pr(n)&&!Zn(n).u_()&&n.K_.length>0}function bg(n){Zn(n).start()}async function dD(n){Zn(n).C_()}async function fD(n){const e=Zn(n);for(const t of n.K_)e.S_(t.mutations)}async function pD(n,e,t){const r=n.K_.shift(),i=kc.from(r,e,t);await Eg(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await Ta(n)}async function mD(n,e){e&&Zn(n).b_&&await async function(r,i){if(function(a){return QA(a)&&a!==N.ABORTED}(i.code)){const s=r.K_.shift();Zn(r).h_(),await Eg(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Ta(r)}}(n,e),Tg(n)&&bg(n)}async function jd(n,e){const t=de(n);t.asyncQueue.verifyOperationInProgress(),X(Dr,"RemoteStore received new credentials");const r=Pr(t);t.W_.add(3),await Ds(t),r&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await Ea(t)}async function gD(n,e){const t=de(n);e?(t.W_.delete(2),await Ea(t)):e||(t.W_.add(2),await Ds(t),t.j_.set("Unknown"))}function mi(n){return n.J_||(n.J_=function(t,r,i){const s=de(t);return s.M_(),new eD(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{xo:oD.bind(null,n),No:aD.bind(null,n),Lo:lD.bind(null,n),p_:cD.bind(null,n)}),n.G_.push(async e=>{e?(n.J_.h_(),Hc(n)?Gc(n):n.j_.set("Unknown")):(await n.J_.stop(),wg(n))})),n.J_}function Zn(n){return n.Y_||(n.Y_=function(t,r,i){const s=de(t);return s.M_(),new tD(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{xo:()=>Promise.resolve(),No:dD.bind(null,n),Lo:mD.bind(null,n),D_:fD.bind(null,n),v_:pD.bind(null,n)}),n.G_.push(async e=>{e?(n.Y_.h_(),await Ta(n)):(await n.Y_.stop(),n.K_.length>0&&(X(Dr,`Stopping write stream with ${n.K_.length} pending writes`),n.K_=[]))})),n.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new wr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const a=Date.now()+r,l=new Uc(e,t,a,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Q(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Bc(n,e){if(wn("AsyncQueue",`${e}: ${n}`),fi(n))return new Q(N.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{static emptySet(e){return new Zr(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||te.comparator(t.key,r.key):(t,r)=>te.comparator(t.key,r.key),this.keyedMap=Li(),this.sortedSet=new Ne(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Zr)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Zr;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(){this.Z_=new Ne(te.comparator)}track(e){const t=e.doc.key,r=this.Z_.get(t);r?e.type!==0&&r.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&r.type!==1?this.Z_=this.Z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Z_=this.Z_.remove(t):e.type===1&&r.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):ae():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,r)=>{e.push(r)}),e}}class ai{constructor(e,t,r,i,s,a,l,c,h){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(e,t,r,i,s){const a=[];return t.forEach(l=>{a.push({type:0,doc:l})}),new ai(e,t,Zr.emptySet(t),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ma(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class _D{constructor(){this.queries=Wd(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,r){const i=de(t),s=i.queries;i.queries=Wd(),s.forEach((a,l)=>{for(const c of l.ta)c.onError(r)})})(this,new Q(N.ABORTED,"Firestore shutting down"))}}function Wd(){return new Cr(n=>$m(n),ma)}async function vD(n,e){const t=de(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.na()&&e.ra()&&(r=2):(s=new yD,r=e.ra()?0:1);try{switch(r){case 0:s.ea=await t.onListen(i,!0);break;case 1:s.ea=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(a){const l=Bc(a,`Initialization of query '${Hr(e.query)}' failed`);return void e.onError(l)}t.queries.set(i,s),s.ta.push(e),e.sa(t.onlineState),s.ea&&e.oa(s.ea)&&$c(t)}async function wD(n,e){const t=de(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const a=s.ta.indexOf(e);a>=0&&(s.ta.splice(a,1),s.ta.length===0?i=e.ra()?0:1:!s.na()&&e.ra()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function ED(n,e){const t=de(n);let r=!1;for(const i of e){const s=i.query,a=t.queries.get(s);if(a){for(const l of a.ta)l.oa(i)&&(r=!0);a.ea=i}}r&&$c(t)}function TD(n,e,t){const r=de(n),i=r.queries.get(e);if(i)for(const s of i.ta)s.onError(t);r.queries.delete(e)}function $c(n){n.ia.forEach(e=>{e.next()})}var jl,Kd;(Kd=jl||(jl={}))._a="default",Kd.Cache="cache";class bD{constructor(e,t,r){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ai(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const r=t!=="Offline";return(!this.options.Ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=ai.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==jl.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(e){this.key=e}}class Ig{constructor(e){this.key=e}}class AD{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=ge(),this.mutatedKeys=ge(),this.ya=zm(e),this.wa=new Zr(this.ya)}get ba(){return this.fa}Sa(e,t){const r=t?t.Da:new qd,i=t?t.wa:this.wa;let s=t?t.mutatedKeys:this.mutatedKeys,a=i,l=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,p)=>{const _=i.get(f),A=ga(this.query,p)?p:null,S=!!_&&this.mutatedKeys.has(_.key),k=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let O=!1;_&&A?_.data.isEqual(A.data)?S!==k&&(r.track({type:3,doc:A}),O=!0):this.va(_,A)||(r.track({type:2,doc:A}),O=!0,(c&&this.ya(A,c)>0||h&&this.ya(A,h)<0)&&(l=!0)):!_&&A?(r.track({type:0,doc:A}),O=!0):_&&!A&&(r.track({type:1,doc:_}),O=!0,(c||h)&&(l=!0)),O&&(A?(a=a.add(A),s=k?s.add(f):s.delete(f)):(a=a.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const f=this.query.limitType==="F"?a.last():a.first();a=a.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{wa:a,Da:r,ls:l,mutatedKeys:s}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const a=e.Da.X_();a.sort((f,p)=>function(A,S){const k=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ae()}};return k(A)-k(S)}(f.type,p.type)||this.ya(f.doc,p.doc)),this.Ca(r),i=i!=null&&i;const l=t&&!i?this.Fa():[],c=this.pa.size===0&&this.current&&!i?1:0,h=c!==this.ga;return this.ga=c,a.length!==0||h?{snapshot:new ai(this.query,e.wa,s,a,e.mutatedKeys,c===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:l}:{Ma:l}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new qd,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=ge(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});const t=[];return e.forEach(r=>{this.pa.has(r)||t.push(new Ig(r))}),this.pa.forEach(r=>{e.has(r)||t.push(new Ag(r))}),t}Oa(e){this.fa=e.gs,this.pa=ge();const t=this.Sa(e.documents);return this.applyChanges(t,!0)}Na(){return ai.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const zc="SyncEngine";class ID{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class DD{constructor(e){this.key=e,this.Ba=!1}}class SD{constructor(e,t,r,i,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.La={},this.ka=new Cr(l=>$m(l),ma),this.qa=new Map,this.Qa=new Set,this.$a=new Ne(te.comparator),this.Ka=new Map,this.Ua=new Vc,this.Wa={},this.Ga=new Map,this.za=oi.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function RD(n,e,t=!0){const r=Pg(n);let i;const s=r.ka.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Na()):i=await Dg(r,e,t,!0),i}async function CD(n,e){const t=Pg(n);await Dg(t,e,!0,!1)}async function Dg(n,e,t,r){const i=await qI(n.localStore,Yt(e)),s=i.targetId,a=n.sharedClientState.addLocalQueryTarget(s,t);let l;return r&&(l=await kD(n,e,s,a==="current",i.resumeToken)),n.isPrimaryClient&&t&&_g(n.remoteStore,i),l}async function kD(n,e,t,r,i){n.Ha=(p,_,A)=>async function(k,O,q,z){let W=O.view.Sa(q);W.ls&&(W=await Hd(k.localStore,O.query,!1).then(({documents:b})=>O.view.Sa(b,W)));const H=z&&z.targetChanges.get(O.targetId),ce=z&&z.targetMismatches.get(O.targetId)!=null,he=O.view.applyChanges(W,k.isPrimaryClient,H,ce);return Qd(k,O.targetId,he.Ma),he.snapshot}(n,p,_,A);const s=await Hd(n.localStore,e,!0),a=new AD(e,s.gs),l=a.Sa(s.documents),c=Is.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),h=a.applyChanges(l,n.isPrimaryClient,c);Qd(n,t,h.Ma);const f=new ID(e,t,a);return n.ka.set(e,f),n.qa.has(t)?n.qa.get(t).push(e):n.qa.set(t,[e]),h.snapshot}async function PD(n,e,t){const r=de(n),i=r.ka.get(e),s=r.qa.get(i.targetId);if(s.length>1)return r.qa.set(i.targetId,s.filter(a=>!ma(a,e))),void r.ka.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await $l(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&xc(r.remoteStore,i.targetId),ql(r,i.targetId)}).catch(di)):(ql(r,i.targetId),await $l(r.localStore,i.targetId,!0))}async function MD(n,e){const t=de(n),r=t.ka.get(e),i=t.qa.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),xc(t.remoteStore,r.targetId))}async function VD(n,e,t){const r=HD(n);try{const i=await function(a,l){const c=de(a),h=ze.now(),f=l.reduce((A,S)=>A.add(S.key),ge());let p,_;return c.persistence.runTransaction("Locally write mutations","readwrite",A=>{let S=En(),k=ge();return c.ds.getEntries(A,f).next(O=>{S=O,S.forEach((q,z)=>{z.isValidDocument()||(k=k.add(q))})}).next(()=>c.localDocuments.getOverlayedDocuments(A,S)).next(O=>{p=O;const q=[];for(const z of l){const W=jA(z,p.get(z.key).overlayedDocument);W!=null&&q.push(new kr(z.key,W,Om(W.value.mapValue),mn.exists(!0)))}return c.mutationQueue.addMutationBatch(A,h,q,l)}).next(O=>{_=O;const q=O.applyToLocalDocumentSet(p,k);return c.documentOverlayCache.saveOverlays(A,O.batchId,q)})}).then(()=>({batchId:_.batchId,changes:qm(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,c){let h=a.Wa[a.currentUser.toKey()];h||(h=new Ne(ye)),h=h.insert(l,c),a.Wa[a.currentUser.toKey()]=h}(r,i.batchId,t),await Ss(r,i.changes),await Ta(r.remoteStore)}catch(i){const s=Bc(i,"Failed to persist write");t.reject(s)}}async function Sg(n,e){const t=de(n);try{const r=await $I(t.localStore,e);e.targetChanges.forEach((i,s)=>{const a=t.Ka.get(s);a&&(Ae(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.Ba=!0:i.modifiedDocuments.size>0?Ae(a.Ba):i.removedDocuments.size>0&&(Ae(a.Ba),a.Ba=!1))}),await Ss(t,r,e)}catch(r){await di(r)}}function Xd(n,e,t){const r=de(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.ka.forEach((s,a)=>{const l=a.view.sa(e);l.snapshot&&i.push(l.snapshot)}),function(a,l){const c=de(a);c.onlineState=l;let h=!1;c.queries.forEach((f,p)=>{for(const _ of p.ta)_.sa(l)&&(h=!0)}),h&&$c(c)}(r.eventManager,e),i.length&&r.La.p_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function ND(n,e,t){const r=de(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Ka.get(e),s=i&&i.key;if(s){let a=new Ne(te.comparator);a=a.insert(s,ut.newNoDocument(s,ue.min()));const l=ge().add(s),c=new va(ue.min(),new Map,new Ne(ye),a,l);await Sg(r,c),r.$a=r.$a.remove(s),r.Ka.delete(e),jc(r)}else await $l(r.localStore,e,!1).then(()=>ql(r,e,t)).catch(di)}async function OD(n,e){const t=de(n),r=e.batch.batchId;try{const i=await BI(t.localStore,e);Cg(t,r,null),Rg(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Ss(t,i)}catch(i){await di(i)}}async function LD(n,e,t){const r=de(n);try{const i=await function(a,l){const c=de(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let f;return c.mutationQueue.lookupMutationBatch(h,l).next(p=>(Ae(p!==null),f=p.keys(),c.mutationQueue.removeMutationBatch(h,p))).next(()=>c.mutationQueue.performConsistencyCheck(h)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(h,f,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f)).next(()=>c.localDocuments.getDocuments(h,f))})}(r.localStore,e);Cg(r,e,t),Rg(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Ss(r,i)}catch(i){await di(i)}}function Rg(n,e){(n.Ga.get(e)||[]).forEach(t=>{t.resolve()}),n.Ga.delete(e)}function Cg(n,e,t){const r=de(n);let i=r.Wa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Wa[r.currentUser.toKey()]=i}}function ql(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.qa.get(e))n.ka.delete(r),t&&n.La.Ja(r,t);n.qa.delete(e),n.isPrimaryClient&&n.Ua.Sr(e).forEach(r=>{n.Ua.containsKey(r)||kg(n,r)})}function kg(n,e){n.Qa.delete(e.path.canonicalString());const t=n.$a.get(e);t!==null&&(xc(n.remoteStore,t),n.$a=n.$a.remove(e),n.Ka.delete(t),jc(n))}function Qd(n,e,t){for(const r of t)r instanceof Ag?(n.Ua.addReference(r.key,e),xD(n,r)):r instanceof Ig?(X(zc,"Document no longer in limbo: "+r.key),n.Ua.removeReference(r.key,e),n.Ua.containsKey(r.key)||kg(n,r.key)):ae()}function xD(n,e){const t=e.key,r=t.path.canonicalString();n.$a.get(t)||n.Qa.has(r)||(X(zc,"New document in limbo: "+t),n.Qa.add(r),jc(n))}function jc(n){for(;n.Qa.size>0&&n.$a.size<n.maxConcurrentLimboResolutions;){const e=n.Qa.values().next().value;n.Qa.delete(e);const t=new te(Ve.fromString(e)),r=n.za.next();n.Ka.set(r,new DD(t)),n.$a=n.$a.insert(t,r),_g(n.remoteStore,new Fn(Yt(Rc(t.path)),r,"TargetPurposeLimboResolution",da.ae))}}async function Ss(n,e,t){const r=de(n),i=[],s=[],a=[];r.ka.isEmpty()||(r.ka.forEach((l,c)=>{a.push(r.Ha(c,e,t).then(h=>{var f;if((h||t)&&r.isPrimaryClient){const p=h?!h.fromCache:(f=t==null?void 0:t.targetChanges.get(c.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(h){i.push(h);const p=Oc.Yi(c.targetId,h);s.push(p)}}))}),await Promise.all(a),r.La.p_(i),await async function(c,h){const f=de(c);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>V.forEach(h,_=>V.forEach(_.Hi,A=>f.persistence.referenceDelegate.addReference(p,_.targetId,A)).next(()=>V.forEach(_.Ji,A=>f.persistence.referenceDelegate.removeReference(p,_.targetId,A)))))}catch(p){if(!fi(p))throw p;X(Lc,"Failed to update sequence numbers: "+p)}for(const p of h){const _=p.targetId;if(!p.fromCache){const A=f.Ts.get(_),S=A.snapshotVersion,k=A.withLastLimboFreeSnapshotVersion(S);f.Ts=f.Ts.insert(_,k)}}}(r.localStore,s))}async function FD(n,e){const t=de(n);if(!t.currentUser.isEqual(e)){X(zc,"User change. New user:",e.toKey());const r=await pg(t.localStore,e);t.currentUser=e,function(s,a){s.Ga.forEach(l=>{l.forEach(c=>{c.reject(new Q(N.CANCELLED,a))})}),s.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ss(t,r.Rs)}}function GD(n,e){const t=de(n),r=t.Ka.get(e);if(r&&r.Ba)return ge().add(r.key);{let i=ge();const s=t.qa.get(e);if(!s)return i;for(const a of s){const l=t.ka.get(a);i=i.unionWith(l.view.ba)}return i}}function Pg(n){const e=de(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Sg.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=GD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ND.bind(null,e),e.La.p_=ED.bind(null,e.eventManager),e.La.Ja=TD.bind(null,e.eventManager),e}function HD(n){const e=de(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=OD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=LD.bind(null,e),e}class $o{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=wa(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return UI(this.persistence,new FI,e.initialUser,this.serializer)}Xa(e){return new fg(Nc.ri,this.serializer)}Za(e){return new KI}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}$o.provider={build:()=>new $o};class UD extends $o{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){Ae(this.persistence.referenceDelegate instanceof Uo);const r=this.persistence.referenceDelegate.garbageCollector;return new bI(r,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?_t.withCacheSize(this.cacheSizeBytes):_t.DEFAULT;return new fg(r=>Uo.ri(r,t),this.serializer)}}class Wl{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Xd(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=FD.bind(null,this.syncEngine),await gD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new _D}()}createDatastore(e){const t=wa(e.databaseInfo.databaseId),r=function(s){return new ZI(s)}(e.databaseInfo);return function(s,a,l,c){return new rD(s,a,l,c)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,s,a,l){return new sD(r,i,s,a,l)}(this.localStore,this.datastore,e.asyncQueue,t=>Xd(this.syncEngine,t,0),function(){return $d.D()?new $d:new XI}())}createSyncEngine(e,t){return function(i,s,a,l,c,h,f){const p=new SD(i,s,a,l,c,h);return f&&(p.ja=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const s=de(i);X(Dr,"RemoteStore shutting down."),s.W_.add(5),await Ds(s),s.z_.shutdown(),s.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Wl.provider={build:()=>new Wl};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):wn("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const er="FirestoreClient";class $D{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ot.UNAUTHENTICATED,this.clientId=Im.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async a=>{X(er,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(X(er,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new wr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Bc(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function cl(n,e){n.asyncQueue.verifyOperationInProgress(),X(er,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await pg(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function Yd(n,e){n.asyncQueue.verifyOperationInProgress();const t=await zD(n);X(er,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>jd(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>jd(e.remoteStore,i)),n._onlineComponents=e}async function zD(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){X(er,"Using user provided OfflineComponentProvider");try{await cl(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===N.FAILED_PRECONDITION||i.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;ni("Error using user provided cache. Falling back to memory cache: "+t),await cl(n,new $o)}}else X(er,"Using default OfflineComponentProvider"),await cl(n,new UD(void 0));return n._offlineComponents}async function Mg(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(X(er,"Using user provided OnlineComponentProvider"),await Yd(n,n._uninitializedComponentsProvider._online)):(X(er,"Using default OnlineComponentProvider"),await Yd(n,new Wl))),n._onlineComponents}function jD(n){return Mg(n).then(e=>e.syncEngine)}async function Jd(n){const e=await Mg(n),t=e.eventManager;return t.onListen=RD.bind(null,e.syncEngine),t.onUnlisten=PD.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=CD.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=MD.bind(null,e.syncEngine),t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vg(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zd=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ng(n,e,t){if(!t)throw new Q(N.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function qD(n,e,t,r){if(e===!0&&r===!0)throw new Q(N.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function ef(n){if(!te.isDocumentKey(n))throw new Q(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function tf(n){if(te.isDocumentKey(n))throw new Q(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ba(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ae()}function Yi(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Q(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ba(n);throw new Q(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Og="firestore.googleapis.com",nf=!0;class rf{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Q(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Og,this.ssl=nf}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:nf;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=dg;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<EI)throw new Q(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}qD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Vg((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Q(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Q(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Q(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Aa{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new rf({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Q(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Q(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new rf(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Yb;switch(r.type){case"firstParty":return new tA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Q(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=Zd.get(t);r&&(X("ComponentProvider","Removing Datastore"),Zd.delete(t),r.terminate())}(this),Promise.resolve()}}function WD(n,e,t,r={}){var i;const s=(n=Yi(n,Aa))._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),l=`${e}:${t}`;s.host!==Og&&s.host!==l&&ni("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},s),{host:l,ssl:!1,emulatorOptions:r});if(!Tr(c,a)&&(n._setSettings(c),r.mockUserToken)){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=ot.MOCK_USER;else{h=D0(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new Q(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new ot(p)}n._authCredentials=new Jb(new Am(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Mr(this.firestore,e,this._query)}}class St{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new jn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new St(this.firestore,e,this._key)}}class jn extends Mr{constructor(e,t,r){super(e,t,Rc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new St(this.firestore,null,new te(e))}withConverter(e){return new jn(this.firestore,e,this._path)}}function zo(n,e,...t){if(n=Rt(n),Ng("collection","path",e),n instanceof Aa){const r=Ve.fromString(e,...t);return tf(r),new jn(n,null,r)}{if(!(n instanceof St||n instanceof jn))throw new Q(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ve.fromString(e,...t));return tf(r),new jn(n.firestore,null,r)}}function qc(n,e,...t){if(n=Rt(n),arguments.length===1&&(e=Im.newId()),Ng("doc","path",e),n instanceof Aa){const r=Ve.fromString(e,...t);return ef(r),new St(n,null,new te(r))}{if(!(n instanceof St||n instanceof jn))throw new Q(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ve.fromString(e,...t));return ef(r),new St(n.firestore,n instanceof jn?n.converter:null,new te(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sf="AsyncQueue";class of{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new gg(this,"async_queue_retry"),this.bu=()=>{const r=ll();r&&X(sf,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.Su=e;const t=ll();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.bu)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=ll();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.bu)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new wr;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!fi(e))throw e;X(sf,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.Su.then(()=>(this.pu=!0,e().catch(r=>{this.gu=r,this.pu=!1;const i=function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),l}(r);throw wn("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.pu=!1,r))));return this.Su=t,t}enqueueAfterDelay(e,t,r){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const i=Uc.createAndSchedule(this,e,t,r,s=>this.Fu(s));return this.fu.push(i),i}Du(){this.gu&&ae()}verifyOperationInProgress(){}async Mu(){let e;do e=this.Su,await e;while(e!==this.Su)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}function af(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}class jo extends Aa{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new of,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new of(e),this._firestoreClient=void 0,await e}}}function KD(n,e){const t=typeof n=="object"?n:Lp(),r=typeof n=="string"?n:Lo,i=fc(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=A0("firestore");s&&WD(i,...s)}return i}function Lg(n){if(n._terminated)throw new Q(N.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||XD(n),n._firestoreClient}function XD(n){var e,t,r;const i=n._freezeSettings(),s=function(l,c,h,f){return new mA(l,c,h,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,Vg(f.experimentalLongPollingOptions),f.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new $D(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(e){this._byteString=e}static fromBase64String(e){try{return new li(et.fromBase64String(e))}catch(t){throw new Q(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new li(et.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Q(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Je(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Q(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Q(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ye(this._lat,e._lat)||ye(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QD=/^__.*__$/;class YD{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new kr(e,this.data,this.fieldMask,t,this.fieldTransforms):new As(e,this.data,t,this.fieldTransforms)}}function xg(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ae()}}class Yc{constructor(e,t,r,i,s,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Bu(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new Yc(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ku({path:r,Qu:!1});return i.$u(e),i}Ku(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ku({path:r,Qu:!1});return i.Bu(),i}Uu(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return qo(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(xg(this.Lu)&&QD.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class JD{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||wa(e)}ju(e,t,r,i=!1){return new Yc({Lu:e,methodName:t,zu:r,path:Je.emptyPath(),Qu:!1,Gu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Fg(n){const e=n._freezeSettings(),t=wa(n._databaseId);return new JD(n._databaseId,!!e.ignoreUndefinedProperties,t)}function ZD(n,e,t,r,i,s={}){const a=n.ju(s.merge||s.mergeFields?2:0,e,t,i);Ug("Data must be an object, but it was:",a,r);const l=Gg(r,a);let c,h;if(s.merge)c=new Ft(a.fieldMask),h=a.fieldTransforms;else if(s.mergeFields){const f=[];for(const p of s.mergeFields){const _=t1(e,p,t);if(!a.contains(_))throw new Q(N.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);r1(f,_)||f.push(_)}c=new Ft(f),h=a.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,h=a.fieldTransforms;return new YD(new Mt(l),c,h)}class Jc extends Kc{_toFieldTransform(e){return new UA(e.path,new ds)}isEqual(e){return e instanceof Jc}}function e1(n,e,t,r=!1){return Zc(t,n.ju(r?4:3,e))}function Zc(n,e){if(Hg(n=Rt(n)))return Ug("Unsupported field value:",e,n),Gg(n,e);if(n instanceof Kc)return function(r,i){if(!xg(i.Lu))throw i.Wu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Wu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(r,i){const s=[];let a=0;for(const l of r){let c=Zc(l,i.Uu(a));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),a++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=Rt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return FA(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=ze.fromDate(r);return{timestampValue:Ho(i.serializer,s)}}if(r instanceof ze){const s=new ze(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ho(i.serializer,s)}}if(r instanceof Xc)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof li)return{bytesValue:sg(i.serializer,r._byteString)};if(r instanceof St){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Wu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Mc(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Qc)return function(a,l){return{mapValue:{fields:{[Vm]:{stringValue:Nm},[xo]:{arrayValue:{values:a.toArray().map(h=>{if(typeof h!="number")throw l.Wu("VectorValues must only contain numeric values.");return Cc(l.serializer,h)})}}}}}}(r,i);throw i.Wu(`Unsupported field value: ${ba(r)}`)}(n,e)}function Gg(n,e){const t={};return Sm(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Rr(n,(r,i)=>{const s=Zc(i,e.qu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function Hg(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ze||n instanceof Xc||n instanceof li||n instanceof St||n instanceof Kc||n instanceof Qc)}function Ug(n,e,t){if(!Hg(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const r=ba(t);throw r==="an object"?e.Wu(n+" a custom object"):e.Wu(n+" "+r)}}function t1(n,e,t){if((e=Rt(e))instanceof Wc)return e._internalPath;if(typeof e=="string")return Bg(n,e);throw qo("Field path arguments must be of type string or ",n,!1,void 0,t)}const n1=new RegExp("[~\\*/\\[\\]]");function Bg(n,e,t){if(e.search(n1)>=0)throw qo(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Wc(...e.split("."))._internalPath}catch{throw qo(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function qo(n,e,t,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let l=`Function ${e}() called with invalid data`;t&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(s||a)&&(c+=" (found",s&&(c+=` in field ${r}`),a&&(c+=` in document ${i}`),c+=")"),new Q(N.INVALID_ARGUMENT,l+n+c)}function r1(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new St(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new i1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(eu("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class i1 extends $g{data(){return super.data()}}function eu(n,e){return typeof e=="string"?Bg(n,e):e instanceof Wc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s1(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Q(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class tu{}class zg extends tu{}function lf(n,e,...t){let r=[];e instanceof tu&&r.push(e),r=r.concat(t),function(s){const a=s.filter(c=>c instanceof ru).length,l=s.filter(c=>c instanceof nu).length;if(a>1||a>0&&l>0)throw new Q(N.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class nu extends zg{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new nu(e,t,r)}_apply(e){const t=this._parse(e);return jg(e._query,t),new Mr(e.firestore,e.converter,xl(e._query,t))}_parse(e){const t=Fg(e.firestore);return function(s,a,l,c,h,f,p){let _;if(h.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new Q(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){hf(p,f);const S=[];for(const k of p)S.push(uf(c,s,k));_={arrayValue:{values:S}}}else _=uf(c,s,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||hf(p,f),_=e1(l,a,p,f==="in"||f==="not-in");return He.create(h,f,_)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class ru extends tu{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ru(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Ut.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let a=i;const l=s.getFlattenedFilters();for(const c of l)jg(a,c),a=xl(a,c)}(e._query,t),new Mr(e.firestore,e.converter,xl(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class iu extends zg{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new iu(e,t)}_apply(e){const t=function(i,s,a){if(i.startAt!==null)throw new Q(N.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Q(N.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new hs(s,a)}(e._query,this._field,this._direction);return new Mr(e.firestore,e.converter,function(i,s){const a=i.explicitOrderBy.concat([s]);return new pi(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function cf(n,e="asc"){const t=e,r=eu("orderBy",n);return iu._create(r,t)}function uf(n,e,t){if(typeof(t=Rt(t))=="string"){if(t==="")throw new Q(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Bm(e)&&t.indexOf("/")!==-1)throw new Q(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Ve.fromString(t));if(!te.isDocumentKey(r))throw new Q(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ed(n,new te(r))}if(t instanceof St)return Ed(n,t._key);throw new Q(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ba(t)}.`)}function hf(n,e){if(!Array.isArray(n)||n.length===0)throw new Q(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function jg(n,e){const t=function(i,s){for(const a of i)for(const l of a.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new Q(N.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Q(N.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class o1{convertValue(e,t="none"){switch(Jn(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Yn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ae()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Rr(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;const s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[xo].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>xe(a.doubleValue));return new Qc(s)}convertGeoPoint(e){return new Xc(xe(e.latitude),xe(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=pa(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ls(e));default:return null}}convertTimestamp(e){const t=Qn(e);return new ze(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Ve.fromString(e);Ae(hg(r));const i=new cs(r.get(1),r.get(3)),s=new te(r.popFirst(5));return i.isEqual(t)||wn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a1(n,e,t){let r;return r=n?n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class qg extends $g{constructor(e,t,r,i,s,a){super(e,t,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new go(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(eu("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class go extends qg{data(e={}){return super.data(e)}}class l1{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Fi(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new go(this._firestore,this._userDataWriter,r.key,r,new Fi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Q(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(l=>{const c=new go(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Fi(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const c=new go(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Fi(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,f=-1;return l.type!==0&&(h=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),f=a.indexOf(l.doc.key)),{type:c1(l.type),doc:c,oldIndex:h,newIndex:f}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function c1(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ae()}}class Wg extends o1{constructor(e){super(),this.firestore=e}convertBytes(e){return new li(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new St(this.firestore,null,t)}}function Kg(n,e){const t=Yi(n.firestore,jo),r=qc(n),i=a1(n.converter,e);return u1(t,[ZD(Fg(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,mn.exists(!1))]).then(()=>r)}function df(n,...e){var t,r,i;n=Rt(n);let s={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||af(e[a])||(s=e[a],a++);const l={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(af(e[a])){const p=e[a];e[a]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[a+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[a+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let c,h,f;if(n instanceof St)h=Yi(n.firestore,jo),f=Rc(n._key.path),c={next:p=>{e[a]&&e[a](h1(h,n,p))},error:e[a+1],complete:e[a+2]};else{const p=Yi(n,Mr);h=Yi(p.firestore,jo),f=p._query;const _=new Wg(h);c={next:A=>{e[a]&&e[a](new l1(h,_,p,A))},error:e[a+1],complete:e[a+2]},s1(n._query)}return function(_,A,S,k){const O=new BD(k),q=new bD(A,O,S);return _.asyncQueue.enqueueAndForget(async()=>vD(await Jd(_),q)),()=>{O.su(),_.asyncQueue.enqueueAndForget(async()=>wD(await Jd(_),q))}}(Lg(h),f,l,c)}function u1(n,e){return function(r,i){const s=new wr;return r.asyncQueue.enqueueAndForget(async()=>VD(await jD(r),i,s)),s.promise}(Lg(n),e)}function h1(n,e,t){const r=t.docs.get(e._key),i=new Wg(n);return new qg(n,i,e._key,r,new Fi(t.hasPendingWrites,t.fromCache),e.converter)}function Xg(){return new Jc("serverTimestamp")}(function(e,t=!0){(function(i){hi=i})(ci),ti(new br("firestore",(r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),l=new jo(new Zb(r.getProvider("auth-internal")),new nA(a,r.getProvider("app-check-internal")),function(h,f){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Q(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new cs(h.options.projectId,f)}(a,i),a);return s=Object.assign({useFetchStreams:t},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Bn(ud,hd,e),Bn(ud,hd,"esm2017")})();const d1={apiKey:"AIzaSyDgCFw0pkkKukL8pNtF1i8Zs6KW1llwhSQ",authDomain:"eabox-feedback.firebaseapp.com",projectId:"eabox-feedback",storageBucket:"eabox-feedback.firebasestorage.app",messagingSenderId:"950431793460",appId:"1:950431793460:web:7edd82992abd61fce52561",measurementId:"G-K64TH5TNF4"},Qg=Op(d1),Wo=KD(Qg),su=Xb(Qg),f1=async()=>{try{await VT(su),console.log("匿名登入成功！")}catch(n){console.error("匿名登入失敗：",n.message)}},p1=async n=>{if(!n.trim())return console.error("留言内容无效");const e=su.currentUser;e&&await Kg(zo(Wo,"messages"),{text:n.trim(),timestamp:Xg(),user:{uid:e.uid,name:"匿名用戶"}})},m1=n=>{const e=lf(zo(Wo,"messages"),cf("timestamp","asc"));df(e,async t=>{let r=t.docs.map(i=>({id:i.id,...i.data(),replies:[]}));for(const i of r){const s=lf(zo(qc(Wo,"messages",i.id),"replies"),cf("timestamp","asc"));df(s,a=>{i.replies=a.docs.map(l=>({id:l.id,...l.data()})),n([...r])})}n(r)},t=>{console.error("加载留言失败：",t),n([])})},g1=async(n,e)=>{if(!e.trim())return console.error("回复内容无效");const t=su.currentUser;t&&await Kg(zo(qc(Wo,"messages",n),"replies"),{text:e.trim(),timestamp:Xg(),user:{uid:t.uid,name:"匿名用戶"}})},y1={class:"container"},_1={id:"app"},v1={id:"message-form"},w1={id:"messages"},E1=["onClick"],T1={key:0},b1=["onUpdate:modelValue"],A1=["onClick"],I1={key:1,class:"replies"},D1={__name:"Feedback",setup(n){const e=oe(""),t=oe([]),r=oe({});qn(async()=>{await f1(),m1(l=>{t.value=l})});const i=async()=>{e.value.trim()?(await p1(e.value),e.value=""):console.error("留言内容无效")},s=l=>{const c=t.value.findIndex(h=>h.id===l);c!==-1&&(t.value[c]={...t.value[c],showReply:!t.value[c].showReply},r.value[l]||(r.value[l]=""))},a=async l=>{var c;(c=r.value[l])!=null&&c.trim()?(await g1(l,r.value[l]),r.value[l]=""):console.error("回复内容无效")};return(l,c)=>(Y(),ee("div",y1,[C("div",_1,[c[2]||(c[2]=C("h1",null,"匿名留言板",-1)),C("div",v1,[ct(C("textarea",{"onUpdate:modelValue":c[0]||(c[0]=h=>e.value=h),placeholder:"輸入留言"},null,512),[[Kt,e.value]]),C("button",{onClick:i},"發送")]),C("div",w1,[(Y(!0),ee(Pe,null,Et(t.value,h=>(Y(),ee("div",{key:h.id,class:"message"},[C("strong",null,Ue(h.user.name),1),C("p",null,Ue(h.text),1),C("button",{onClick:f=>s(h.id)},"回复",8,E1),h.showReply?(Y(),ee("div",T1,[ct(C("textarea",{"onUpdate:modelValue":f=>r.value[h.id]=f,placeholder:"輸入回复"},null,8,b1),[[Kt,r.value[h.id]]]),C("button",{onClick:f=>a(h.id)},"发送回复",8,A1)])):Dt("",!0),h.replies.length?(Y(),ee("div",I1,[c[1]||(c[1]=C("h4",null,"回复：",-1)),(Y(!0),ee(Pe,null,Et(h.replies,f=>(Y(),ee("div",{key:f.id},[C("strong",null,Ue(f.user.name),1),C("p",null,Ue(f.text),1)]))),128))])):Dt("",!0)]))),128))])])]))}},S1=bn(D1,[["__scopeId","data-v-a9983d45"]]),R1={class:"image-grid"},C1=["src"],k1={class:"image-grid"},P1=["src","alt"],M1={__name:"EquipImageSearch",setup(n){const e=oe(""),t=oe([]),r=oe(["http://static.eredan.com/images/print/0e700fca41e768b1092a61370e58b823.png","http://static.eredan.com/images/print/2dc4fd25330f0b4290a869a6b06e8fbd.png","https://images-ext-2.discordapp.net/external/lbVY7VAMB9v-eLX3yVZ5KAwsneETchYwt7GeZOu8Nfw/http/static.eredan.com/images/web_big/037727064d89b993dd6e70a473fcebaf.png","http://static.eredan.com/images/print/5d09cf7da1d1356342da54478f260825.jpg","http://static.eredan.com/images/print/517ae72f6f1dedfad3ad7f83eecb5e9c.png"]),i=()=>{console.log(e.value);const a={id:e.value,url:"https://www.eredan-arena.com/images/HD/items/"+e.value+".png"};t.value.push(a),e.value++},s=()=>{t.value=[]};return(a,l)=>(Y(),ee(Pe,null,[l[1]||(l[1]=C("p",null,"Equip image search",-1)),C("div",R1,[(Y(!0),ee(Pe,null,Et(r.value,c=>(Y(),ee("div",{key:a.index,class:"image-container"},[C("img",{src:c,class:"image"},null,8,C1)]))),128))]),ct(C("input",{type:"text","onUpdate:modelValue":l[0]||(l[0]=c=>e.value=c)},null,512),[[Kt,e.value]]),C("button",{onClick:i},"add"),C("button",{onClick:s},"cls"),C("div",k1,[(Y(!0),ee(Pe,null,Et(t.value,(c,h)=>(Y(),ee("div",{key:h,class:"image-container"},[C("p",null,Ue(c.id),1),C("img",{src:c.url,alt:c.alt,class:"image"},null,8,P1)]))),128))])],64))}},V1=bn(M1,[["__scopeId","data-v-1fb7e061"]]),N1={class:"min-h-screen flex flex-col"},O1={class:"container_home"},L1={class:"logo"},x1=["onClick"],F1={__name:"Home",setup(n){const e=oe(""),t=()=>{e.value=window.location.hash.replace("#","")};qn(()=>{t(),window.addEventListener("hashchange",t)}),$i(()=>{window.removeEventListener("hashchange",t)});const r=oe(!0),i=oe(0),s=oe(!1),a=oe(!1),l=oe(0),c=oe(null),h={intro:ln(tw),CardFilter:ln(dw),SkillShow:ln(kw),EquipShow:ln(Xw),AddData:ln(a0),AddCard:ln(m0),Feedback:ln(S1),EquipImageSearch:ln(V1)},f=oe(h.intro),p=oe([]),_=()=>{e.value==="123"?p.value=[{vue:"AddData",name:"AddData"},{vue:"AddCard",name:"AddCard"},{vue:"EquipImageSearch",name:"EquipImg"}]:p.value=[{vue:"CardFilter",name:"Card"},{vue:"SkillShow",name:"Skill"},{vue:"EquipShow",name:"Equip"},{vue:"Feedback",name:"Feedback"}]};ro(e,_),_();const A=z=>{f.value=h[z],s.value=!1};let S;const k=()=>{const z=window.scrollY;clearTimeout(S),S=setTimeout(()=>{z>i.value&&z>100?r.value=!1:r.value=!0,a.value=z>200,i.value=z},100)},O=()=>{window.scrollTo({top:0,behavior:"smooth"})},q=()=>{s.value=!s.value};return qn(()=>{const z=new ResizeObserver(W=>{for(let H of W)l.value=H.contentRect.height});c.value&&z.observe(c.value),$i(()=>{z.disconnect()}),window.addEventListener("scroll",k)}),$i(()=>{window.removeEventListener("scroll",k)}),(z,W)=>(Y(),ee("div",N1,[C("nav",{ref_key:"navbarRef",ref:c,class:gn(["navbar",{"navbar-hidden":!r.value}])},[C("div",O1,[C("div",L1,[C("a",{href:"#",onClick:W[0]||(W[0]=Vh(H=>A("intro"),["prevent"]))},W[1]||(W[1]=[C("img",{src:Yv},null,-1)]))]),C("button",{class:"menu-toggle",onClick:q},"☰"),C("ul",{class:gn({"nav-links":!0,"show-menu":s.value})},[(Y(!0),ee(Pe,null,Et(p.value,H=>(Y(),ee("li",{key:H["1st"]},[C("a",{href:"#",onClick:Vh(ce=>A(H.vue),["prevent"])},Ue(H.name),9,x1)]))),128))],2)])],2),yt(Av,{name:"fade"},{default:ac(()=>[ct(C("button",{onClick:O,class:"back-to-top"}," ⬆ ",512),[[Tl,a.value]])]),_:1}),C("main",{class:"main",style:gs({paddingTop:`${l.value+32}px`})},[(Y(),cc(S_(f.value)))],4),W[2]||(W[2]=C("footer",{class:"footer"}," Copyright © 2025 Eredan-Arena-Box. ",-1))]))}},G1=bn(F1,[["__scopeId","data-v-bbfe882c"]]),H1={__name:"App",setup(n){return(e,t)=>(Y(),cc(G1))}};Kv(H1).mount("#app");
